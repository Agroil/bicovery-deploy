(this["webpackJsonpbicovery-deploy"]=this["webpackJsonpbicovery-deploy"]||[]).push([[8],{106:function(e,a,t){"use strict";var r=t(5),n=t.n(r),l=t(113);a.a=Object(l.d)((function(e){return n.a.createElement(l.a,e)}),{withRef:!1})},107:function(e,a,t){"use strict";t.d(a,"a",(function(){return o})),t.d(a,"b",(function(){return s}));var r=t(5),n=t.n(r),l=t(196),o=function(e){return n.a.createElement(l.a,Object.assign({},e,{widths:["xxs","xs","sm","md","lg","xl","xxl"]}))},s=function(e){return n.a.createElement("div",{className:"separator ".concat(e.className)})}},525:function(e,a,t){"use strict";t.r(a);var r=t(41),n=t(101),l=t(102),o=t(105),s=t(103),c=t(104),i=t(5),d=t.n(i),m=t(197),u=t(198),p=t(199),f=t(509),b=t(510),h=t(155),v=t(133),_=t(109),E=t(30),g=t(1),w=t(106),N=t(107),y=t(131),x=t.n(y),k=t(439),C=t.n(k),O=(t(437),t(438)),P=t.n(O),j=t(535),S=function(e){function a(e){var t;Object(n.a)(this,a),(t=Object(o.a)(this,Object(s.a)(a).call(this,e))).onCreateProfile=function(e){if(!t.props.loading){var a=e.avatar,r=e.password,n=e.first_name,l=e.last_name,o=e.gender,s=e.birth_date,c=e.phone_number;c="+".concat(c.replace(/\D/g,"")),t.props.updateProfile({password:r,gender:o,birth_date:s instanceof Date?s.toISOString().replace(/T.+Z/,""):"",last_name:l,first_name:n,avatar:a,phone_number:c,is_new:!1},t.props.history)}},t.validateEmail=function(e){var a;return e?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||(a="Invalid email address"):a="Please enter your email address",a},t.validateFirstName=function(e){var a;return e?e.length>30&&(a="First name must not be longer than 30 characters"):a="Please enter your first name",a},t.validatePassword=function(e){var a;return e?e.length<9&&(a="Password should have at least 8 characters"):a="Please enter your password",a},t.validateMatchPasswords=function(e){var a;return e.match_password!==e.password&&(a="Passwords should match"),a},t.doLogout=function(e){e&&e.preventDefault(),t.props.logoutUser(t.props.history)},t.onClose=function(e){t.setState({avatar:e,open_avatar_loader:!1})},t.onCrop=function(e){(function(e,a){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]),l=n.length,o=new Uint8Array(l);l--;)o[l]=n.charCodeAt(l);return new File([o],"".concat(a).concat(r.replace(/^.+\//,".")),{type:r})})(e,"avatar")&&t.setState({avatar:""})},t.onBeforeFileLoad=function(e){e.target.files[0].size>2e7&&(e.target.value="")},t.openAvatarLoader=function(e){t.setState({open_avatar_loader:!0}),window.setTimeout((function(){var e=document.querySelector('label[for^="avatar_loader"]');e&&e.click()}),0)};var r=t.props,l=r.id,c=void 0===l?"":l,i=r.avatar,d=void 0===i?"":i,m=r.first_name,u=void 0===m?"":m,p=r.last_name,f=void 0===p?"":p,b=r.birth_date,h=void 0===b?"":b,v=r.gender,_=void 0===v?"":v,E=r.phone_number,g=void 0===E?"":E;return t.state={id:c,avatar:d,first_name:u,last_name:f,birth_date:h,gender:_,phone_number:g,password:"",match_password:"",preview:"",open_avatar_loader:!1},t}return Object(c.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.getProfile()}},{key:"render",value:function(){var e=this,a=["+",/\d/,/\d/,/\d/," ","(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/," ",/\d/,/\d/," ",/\d/,/\d/],t=this.state,r=t.avatar,n=t.first_name,l=t.last_name,o=t.birth_date,s=t.gender,c=t.phone_number,E=t.password,g=t.match_password,k=t.preview,O=t.open_avatar_loader,S={avatar:r,first_name:n,last_name:l,birth_date:o,gender:s,phone_number:Object(y.conformToMask)(c,a,{guide:!1}).conformedValue,password:E,match_password:g,preview:k,open_avatar_loader:O};return d.a.createElement(m.a,{className:"h-100"},d.a.createElement(N.a,{xxs:"12",xs:"12",sm:"12",md:"10",lg:"8",xl:"8",xxl:"6",className:"mx-auto my-auto"},d.a.createElement(u.a,{className:"auth-card text-center"},d.a.createElement("div",{className:"form-side"},d.a.createElement(_.b,{to:"/",className:"white"},d.a.createElement("span",{className:"logo-single"})),d.a.createElement(p.a,{className:"mb-4"},d.a.createElement(w.a,{id:"user.create-profile"})),d.a.createElement(v.c,{enableReinitialize:!0,initialValues:S,onSubmit:this.onCreateProfile},(function(t){var r=t.values,o=t.errors,s=t.touched,c=t.handleChange,m=t.handleBlur,u=t.handleSelect,p=t.setFieldValue;return d.a.createElement(v.b,{className:"av-tooltip tooltip-label-bottom"},d.a.createElement(f.a,{className:"form-group has-float-label",style:{height:"200px"}},d.a.createElement(v.a,{name:"avatar"},(function(a){var t=a.field;return d.a.createElement(i.Fragment,null,d.a.createElement(j.a,{alt:"".concat(n," ").concat(l),src:k,style:{cursor:"pointer",width:"200px",height:"200px",position:O?"fixed":"static",left:O?"-9999px":"0"},className:"mx-auto my-auto",onClick:e.openAvatarLoader}),d.a.createElement("div",{style:{position:O?"static":"fixed",left:O?"0":"-9999px"}},d.a.createElement(P.a,Object.assign({},t,{width:"100%",height:200,onCrop:e.onCrop,onClose:e.onClose,onBeforeFileLoad:e.onBeforeFileLoad,onFileLoad:e.onAvatarLoad,src:k,borderStyle:{borderWidth:"0px",borderStyle:"solid",borderColor:"#d7d7d7"},labelStyle:{textIndent:"-26px",width:"100%"},label:"Please select avatar"}))))}))),d.a.createElement(f.a,{className:"form-group has-float-label"},d.a.createElement(b.a,null,d.a.createElement(w.a,{id:"user.first-name"})),d.a.createElement(v.a,{className:"form-control",name:"first_name",type:"text",validate:e.validateFirstName}),o.first_name&&s.first_name&&d.a.createElement("div",{className:"invalid-feedback d-block"},o.first_name)),d.a.createElement(f.a,{className:"form-group has-float-label"},d.a.createElement(b.a,null,d.a.createElement(w.a,{id:"user.last-name"})),d.a.createElement(v.a,{className:"form-control",type:"text",name:"last_name"}),o.last_name&&s.last_name&&d.a.createElement("div",{className:"invalid-feedback d-block"},o.last_name)),d.a.createElement(f.a,{className:"form-group has-float-label"},d.a.createElement(b.a,null,d.a.createElement(w.a,{id:"user.birth-date"})),d.a.createElement(v.a,{name:"birth_date",autocomplete:"off"},(function(e){var a=e.field;return d.a.createElement(C.a,Object.assign({},a,{className:"form-control",selected:r.birth_date,onBlur:m,onSelect:u,onChange:function(e){return p("birth_date",e)},dateFormat:"MM/dd/yyyy"}))})),o.birth_date&&s.birth_date&&d.a.createElement("div",{className:"invalid-feedback d-block"},o.birth_date)),d.a.createElement(f.a,{className:"form-group has-float-label"},d.a.createElement(b.a,null,d.a.createElement(w.a,{id:"user.gender"})),d.a.createElement(v.a,{name:"gender"},(function(e){var a=e.field;return d.a.createElement("select",Object.assign({},a,{className:"form-control",onChange:c,onBlur:m,style:{height:"45px",textIndent:"5px"}}),d.a.createElement("option",{value:"",label:"Select a geneder"}),d.a.createElement("option",{value:"MALE",label:"Male"}),d.a.createElement("option",{value:"FEMALE",label:"Female"}),d.a.createElement("option",{value:"",label:"Other"}))})),o.gender&&s.gender&&d.a.createElement("div",{className:"invalid-feedback d-block"},o.gender)),d.a.createElement(f.a,{className:"form-group has-float-label"},d.a.createElement(b.a,null,d.a.createElement(w.a,{id:"user.phone-number"})),d.a.createElement(v.a,{name:"phone_number"},(function(e){var t=e.field;return d.a.createElement(x.a,Object.assign({},t,{className:"form-control",id:"phone_number",placeholder:"+000 (00) 000 00 00",type:"text",mask:a,onChange:c,onBlur:m,disabled:!0}))})),o.phone_number&&s.phone_number&&d.a.createElement("div",{className:"invalid-feedback d-block"},o.phone_number)),d.a.createElement(f.a,{className:"form-group has-float-label"},d.a.createElement(b.a,null,d.a.createElement(w.a,{id:"user.password"})),e.props.password,d.a.createElement(v.a,{className:"form-control",type:"password",name:"password",validate:e.validatePassword}),o.password&&s.password&&d.a.createElement("div",{className:"invalid-feedback d-block"},o.password)),d.a.createElement(f.a,{className:"form-group has-float-label"},d.a.createElement(b.a,null,d.a.createElement(w.a,{id:"user.re-password"})),e.props.match_password,d.a.createElement(v.a,{className:"form-control",type:"password",name:"match_password",validate:e.validateMatchPasswords.bind(e,r)}),o.match_password&&s.match_password&&d.a.createElement("div",{className:"invalid-feedback d-block"},o.match_password)),d.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},d.a.createElement("a",{href:"/",onClick:e.doLogout,className:"btn p-0"},d.a.createElement(w.a,{id:"user.logout"})),d.a.createElement(h.a,{color:"primary",className:"btn-shadow btn-multiple-state ".concat(e.props.loading?"show-spinner":""),size:"lg",type:"submit",disabled:e.props.loading||!(r.password&&r.match_password&&r.first_name&&r.phone_number)},d.a.createElement("span",{className:"spinner d-inline-block"},d.a.createElement("span",{className:"bounce1"}),d.a.createElement("span",{className:"bounce2"}),d.a.createElement("span",{className:"bounce3"})),d.a.createElement("span",{className:"label"},d.a.createElement(w.a,{id:"user.create-profile"})))))}))))))}}],[{key:"getDerivedStateFromProps",value:function(e,a){for(var t={id:e.id,avatar:e.avatar,first_name:e.first_name,last_name:e.last_name,birth_date:e.birth_date,gender:e.gender,phone_number:e.phone_number},n=!1,l=0,o=Object.entries(a);l<o.length;l++){var s=o[l],c=Object(r.a)(s,2),i=c[0],d=c[1];t[i]!==d&&(t[i]=e[i]||d,n=!0)}return console.info("dataBuffer: ",t),n?t:null}}]),a}(i.Component);a.default=Object(E.b)((function(e){var a=e.authUser,t=a.user,r=a.loading,n=a.error,l=a.activeVerificationCode,o=a.profile,s=o.phone_number,c=o.first_name,i=o.last_name,d=o.birth_date,m=o.gender,u=o.id;return{user:t,loading:r,error:n,activeVerificationCode:l,phone_number:s,first_name:c,last_name:i,birth_date:new Date(d||null),gender:m,id:u}}),{getProfile:g.Q,updateProfile:g.X,logoutUser:g.S})(S)}}]);
//# sourceMappingURL=user-create-profile.f686b549.chunk.js.map