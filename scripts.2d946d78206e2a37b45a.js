function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var n=[],r=e.document,i=Object.getPrototypeOf,o=n.slice,a=n.concat,s=n.push,u=n.indexOf,l={},c=l.toString,f=l.hasOwnProperty,d=f.toString,h=d.call(Object),p={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},v=function(e){return null!=e&&e===e.window},m={type:!0,src:!0,noModule:!0};function y(e,t,n){var i,o=(t=t||r).createElement("script");if(o.text=e,n)for(i in m)n[i]&&(o[i]=n[i]);t.head.appendChild(o).parentNode.removeChild(o)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var x=function(e,t){return new x.fn.init(e,t)},w=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function A(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!g(e)&&!v(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}x.fn=x.prototype={jquery:"3.3.1",constructor:x,length:0,toArray:function(){return o.call(this)},get:function(e){return null==e?o.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return x.each(this,e)},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},x.extend=x.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(x.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&x.isPlainObject(n)?n:{},a[t]=x.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},x.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e)||(t=i(e))&&("function"!=typeof(n=f.call(t,"constructor")&&t.constructor)||d.call(n)!==h))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){y(e)},each:function(e,t){var n,r=0;if(A(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(w,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(A(Object(e))?x.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(A(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return a.apply([],s)},guid:1,support:p}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=n[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});var E=function(e){var t,n,r,i,o,a,s,u,l,c,f,d,h,p,g,v,m,y,b,x="sizzle"+1*new Date,w=e.document,A=0,E=0,M=ae(),C=ae(),k=ae(),T=function(e,t){return e===t&&(f=!0),0},_={}.hasOwnProperty,S=[],I=S.pop,R=S.push,L=S.push,O=S.slice,N=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",D="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",V="\\["+D+"*("+B+")(?:"+D+"*([*^$|!~]?=)"+D+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+D+"*\\]",z=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",F=new RegExp(D+"+","g"),G=new RegExp("^"+D+"+|((?:^|[^\\\\])(?:\\\\.)*)"+D+"+$","g"),H=new RegExp("^"+D+"*,"+D+"*"),W=new RegExp("^"+D+"*([>+~]|"+D+")"+D+"*"),Z=new RegExp("="+D+"*([^\\]'\"]*?)"+D+"*\\]","g"),Y=new RegExp(z),j=new RegExp("^"+B+"$"),U={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+D+"*(even|odd|(([+-]|)(\\d*)n|)"+D+"*(?:([+-]|)"+D+"*(\\d+)|))"+D+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+D+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+D+"*((?:-\\d)?\\d*)"+D+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,q=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,$=new RegExp("\\\\([\\da-f]{1,6}"+D+"?|("+D+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){d()},ie=ye(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{L.apply(S=O.call(w.childNodes),w.childNodes)}catch(e){L={apply:S.length?function(e,t){R.apply(e,O.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,f,p,m,y=t&&t.ownerDocument,A=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==A&&9!==A&&11!==A)return r;if(!i&&((t?t.ownerDocument||t:w)!==h&&d(t),t=t||h,g)){if(11!==A&&(f=K.exec(e)))if(o=f[1]){if(9===A){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(y&&(l=y.getElementById(o))&&b(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return L.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return L.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!k[e+" "]&&(!v||!v.test(e))){if(1!==A)y=t,m=e;else if("object"!==t.nodeName.toLowerCase()){for((c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=x),s=(p=a(e)).length;s--;)p[s]="#"+c+" "+me(p[s]);m=p.join(","),y=J.test(e)&&ge(t.parentNode)||t}if(m)try{return L.apply(r,y.querySelectorAll(m)),r}catch(e){}finally{c===x&&t.removeAttribute("id")}}}return u(e.replace(G,"$1"),t,r,i)}function ae(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function se(e){return e[x]=!0,e}function ue(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pe(e){return se(function(t){return t=+t,se(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},d=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==h&&9===a.nodeType&&a.documentElement?(p=(h=a).documentElement,g=!o(h),w!==h&&(i=h.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(h.getElementsByClassName),n.getById=ue(function(e){return p.appendChild(e).id=x,!h.getElementsByName||!h.getElementsByName(x).length}),n.getById?(r.filter.ID=function(e){var t=e.replace($,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace($,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},m=[],v=[],(n.qsa=Q.test(h.querySelectorAll))&&(ue(function(e){p.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+D+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+D+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+x+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||v.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+D+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(n.matchesSelector=Q.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),m.push("!=",z)}),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),t=Q.test(p.compareDocumentPosition),b=t||Q.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},T=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===h||e.ownerDocument===w&&b(w,e)?-1:t===h||t.ownerDocument===w&&b(w,t)?1:c?N(c,e)-N(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===h?-1:t===h?1:i?-1:o?1:c?N(c,e)-N(c,t):0;if(i===o)return ce(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?ce(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},h):h},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&d(e),t=t.replace(Z,"='$1']"),n.matchesSelector&&g&&!k[t+" "]&&(!m||!m.test(t))&&(!v||!v.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,h,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==h&&d(e),b(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==h&&d(e);var i=r.attrHandle[t.toLowerCase()],o=i&&_.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(T),f){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:U,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,ee),e[3]=(e[3]||e[4]||e[5]||"").replace($,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return U.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Y.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace($,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=M[e+" "];return t||(t=new RegExp("(^|"+D+")"+e+"("+D+"|$)"))&&M(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,d,h,p,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(v){if(o){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?v.firstChild:v.lastChild],a&&y){for(b=(h=(l=(c=(f=(d=v)[x]||(d[x]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]||[])[0]===A&&l[1])&&l[2],d=h&&v.childNodes[h];d=++h&&d&&d[g]||(b=h=0)||p.pop();)if(1===d.nodeType&&++b&&d===t){c[e]=[A,h,b];break}}else if(y&&(b=h=(l=(c=(f=(d=t)[x]||(d[x]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]||[])[0]===A&&l[1]),!1===b)for(;(d=++h&&d&&d[g]||(b=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++b||(y&&((c=(f=d[x]||(d[x]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]=[A,b]),d!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[x]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=N(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(G,"$1"));return r[x]?se(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace($,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return j.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace($,ee).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(!1),disabled:he(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return q.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[n<0?n+t:n]}),even:pe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:pe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:pe(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:pe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=de(t);function ve(){}function me(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=E++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,d=[A,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(c=(f=t[x]||(t[x]={}))[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===A&&l[1]===s)return d[2]=l[2];if(c[o]=d,d[2]=e(t,n,u))return!0}return!1}}function be(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function xe(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function we(e,t,n,r,i,o){return r&&!r[x]&&(r=we(r)),i&&!i[x]&&(i=we(i,o)),se(function(o,a,s,u){var l,c,f,d=[],h=[],p=a.length,g=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),v=!e||!o&&t?g:xe(g,d,e,s,u),m=n?i||(o?e:p||r)?[]:a:v;if(n&&n(v,m,s,u),r)for(l=xe(m,h),r(l,[],s,u),c=l.length;c--;)(f=l[c])&&(m[h[c]]=!(v[h[c]]=f));if(o){if(i||e){if(i){for(l=[],c=m.length;c--;)(f=m[c])&&l.push(v[c]=f);i(null,m=[],l,u)}for(c=m.length;c--;)(f=m[c])&&(l=i?N(o,f):d[c])>-1&&(o[l]=!(a[l]=f))}}else m=xe(m===a?m.splice(p,m.length):m),i?i(null,a,m,u):L.apply(a,m)})}function Ae(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=ye(function(e){return e===t},s,!0),f=ye(function(e){return N(t,e)>-1},s,!0),d=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])d=[ye(be(d),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[x]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return we(u>1&&be(d),u>1&&me(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(G,"$1"),n,u<i&&Ae(e.slice(u,i)),i<o&&Ae(e=e.slice(i)),i<o&&me(e))}d.push(n)}return be(d)}function Ee(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,p,v,m=0,y="0",b=o&&[],x=[],w=l,E=o||i&&r.find.TAG("*",c),M=A+=null==w?1:Math.random()||.1,C=E.length;for(c&&(l=a===h||a||c);y!==C&&null!=(f=E[y]);y++){if(i&&f){for(p=0,a||f.ownerDocument===h||(d(f),s=!g);v=e[p++];)if(v(f,a||h,s)){u.push(f);break}c&&(A=M)}n&&((f=!v&&f)&&m--,o&&b.push(f))}if(m+=y,n&&y!==m){for(p=0;v=t[p++];)v(b,x,a,s);if(o){if(m>0)for(;y--;)b[y]||x[y]||(x[y]=I.call(u));x=xe(x)}L.apply(u,x),c&&!o&&x.length>0&&m+t.length>1&&oe.uniqueSort(u)}return c&&(A=M,l=w),b};return n?se(o):o}return ve.prototype=r.filters=r.pseudos,r.setFilters=new ve,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,l,c=C[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=r.preFilter;s;){for(a in n&&!(i=H.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=W.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(G," ")}),s=s.slice(n.length)),r.filter)!(i=U[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):C(e,u).slice(0)},s=oe.compile=function(e,t){var n,r=[],i=[],o=k[e+" "];if(!o){for(t||(t=a(e)),n=t.length;n--;)(o=Ae(t[n]))[x]?r.push(o):i.push(o);(o=k(e,Ee(i,r))).selector=e}return o},u=oe.select=function(e,t,n,i){var o,u,l,c,f,d="function"==typeof e&&e,h=!i&&a(e=d.selector||e);if(n=n||[],1===h.length){if((u=h[0]=h[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace($,ee),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(o=U.needsContext.test(e)?0:u.length;o--&&!r.relative[c=(l=u[o]).type];)if((f=r.find[c])&&(i=f(l.matches[0].replace($,ee),J.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&me(u)))return L.apply(n,i),n;break}}return(d||s(e,h))(i,t,!g,n,!t||J.test(e)&&ge(t.parentNode)||t),n},n.sortStable=x.split("").sort(T).join("")===x,n.detectDuplicates=!!f,d(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||le(P,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(e);x.find=E,x.expr=E.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=E.uniqueSort,x.text=E.getText,x.isXMLDoc=E.isXML,x.contains=E.contains,x.escapeSelector=E.escape;var M=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&x(e).is(n))break;r.push(e)}return r},C=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=x.expr.match.needsContext;function T(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var _=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function S(e,t,n){return g(t)?x.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?x.grep(e,function(e){return e===t!==n}):"string"!=typeof t?x.grep(e,function(e){return u.call(t,e)>-1!==n}):x.filter(t,e,n)}x.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?x.find.matchesSelector(r,e)?[r]:[]:x.find.matches(e,x.grep(t,function(e){return 1===e.nodeType}))},x.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(x(e).filter(function(){for(t=0;t<r;t++)if(x.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)x.find(e,i[t],n);return r>1?x.uniqueSort(n):n},filter:function(e){return this.pushStack(S(this,e||[],!1))},not:function(e){return this.pushStack(S(this,e||[],!0))},is:function(e){return!!S(this,"string"==typeof e&&k.test(e)?x(e):e||[],!1).length}});var I,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||I,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:R.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(x.merge(this,x.parseHTML(i[1],(t=t instanceof x?t[0]:t)&&t.nodeType?t.ownerDocument||t:r,!0)),_.test(i[1])&&x.isPlainObject(t))for(i in t)g(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(o=r.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(x):x.makeArray(e,this)}).prototype=x.fn,I=x(r);var L=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function N(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}x.fn.extend({has:function(e){var t=x(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(x.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&x(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?x.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(x(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),x.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return M(e,"parentNode")},parentsUntil:function(e,t,n){return M(e,"parentNode",n)},next:function(e){return N(e,"nextSibling")},prev:function(e){return N(e,"previousSibling")},nextAll:function(e){return M(e,"nextSibling")},prevAll:function(e){return M(e,"previousSibling")},nextUntil:function(e,t,n){return M(e,"nextSibling",n)},prevUntil:function(e,t,n){return M(e,"previousSibling",n)},siblings:function(e){return C((e.parentNode||{}).firstChild,e)},children:function(e){return C(e.firstChild)},contents:function(e){return T(e,"iframe")?e.contentDocument:(T(e,"template")&&(e=e.content||e),x.merge([],e.childNodes))}},function(e,t){x.fn[e]=function(n,r){var i=x.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=x.filter(r,i)),this.length>1&&(O[e]||x.uniqueSort(i),L.test(e)&&i.reverse()),this.pushStack(i)}});var P=/[^\x20\t\r\n\f]+/g;function D(e){return e}function B(e){throw e}function V(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}x.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return x.each(e.match(P)||[],function(e,n){t[n]=!0}),t}(e):x.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){x.each(n,function(n,r){g(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==b(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return x.each(arguments,function(e,t){for(var n;(n=x.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?x.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},x.extend({Deferred:function(t){var n=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return x.Deferred(function(t){x.each(n,function(n,r){var i=g(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var o=0;function a(t,n,r,i){return function(){var s=this,u=arguments,l=function(){var e,l;if(!(t<o)){if((e=r.apply(s,u))===n.promise())throw new TypeError("Thenable self-resolution");g(l=e&&("object"==typeof e||"function"==typeof e)&&e.then)?i?l.call(e,a(o,n,D,i),a(o,n,B,i)):l.call(e,a(++o,n,D,i),a(o,n,B,i),a(o,n,D,n.notifyWith)):(r!==D&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(e){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(e,c.stackTrace),t+1>=o&&(r!==B&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?c():(x.Deferred.getStackHook&&(c.stackTrace=x.Deferred.getStackHook()),e.setTimeout(c))}}return x.Deferred(function(e){n[0][3].add(a(0,e,g(i)?i:D,e.notifyWith)),n[1][3].add(a(0,e,g(t)?t:D)),n[2][3].add(a(0,e,g(r)?r:B))}).promise()},promise:function(e){return null!=e?x.extend(e,i):i}},o={};return x.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=o.call(arguments),a=x.Deferred(),s=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?o.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&(V(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||g(i[n]&&i[n].then)))return a.then();for(;n--;)V(i[n],s(n),a.reject);return a.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&z.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},x.readyException=function(t){e.setTimeout(function(){throw t})};var F=x.Deferred();function G(){r.removeEventListener("DOMContentLoaded",G),e.removeEventListener("load",G),x.ready()}x.fn.ready=function(e){return F.then(e).catch(function(e){x.readyException(e)}),this},x.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==e&&--x.readyWait>0||F.resolveWith(r,[x]))}}),x.ready.then=F.then,"complete"===r.readyState||"loading"!==r.readyState&&!r.documentElement.doScroll?e.setTimeout(x.ready):(r.addEventListener("DOMContentLoaded",G),e.addEventListener("load",G));var H=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===b(n))for(s in i=!0,n)H(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,g(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(x(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},W=/^-ms-/,Z=/-([a-z])/g;function Y(e,t){return t.toUpperCase()}function j(e){return e.replace(W,"ms-").replace(Z,Y)}var U=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function X(){this.expando=x.expando+X.uid++}X.uid=1,X.prototype={cache:function(e){var t=e[this.expando];return t||(t={},U(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[j(t)]=n;else for(r in t)i[j(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][j(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(j):(t=j(t))in r?[t]:t.match(P)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||x.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!x.isEmptyObject(t)}};var q=new X,Q=new X,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,J=/[A-Z]/g;function $(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(J,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:K.test(e)?JSON.parse(e):e)}(n)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}x.extend({hasData:function(e){return Q.hasData(e)||q.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return q.access(e,t,n)},_removeData:function(e,t){q.remove(e,t)}}),x.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Q.get(o),1===o.nodeType&&!q.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=j(r.slice(5)),$(o,r,i[r]));q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Q.set(this,e)}):H(this,function(t){var n;if(o&&void 0===t){if(void 0!==(n=Q.get(o,e)))return n;if(void 0!==(n=$(o,e)))return n}else this.each(function(){Q.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),x.extend({queue:function(e,t,n){var r;if(e)return r=q.get(e,t=(t||"fx")+"queue"),n&&(!r||Array.isArray(n)?r=q.access(e,t,x.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){var n=x.queue(e,t=t||"fx"),r=n.length,i=n.shift(),o=x._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){x.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return q.get(e,n)||q.access(e,n,{empty:x.Callbacks("once memory").add(function(){q.remove(e,[t+"queue",n])})})}}),x.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?x.queue(this[0],e):void 0===t?this:this.each(function(){var n=x.queue(this,e,t);x._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&x.dequeue(this,e)})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=x.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&x.contains(e.ownerDocument,e)&&"none"===x.css(e,"display")},ie=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function oe(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return x.css(e,t,"")},u=s(),l=n&&n[3]||(x.cssNumber[t]?"":"px"),c=(x.cssNumber[t]||"px"!==l&&+u)&&te.exec(x.css(e,t));if(c&&c[3]!==l){for(l=l||c[3],c=+(u/=2)||1;a--;)x.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;x.style(e,t,(c*=2)+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ae={};function se(e){var t,n=e.ownerDocument,r=e.nodeName,i=ae[r];return i||(t=n.body.appendChild(n.createElement(r)),i=x.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),ae[r]=i,i)}function ue(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=q.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&re(r)&&(i[o]=se(r))):"none"!==n&&(i[o]="none",q.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}x.fn.extend({show:function(){return ue(this,!0)},hide:function(){return ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){re(this)?x(this).show():x(this).hide()})}});var le=/^(?:checkbox|radio)$/i,ce=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,fe=/^$|^module$|\/(?:java|ecma)script/i,de={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function he(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&T(e,t)?x.merge([e],n):n}function pe(e,t){for(var n=0,r=e.length;n<r;n++)q.set(e[n],"globalEval",!t||q.get(t[n],"globalEval"))}de.optgroup=de.option,de.tbody=de.tfoot=de.colgroup=de.caption=de.thead,de.th=de.td;var ge=/<|&#?\w+;/;function ve(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),d=[],h=0,p=e.length;h<p;h++)if((o=e[h])||0===o)if("object"===b(o))x.merge(d,o.nodeType?[o]:o);else if(ge.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(ce.exec(o)||["",""])[1].toLowerCase(),a.innerHTML=(u=de[s]||de._default)[1]+x.htmlPrefilter(o)+u[2],c=u[0];c--;)a=a.lastChild;x.merge(d,a.childNodes),(a=f.firstChild).textContent=""}else d.push(t.createTextNode(o));for(f.textContent="",h=0;o=d[h++];)if(r&&x.inArray(o,r)>-1)i&&i.push(o);else if(l=x.contains(o.ownerDocument,o),a=he(f.appendChild(o),"script"),l&&pe(a),n)for(c=0;o=a[c++];)fe.test(o.type||"")&&n.push(o);return f}!function(){var e=r.createDocumentFragment().appendChild(r.createElement("div")),t=r.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),p.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",p.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var me=r.documentElement,ye=/^key/,be=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xe=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Ae(){return!1}function Ee(){try{return r.activeElement}catch(e){}}function Me(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Me(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ae;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return x().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=x.guid++)),e.each(function(){x.event.add(this,t,i,r,n)})}x.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,d,h,p,g,v=q.get(e);if(v)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&x.find.matchesSelector(me,i),n.guid||(n.guid=x.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(t){return void 0!==x&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(P)||[""]).length;l--;)h=g=(s=xe.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),h&&(f=x.event.special[h]||{},f=x.event.special[h=(i?f.delegateType:f.bindType)||h]||{},c=x.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&x.expr.match.needsContext.test(i),namespace:p.join(".")},o),(d=u[h])||((d=u[h]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,p,a)||e.addEventListener&&e.addEventListener(h,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),x.event.global[h]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,d,h,p,g,v=q.hasData(e)&&q.get(e);if(v&&(u=v.events)){for(l=(t=(t||"").match(P)||[""]).length;l--;)if(h=g=(s=xe.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),h){for(f=x.event.special[h]||{},d=u[h=(r?f.delegateType:f.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,f.remove&&f.remove.call(e,c));a&&!d.length&&(f.teardown&&!1!==f.teardown.call(e,p,v.handle)||x.removeEvent(e,h,v.handle),delete u[h])}else for(h in u)x.event.remove(e,h+t[l],n,r,!0);x.isEmptyObject(u)&&q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=x.event.fix(e),u=new Array(arguments.length),l=(q.get(this,"events")||{})[s.type]||[],c=x.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=x.event.handlers.call(this,s,l),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((x.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?x(i,this).index(l)>-1:x.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(x.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[x.expando]?e:new x.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ee()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ee()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&T(this,"input"))return this.click(),!1},_default:function(e){return T(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},x.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},x.Event=function(e,t){if(!(this instanceof x.Event))return new x.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Ae,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&x.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:Ae,isPropagationStopped:Ae,isImmediatePropagationStopped:Ae,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ye.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&be.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},x.event.addProp),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||x.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),x.fn.extend({on:function(e,t,n,r){return Me(this,e,t,n,r)},one:function(e,t,n,r){return Me(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,x(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ae),this.each(function(){x.event.remove(this,e,n,t)})}});var Ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ke=/<script|<style|<link/i,Te=/checked\s*(?:[^=]|=\s*.checked.)/i,_e=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Se(e,t){return T(e,"table")&&T(11!==t.nodeType?t:t.firstChild,"tr")&&x(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(q.hasData(e)&&(o=q.access(e),a=q.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)x.event.add(t,i,l[i][n]);Q.hasData(e)&&(s=Q.access(e),u=x.extend({},s),Q.set(t,u))}}function Oe(e,t){var n=t.nodeName.toLowerCase();"input"===n&&le.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Ne(e,t,n,r){t=a.apply([],t);var i,o,s,u,l,c,f=0,d=e.length,h=d-1,v=t[0],m=g(v);if(m||d>1&&"string"==typeof v&&!p.checkClone&&Te.test(v))return e.each(function(i){var o=e.eq(i);m&&(t[0]=v.call(this,i,o.html())),Ne(o,t,n,r)});if(d&&(o=(i=ve(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(u=(s=x.map(he(i,"script"),Ie)).length;f<d;f++)l=i,f!==h&&(l=x.clone(l,!0,!0),u&&x.merge(s,he(l,"script"))),n.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,x.map(s,Re),f=0;f<u;f++)fe.test((l=s[f]).type||"")&&!q.access(l,"globalEval")&&x.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?x._evalUrl&&x._evalUrl(l.src):y(l.textContent.replace(_e,""),c,l))}return e}function Pe(e,t,n){for(var r,i=t?x.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||x.cleanData(he(r)),r.parentNode&&(n&&x.contains(r.ownerDocument,r)&&pe(he(r,"script")),r.parentNode.removeChild(r));return e}x.extend({htmlPrefilter:function(e){return e.replace(Ce,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=x.contains(e.ownerDocument,e);if(!(p.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||x.isXMLDoc(e)))for(a=he(s),r=0,i=(o=he(e)).length;r<i;r++)Oe(o[r],a[r]);if(t)if(n)for(o=o||he(e),a=a||he(s),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,s);return(a=he(s,"script")).length>0&&pe(a,!u&&he(e,"script")),s},cleanData:function(e){for(var t,n,r,i=x.event.special,o=0;void 0!==(n=e[o]);o++)if(U(n)){if(t=n[q.expando]){if(t.events)for(r in t.events)i[r]?x.event.remove(n,r):x.removeEvent(n,r,t.handle);n[q.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),x.fn.extend({detach:function(e){return Pe(this,e,!0)},remove:function(e){return Pe(this,e)},text:function(e){return H(this,function(e){return void 0===e?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ne(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Se(this,e).appendChild(e)})},prepend:function(){return Ne(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Se(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ne(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ne(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(x.cleanData(he(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return x.clone(this,e,t)})},html:function(e){return H(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!de[(ce.exec(e)||["",""])[1].toLowerCase()]){e=x.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(x.cleanData(he(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Ne(this,arguments,function(t){var n=this.parentNode;x.inArray(this,e)<0&&(x.cleanData(he(this)),n&&n.replaceChild(t,this))},e)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){for(var n,r=[],i=x(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),x(i[a])[t](n),s.apply(r,n.get());return this.pushStack(r)}});var De=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Be=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Ve=new RegExp(ne.join("|"),"i");function ze(e,t,n){var r,i,o,a,s=e.style;return(n=n||Be(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||x.contains(e.ownerDocument,e)||(a=x.style(e,t)),!p.pixelBoxStyles()&&De.test(a)&&Ve.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",me.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);i="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",s=36===n(t.right),o=36===n(t.width),c.style.position="absolute",a=36===c.offsetWidth||"absolute",me.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var i,o,a,s,u,l=r.createElement("div"),c=r.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",p.clearCloneStyle="content-box"===c.style.backgroundClip,x.extend(p,{boxSizingReliable:function(){return t(),o},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),a}}))}();var Ge=/^(none|table(?!-c[ea]).+)/,He=/^--/,We={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"},Ye=["Webkit","Moz","ms"],je=r.createElement("div").style;function Ue(e){var t=x.cssProps[e];return t||(t=x.cssProps[e]=function(e){if(e in je)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ye.length;n--;)if((e=Ye[n]+t)in je)return e}(e)||e),t}function Xe(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function qe(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=x.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=x.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=x.css(e,"border"+ne[a]+"Width",!0,i))):(u+=x.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=x.css(e,"border"+ne[a]+"Width",!0,i):s+=x.css(e,"border"+ne[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))),u}function Qe(e,t,n){var r=Be(e),i=ze(e,t,r),o="border-box"===x.css(e,"boxSizing",!1,r),a=o;if(De.test(i)){if(!n)return i;i="auto"}return a=a&&(p.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===x.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+qe(e,t,n||(o?"border":"content"),a,r,i)+"px"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=ze(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=j(t),u=He.test(t),l=e.style;if(u||(t=Ue(s)),a=x.cssHooks[t]||x.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"==(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=oe(e,t,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(x.cssNumber[s]?"":"px")),p.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=j(t);return He.test(t)||(t=Ue(s)),(a=x.cssHooks[t]||x.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=ze(e,t,r)),"normal"===i&&t in Ze&&(i=Ze[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),x.each(["height","width"],function(e,t){x.cssHooks[t]={get:function(e,n,r){if(n)return!Ge.test(x.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Qe(e,t,r):ie(e,We,function(){return Qe(e,t,r)})},set:function(e,n,r){var i,o=Be(e),a="border-box"===x.css(e,"boxSizing",!1,o),s=r&&qe(e,t,r,a,o);return a&&p.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-qe(e,t,"border",!1,o)-.5)),s&&(i=te.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=x.css(e,t)),Xe(0,n,s)}}}),x.cssHooks.marginLeft=Fe(p.reliableMarginLeft,function(e,t){if(t)return(parseFloat(ze(e,"marginLeft"))||e.getBoundingClientRect().left-ie(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+ne[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(x.cssHooks[e+t].set=Xe)}),x.fn.extend({css:function(e,t){return H(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Be(e),i=t.length;a<i;a++)o[t[a]]=x.css(e,t[a],!1,r);return o}return void 0!==n?x.style(e,t,n):x.css(e,t)},e,t,arguments.length>1)}}),x.Tween=Ke,(Ke.prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||x.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(x.cssNumber[n]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.pos=t=this.options.duration?x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=x.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){x.fx.step[e.prop]?x.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[x.cssProps[e.prop]]&&!x.cssHooks[e.prop]?e.elem[e.prop]=e.now:x.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},x.fx=Ke.prototype.init,x.fx.step={};var Je,$e,et=/^(?:toggle|show|hide)$/,tt=/queueHooks$/;function nt(){$e&&(!1===r.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(nt):e.setTimeout(nt,x.fx.interval),x.fx.tick())}function rt(){return e.setTimeout(function(){Je=void 0}),Je=Date.now()}function it(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ot(e,t,n){for(var r,i=(at.tweeners[t]||[]).concat(at.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function at(e,t,n){var r,i,o=0,a=at.prefilters.length,s=x.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Je||rt(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:x.extend({},t),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:t,originalOptions:n,startTime:Je||rt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=x.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=j(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=x.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);o<a;o++)if(r=at.prefilters[o].call(l,e,c,l.opts))return g(r.stop)&&(x._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return x.map(c,ot,l),g(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),x.fx.timer(x.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}x.Animation=x.extend(at,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return oe(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)(at.tweeners[n=e[r]]=at.tweeners[n]||[]).unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,d=this,h={},p=e.style,g=e.nodeType&&re(e),v=q.get(e,"fxshow");for(r in n.queue||(null==(a=x._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,x.queue(e,"fx").length||a.empty.fire()})})),t)if(et.test(i=t[r])){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}h[r]=v&&v[r]||x.style(e,r)}if((u=!x.isEmptyObject(t))||!x.isEmptyObject(h))for(r in f&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=v&&v.display)&&(l=q.get(e,"display")),"none"===(c=x.css(e,"display"))&&(l?c=l:(ue([e],!0),l=e.style.display||l,c=x.css(e,"display"),ue([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===x.css(e,"float")&&(u||(d.done(function(){p.display=l}),null==l&&(l="none"===(c=p.display)?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1,h)u||(v?"hidden"in v&&(g=v.hidden):v=q.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&ue([e],!0),d.done(function(){for(r in g||ue([e]),q.remove(e,"fxshow"),h)x.style(e,r,h[r])})),u=ot(g?v[r]:0,r,d),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?at.prefilters.unshift(e):at.prefilters.push(e)}}),x.speed=function(e,t,n){var r=e&&"object"==typeof e?x.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return x.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in x.fx.speeds?x.fx.speeds[r.duration]:x.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&x.dequeue(this,r.queue)},r},x.fn.extend({fadeTo:function(e,t,n,r){return this.filter(re).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=x.isEmptyObject(e),o=x.speed(t,n,r),a=function(){var t=at(this,x.extend({},e),o);(i||q.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=x.timers,a=q.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&tt.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||x.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=q.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=x.timers,a=r?r.length:0;for(n.finish=!0,x.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(it(t,!0),e,r,i)}}),x.each({slideDown:it("show"),slideUp:it("hide"),slideToggle:it("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),x.timers=[],x.fx.tick=function(){var e,t=0,n=x.timers;for(Je=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||x.fx.stop(),Je=void 0},x.fx.timer=function(e){x.timers.push(e),x.fx.start()},x.fx.interval=13,x.fx.start=function(){$e||($e=!0,nt())},x.fx.stop=function(){$e=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(t,n){return t=x.fx&&x.fx.speeds[t]||t,this.queue(n=n||"fx",function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=r.createElement("input"),t=r.createElement("select").appendChild(r.createElement("option"));e.type="checkbox",p.checkOn=""!==e.value,p.optSelected=t.selected,(e=r.createElement("input")).value="t",e.type="radio",p.radioValue="t"===e.value}();var st,ut=x.expr.attrHandle;x.fn.extend({attr:function(e,t){return H(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})}}),x.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?x.prop(e,t,n):(1===o&&x.isXMLDoc(e)||(i=x.attrHooks[t.toLowerCase()]||(x.expr.match.bool.test(t)?st:void 0)),void 0!==n?null===n?void x.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=x.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&"radio"===t&&T(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),st={set:function(e,t,n){return!1===t?x.removeAttr(e,n):e.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ut[t]||x.find.attr;ut[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=ut[a],ut[a]=i,i=null!=n(e,t,r)?a:null,ut[a]=o),i}});var lt=/^(?:input|select|textarea|button)$/i,ct=/^(?:a|area)$/i;function ft(e){return(e.match(P)||[]).join(" ")}function dt(e){return e.getAttribute&&e.getAttribute("class")||""}function ht(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}x.fn.extend({prop:function(e,t){return H(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})}}),x.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&x.isXMLDoc(e)||(i=x.propHooks[t=x.propFix[t]||t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");return t?parseInt(t,10):lt.test(e.nodeName)||ct.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),p.optSelected||(x.propHooks.selected={get:function(e){return null},set:function(e){}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){x(this).addClass(e.call(this,t,dt(this)))});if((t=ht(e)).length)for(;n=this[u++];)if(i=dt(n),r=1===n.nodeType&&" "+ft(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ft(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(g(e))return this.each(function(t){x(this).removeClass(e.call(this,t,dt(this)))});if(!arguments.length)return this.attr("class","");if((t=ht(e)).length)for(;n=this[u++];)if(i=dt(n),r=1===n.nodeType&&" "+ft(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=ft(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):g(e)?this.each(function(n){x(this).toggleClass(e.call(this,n,dt(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=x(this),a=ht(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=dt(this))&&q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+ft(dt(n))+" ").indexOf(t)>-1)return!0;return!1}});var pt=/\r/g;x.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=g(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,x(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=x.map(i,function(e){return null==e?"":e+""})),(t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=x.valHooks[i.type]||x.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(pt,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return null!=t?t:ft(x.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!T(n.parentNode,"optgroup"))){if(t=x(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=x.makeArray(t),a=i.length;a--;)((r=i[a]).selected=x.inArray(x.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=x.inArray(x(e).val(),t)>-1}},p.checkOn||(x.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),p.focusin="onfocusin"in e;var gt=/^(?:focusinfocus|focusoutblur)$/,vt=function(e){e.stopPropagation()};x.extend(x.event,{trigger:function(t,n,i,o){var a,s,u,l,c,d,h,p,m=[i||r],y=f.call(t,"type")?t.type:t,b=f.call(t,"namespace")?t.namespace.split("."):[];if(s=p=u=i=i||r,3!==i.nodeType&&8!==i.nodeType&&!gt.test(y+x.event.triggered)&&(y.indexOf(".")>-1&&(y=(b=y.split(".")).shift(),b.sort()),c=y.indexOf(":")<0&&"on"+y,(t=t[x.expando]?t:new x.Event(y,"object"==typeof t&&t)).isTrigger=o?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:x.makeArray(n,[t]),h=x.event.special[y]||{},o||!h.trigger||!1!==h.trigger.apply(i,n))){if(!o&&!h.noBubble&&!v(i)){for(gt.test((l=h.delegateType||y)+y)||(s=s.parentNode);s;s=s.parentNode)m.push(s),u=s;u===(i.ownerDocument||r)&&m.push(u.defaultView||u.parentWindow||e)}for(a=0;(s=m[a++])&&!t.isPropagationStopped();)p=s,t.type=a>1?l:h.bindType||y,(d=(q.get(s,"events")||{})[t.type]&&q.get(s,"handle"))&&d.apply(s,n),(d=c&&s[c])&&d.apply&&U(s)&&(t.result=d.apply(s,n),!1===t.result&&t.preventDefault());return t.type=y,o||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(m.pop(),n)||!U(i)||c&&g(i[y])&&!v(i)&&((u=i[c])&&(i[c]=null),x.event.triggered=y,t.isPropagationStopped()&&p.addEventListener(y,vt),i[y](),t.isPropagationStopped()&&p.removeEventListener(y,vt),x.event.triggered=void 0,u&&(i[c]=u)),t.result}},simulate:function(e,t,n){var r=x.extend(new x.Event,n,{type:e,isSimulated:!0});x.event.trigger(r,null,t)}}),x.fn.extend({trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return x.event.trigger(e,t,n,!0)}}),p.focusin||x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){x.event.simulate(t,e.target,x.event.fix(e))};x.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=q.access(r,t);i||r.addEventListener(e,n,!0),q.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=q.access(r,t)-1;i?q.access(r,t,i):(r.removeEventListener(e,n,!0),q.remove(r,t))}}});var mt=e.location,yt=Date.now(),bt=/\?/;x.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+t),n};var xt=/\[\]$/,wt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Et=/^(?:input|select|textarea|keygen)/i;function Mt(e,t,n,r){var i;if(Array.isArray(t))x.each(t,function(t,i){n||xt.test(e)?r(e,i):Mt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==b(t))r(e,t);else for(i in t)Mt(e+"["+i+"]",t[i],n,r)}x.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!x.isPlainObject(e))x.each(e,function(){i(this.name,this.value)});else for(n in e)Mt(n,e[n],t,i);return r.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&Et.test(this.nodeName)&&!At.test(e)&&(this.checked||!le.test(e))}).map(function(e,t){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,function(e){return{name:t.name,value:e.replace(wt,"\r\n")}}):{name:t.name,value:n.replace(wt,"\r\n")}}).get()}});var Ct=/%20/g,kt=/#.*$/,Tt=/([?&])_=[^&]*/,_t=/^(.*?):[ \t]*([^\r\n]*)$/gm,St=/^(?:GET|HEAD)$/,It=/^\/\//,Rt={},Lt={},Ot="*/".concat("*"),Nt=r.createElement("a");function Pt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(P)||[];if(g(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dt(e,t,n,r){var i={},o=e===Lt;function a(s){var u;return i[s]=!0,x.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function Bt(e,t){var n,r,i=x.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&x.extend(!0,e,r),e}Nt.href=mt.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ot,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Bt(Bt(e,x.ajaxSettings),t):Bt(x.ajaxSettings,e)},ajaxPrefilter:Pt(Rt),ajaxTransport:Pt(Lt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0);var i,o,a,s,u,l,c,f,d,h,p=x.ajaxSetup({},n=n||{}),g=p.context||p,v=p.context&&(g.nodeType||g.jquery)?x(g):x.event,m=x.Deferred(),y=x.Callbacks("once memory"),b=p.statusCode||{},w={},A={},E="canceled",M={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=_t.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=A[e.toLowerCase()]=A[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)M.always(e[M.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||E;return i&&i.abort(t),C(0,t),this}};if(m.promise(M),p.url=((t||p.url||mt.href)+"").replace(It,mt.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(P)||[""],null==p.crossDomain){l=r.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Nt.protocol+"//"+Nt.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=x.param(p.data,p.traditional)),Dt(Rt,p,n,M),c)return M;for(d in(f=x.event&&p.global)&&0==x.active++&&x.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!St.test(p.type),o=p.url.replace(kt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ct,"+")):(h=p.url.slice(o.length),p.data&&(p.processData||"string"==typeof p.data)&&(o+=(bt.test(o)?"&":"?")+p.data,delete p.data),!1===p.cache&&(o=o.replace(Tt,"$1"),h=(bt.test(o)?"&":"?")+"_="+yt+++h),p.url=o+h),p.ifModified&&(x.lastModified[o]&&M.setRequestHeader("If-Modified-Since",x.lastModified[o]),x.etag[o]&&M.setRequestHeader("If-None-Match",x.etag[o])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&M.setRequestHeader("Content-Type",p.contentType),M.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ot+"; q=0.01":""):p.accepts["*"]),p.headers)M.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(g,M,p)||c))return M.abort();if(E="abort",y.add(p.complete),M.done(p.success),M.fail(p.error),i=Dt(Lt,p,n,M)){if(M.readyState=1,f&&v.trigger("ajaxSend",[M,p]),c)return M;p.async&&p.timeout>0&&(u=e.setTimeout(function(){M.abort("timeout")},p.timeout));try{c=!1,i.send(w,C)}catch(e){if(c)throw e;C(-1,e)}}else C(-1,"No Transport");function C(t,n,r,s){var l,d,h,w,A,E=n;c||(c=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",M.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(w=function(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(p,M,r)),w=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(p,w,M,l),l?(p.ifModified&&((A=M.getResponseHeader("Last-Modified"))&&(x.lastModified[o]=A),(A=M.getResponseHeader("etag"))&&(x.etag[o]=A)),204===t||"HEAD"===p.type?E="nocontent":304===t?E="notmodified":(E=w.state,d=w.data,l=!(h=w.error))):(h=E,!t&&E||(E="error",t<0&&(t=0))),M.status=t,M.statusText=(n||E)+"",l?m.resolveWith(g,[d,E,M]):m.rejectWith(g,[M,E,h]),M.statusCode(b),b=void 0,f&&v.trigger(l?"ajaxSuccess":"ajaxError",[M,p,l?d:h]),y.fireWith(g,[M,E]),f&&(v.trigger("ajaxComplete",[M,p]),--x.active||x.event.trigger("ajaxStop")))}return M},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,void 0,t,"script")}}),x.each(["get","post"],function(e,t){x[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),x.ajax(x.extend({url:e,type:t,dataType:i,data:n,success:r},x.isPlainObject(e)&&e))}}),x._evalUrl=function(e){return x.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},x.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=x(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return g(e)?this.each(function(t){x(this).wrapInner(e.call(this,t))}):this.each(function(){var t=x(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=g(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(e){return!x.expr.pseudos.visible(e)},x.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Vt={0:200,1223:204},zt=x.ajaxSettings.xhr();p.cors=!!zt&&"withCredentials"in zt,p.ajax=zt=!!zt,x.ajaxTransport(function(t){var n,r;if(p.cors||zt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}}),x.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return x.globalEval(e),e}}}),x.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),x.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(i,o){t=x("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),r.head.appendChild(t[0])},abort:function(){n&&n()}}});var Ft=[],Gt=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ft.pop()||x.expando+"_"+yt++;return this[e]=!0,e}}),x.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Gt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Gt,"$1"+i):!1!==t.jsonp&&(t.url+=(bt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||x.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?x(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Ft.push(i)),a&&g(o)&&o(a[0]),a=o=void 0}),"script"}),p.createHTMLDocument=function(){var e=r.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),x.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(p.createHTMLDocument?((i=(t=r.implementation.createHTMLDocument("")).createElement("base")).href=r.location.href,t.head.appendChild(i)):t=r),a=!n&&[],(o=_.exec(e))?[t.createElement(o[1])]:(o=ve([e],t,a),a&&a.length&&x(a).remove(),x.merge([],o.childNodes)));var i,o,a},x.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=ft(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&x.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?x("<div>").append(x.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}}),x.expr.pseudos.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length},x.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=x.css(e,"position"),c=x(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=x.css(e,"top"),u=x.css(e,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(t)&&(t=t.call(e,n,x.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},x.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){x.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?{top:(t=r.getBoundingClientRect()).top+(n=r.ownerDocument.defaultView).pageYOffset,left:t.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===x.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===x.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=x(e).offset()).top+=x.css(e,"borderTopWidth",!0),i.left+=x.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-x.css(r,"marginTop",!0),left:t.left-i.left-x.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===x.css(e,"position");)e=e.offsetParent;return e||me})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;x.fn[e]=function(r){return H(this,function(e,r,i){var o;if(v(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),x.each(["top","left"],function(e,t){x.cssHooks[t]=Fe(p.pixelPosition,function(e,n){if(n)return n=ze(e,t),De.test(n)?x(e).position()[t]+"px":n})}),x.each({Height:"height",Width:"width"},function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){x.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return H(this,function(t,n,i){var o;return v(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?x.css(t,n,s):x.style(t,n,i,s)},t,a?i:void 0,a)}})}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),x.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),x.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=o.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(o.call(arguments)))}).guid=e.guid=e.guid||x.guid++,i},x.holdReady=function(e){e?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=T,x.isFunction=g,x.isWindow=v,x.camelCase=j,x.type=b,x.now=Date.now,x.isNumeric=function(e){var t=x.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var Ht=e.jQuery,Wt=e.$;return x.noConflict=function(t){return e.$===x&&(e.$=Wt),t&&e.jQuery===x&&(e.jQuery=Ht),x},t||(e.jQuery=e.$=x),x}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.d3=e.d3||{})}(this,function(e){"use strict";function t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function n(e){var n;return 1===e.length&&(n=e,e=function(e,r){return t(n(e),r)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}var r=n(t),i=r.right,o=r.left;function a(e,t){return[e,t]}function s(e){return null===e?NaN:+e}function u(e,t){var n,r,i=e.length,o=0,a=-1,u=0,l=0;if(null==t)for(;++a<i;)isNaN(n=s(e[a]))||(l+=(r=n-u)*(n-(u+=r/++o)));else for(;++a<i;)isNaN(n=s(t(e[a],a,e)))||(l+=(r=n-u)*(n-(u+=r/++o)));if(o>1)return l/(o-1)}function l(e,t){var n=u(e,t);return n?Math.sqrt(n):n}function c(e,t){var n,r,i,o=e.length,a=-1;if(null==t){for(;++a<o;)if(null!=(n=e[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=e[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=i=n;++a<o;)null!=(n=t(e[a],a,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}var f=Array.prototype,d=f.slice,h=f.map;function p(e){return function(){return e}}function g(e){return e}function v(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}var m=Math.sqrt(50),y=Math.sqrt(10),b=Math.sqrt(2);function x(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=w(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(e-s)/a;return r&&o.reverse(),o}function w(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=m?10:o>=y?5:o>=b?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=m?10:o>=y?5:o>=b?2:1)}function A(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=m?i*=10:o>=y?i*=5:o>=b&&(i*=2),t<e?-i:i}function E(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function M(e,t,n){if(null==n&&(n=s),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}function C(e,t){var n,r,i=e.length,o=-1;if(null==t){for(;++o<i;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<i;)null!=(n=e[o])&&n>r&&(r=n)}else for(;++o<i;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<i;)null!=(n=t(e[o],o,e))&&n>r&&(r=n);return r}function k(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--a]=r[t];return n}function T(e,t){var n,r,i=e.length,o=-1;if(null==t){for(;++o<i;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<i;)null!=(n=e[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<i;)null!=(n=t(e[o],o,e))&&r>n&&(r=n);return r}function _(e){if(!(i=e.length))return[];for(var t=-1,n=T(e,S),r=new Array(n);++t<n;)for(var i,o=-1,a=r[t]=new Array(i);++o<i;)a[o]=e[o][t];return r}function S(e){return e.length}var I=Array.prototype.slice;function R(e){return e}var L=1,O=2,N=3,P=4,D=1e-6;function B(e){return"translate("+(e+.5)+",0)"}function V(e){return"translate(0,"+(e+.5)+")"}function z(){return!this.__axis}function F(e,t){var n=[],r=null,i=null,o=6,a=6,s=3,u=e===L||e===P?-1:1,l=e===P||e===O?"x":"y",c=e===L||e===N?B:V;function f(f){var d=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,h=null==i?t.tickFormat?t.tickFormat.apply(t,n):R:i,p=Math.max(o,0)+s,g=t.range(),v=+g[0]+.5,m=+g[g.length-1]+.5,y=(t.bandwidth?function(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}:function(e){return function(t){return+e(t)}})(t.copy()),b=f.selection?f.selection():f,x=b.selectAll(".domain").data([null]),w=b.selectAll(".tick").data(d,t).order(),A=w.exit(),E=w.enter().append("g").attr("class","tick"),M=w.select("line"),C=w.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(E),M=M.merge(E.append("line").attr("stroke","currentColor").attr(l+"2",u*o)),C=C.merge(E.append("text").attr("fill","currentColor").attr(l,u*p).attr("dy",e===L?"0em":e===N?"0.71em":"0.32em")),f!==b&&(x=x.transition(f),w=w.transition(f),M=M.transition(f),C=C.transition(f),A=A.transition(f).attr("opacity",D).attr("transform",function(e){return isFinite(e=y(e))?c(e):this.getAttribute("transform")}),E.attr("opacity",D).attr("transform",function(e){var t=this.parentNode.__axis;return c(t&&isFinite(t=t(e))?t:y(e))})),A.remove(),x.attr("d",e===P||e==O?a?"M"+u*a+","+v+"H0.5V"+m+"H"+u*a:"M0.5,"+v+"V"+m:a?"M"+v+","+u*a+"V0.5H"+m+"V"+u*a:"M"+v+",0.5H"+m),w.attr("opacity",1).attr("transform",function(e){return c(y(e))}),M.attr(l+"2",u*o),C.attr(l,u*p).text(h),b.filter(z).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===O?"start":e===P?"end":"middle"),b.each(function(){this.__axis=y})}return f.scale=function(e){return arguments.length?(t=e,f):t},f.ticks=function(){return n=I.call(arguments),f},f.tickArguments=function(e){return arguments.length?(n=null==e?[]:I.call(e),f):n.slice()},f.tickValues=function(e){return arguments.length?(r=null==e?null:I.call(e),f):r&&r.slice()},f.tickFormat=function(e){return arguments.length?(i=e,f):i},f.tickSize=function(e){return arguments.length?(o=a=+e,f):o},f.tickSizeInner=function(e){return arguments.length?(o=+e,f):o},f.tickSizeOuter=function(e){return arguments.length?(a=+e,f):a},f.tickPadding=function(e){return arguments.length?(s=+e,f):s},f}var G={value:function(){}};function H(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new W(r)}function W(e){this._=e}function Z(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function Y(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=G,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}W.prototype=H.prototype={constructor:W,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=o[a]).type)i[n]=Y(i[n],e.name,t);else if(null==t)for(n in i)i[n]=Y(i[n],e.name,null);return this}for(;++a<s;)if((n=(e=o[a]).type)&&(n=Z(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new W(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var j="http://www.w3.org/1999/xhtml",U={svg:"http://www.w3.org/2000/svg",xhtml:j,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function X(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),U.hasOwnProperty(t)?{space:U[t],local:e}:e}function q(e){var t=X(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===j&&t.documentElement.namespaceURI===j?t.createElement(e):t.createElementNS(n,e)}})(t)}function Q(){}function K(e){return null==e?Q:function(){return this.querySelector(e)}}function J(){return[]}function $(e){return null==e?J:function(){return this.querySelectorAll(e)}}function ee(e){return function(){return this.matches(e)}}function te(e){return new Array(e.length)}function ne(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ne.prototype={constructor:ne,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var re="$";function ie(e,t,n,r,i,o){for(var a,s=0,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new ne(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function oe(e,t,n,r,i,o,a){var s,u,l,c={},f=t.length,d=o.length,h=new Array(f);for(s=0;s<f;++s)(u=t[s])&&(h[s]=l=re+a.call(u,u.__data__,s,t),l in c?i[s]=u:c[l]=u);for(s=0;s<d;++s)(u=c[l=re+a.call(e,o[s],s,o)])?(r[s]=u,u.__data__=o[s],c[l]=null):n[s]=new ne(e,o[s]);for(s=0;s<f;++s)(u=t[s])&&c[h[s]]===u&&(i[s]=u)}function ae(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function se(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ue(e,t){return e.style.getPropertyValue(t)||se(e).getComputedStyle(e,null).getPropertyValue(t)}function le(e){return e.trim().split(/^|\s+/)}function ce(e){return e.classList||new fe(e)}function fe(e){this._node=e,this._names=le(e.getAttribute("class")||"")}function de(e,t){for(var n=ce(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function he(e,t){for(var n=ce(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function pe(){this.textContent=""}function ge(){this.innerHTML=""}function ve(){this.nextSibling&&this.parentNode.appendChild(this)}function me(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ye(){return null}function be(){var e=this.parentNode;e&&e.removeChild(this)}function xe(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function we(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}fe.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Ae={};function Ee(e,t,n){return e=Me(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function Me(t,n,r){return function(i){var o=e.event;e.event=i;try{t.call(this,this.__data__,n,r)}finally{e.event=o}}}function Ce(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function ke(e,t,n){var r=Ae.hasOwnProperty(e.type)?Ee:Me;return function(i,o,a){var s,u=this.__on,l=r(t,o,a);if(u)for(var c=0,f=u.length;c<f;++c)if((s=u[c]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=t);this.addEventListener(e.type,l,n),s={type:e.type,name:e.name,value:t,listener:l,capture:n},u?u.push(s):this.__on=[s]}}function Te(t,n,r,i){var o=e.event;t.sourceEvent=e.event,e.event=t;try{return n.apply(r,i)}finally{e.event=o}}function _e(e,t,n){var r=se(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}e.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Ae={mouseenter:"mouseover",mouseleave:"mouseout"}));var Se=[null];function Ie(e,t){this._groups=e,this._parents=t}function Re(){return new Ie([[document.documentElement]],Se)}function Le(e){return"string"==typeof e?new Ie([[document.querySelector(e)]],[document.documentElement]):new Ie([[e]],Se)}Ie.prototype=Re.prototype={constructor:Ie,select:function(e){"function"!=typeof e&&(e=K(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new Ie(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=$(e));for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(e.call(a,a.__data__,l,s)),i.push(a));return new Ie(r,i)},filter:function(e){"function"!=typeof e&&(e=ee(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new Ie(r,this._parents)},data:function(e,t){if(!e)return p=new Array(this.size()),c=-1,this.each(function(e){p[++c]=e}),p;var n,r=t?oe:ie,i=this._parents,o=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=o.length,s=new Array(a),u=new Array(a),l=new Array(a),c=0;c<a;++c){var f=i[c],d=o[c],h=d.length,p=e.call(f,f&&f.__data__,c,i),g=p.length,v=u[c]=new Array(g),m=s[c]=new Array(g);r(f,d,v,m,l[c]=new Array(h),p,t);for(var y,b,x=0,w=0;x<g;++x)if(y=v[x]){for(x>=w&&(w=x+1);!(b=m[w])&&++w<g;);y._next=b||null}}return(s=new Ie(s,i))._enter=u,s._exit=l,s},enter:function(){return new Ie(this._enter||this._groups.map(te),this._parents)},exit:function(){return new Ie(this._exit||this._groups.map(te),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=Math.min(r,n.length),o=new Array(r),a=0;a<i;++a)for(var s,u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d=0;d<c;++d)(s=u[d]||l[d])&&(f[d]=s);for(;a<r;++a)o[a]=t[a];return new Ie(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=ae);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(t)}return new Ie(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=X(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):ue(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=le(e+"");if(arguments.length<2){for(var r=ce(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?de:he)(this,e)}}:t?function(e){return function(){de(this,e)}}:function(e){return function(){he(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?pe:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ge:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(ve)},lower:function(){return this.each(me)},append:function(e){var t="function"==typeof e?e:q(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:q(e),r=null==t?ye:"function"==typeof t?t:K(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(be)},clone:function(e){return this.select(e?we:xe)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?ke:Ce,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return _e(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return _e(this,e,t)}})(e,t))}};var Oe=0;function Ne(){return new Pe}function Pe(){this._="@"+(++Oe).toString(36)}function De(){for(var t,n=e.event;t=n.sourceEvent;)n=t;return n}function Be(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}function Ve(e){var t=De();return t.changedTouches&&(t=t.changedTouches[0]),Be(e,t)}function ze(e,t,n){arguments.length<3&&(n=t,t=De().changedTouches);for(var r,i=0,o=t?t.length:0;i<o;++i)if((r=t[i]).identifier===n)return Be(e,r);return null}function Fe(){e.event.stopImmediatePropagation()}function Ge(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function He(e){var t=e.document.documentElement,n=Le(e).on("dragstart.drag",Ge,!0);"onselectstart"in t?n.on("selectstart.drag",Ge,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function We(e,t){var n=e.document.documentElement,r=Le(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ge,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Ze(e){return function(){return e}}function Ye(e,t,n,r,i,o,a,s,u,l){this.target=e,this.type=t,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=u,this._=l}function je(){return!e.event.button}function Ue(){return this.parentNode}function Xe(t){return null==t?{x:e.event.x,y:e.event.y}:t}function qe(){return"ontouchstart"in this}function Qe(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ke(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Je(){}Pe.prototype=Ne.prototype={constructor:Pe,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}},Ye.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var $e="\\s*([+-]?\\d+)\\s*",et="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",tt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nt=/^#([0-9a-f]{3})$/,rt=/^#([0-9a-f]{6})$/,it=new RegExp("^rgb\\("+[$e,$e,$e]+"\\)$"),ot=new RegExp("^rgb\\("+[tt,tt,tt]+"\\)$"),at=new RegExp("^rgba\\("+[$e,$e,$e,et]+"\\)$"),st=new RegExp("^rgba\\("+[tt,tt,tt,et]+"\\)$"),ut=new RegExp("^hsl\\("+[et,tt,tt]+"\\)$"),lt=new RegExp("^hsla\\("+[et,tt,tt,et]+"\\)$"),ct={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ft(e){var t;return e=(e+"").trim().toLowerCase(),(t=nt.exec(e))?new vt((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=rt.exec(e))?dt(parseInt(t[1],16)):(t=it.exec(e))?new vt(t[1],t[2],t[3],1):(t=ot.exec(e))?new vt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=at.exec(e))?ht(t[1],t[2],t[3],t[4]):(t=st.exec(e))?ht(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ut.exec(e))?yt(t[1],t[2]/100,t[3]/100,1):(t=lt.exec(e))?yt(t[1],t[2]/100,t[3]/100,t[4]):ct.hasOwnProperty(e)?dt(ct[e]):"transparent"===e?new vt(NaN,NaN,NaN,0):null}function dt(e){return new vt(e>>16&255,e>>8&255,255&e,1)}function ht(e,t,n,r){return r<=0&&(e=t=n=NaN),new vt(e,t,n,r)}function pt(e){return e instanceof Je||(e=ft(e)),e?new vt((e=e.rgb()).r,e.g,e.b,e.opacity):new vt}function gt(e,t,n,r){return 1===arguments.length?pt(e):new vt(e,t,n,null==r?1:r)}function vt(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function mt(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function yt(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xt(e,t,n,r)}function bt(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof xt)return new xt(e.h,e.s,e.l,e.opacity);if(e instanceof Je||(e=ft(e)),!e)return new xt;if(e instanceof xt)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new xt(a,s,u,e.opacity)}(e):new xt(e,t,n,null==r?1:r)}function xt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function wt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Qe(Je,ft,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),Qe(vt,gt,Ke(Je,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new vt(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new vt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+mt(this.r)+mt(this.g)+mt(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),Qe(xt,bt,Ke(Je,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new xt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new xt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new vt(wt(e>=240?e-240:e+120,i,r),wt(e,i,r),wt(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var At=Math.PI/180,Et=180/Math.PI,Mt=.96422,Ct=1,kt=.82521,Tt=4/29,_t=6/29,St=3*_t*_t,It=_t*_t*_t;function Rt(e){if(e instanceof Ot)return new Ot(e.l,e.a,e.b,e.opacity);if(e instanceof Ft){if(isNaN(e.h))return new Ot(e.l,0,0,e.opacity);var t=e.h*At;return new Ot(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof vt||(e=pt(e));var n,r,i=Bt(e.r),o=Bt(e.g),a=Bt(e.b),s=Nt((.2225045*i+.7168786*o+.0606169*a)/Ct);return i===o&&o===a?n=r=s:(n=Nt((.4360747*i+.3850649*o+.1430804*a)/Mt),r=Nt((.0139322*i+.0971045*o+.7141733*a)/kt)),new Ot(116*s-16,500*(n-s),200*(s-r),e.opacity)}function Lt(e,t,n,r){return 1===arguments.length?Rt(e):new Ot(e,t,n,null==r?1:r)}function Ot(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Nt(e){return e>It?Math.pow(e,1/3):e/St+Tt}function Pt(e){return e>_t?e*e*e:St*(e-Tt)}function Dt(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Bt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Vt(e){if(e instanceof Ft)return new Ft(e.h,e.c,e.l,e.opacity);if(e instanceof Ot||(e=Rt(e)),0===e.a&&0===e.b)return new Ft(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Et;return new Ft(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function zt(e,t,n,r){return 1===arguments.length?Vt(e):new Ft(e,t,n,null==r?1:r)}function Ft(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}Qe(Ot,Lt,Ke(Je,{brighter:function(e){return new Ot(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Ot(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new vt(Dt(3.1338561*(t=Mt*Pt(t))-1.6168667*(e=Ct*Pt(e))-.4906146*(n=kt*Pt(n))),Dt(-.9787684*t+1.9161415*e+.033454*n),Dt(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Qe(Ft,zt,Ke(Je,{brighter:function(e){return new Ft(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Ft(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Rt(this).rgb()}}));var Gt=1.78277,Ht=-.29227,Wt=-.90649,Zt=1.97294,Yt=Zt*Wt,jt=Zt*Gt,Ut=Gt*Ht- -.14861*Wt;function Xt(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof qt)return new qt(e.h,e.s,e.l,e.opacity);e instanceof vt||(e=pt(e));var t=e.g/255,n=e.b/255,r=(Ut*n+Yt*(e.r/255)-jt*t)/(Ut+Yt-jt),i=n-r,o=(Zt*(t-r)-Ht*i)/Wt,a=Math.sqrt(o*o+i*i)/(Zt*r*(1-r)),s=a?Math.atan2(o,i)*Et-120:NaN;return new qt(s<0?s+360:s,a,r,e.opacity)}(e):new qt(e,t,n,null==r?1:r)}function qt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Qt(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function Kt(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1];return Qt((n-r/t)*t,r>0?e[r-1]:2*i-o,i,o,r<t-1?e[r+2]:2*o-i)}}function Jt(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t);return Qt((n-r/t)*t,e[(r+t-1)%t],e[r%t],e[(r+1)%t],e[(r+2)%t])}}function $t(e){return function(){return e}}function en(e,t){return function(n){return e+n*t}}function tn(e,t){var n=t-e;return n?en(e,n>180||n<-180?n-360*Math.round(n/360):n):$t(isNaN(e)?t:e)}function nn(e,t){var n=t-e;return n?en(e,n):$t(isNaN(e)?t:e)}Qe(qt,Xt,Ke(Je,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new qt(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new qt(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*At,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new vt(255*(t+n*(-.14861*r+Gt*i)),255*(t+n*(Ht*r+Wt*i)),255*(t+n*(Zt*r)),this.opacity)}}));var rn=function e(t){var n=function(e){return 1==(e=+e)?nn:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):$t(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=gt(e)).r,(t=gt(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=nn(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function on(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=gt(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}var an=on(Kt),sn=on(Jt);function un(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=gn(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function ln(e,t){var n=new Date;return t-=e=+e,function(r){return n.setTime(e+t*r),n}}function cn(e,t){return t-=e=+e,function(n){return e+t*n}}function fn(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=gn(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var dn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hn=new RegExp(dn.source,"g");function pn(e,t){var n,r,i,o=dn.lastIndex=hn.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=dn.exec(e))&&(r=hn.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:cn(n,r)})),o=hn.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function gn(e,t){var n,r=typeof t;return null==t||"boolean"===r?$t(t):("number"===r?cn:"string"===r?(n=ft(t))?(t=n,rn):pn:t instanceof ft?rn:t instanceof Date?ln:Array.isArray(t)?un:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?fn:cn)(e,t)}function vn(e,t){return t-=e=+e,function(n){return Math.round(e+t*n)}}var mn,yn,bn,xn,wn=180/Math.PI,An={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function En(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*wn,skewX:Math.atan(u)*wn,scaleX:a,scaleY:s}}function Mn(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],u=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var u=a.push("translate(",null,t,null,n);s.push({i:u-4,x:cn(e,i)},{i:u-2,x:cn(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),u.push({i:n.push(i(n)+"rotate(",null,r)-2,x:cn(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s),function(e,t,n,o){e!==t?u.push({i:n.push(i(n)+"skewX(",null,r)-2,x:cn(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:cn(e,n)},{i:s-2,x:cn(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var Cn=Mn(function(e){return"none"===e?An:(mn||(mn=document.createElement("DIV"),yn=document.documentElement,bn=document.defaultView),mn.style.transform=e,e=bn.getComputedStyle(yn.appendChild(mn),null).getPropertyValue("transform"),yn.removeChild(mn),En(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),kn=Mn(function(e){return null==e?An:(xn||(xn=document.createElementNS("http://www.w3.org/2000/svg","g")),xn.setAttribute("transform",e),(e=xn.transform.baseVal.consolidate())?En((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):An)},", ",")",")"),Tn=Math.SQRT2,_n=2,Sn=4,In=1e-12;function Rn(e){return((e=Math.exp(e))+1/e)/2}function Ln(e,t){var n,r,i=e[0],o=e[1],a=e[2],s=t[2],u=t[0]-i,l=t[1]-o,c=u*u+l*l;if(c<In)r=Math.log(s/a)/Tn,n=function(e){return[i+e*u,o+e*l,a*Math.exp(Tn*e*r)]};else{var f=Math.sqrt(c),d=(s*s-a*a+Sn*c)/(2*a*_n*f),h=(s*s-a*a-Sn*c)/(2*s*_n*f),p=Math.log(Math.sqrt(d*d+1)-d),g=Math.log(Math.sqrt(h*h+1)-h);r=(g-p)/Tn,n=function(e){var t,n=e*r,s=Rn(p),c=a/(_n*f)*(s*(t=Tn*n+p,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(p));return[i+c*u,o+c*l,a*s/Rn(Tn*n+p)]}}return n.duration=1e3*r,n}function On(e){return function(t,n){var r=e((t=bt(t)).h,(n=bt(n)).h),i=nn(t.s,n.s),o=nn(t.l,n.l),a=nn(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=o(e),t.opacity=a(e),t+""}}}var Nn=On(tn),Pn=On(nn);function Dn(e){return function(t,n){var r=e((t=zt(t)).h,(n=zt(n)).h),i=nn(t.c,n.c),o=nn(t.l,n.l),a=nn(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=o(e),t.opacity=a(e),t+""}}}var Bn=Dn(tn),Vn=Dn(nn);function zn(e){return function t(n){function r(t,r){var i=e((t=Xt(t)).h,(r=Xt(r)).h),o=nn(t.s,r.s),a=nn(t.l,r.l),s=nn(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}var Fn,Gn,Hn=zn(tn),Wn=zn(nn),Zn=0,Yn=0,jn=0,Un=1e3,Xn=0,qn=0,Qn=0,Kn="object"==typeof performance&&performance.now?performance:Date,Jn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $n(){return qn||(Jn(er),qn=Kn.now()+Qn)}function er(){qn=0}function tr(){this._call=this._time=this._next=null}function nr(e,t,n){var r=new tr;return r.restart(e,t,n),r}function rr(){$n(),++Zn;for(var e,t=Fn;t;)(e=qn-t._time)>=0&&t._call.call(null,e),t=t._next;--Zn}function ir(){qn=(Xn=Kn.now())+Qn,Zn=Yn=0;try{rr()}finally{Zn=0,function(){for(var e,t,n=Fn,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Fn=t);Gn=e,ar(r)}(),qn=0}}function or(){var e=Kn.now(),t=e-Xn;t>Un&&(Qn-=t,Xn=e)}function ar(e){Zn||(Yn&&(Yn=clearTimeout(Yn)),e-qn>24?(e<1/0&&(Yn=setTimeout(ir,e-Kn.now()-Qn)),jn&&(jn=clearInterval(jn))):(jn||(Xn=Kn.now(),jn=setInterval(or,Un)),Zn=1,Jn(ir)))}function sr(e,t,n){var r=new tr;return r.restart(function(n){r.stop(),e(n+t)},t=null==t?0:+t,n),r}tr.prototype=nr.prototype={constructor:tr,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?$n():+n)+(null==t?0:+t),this._next||Gn===this||(Gn?Gn._next=this:Fn=this,Gn=this),this._call=e,this._time=n,ar()},stop:function(){this._call&&(this._call=null,this._time=1/0,ar())}};var ur=H("start","end","cancel","interrupt"),lr=[],cr=0,fr=1,dr=2,hr=3,pr=4,gr=5,vr=6;function mr(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(u){var l,c,f,d;if(n.state!==fr)return s();for(l in i)if((d=i[l]).name===n.name){if(d.state===hr)return sr(o);d.state===pr?(d.state=vr,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[l]):+l<t&&(d.state=vr,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[l])}if(sr(function(){n.state===hr&&(n.state=pr,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=dr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===dr){for(n.state=hr,r=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function a(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=gr,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);n.state===gr&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=vr,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=nr(function(e){n.state=fr,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:i,on:ur,tween:lr,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:cr})}function yr(e,t){var n=xr(e,t);if(n.state>cr)throw new Error("too late; already scheduled");return n}function br(e,t){var n=xr(e,t);if(n.state>hr)throw new Error("too late; already running");return n}function xr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function wr(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>dr&&n.state<gr,n.state=vr,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}}function Ar(e,t,n){var r=e._id;return e.each(function(){var e=br(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return xr(e,r).value[t]}}function Er(e,t){var n;return("number"==typeof t?cn:t instanceof ft?rn:(n=ft(t))?(t=n,rn):pn)(e,t)}var Mr=Re.prototype.constructor;function Cr(e){return function(){this.style.removeProperty(e)}}var kr=0;function Tr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function _r(e){return Re().transition(e)}function Sr(){return++kr}var Ir=Re.prototype;function Rr(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function Lr(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}Tr.prototype=_r.prototype={constructor:Tr,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=K(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,f=o[a]=new Array(c),d=0;d<c;++d)(s=l[d])&&(u=e.call(s,s.__data__,d,l))&&("__data__"in s&&(u.__data__=s.__data__),f[d]=u,mr(f[d],t,n,d,f,xr(s,n)));return new Tr(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=$(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var d,h=e.call(u,u.__data__,f,l),p=xr(u,n),g=0,v=h.length;g<v;++g)(d=h[g])&&mr(d,t,n,g,h,p);o.push(h),a.push(u)}return new Tr(o,a,t,n)},filter:function(e){"function"!=typeof e&&(e=ee(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new Tr(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=Math.min(r,n.length),o=new Array(r),a=0;a<i;++a)for(var s,u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d=0;d<c;++d)(s=u[d]||l[d])&&(f[d]=s);for(;a<r;++a)o[a]=t[a];return new Tr(o,this._parents,this._name,this._id)},selection:function(){return new Mr(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Sr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=xr(a,t);mr(a,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Tr(r,this._parents,e,n)},call:Ir.call,nodes:Ir.nodes,node:Ir.node,size:Ir.size,empty:Ir.empty,each:Ir.each,on:function(e,t){var n=this._id;return arguments.length<2?xr(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,o=(t+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?yr:br;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}(n,e,t))},attr:function(e,t){var n=X(e),r="transform"===n?kn:Er;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u));this.removeAttributeNS(e.space,e.local)}}:function(e,t,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u));this.removeAttribute(e)}})(n,r,Ar(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}:function(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=X(e);return this.tween(n,(r.local?function(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t(n))}}(e,i)),n}return i._value=t,i}:function(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t(n))}}(e,i)),n}return i._value=t,i})(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Cn:Er;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=ue(this,e),a=(this.style.removeProperty(e),ue(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,Cr(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=ue(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=ue(this,e)),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s))}}(e,r,Ar(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var u=br(this,e),l=u.on,c=null==u.value[a]?o||(o=Cr(t)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=ue(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&function(e,t,n){return function(r){this.style.setProperty(e,t(r),n)}}(e,o,n)),r}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Ar(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=xr(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var i=br(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=br(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}o.tween=i}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){yr(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){yr(this,e).delay=t}})(t,e)):xr(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){br(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){br(this,e).duration=t}})(t,e)):xr(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){br(this,e).ease=t}}(t,e)):xr(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each(function(){var n=br(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t})})}};var Or=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),Nr=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),Pr=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),Dr=Math.PI,Br=Dr/2;function Vr(e){return(1-Math.cos(Dr*e))/2}function zr(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}function Fr(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var Gr=4/11,Hr=6/11,Wr=8/11,Zr=.75,Yr=9/11,jr=10/11,Ur=.9375,Xr=21/22,qr=63/64,Qr=1/Gr/Gr;function Kr(e){return(e=+e)<Gr?Qr*e*e:e<Wr?Qr*(e-=Hr)*e+Zr:e<jr?Qr*(e-=Yr)*e+Ur:Qr*(e-=Xr)*e+qr}var Jr=function e(t){function n(e){return e*e*((t+1)*e-t)}return t=+t,n.overshoot=e,n}(1.70158),$r=function e(t){function n(e){return--e*e*((t+1)*e+t)+1}return t=+t,n.overshoot=e,n}(1.70158),ei=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),ti=2*Math.PI,ni=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=ti);function i(e){return t*Math.pow(2,10*--e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*ti)},i.period=function(n){return e(t,n)},i}(1,.3),ri=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=ti);function i(e){return 1-t*Math.pow(2,-10*(e=+e))*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*ti)},i.period=function(n){return e(t,n)},i}(1,.3),ii=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=ti);function i(e){return((e=2*e-1)<0?t*Math.pow(2,10*e)*Math.sin((r-e)/n):2-t*Math.pow(2,-10*e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*ti)},i.period=function(n){return e(t,n)},i}(1,.3),oi={time:null,delay:0,duration:250,ease:Lr};function ai(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return oi.time=$n(),oi;return n}Re.prototype.interrupt=function(e){return this.each(function(){wr(this,e)})},Re.prototype.transition=function(e){var t,n;e instanceof Tr?(t=e._id,e=e._name):(t=Sr(),(n=oi).time=$n(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&mr(a,e,t,l,s,n||ai(a,t));return new Tr(r,this._parents,e,t)};var si=[null];function ui(e){return function(){return e}}function li(e,t,n){this.target=e,this.type=t,this.selection=n}function ci(){e.event.stopImmediatePropagation()}function fi(){e.event.preventDefault(),e.event.stopImmediatePropagation()}var di={name:"drag"},hi={name:"space"},pi={name:"handle"},gi={name:"center"},vi={name:"x",handles:["e","w"].map(Mi),input:function(e,t){return e&&[[e[0],t[0][1]],[e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},mi={name:"y",handles:["n","s"].map(Mi),input:function(e,t){return e&&[[t[0][0],e[0]],[t[1][0],e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},yi={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Mi),input:function(e){return e},output:function(e){return e}},bi={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},xi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},wi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ai={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ei={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Mi(e){return{type:e}}function Ci(){return!e.event.button}function ki(){var e=this.ownerSVGElement||this;return[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Ti(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function _i(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Si(t){var n,r=ki,i=Ci,o=H(s,"start","brush","end"),a=6;function s(e){var n=e.property("__brush",d).selectAll(".overlay").data([Mi("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",bi.overlay).merge(n).each(function(){var e=Ti(this).extent;Le(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),e.selectAll(".selection").data([Mi("selection")]).enter().append("rect").attr("class","selection").attr("cursor",bi.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=e.selectAll(".handle").data(t.handles,function(e){return e.type});r.exit().remove(),r.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return bi[e.type]}),e.each(u).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",f)}function u(){var e=Le(this),t=Ti(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-a/2:t[0][0]-a/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-a/2:t[0][1]-a/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+a:a}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+a:a})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(e,t){return e.__brush.emitter||new c(e,t)}function c(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function f(){if(e.event.touches){if(e.event.changedTouches.length<e.event.touches.length)return fi()}else if(n)return;if(i.apply(this,arguments)){var r,o,a,s,c,f,d,h,p,g,v,m,y,b=this,x=e.event.target.__data__.type,w="selection"===(e.event.metaKey?x="overlay":x)?di:e.event.altKey?gi:pi,A=t===mi?null:Ai[x],E=t===vi?null:Ei[x],M=Ti(b),C=M.extent,k=M.selection,T=C[0][0],_=C[0][1],S=C[1][0],I=C[1][1],R=A&&E&&e.event.shiftKey,L=Ve(b),O=L,N=l(b,arguments).beforestart();"overlay"===x?M.selection=k=[[r=t===mi?T:L[0],a=t===vi?_:L[1]],[c=t===mi?S:r,d=t===vi?I:a]]:(r=k[0][0],a=k[0][1],c=k[1][0],d=k[1][1]),o=r,s=a,f=c,h=d;var P=Le(b).attr("pointer-events","none"),D=P.selectAll(".overlay").attr("cursor",bi[x]);if(e.event.touches)P.on("touchmove.brush",V,!0).on("touchend.brush touchcancel.brush",F,!0);else{var B=Le(e.event.view).on("keydown.brush",function(){switch(e.event.keyCode){case 16:R=A&&E;break;case 18:w===pi&&(A&&(c=f-p*A,r=o+p*A),E&&(d=h-g*E,a=s+g*E),w=gi,z());break;case 32:w!==pi&&w!==gi||(A<0?c=f-p:A>0&&(r=o-p),E<0?d=h-g:E>0&&(a=s-g),w=hi,D.attr("cursor",bi.selection),z());break;default:return}fi()},!0).on("keyup.brush",function(){switch(e.event.keyCode){case 16:R&&(m=y=R=!1,z());break;case 18:w===gi&&(A<0?c=f:A>0&&(r=o),E<0?d=h:E>0&&(a=s),w=pi,z());break;case 32:w===hi&&(e.event.altKey?(A&&(c=f-p*A,r=o+p*A),E&&(d=h-g*E,a=s+g*E),w=gi):(A<0?c=f:A>0&&(r=o),E<0?d=h:E>0&&(a=s),w=pi),D.attr("cursor",bi[x]),z());break;default:return}fi()},!0).on("mousemove.brush",V,!0).on("mouseup.brush",F,!0);He(e.event.view)}ci(),wr(b),u.call(b),N.start()}function V(){var e=Ve(b);!R||m||y||(Math.abs(e[0]-O[0])>Math.abs(e[1]-O[1])?y=!0:m=!0),O=e,v=!0,fi(),z()}function z(){var e;switch(p=O[0]-L[0],g=O[1]-L[1],w){case hi:case di:A&&(p=Math.max(T-r,Math.min(S-c,p)),o=r+p,f=c+p),E&&(g=Math.max(_-a,Math.min(I-d,g)),s=a+g,h=d+g);break;case pi:A<0?(p=Math.max(T-r,Math.min(S-r,p)),o=r+p,f=c):A>0&&(p=Math.max(T-c,Math.min(S-c,p)),o=r,f=c+p),E<0?(g=Math.max(_-a,Math.min(I-a,g)),s=a+g,h=d):E>0&&(g=Math.max(_-d,Math.min(I-d,g)),s=a,h=d+g);break;case gi:A&&(o=Math.max(T,Math.min(S,r-p*A)),f=Math.max(T,Math.min(S,c+p*A))),E&&(s=Math.max(_,Math.min(I,a-g*E)),h=Math.max(_,Math.min(I,d+g*E)))}f<o&&(A*=-1,e=r,r=c,c=e,e=o,o=f,f=e,x in xi&&D.attr("cursor",bi[x=xi[x]])),h<s&&(E*=-1,e=a,a=d,d=e,e=s,s=h,h=e,x in wi&&D.attr("cursor",bi[x=wi[x]])),M.selection&&(k=M.selection),m&&(o=k[0][0],f=k[1][0]),y&&(s=k[0][1],h=k[1][1]),k[0][0]===o&&k[0][1]===s&&k[1][0]===f&&k[1][1]===h||(M.selection=[[o,s],[f,h]],u.call(b),N.brush())}function F(){if(ci(),e.event.touches){if(e.event.touches.length)return;n&&clearTimeout(n),n=setTimeout(function(){n=null},500),P.on("touchmove.brush touchend.brush touchcancel.brush",null)}else We(e.event.view,v),B.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);P.attr("pointer-events","all"),D.attr("cursor",bi.overlay),M.selection&&(k=M.selection),_i(k)&&(M.selection=null,u.call(b)),N.end()}}function d(){var e=this.__brush||{selection:null};return e.extent=r.apply(this,arguments),e.dim=t,e}return s.move=function(e,n){e.selection?e.on("start.brush",function(){l(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){l(this,arguments).end()}).tween("brush",function(){var e=this,r=e.__brush,i=l(e,arguments),o=r.selection,a=t.input("function"==typeof n?n.apply(this,arguments):n,r.extent),s=gn(o,a);function c(t){r.selection=1===t&&_i(a)?null:s(t),u.call(e),i.brush()}return o&&a?c:c(1)}):e.each(function(){var e=arguments,r=this.__brush,i=t.input("function"==typeof n?n.apply(this,e):n,r.extent),o=l(this,e).beforestart();wr(this),r.selection=null==i||_i(i)?null:i,u.call(this),o.start().brush().end()})},c.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){Te(new li(s,e,t.output(this.state.selection)),o.apply,o,[e,this.that,this.args])}},s.extent=function(e){return arguments.length?(r="function"==typeof e?e:ui([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),s):r},s.filter=function(e){return arguments.length?(i="function"==typeof e?e:ui(!!e),s):i},s.handleSize=function(e){return arguments.length?(a=+e,s):a},s.on=function(){var e=o.on.apply(o,arguments);return e===o?s:e},s}var Ii=Math.cos,Ri=Math.sin,Li=Math.PI,Oi=Li/2,Ni=2*Li,Pi=Math.max,Di=Array.prototype.slice;function Bi(e){return function(){return e}}var Vi=Math.PI,zi=2*Vi,Fi=zi-1e-6;function Gi(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Hi(){return new Gi}function Wi(e){return e.source}function Zi(e){return e.target}function Yi(e){return e.radius}function ji(e){return e.startAngle}function Ui(e){return e.endAngle}function Xi(){}function qi(e,t){var n=new Xi;if(e instanceof Xi)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,i=-1,o=e.length;if(null==t)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t(r=e[i],i,e),r)}else if(e)for(var a in e)n.set(a,e[a]);return n}function Qi(){return{}}function Ki(e,t,n){e[t]=n}function Ji(){return qi()}function $i(e,t,n){e.set(t,n)}function eo(){}Gi.prototype=Hi.prototype={constructor:Gi,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){var o=this._x1,a=this._y1,s=(n=+n)-(e=+e),u=(r=+r)-(t=+t),l=o-e,c=a-t,f=l*l+c*c;if((i=+i)<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>1e-6)if(Math.abs(c*s-u*l)>1e-6&&i){var d=n-o,h=r-a,p=s*s+u*u,g=d*d+h*h,v=Math.sqrt(p),m=Math.sqrt(f),y=i*Math.tan((Vi-Math.acos((p+f-g)/(2*v*m)))/2),b=y/m,x=y/v;Math.abs(b-1)>1e-6&&(this._+="L"+(e+b*l)+","+(t+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>l*h)+","+(this._x1=e+x*s)+","+(this._y1=t+x*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,r,i,o){e=+e,t=+t;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=e+a,l=t+s,c=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%zi+zi),f>Fi?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=Vi)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},Xi.prototype=qi.prototype={constructor:Xi,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var to=qi.prototype;function no(e,t){var n=new eo;if(e instanceof eo)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}eo.prototype=no.prototype={constructor:eo,has:to.has,add:function(e){return this["$"+(e+="")]=e,this},remove:to.remove,clear:to.clear,values:to.keys,size:to.size,empty:to.empty,each:to.each};var ro=Array.prototype.slice;function io(e,t){return e-t}function oo(e){return function(){return e}}function ao(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=so(e,t[r]))return n;return 0}function so(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var u=e[o],l=u[0],c=u[1],f=e[s],d=f[0],h=f[1];if(uo(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function uo(e,t,n){var r,i,o,a;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(i=e[r=+(e[0]===t[0])],a=t[r],i<=(o=n[r])&&o<=a||a<=o&&o<=i)}function lo(){}var co=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function fo(){var e=1,t=1,n=E,r=s;function i(e){var t=n(e);if(Array.isArray(t))t=t.slice().sort(io);else{var r=c(e),i=r[0],a=r[1];t=A(i,a,t),t=v(Math.floor(i/t)*t,Math.floor(a/t)*t,t)}return t.map(function(t){return o(e,t)})}function o(n,i){var o=[],s=[];return function(n,r,i){var o,s,u,l,c,f=new Array,d=new Array;for(o=s=-1,co[(u=n[0]>=r)<<1].forEach(h);++o<e-1;)co[u|(u=n[o+1]>=r)<<1].forEach(h);for(co[u<<0].forEach(h);++s<t-1;){for(o=-1,co[(u=n[s*e+e]>=r)<<1|(l=n[s*e]>=r)<<2].forEach(h);++o<e-1;)c=l,co[u|(u=n[s*e+e+o+1]>=r)<<1|(l=n[s*e+o+1]>=r)<<2|c<<3].forEach(h);co[u|l<<3].forEach(h)}for(o=-1,co[(l=n[s*e]>=r)<<2].forEach(h);++o<e-1;)c=l,co[(l=n[s*e+o+1]>=r)<<2|c<<3].forEach(h);function h(e){var t,n,r=[e[0][0]+o,e[0][1]+s],u=[e[1][0]+o,e[1][1]+s],l=a(r),c=a(u);(t=d[l])?(n=f[c])?(delete d[t.end],delete f[n.start],t===n?(t.ring.push(u),i(t.ring)):f[t.start]=d[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete d[t.end],t.ring.push(u),d[t.end=c]=t):(t=f[c])?(n=d[l])?(delete f[t.start],delete d[n.end],t===n?(t.ring.push(u),i(t.ring)):f[n.start]=d[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete f[t.start],t.ring.unshift(r),f[t.start=l]=t):f[l]=d[c]={start:l,end:c,ring:[r,u]}}co[l<<3].forEach(h)}(n,i,function(e){r(e,n,i),function(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?o.push([e]):s.push(e)}),s.forEach(function(e){for(var t,n=0,r=o.length;n<r;++n)if(-1!==ao((t=o[n])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:i,coordinates:o}}function a(t){return 2*t[0]+t[1]*(e+1)*4}function s(n,r,i){n.forEach(function(n){var o,a=n[0],s=n[1],u=0|a,l=0|s,c=r[l*e+u];a>0&&a<e&&u===a&&(n[0]=a+(i-(o=r[l*e+u-1]))/(c-o)-.5),s>0&&s<t&&l===s&&(n[1]=s+(i-(o=r[(l-1)*e+u]))/(c-o)-.5)})}return i.contour=o,i.size=function(n){if(!arguments.length)return[e,t];var r=Math.ceil(n[0]),o=Math.ceil(n[1]);if(!(r>0&&o>0))throw new Error("invalid size");return e=r,t=o,i},i.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?oo(ro.call(e)):oo(e),i):n},i.smooth=function(e){return arguments.length?(r=e?s:lo,i):r===s},i}function ho(e,t,n){for(var r=e.width,i=e.height,o=1+(n<<1),a=0;a<i;++a)for(var s=0,u=0;s<r+n;++s)s<r&&(u+=e.data[s+a*r]),s>=n&&(s>=o&&(u-=e.data[s-o+a*r]),t.data[s-n+a*r]=u/Math.min(s+1,r-1+o-s,o))}function po(e,t,n){for(var r=e.width,i=e.height,o=1+(n<<1),a=0;a<r;++a)for(var s=0,u=0;s<i+n;++s)s<i&&(u+=e.data[a+s*r]),s>=n&&(s>=o&&(u-=e.data[a+(s-o)*r]),t.data[a+(s-n)*r]=u/Math.min(s+1,i-1+o-s,o))}function go(e){return e[0]}function vo(e){return e[1]}function mo(){return 1}var yo={},bo={},xo=34,wo=10,Ao=13;function Eo(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function Mo(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function Co(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function ko(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,u=o<=0,l=!1;function c(){if(u)return bo;if(l)return l=!1,yo;var t,r,i=a;if(e.charCodeAt(i)===xo){for(;a++<o&&e.charCodeAt(a)!==xo||e.charCodeAt(++a)===xo;);return(t=a)>=o?u=!0:(r=e.charCodeAt(a++))===wo?l=!0:r===Ao&&(l=!0,e.charCodeAt(a)===wo&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if((r=e.charCodeAt(t=a++))===wo)l=!0;else if(r===Ao)l=!0,e.charCodeAt(a)===wo&&++a;else if(r!==n)continue;return e.slice(i,t)}return u=!0,e.slice(i,o)}for(e.charCodeAt(o-1)===wo&&--o,e.charCodeAt(o-1)===Ao&&--o;(r=c())!==bo;){for(var f=[];r!==yo&&r!==bo;)f.push(r),r=c();t&&null==(f=t(f,s++))||i.push(f)}return i}function i(t,n){return t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?function(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+Co(-t,6):t>9999?"+"+Co(t,6):Co(t,4))+"-"+Co(e.getUTCMonth()+1,2)+"-"+Co(e.getUTCDate(),2)+(o?"T"+Co(n,2)+":"+Co(r,2)+":"+Co(i,2)+"."+Co(o,3)+"Z":i?"T"+Co(n,2)+":"+Co(r,2)+":"+Co(i,2)+"Z":r||n?"T"+Co(n,2)+":"+Co(r,2)+"Z":"")}(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=Eo(e);return function(r,i){return t(n(r),i,e)}}(e,t):Eo(e)});return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=Mo(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=Mo(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")}}}var To=ko(","),_o=To.parse,So=To.parseRows,Io=To.format,Ro=To.formatBody,Lo=To.formatRows,Oo=ko("\t"),No=Oo.parse,Po=Oo.parseRows,Do=Oo.format,Bo=Oo.formatBody,Vo=Oo.formatRows;function zo(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}function Fo(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}function Go(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Ho(e,t){return fetch(e,t).then(Go)}function Wo(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),Ho(t,n).then(function(t){return e(t,r)})}}var Zo=Wo(_o),Yo=Wo(No);function jo(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.json()}function Uo(e){return function(t,n){return Ho(t,n).then(function(t){return(new DOMParser).parseFromString(t,e)})}}var Xo=Uo("application/xml"),qo=Uo("text/html"),Qo=Uo("image/svg+xml");function Ko(e){return function(){return e}}function Jo(){return 1e-6*(Math.random()-.5)}function $o(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,u,l,c,f,d,h=e._root,p={data:r},g=e._x0,v=e._y0,m=e._x1,y=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((l=t>=(o=(g+m)/2))?g=o:m=o,(c=n>=(a=(v+y)/2))?v=a:y=a,i=h,!(h=h[f=c<<1|l]))return i[f]=p,e;if(s=+e._x.call(null,h.data),u=+e._y.call(null,h.data),t===s&&n===u)return p.next=h,i?i[f]=p:e._root=p,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(l=t>=(o=(g+m)/2))?g=o:m=o,(c=n>=(a=(v+y)/2))?v=a:y=a}while((f=c<<1|l)==(d=(u>=a)<<1|s>=o));return i[d]=h,i[f]=p,e}function ea(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function ta(e){return e[0]}function na(e){return e[1]}function ra(e,t,n){var r=new ia(null==t?ta:t,null==n?na:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function ia(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function oa(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var aa=ra.prototype=ia.prototype;function sa(e){return e.x+e.vx}function ua(e){return e.y+e.vy}function la(e){return e.index}function ca(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function fa(e){return e.x}function da(e){return e.y}aa.copy=function(){var e,t,n=new ia(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=oa(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=oa(t));return n},aa.add=function(e){var t=+this._x.call(null,e),n=+this._y.call(null,e);return $o(this.cover(t,n),t,n,e)},aa.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<o;++n)$o(this,a[n],s[n],e[n]);return this},aa.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,u=i-n,l=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},aa.data=function(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},aa.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},aa.find=function(e,t,n){var r,i,o,a,s,u,l,c=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],g=this._root;for(g&&p.push(new ea(g,c,f,d,h)),null==n?n=1/0:(c=e-n,f=t-n,d=e+n,h=t+n,n*=n);u=p.pop();)if(!(!(g=u.node)||(i=u.x0)>d||(o=u.y0)>h||(a=u.x1)<c||(s=u.y1)<f))if(g.length){var v=(i+a)/2,m=(o+s)/2;p.push(new ea(g[3],v,m,a,s),new ea(g[2],i,m,v,s),new ea(g[1],v,o,a,m),new ea(g[0],i,o,v,m)),(l=(t>=m)<<1|e>=v)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var y=e-+this._x.call(null,g.data),b=t-+this._y.call(null,g.data),x=y*y+b*b;if(x<n){var w=Math.sqrt(n=x);c=e-w,f=t-w,d=e+w,h=t+w,r=g.data}}return r},aa.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,u,l,c,f,d,h=this._root,p=this._x0,g=this._y0,v=this._x1,m=this._y1;if(!h)return this;if(h.length)for(;;){if((l=o>=(s=(p+v)/2))?p=s:v=s,(c=a>=(u=(g+m)/2))?g=u:m=u,t=h,!(h=h[f=c<<1|l]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},aa.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},aa.root=function(){return this._root},aa.size=function(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},aa.visit=function(e){var t,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new ea(u,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(u=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&u.length){var l=(r+o)/2,c=(i+a)/2;(n=u[3])&&s.push(new ea(n,l,c,o,a)),(n=u[2])&&s.push(new ea(n,r,c,l,a)),(n=u[1])&&s.push(new ea(n,l,i,o,c)),(n=u[0])&&s.push(new ea(n,r,i,l,c))}return this},aa.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new ea(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,u=t.x1,l=t.y1,c=(a+u)/2,f=(s+l)/2;(o=i[0])&&n.push(new ea(o,a,s,c,f)),(o=i[1])&&n.push(new ea(o,c,s,u,f)),(o=i[2])&&n.push(new ea(o,a,f,c,l)),(o=i[3])&&n.push(new ea(o,c,f,u,l))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},aa.x=function(e){return arguments.length?(this._x=e,this):this._x},aa.y=function(e){return arguments.length?(this._y=e,this):this._y};var ha=10,pa=Math.PI*(3-Math.sqrt(5));function ga(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function va(e){return(e=ga(Math.abs(e)))?e[1]:NaN}var ma,ya=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ba(e){return new xa(e)}function xa(e){if(!(t=ya.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}function wa(e,t){var n=ga(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}ba.prototype=xa.prototype,xa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Aa={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return wa(100*e,t)},r:wa,s:function(e,t){var n=ga(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(ma=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ga(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function Ea(e){return e}var Ma,Ca=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function ka(e){var t,n,r=e.grouping&&e.thousands?(t=e.grouping,n=e.thousands,function(e,r){for(var i=e.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}):Ea,i=e.currency,o=e.decimal,a=e.numerals?function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(e.numerals):Ea,s=e.percent||"%";function u(e){var t=(e=ba(e)).fill,n=e.align,u=e.sign,l=e.symbol,c=e.zero,f=e.width,d=e.comma,h=e.precision,p=e.trim,g=e.type;"n"===g?(d=!0,g="g"):Aa[g]||(null==h&&(h=12),p=!0,g="g"),(c||"0"===t&&"="===n)&&(c=!0,t="0",n="=");var v="$"===l?i[0]:"#"===l&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",m="$"===l?i[1]:/[%p]/.test(g)?s:"",y=Aa[g],b=/[defgprs%]/.test(g);function x(e){var i,s,l,x=v,w=m;if("c"===g)w=y(e)+w,e="";else{var A=(e=+e)<0;if(e=y(Math.abs(e),h),p&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),A&&0==+e&&(A=!1),x=(A?"("===u?u:"-":"-"===u||"("===u?"":u)+x,w=("s"===g?Ca[8+ma/3]:"")+w+(A&&"("===u?")":""),b)for(i=-1,s=e.length;++i<s;)if(48>(l=e.charCodeAt(i))||l>57){w=(46===l?o+e.slice(i+1):e.slice(i))+w,e=e.slice(0,i);break}}d&&!c&&(e=r(e,1/0));var E=x.length+e.length+w.length,M=E<f?new Array(f-E+1).join(t):"";switch(d&&c&&(e=r(M+e,M.length?f-w.length:1/0),M=""),n){case"<":e=x+e+w+M;break;case"=":e=x+M+e+w;break;case"^":e=M.slice(0,E=M.length>>1)+x+e+w+M.slice(E);break;default:e=M+x+e+w}return a(e)}return h=null==h?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),x.toString=function(){return e+""},x}return{format:u,formatPrefix:function(e,t){var n=u(((e=ba(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(va(t)/3))),i=Math.pow(10,-r),o=Ca[8+r/3];return function(e){return n(i*e)+o}}}}function Ta(t){return Ma=ka(t),e.format=Ma.format,e.formatPrefix=Ma.formatPrefix,Ma}function _a(e){return Math.max(0,-va(Math.abs(e)))}function Sa(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(va(t)/3)))-va(Math.abs(e)))}function Ia(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,va(t)-va(e))+1}function Ra(){return new La}function La(){this.reset()}Ta({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),La.prototype={constructor:La,reset:function(){this.s=this.t=0},add:function(e){Na(Oa,e,this.t),Na(this,Oa.s,this.s),this.s?this.t+=Oa.t:this.s=Oa.t},valueOf:function(){return this.s}};var Oa=new La;function Na(e,t,n){var r=e.s=t+n,i=r-t;e.t=t-(r-i)+(n-i)}var Pa=1e-6,Da=Math.PI,Ba=Da/2,Va=Da/4,za=2*Da,Fa=180/Da,Ga=Da/180,Ha=Math.abs,Wa=Math.atan,Za=Math.atan2,Ya=Math.cos,ja=Math.ceil,Ua=Math.exp,Xa=Math.log,qa=Math.pow,Qa=Math.sin,Ka=Math.sign||function(e){return e>0?1:e<0?-1:0},Ja=Math.sqrt,$a=Math.tan;function es(e){return e>1?0:e<-1?Da:Math.acos(e)}function ts(e){return e>1?Ba:e<-1?-Ba:Math.asin(e)}function ns(e){return(e=Qa(e/2))*e}function rs(){}function is(e,t){e&&as.hasOwnProperty(e.type)&&as[e.type](e,t)}var os={Feature:function(e,t){is(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)is(n[r].geometry,t)}},as={Sphere:function(e,t){t.sphere()},Point:function(e,t){t.point((e=e.coordinates)[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)t.point((e=n[r])[0],e[1],e[2])},LineString:function(e,t){ss(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ss(n[r],t,0)},Polygon:function(e,t){us(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)us(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)is(n[r],t)}};function ss(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)t.point((r=e[i])[0],r[1],r[2]);t.lineEnd()}function us(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ss(e[n],t,1);t.polygonEnd()}function ls(e,t){e&&os.hasOwnProperty(e.type)?os[e.type](e,t):is(e,t)}var cs,fs,ds,hs,ps,gs=Ra(),vs=Ra(),ms={point:rs,lineStart:rs,lineEnd:rs,polygonStart:function(){gs.reset(),ms.lineStart=ys,ms.lineEnd=bs},polygonEnd:function(){var e=+gs;vs.add(e<0?za+e:e),this.lineStart=this.lineEnd=this.point=rs},sphere:function(){vs.add(za)}};function ys(){ms.point=xs}function bs(){ws(cs,fs)}function xs(e,t){ms.point=ws,cs=e,fs=t,ds=e*=Ga,hs=Ya(t=(t*=Ga)/2+Va),ps=Qa(t)}function ws(e,t){var n=(e*=Ga)-ds,r=n>=0?1:-1,i=r*n,o=Ya(t=(t*=Ga)/2+Va),a=Qa(t),s=ps*a,u=hs*o+s*Ya(i),l=s*r*Qa(i);gs.add(Za(l,u)),ds=e,hs=o,ps=a}function As(e){return[Za(e[1],e[0]),ts(e[2])]}function Es(e){var t=e[0],n=e[1],r=Ya(n);return[r*Ya(t),r*Qa(t),Qa(n)]}function Ms(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Cs(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function ks(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Ts(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _s(e){var t=Ja(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ss,Is,Rs,Ls,Os,Ns,Ps,Ds,Bs,Vs,zs,Fs,Gs,Hs,Ws,Zs,Ys,js,Us,Xs,qs,Qs,Ks,Js,$s,eu,tu=Ra(),nu={point:ru,lineStart:ou,lineEnd:au,polygonStart:function(){nu.point=su,nu.lineStart=uu,nu.lineEnd=lu,tu.reset(),ms.polygonStart()},polygonEnd:function(){ms.polygonEnd(),nu.point=ru,nu.lineStart=ou,nu.lineEnd=au,gs<0?(Ss=-(Rs=180),Is=-(Ls=90)):tu>Pa?Ls=90:tu<-Pa&&(Is=-90),Vs[0]=Ss,Vs[1]=Rs}};function ru(e,t){Bs.push(Vs=[Ss=e,Rs=e]),t<Is&&(Is=t),t>Ls&&(Ls=t)}function iu(e,t){var n=Es([e*Ga,t*Ga]);if(Ds){var r=Cs(Ds,n),i=Cs([r[1],-r[0],0],r);_s(i),i=As(i);var o,a=e-Os,s=a>0?1:-1,u=i[0]*Fa*s,l=Ha(a)>180;l^(s*Os<u&&u<s*e)?(o=i[1]*Fa)>Ls&&(Ls=o):l^(s*Os<(u=(u+360)%360-180)&&u<s*e)?(o=-i[1]*Fa)<Is&&(Is=o):(t<Is&&(Is=t),t>Ls&&(Ls=t)),l?e<Os?cu(Ss,e)>cu(Ss,Rs)&&(Rs=e):cu(e,Rs)>cu(Ss,Rs)&&(Ss=e):Rs>=Ss?(e<Ss&&(Ss=e),e>Rs&&(Rs=e)):e>Os?cu(Ss,e)>cu(Ss,Rs)&&(Rs=e):cu(e,Rs)>cu(Ss,Rs)&&(Ss=e)}else Bs.push(Vs=[Ss=e,Rs=e]);t<Is&&(Is=t),t>Ls&&(Ls=t),Ds=n,Os=e}function ou(){nu.point=iu}function au(){Vs[0]=Ss,Vs[1]=Rs,nu.point=ru,Ds=null}function su(e,t){if(Ds){var n=e-Os;tu.add(Ha(n)>180?n+(n>0?360:-360):n)}else Ns=e,Ps=t;ms.point(e,t),iu(e,t)}function uu(){ms.lineStart()}function lu(){su(Ns,Ps),ms.lineEnd(),Ha(tu)>Pa&&(Ss=-(Rs=180)),Vs[0]=Ss,Vs[1]=Rs,Ds=null}function cu(e,t){return(t-=e)<0?t+360:t}function fu(e,t){return e[0]-t[0]}function du(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var hu={sphere:rs,point:pu,lineStart:vu,lineEnd:bu,polygonStart:function(){hu.lineStart=xu,hu.lineEnd=wu},polygonEnd:function(){hu.lineStart=vu,hu.lineEnd=bu}};function pu(e,t){e*=Ga;var n=Ya(t*=Ga);gu(n*Ya(e),n*Qa(e),Qa(t))}function gu(e,t,n){Gs+=(e-Gs)/++zs,Hs+=(t-Hs)/zs,Ws+=(n-Ws)/zs}function vu(){hu.point=mu}function mu(e,t){e*=Ga;var n=Ya(t*=Ga);Js=n*Ya(e),$s=n*Qa(e),eu=Qa(t),hu.point=yu,gu(Js,$s,eu)}function yu(e,t){e*=Ga;var n=Ya(t*=Ga),r=n*Ya(e),i=n*Qa(e),o=Qa(t),a=Za(Ja((a=$s*o-eu*i)*a+(a=eu*r-Js*o)*a+(a=Js*i-$s*r)*a),Js*r+$s*i+eu*o);Fs+=a,Zs+=a*(Js+(Js=r)),Ys+=a*($s+($s=i)),js+=a*(eu+(eu=o)),gu(Js,$s,eu)}function bu(){hu.point=pu}function xu(){hu.point=Au}function wu(){Eu(Qs,Ks),hu.point=pu}function Au(e,t){Qs=e,Ks=t,e*=Ga,t*=Ga,hu.point=Eu;var n=Ya(t);Js=n*Ya(e),$s=n*Qa(e),eu=Qa(t),gu(Js,$s,eu)}function Eu(e,t){e*=Ga;var n=Ya(t*=Ga),r=n*Ya(e),i=n*Qa(e),o=Qa(t),a=$s*o-eu*i,s=eu*r-Js*o,u=Js*i-$s*r,l=Ja(a*a+s*s+u*u),c=ts(l),f=l&&-c/l;Us+=f*a,Xs+=f*s,qs+=f*u,Fs+=c,Zs+=c*(Js+(Js=r)),Ys+=c*($s+($s=i)),js+=c*(eu+(eu=o)),gu(Js,$s,eu)}function Mu(e){return function(){return e}}function Cu(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function ku(e,t){return[Ha(e)>Da?e+Math.round(-e/za)*za:e,t]}function Tu(e,t,n){return(e%=za)?t||n?Cu(Su(e),Iu(t,n)):Su(e):t||n?Iu(t,n):ku}function _u(e){return function(t,n){return[(t+=e)>Da?t-za:t<-Da?t+za:t,n]}}function Su(e){var t=_u(e);return t.invert=_u(-e),t}function Iu(e,t){var n=Ya(e),r=Qa(e),i=Ya(t),o=Qa(t);function a(e,t){var a=Ya(t),s=Ya(e)*a,u=Qa(e)*a,l=Qa(t),c=l*n+s*r;return[Za(u*i-c*o,s*n-l*r),ts(c*i+u*o)]}return a.invert=function(e,t){var a=Ya(t),s=Ya(e)*a,u=Qa(e)*a,l=Qa(t),c=l*i-u*o;return[Za(u*i+l*o,s*n+c*r),ts(c*n-s*r)]},a}function Ru(e){function t(t){return(t=e(t[0]*Ga,t[1]*Ga))[0]*=Fa,t[1]*=Fa,t}return e=Tu(e[0]*Ga,e[1]*Ga,e.length>2?e[2]*Ga:0),t.invert=function(t){return(t=e.invert(t[0]*Ga,t[1]*Ga))[0]*=Fa,t[1]*=Fa,t},t}function Lu(e,t,n,r,i,o){if(n){var a=Ya(t),s=Qa(t),u=r*n;null==i?(i=t+r*za,o=t-u/2):(i=Ou(a,i),o=Ou(a,o),(r>0?i<o:i>o)&&(i+=r*za));for(var l,c=i;r>0?c>o:c<o;c-=u)l=As([a,-s*Ya(c),-s*Qa(c)]),e.point(l[0],l[1])}}function Ou(e,t){(t=Es(t))[0]-=e,_s(t);var n=es(-t[1]);return((-t[2]<0?-n:n)+za-Pa)%za}function Nu(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:rs,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Pu(e,t){return Ha(e[0]-t[0])<Pa&&Ha(e[1]-t[1])<Pa}function Du(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Bu(e,t,n,r,i){var o,a,s=[],u=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],a=e[t];if(Pu(r,a)){for(i.lineStart(),o=0;o<t;++o)i.point((r=e[o])[0],r[1]);i.lineEnd()}else s.push(n=new Du(r,e,null,!0)),u.push(n.o=new Du(r,null,n,!1)),s.push(n=new Du(a,e,null,!1)),u.push(n.o=new Du(a,null,n,!0))}}),s.length){for(u.sort(t),Vu(s),Vu(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;l=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(o=(l=d.p.z).length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}l=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}}function Vu(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}ku.invert=ku;var zu=Ra();function Fu(e,t){var n=t[0],r=t[1],i=Qa(r),o=[Qa(n),-Ya(n),0],a=0,s=0;zu.reset(),1===i?r=Ba+Pa:-1===i&&(r=-Ba-Pa);for(var u=0,l=e.length;u<l;++u)if(f=(c=e[u]).length)for(var c,f,d=c[f-1],h=d[0],p=d[1]/2+Va,g=Qa(p),v=Ya(p),m=0;m<f;++m,h=b,g=w,v=A,d=y){var y=c[m],b=y[0],x=y[1]/2+Va,w=Qa(x),A=Ya(x),E=b-h,M=E>=0?1:-1,C=M*E,k=C>Da,T=g*w;if(zu.add(Za(T*M*Qa(C),v*A+T*Ya(C))),a+=k?E+M*za:E,k^h>=n^b>=n){var _=Cs(Es(d),Es(y));_s(_);var S=Cs(o,_);_s(S);var I=(k^E>=0?-1:1)*ts(S[2]);(r>I||r===I&&(_[0]||_[1]))&&(s+=k^E>=0?1:-1)}}return(a<-Pa||a<Pa&&zu<-Pa)^1&s}function Gu(e,t,n,r){return function(i){var o,a,s,u=t(i),l=Nu(),c=t(l),f=!1,d={point:h,lineStart:g,lineEnd:v,polygonStart:function(){d.point=m,d.lineStart=y,d.lineEnd=b,a=[],o=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=v,a=k(a);var e=Fu(o,r);a.length?(f||(i.polygonStart(),f=!0),Bu(a,Wu,e,n,i)):e&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(t,n){e(t,n)&&i.point(t,n)}function p(e,t){u.point(e,t)}function g(){d.point=p,u.lineStart()}function v(){d.point=h,u.lineEnd()}function m(e,t){s.push([e,t]),c.point(e,t)}function y(){c.lineStart(),s=[]}function b(){m(s[0][0],s[0][1]),c.lineEnd();var e,t,n,r,u=c.clean(),d=l.result(),h=d.length;if(s.pop(),o.push(s),s=null,h)if(1&u){if((t=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else h>1&&2&u&&d.push(d.pop().concat(d.shift())),a.push(d.filter(Hu))}return d}}function Hu(e){return e.length>1}function Wu(e,t){return((e=e.x)[0]<0?e[1]-Ba-Pa:Ba-e[1])-((t=t.x)[0]<0?t[1]-Ba-Pa:Ba-t[1])}var Zu=Gu(function(){return!0},function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?Da:-Da,u=Ha(o-n);Ha(u-Da)<Pa?(e.point(n,r=(r+a)/2>0?Ba:-Ba),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&u>=Da&&(Ha(n-i)<Pa&&(n-=i*Pa),Ha(o-s)<Pa&&(o-=s*Pa),r=function(e,t,n,r){var i,o,a=Qa(e-n);return Ha(a)>Pa?Wa((Qa(t)*(o=Ya(r))*Qa(n)-Qa(r)*(i=Ya(t))*Qa(e))/(i*o*a)):(t+r)/2}(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}},function(e,t,n,r){var i;if(null==e)r.point(-Da,i=n*Ba),r.point(0,i),r.point(Da,i),r.point(Da,0),r.point(Da,-i),r.point(0,-i),r.point(-Da,-i),r.point(-Da,0),r.point(-Da,i);else if(Ha(e[0]-t[0])>Pa){var o=e[0]<t[0]?Da:-Da;r.point(-o,i=n*o/2),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])},[-Da,-Ba]);function Yu(e){var t=Ya(e),n=6*Ga,r=t>0,i=Ha(t)>Pa;function o(e,n){return Ya(e)*Ya(n)>t}function a(e,n,r){var i=[1,0,0],o=Cs(Es(e),Es(n)),a=Ms(o,o),s=o[0],u=a-s*s;if(!u)return!r&&e;var l=t*a/u,c=-t*s/u,f=Cs(i,o),d=Ts(i,l);ks(d,Ts(o,c));var h=f,p=Ms(d,h),g=Ms(h,h),v=p*p-g*(Ms(d,d)-1);if(!(v<0)){var m=Ja(v),y=Ts(h,(-p-m)/g);if(ks(y,d),y=As(y),!r)return y;var b,x=e[0],w=n[0],A=e[1],E=n[1];w<x&&(b=x,x=w,w=b);var M=w-x,C=Ha(M-Da)<Pa;if(!C&&E<A&&(b=A,A=E,E=b),C||M<Pa?C?A+E>0^y[1]<(Ha(y[0]-x)<Pa?A:E):A<=y[1]&&y[1]<=E:M>Da^(x<=y[0]&&y[0]<=w)){var k=Ts(h,(-p+m)/g);return ks(k,d),[y,As(k)]}}}function s(t,n){var i=r?e:Da-e,o=0;return t<-i?o|=1:t>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return Gu(o,function(e){var t,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,d){var h,p=[f,d],g=o(f,d),v=r?g?0:s(f,d):g?s(f+(f<0?Da:-Da),d):0;if(!t&&(l=u=g)&&e.lineStart(),g!==u&&(!(h=a(t,p))||Pu(t,h)||Pu(p,h))&&(p[0]+=Pa,p[1]+=Pa,g=o(p[0],p[1])),g!==u)c=0,g?(e.lineStart(),h=a(p,t),e.point(h[0],h[1])):(h=a(t,p),e.point(h[0],h[1]),e.lineEnd()),t=h;else if(i&&t&&r^g){var m;v&n||!(m=a(p,t,!0))||(c=0,r?(e.lineStart(),e.point(m[0][0],m[0][1]),e.point(m[1][0],m[1][1]),e.lineEnd()):(e.point(m[1][0],m[1][1]),e.lineEnd(),e.lineStart(),e.point(m[0][0],m[0][1])))}!g||t&&Pu(t,p)||e.point(p[0],p[1]),t=p,u=g,n=v},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return c|(l&&u)<<1}}},function(t,r,i,o){Lu(o,e,n,i,t,r)},r?[0,-e]:[-Da,e-Da])}var ju=1e9,Uu=-ju;function Xu(e,t,n,r){function i(i,o){return e<=i&&i<=n&&t<=o&&o<=r}function o(i,o,s,l){var c=0,f=0;if(null==i||(c=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+s+4)%4)!==f);else l.point(o[0],o[1])}function a(r,i){return Ha(r[0]-e)<Pa?i>0?0:3:Ha(r[0]-n)<Pa?i>0?2:1:Ha(r[1]-t)<Pa?i>0?1:0:i>0?3:2}function s(e,t){return u(e.x,t.x)}function u(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var u,l,c,f,d,h,p,g,v,m,y,b=a,x=Nu(),w={point:A,lineStart:function(){w.point=E,l&&l.push(c=[]),m=!0,v=!1,p=g=NaN},lineEnd:function(){u&&(E(f,d),h&&v&&x.rejoin(),u.push(x.result())),w.point=A,v&&b.lineEnd()},polygonStart:function(){b=x,u=[],l=[],y=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,f=s[0],d=f[0],h=f[1];u<c;++u)o=d,a=h,d=(f=s[u])[0],h=f[1],a<=r?h>r&&(d-o)*(r-a)>(h-a)*(e-o)&&++t:h<=r&&(d-o)*(r-a)<(h-a)*(e-o)&&--t;return t}(),n=y&&t,i=(u=k(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Bu(u,s,t,o,a),a.polygonEnd()),b=a,u=l=c=null}};function A(e,t){i(e,t)&&b.point(e,t)}function E(o,a){var s=i(o,a);if(l&&c.push([o,a]),m)f=o,d=a,h=s,m=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&v)b.point(o,a);else{var u=[p=Math.max(Uu,Math.min(ju,p)),g=Math.max(Uu,Math.min(ju,g))],x=[o=Math.max(Uu,Math.min(ju,o)),a=Math.max(Uu,Math.min(ju,a))];!function(e,t,n,r,i,o){var a,s=e[0],u=e[1],l=0,c=1,f=t[0]-s,d=t[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<l)return;a<c&&(c=a)}else if(d>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>c)return;a>l&&(l=a)}else if(d>0){if(a<l)return;a<c&&(c=a)}return l>0&&(e[0]=s+l*f,e[1]=u+l*d),c<1&&(t[0]=s+c*f,t[1]=u+c*d),!0}}}}}(u,x,e,t,n,r)?s&&(b.lineStart(),b.point(o,a),y=!1):(v||(b.lineStart(),b.point(u[0],u[1])),b.point(x[0],x[1]),s||b.lineEnd(),y=!1)}p=o,g=a,v=s}return w}}var qu,Qu,Ku,Ju=Ra(),$u={sphere:rs,point:rs,lineStart:function(){$u.point=tl,$u.lineEnd=el},lineEnd:rs,polygonStart:rs,polygonEnd:rs};function el(){$u.point=$u.lineEnd=rs}function tl(e,t){qu=e*=Ga,Qu=Qa(t*=Ga),Ku=Ya(t),$u.point=nl}function nl(e,t){e*=Ga;var n=Qa(t*=Ga),r=Ya(t),i=Ha(e-qu),o=Ya(i),a=r*Qa(i),s=Ku*n-Qu*r*o,u=Qu*n+Ku*r*o;Ju.add(Za(Ja(a*a+s*s),u)),qu=e,Qu=n,Ku=r}function rl(e){return Ju.reset(),ls(e,$u),+Ju}var il=[null,null],ol={type:"LineString",coordinates:il};function al(e,t){return il[0]=e,il[1]=t,rl(ol)}var sl={Feature:function(e,t){return ll(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(ll(n[r].geometry,t))return!0;return!1}},ul={Sphere:function(){return!0},Point:function(e,t){return cl(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(cl(n[r],t))return!0;return!1},LineString:function(e,t){return fl(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(fl(n[r],t))return!0;return!1},Polygon:function(e,t){return dl(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(dl(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(ll(n[r],t))return!0;return!1}};function ll(e,t){return!(!e||!ul.hasOwnProperty(e.type))&&ul[e.type](e,t)}function cl(e,t){return 0===al(e,t)}function fl(e,t){var n=al(e[0],e[1]);return al(e[0],t)+al(t,e[1])<=n+Pa}function dl(e,t){return!!Fu(e.map(hl),pl(t))}function hl(e){return(e=e.map(pl)).pop(),e}function pl(e){return[e[0]*Ga,e[1]*Ga]}function gl(e,t,n){var r=v(e,t-Pa,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function vl(e,t,n){var r=v(e,t-Pa,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function ml(){var e,t,n,r,i,o,a,s,u,l,c,f,d=10,h=d,p=90,g=360,m=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return v(ja(r/p)*p,n,p).map(c).concat(v(ja(s/g)*g,a,g).map(f)).concat(v(ja(t/d)*d,e,d).filter(function(e){return Ha(e%p)>Pa}).map(u)).concat(v(ja(o/h)*h,i,h).filter(function(e){return Ha(e%g)>Pa}).map(l))}return y.lines=function(){return b().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(a).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.extentMajor(e).extentMinor(e):y.extentMinor()},y.extentMajor=function(e){return arguments.length?(s=+e[0][1],a=+e[1][1],(r=+e[0][0])>(n=+e[1][0])&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),y.precision(m)):[[r,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(o=+n[0][1],i=+n[1][1],(t=+n[0][0])>(e=+n[1][0])&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),y.precision(m)):[[t,o],[e,i]]},y.step=function(e){return arguments.length?y.stepMajor(e).stepMinor(e):y.stepMinor()},y.stepMajor=function(e){return arguments.length?(p=+e[0],g=+e[1],y):[p,g]},y.stepMinor=function(e){return arguments.length?(d=+e[0],h=+e[1],y):[d,h]},y.precision=function(d){return arguments.length?(m=+d,u=gl(o,i,90),l=vl(t,e,m),c=gl(s,a,90),f=vl(r,n,m),y):m},y.extentMajor([[-180,-90+Pa],[180,90-Pa]]).extentMinor([[-180,-80-Pa],[180,80+Pa]])}function yl(e){return e}var bl,xl,wl,Al,El=Ra(),Ml=Ra(),Cl={point:rs,lineStart:rs,lineEnd:rs,polygonStart:function(){Cl.lineStart=kl,Cl.lineEnd=Sl},polygonEnd:function(){Cl.lineStart=Cl.lineEnd=Cl.point=rs,El.add(Ha(Ml)),Ml.reset()},result:function(){var e=El/2;return El.reset(),e}};function kl(){Cl.point=Tl}function Tl(e,t){Cl.point=_l,bl=wl=e,xl=Al=t}function _l(e,t){Ml.add(Al*e-wl*t),wl=e,Al=t}function Sl(){_l(bl,xl)}var Il,Rl,Ll,Ol,Nl=1/0,Pl=Nl,Dl=-Nl,Bl=Dl,Vl={point:function(e,t){e<Nl&&(Nl=e),e>Dl&&(Dl=e),t<Pl&&(Pl=t),t>Bl&&(Bl=t)},lineStart:rs,lineEnd:rs,polygonStart:rs,polygonEnd:rs,result:function(){var e=[[Nl,Pl],[Dl,Bl]];return Dl=Bl=-(Pl=Nl=1/0),e}},zl=0,Fl=0,Gl=0,Hl=0,Wl=0,Zl=0,Yl=0,jl=0,Ul=0,Xl={point:ql,lineStart:Ql,lineEnd:$l,polygonStart:function(){Xl.lineStart=ec,Xl.lineEnd=tc},polygonEnd:function(){Xl.point=ql,Xl.lineStart=Ql,Xl.lineEnd=$l},result:function(){var e=Ul?[Yl/Ul,jl/Ul]:Zl?[Hl/Zl,Wl/Zl]:Gl?[zl/Gl,Fl/Gl]:[NaN,NaN];return zl=Fl=Gl=Hl=Wl=Zl=Yl=jl=Ul=0,e}};function ql(e,t){zl+=e,Fl+=t,++Gl}function Ql(){Xl.point=Kl}function Kl(e,t){Xl.point=Jl,ql(Ll=e,Ol=t)}function Jl(e,t){var n=e-Ll,r=t-Ol,i=Ja(n*n+r*r);Hl+=i*(Ll+e)/2,Wl+=i*(Ol+t)/2,Zl+=i,ql(Ll=e,Ol=t)}function $l(){Xl.point=ql}function ec(){Xl.point=nc}function tc(){rc(Il,Rl)}function nc(e,t){Xl.point=rc,ql(Il=Ll=e,Rl=Ol=t)}function rc(e,t){var n=e-Ll,r=t-Ol,i=Ja(n*n+r*r);Hl+=i*(Ll+e)/2,Wl+=i*(Ol+t)/2,Zl+=i,Yl+=(i=Ol*e-Ll*t)*(Ll+e),jl+=i*(Ol+t),Ul+=3*i,ql(Ll=e,Ol=t)}function ic(e){this._context=e}ic.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,za)}},result:rs};var oc,ac,sc,uc,lc,cc=Ra(),fc={point:rs,lineStart:function(){fc.point=dc},lineEnd:function(){oc&&hc(ac,sc),fc.point=rs},polygonStart:function(){oc=!0},polygonEnd:function(){oc=null},result:function(){var e=+cc;return cc.reset(),e}};function dc(e,t){fc.point=hc,ac=uc=e,sc=lc=t}function hc(e,t){cc.add(Ja((uc-=e)*uc+(lc-=t)*lc)),uc=e,lc=t}function pc(){this._string=[]}function gc(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function vc(e){return function(t){var n=new mc;for(var r in e)n[r]=e[r];return n.stream=t,n}}function mc(){}function yc(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),ls(n,e.stream(Vl)),t(Vl.result()),null!=r&&e.clipExtent(r),e}function bc(e,t,n){return yc(e,function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+t[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,s])},n)}function xc(e,t,n){return bc(e,[[0,0],t],n)}function wc(e,t,n){return yc(e,function(n){var r=+t,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];e.scale(150*i).translate([o,a])},n)}function Ac(e,t,n){return yc(e,function(n){var r=+t,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,a])},n)}pc.prototype={_radius:4.5,_circle:gc(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=gc(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},mc.prototype={constructor:mc,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ec=16,Mc=Ya(30*Ga);function Cc(e,t){return+t?function(e,t){function n(r,i,o,a,s,u,l,c,f,d,h,p,g,v){var m=l-r,y=c-i,b=m*m+y*y;if(b>4*t&&g--){var x=a+d,w=s+h,A=u+p,E=Ja(x*x+w*w+A*A),M=ts(A/=E),C=Ha(Ha(A)-1)<Pa||Ha(o-f)<Pa?(o+f)/2:Za(w,x),k=e(C,M),T=k[0],_=k[1],S=T-r,I=_-i,R=y*S-m*I;(R*R/b>t||Ha((m*S+y*I)/b-.5)>.3||a*d+s*h+u*p<Mc)&&(n(r,i,o,a,s,u,T,_,C,x/=E,w/=E,A,g,v),v.point(T,_),n(T,_,C,x,w,A,l,c,f,d,h,p,g,v))}}return function(t){var r,i,o,a,s,u,l,c,f,d,h,p,g={point:v,lineStart:m,lineEnd:b,polygonStart:function(){t.polygonStart(),g.lineStart=x},polygonEnd:function(){t.polygonEnd(),g.lineStart=m}};function v(n,r){n=e(n,r),t.point(n[0],n[1])}function m(){c=NaN,g.point=y,t.lineStart()}function y(r,i){var o=Es([r,i]),a=e(r,i);n(c,f,l,d,h,p,c=a[0],f=a[1],l=r,d=o[0],h=o[1],p=o[2],Ec,t),t.point(c,f)}function b(){g.point=v,t.lineEnd()}function x(){m(),g.point=w,g.lineEnd=A}function w(e,t){y(r=e,t),i=c,o=f,a=d,s=h,u=p,g.point=y}function A(){n(c,f,l,d,h,p,i,o,r,a,s,u,Ec,t),g.lineEnd=b,b()}return g}}(e,t):function(e){return vc({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var kc=vc({point:function(e,t){this.stream.point(e*Ga,t*Ga)}});function Tc(e,t,n,r){var i=Ya(r),o=Qa(r),a=i*e,s=o*e,u=i/e,l=o/e,c=(o*n-i*t)/e,f=(o*t+i*n)/e;function d(e,r){return[a*e-s*r+t,n-s*e-a*r]}return d.invert=function(e,t){return[u*e-l*t+c,f-l*e-u*t]},d}function _c(e){return Sc(function(){return e})()}function Sc(e){var t,n,r,i,o,a,s,u,l,c,f=150,d=480,h=250,p=0,g=0,v=0,m=0,y=0,b=0,x=null,w=Zu,A=null,E=yl,M=.5;function C(e){return u(e[0]*Ga,e[1]*Ga)}function k(e){return(e=u.invert(e[0],e[1]))&&[e[0]*Fa,e[1]*Fa]}function T(){var e=Tc(f,0,0,b).apply(null,t(p,g)),r=(b?Tc:function(e,t,n){function r(r,i){return[t+e*r,n-e*i]}return r.invert=function(r,i){return[(r-t)/e,(n-i)/e]},r})(f,d-e[0],h-e[1],b);return n=Tu(v,m,y),s=Cu(t,r),u=Cu(n,s),a=Cc(s,M),_()}function _(){return l=c=null,C}return C.stream=function(e){return l&&c===e?l:l=kc(function(e){return vc({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(w(a(E(c=e)))))},C.preclip=function(e){return arguments.length?(w=e,x=void 0,_()):w},C.postclip=function(e){return arguments.length?(E=e,A=r=i=o=null,_()):E},C.clipAngle=function(e){return arguments.length?(w=+e?Yu(x=e*Ga):(x=null,Zu),_()):x*Fa},C.clipExtent=function(e){return arguments.length?(E=null==e?(A=r=i=o=null,yl):Xu(A=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),_()):null==A?null:[[A,r],[i,o]]},C.scale=function(e){return arguments.length?(f=+e,T()):f},C.translate=function(e){return arguments.length?(d=+e[0],h=+e[1],T()):[d,h]},C.center=function(e){return arguments.length?(p=e[0]%360*Ga,g=e[1]%360*Ga,T()):[p*Fa,g*Fa]},C.rotate=function(e){return arguments.length?(v=e[0]%360*Ga,m=e[1]%360*Ga,y=e.length>2?e[2]%360*Ga:0,T()):[v*Fa,m*Fa,y*Fa]},C.angle=function(e){return arguments.length?(b=e%360*Ga,T()):b*Fa},C.precision=function(e){return arguments.length?(a=Cc(s,M=e*e),_()):Ja(M)},C.fitExtent=function(e,t){return bc(C,e,t)},C.fitSize=function(e,t){return xc(C,e,t)},C.fitWidth=function(e,t){return wc(C,e,t)},C.fitHeight=function(e,t){return Ac(C,e,t)},function(){return t=e.apply(this,arguments),C.invert=t.invert&&k,T()}}function Ic(e){var t=0,n=Da/3,r=Sc(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Ga,n=e[1]*Ga):[t*Fa,n*Fa]},i}function Rc(e,t){var n=Qa(e),r=(n+Qa(t))/2;if(Ha(r)<Pa)return function(e){var t=Ya(e);function n(e,n){return[e*t,Qa(n)/t]}return n.invert=function(e,n){return[e/t,ts(n*t)]},n}(e);var i=1+n*(2*r-n),o=Ja(i)/r;function a(e,t){var n=Ja(i-2*r*Qa(t))/r;return[n*Qa(e*=r),o-n*Ya(e)]}return a.invert=function(e,t){var n=o-t;return[Za(e,Ha(n))/r*Ka(n),ts((i-(e*e+n*n)*r*r)/(2*r))]},a}function Lc(){return Ic(Rc).scale(155.424).center([0,33.6442])}function Oc(){return Lc().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Nc(e){return function(t,n){var r=Ya(t),i=Ya(n),o=e(r*i);return[o*i*Qa(t),o*Qa(n)]}}function Pc(e){return function(t,n){var r=Ja(t*t+n*n),i=e(r),o=Qa(i),a=Ya(i);return[Za(t*o,r*a),ts(r&&n*o/r)]}}var Dc=Nc(function(e){return Ja(2/(1+e))});Dc.invert=Pc(function(e){return 2*ts(e/2)});var Bc=Nc(function(e){return(e=es(e))&&e/Qa(e)});function Vc(e,t){return[e,Xa($a((Ba+t)/2))]}function zc(e){var t,n,r,i=_c(e),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var o=Da*a(),s=i(Ru(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:e===Vc?[[Math.max(s[0]-o,l),t],[Math.min(s[0]+o,n),r]]:[[l,Math.max(s[1]-o,t)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(e){return arguments.length?(a(e),c()):a()},i.translate=function(e){return arguments.length?(s(e),c()):s()},i.center=function(e){return arguments.length?(o(e),c()):o()},i.clipExtent=function(e){return arguments.length?(null==e?l=t=n=r=null:(l=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),c()):null==l?null:[[l,t],[n,r]]},c()}function Fc(e){return $a((Ba+e)/2)}function Gc(e,t){var n=Ya(e),r=e===t?Qa(e):Xa(n/Ya(t))/Xa(Fc(t)/Fc(e)),i=n*qa(Fc(e),r)/r;if(!r)return Vc;function o(e,t){i>0?t<-Ba+Pa&&(t=-Ba+Pa):t>Ba-Pa&&(t=Ba-Pa);var n=i/qa(Fc(t),r);return[n*Qa(r*e),i-n*Ya(r*e)]}return o.invert=function(e,t){var n=i-t,o=Ka(r)*Ja(e*e+n*n);return[Za(e,Ha(n))/r*Ka(n),2*Wa(qa(i/o,1/r))-Ba]},o}function Hc(e,t){return[e,t]}function Wc(e,t){var n=Ya(e),r=e===t?Qa(e):(n-Ya(t))/(t-e),i=n/r+e;if(Ha(r)<Pa)return Hc;function o(e,t){var n=i-t,o=r*e;return[n*Qa(o),i-n*Ya(o)]}return o.invert=function(e,t){var n=i-t;return[Za(e,Ha(n))/r*Ka(n),i-Ka(r)*Ja(e*e+n*n)]},o}Bc.invert=Pc(function(e){return e}),Vc.invert=function(e,t){return[e,2*Wa(Ua(t))-Ba]},Hc.invert=Hc;var Zc=1.340264,Yc=-.081106,jc=893e-6,Uc=.003796,Xc=Ja(3)/2;function qc(e,t){var n=ts(Xc*Qa(t)),r=n*n,i=r*r*r;return[e*Ya(n)/(Xc*(Zc+3*Yc*r+i*(7*jc+9*Uc*r))),n*(Zc+Yc*r+i*(jc+Uc*r))]}function Qc(e,t){var n=Ya(t),r=Ya(e)*n;return[n*Qa(e)/r,Qa(t)/r]}function Kc(e,t,n,r){return 1===e&&1===t&&0===n&&0===r?yl:vc({point:function(i,o){this.stream.point(i*e+n,o*t+r)}})}function Jc(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function $c(e,t){return[Ya(t)*Qa(e),Qa(t)]}function ef(e,t){var n=Ya(t),r=1+Ya(e)*n;return[n*Qa(e)/r,Qa(t)/r]}function tf(e,t){return[Xa($a((Ba+t)/2)),-e]}function nf(e,t){return e.parent===t.parent?1:2}function rf(e,t){return e+t.x}function of(e,t){return Math.max(e,t.y)}function af(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function sf(e,t){var n,r,i,o,a,s=new ff(e),u=+e.value&&(s.value=e.value),l=[s];for(null==t&&(t=uf);n=l.pop();)if(u&&(n.value=+n.data.value),(i=t(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)l.push(r=n.children[o]=new ff(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(cf)}function uf(e){return e.children}function lf(e){e.data=e.data.data}function cf(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function ff(e){this.data=e,this.depth=this.height=0,this.parent=null}qc.invert=function(e,t){for(var n,r=t,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(Zc+Yc*i+o*(jc+Uc*i))-t)/(Zc+3*Yc*i+o*(7*jc+9*Uc*i)))*r)*i*i,!(Ha(n)<1e-12));++a);return[Xc*e*(Zc+3*Yc*i+o*(7*jc+9*Uc*i))/Ya(r),ts(Qa(r)/Xc)]},Qc.invert=Pc(Wa),Jc.invert=function(e,t){var n,r=t,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-t)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Ha(n)>Pa&&--i>0);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},$c.invert=Pc(ts),ef.invert=Pc(function(e){return 2*Wa(e)}),tf.invert=function(e,t){return[-t,2*Wa(Ua(e))-Ba]},ff.prototype=sf.prototype={constructor:ff,count:function(){return this.eachAfter(af)},each:function(e){var t,n,r,i,o=this,a=[o];do{for(t=a.reverse(),a=[];o=t.pop();)if(e(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r])}while(a.length);return this},eachAfter:function(e){for(var t,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)o.push(t[n]);for(;i=a.pop();)e(i);return this},eachBefore:function(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)i.push(t[n]);return this},sum:function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)r.push(t=t.parent);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each(function(t){e.push(t)}),e},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return sf(this).eachBefore(lf)}};var df=Array.prototype.slice;function hf(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(df.call(e))).length,o=[];r<i;)t=e[r],n&&vf(n,t)?++r:(n=yf(o=pf(o,t)),r=0);return n}function pf(e,t){var n,r;if(mf(t,e))return[t];for(n=0;n<e.length;++n)if(gf(t,e[n])&&mf(bf(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(gf(bf(e[n],e[r]),t)&&gf(bf(e[n],t),e[r])&&gf(bf(e[r],t),e[n])&&mf(xf(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function gf(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function vf(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function mf(e,t){for(var n=0;n<t.length;++n)if(!vf(e,t[n]))return!1;return!0}function yf(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return bf(e[0],e[1]);case 3:return xf(e[0],e[1],e[2])}var t}function bf(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,u=o-n,l=a-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+a+l/f*c)/2,r:(f+i+s)/2}}function xf(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-a,h=r-l,p=i-s,g=i-c,v=u-o,m=f-o,y=r*r+i*i-o*o,b=y-a*a-s*s+u*u,x=y-l*l-c*c+f*f,w=h*p-d*g,A=(p*x-g*b)/(2*w)-r,E=(g*v-p*m)/w,M=(h*b-d*x)/(2*w)-i,C=(d*m-h*v)/w,k=E*E+C*C-1,T=2*(o+A*E+M*C),_=A*A+M*M-o*o,S=-(k?(T+Math.sqrt(T*T-4*k*_))/(2*k):_/T);return{x:r+A+E*S,y:i+M+C*S,r:S}}function wf(e,t,n){var r,i,o,a,s=e.x-t.x,u=e.y-t.y,l=s*s+u*u;l?(i=t.r+n.r,a=e.r+n.r,(i*=i)>(a*=a)?(r=(l+a-i)/(2*l),o=Math.sqrt(Math.max(0,a/l-r*r)),n.x=e.x-r*s-o*u,n.y=e.y-r*u+o*s):(r=(l+i-a)/(2*l),o=Math.sqrt(Math.max(0,i/l-r*r)),n.x=t.x+r*s-o*u,n.y=t.y+r*u+o*s)):(n.x=t.x+n.r,n.y=t.y)}function Af(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Ef(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function Mf(e){this._=e,this.next=null,this.previous=null}function Cf(e){if(!(i=e.length))return 0;var t,n,r,i,o,a,s,u,l,c,f;if((t=e[0]).x=0,t.y=0,!(i>1))return t.r;if(t.x=-(n=e[1]).r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;wf(n,t,r=e[2]),t=new Mf(t),n=new Mf(n),r=new Mf(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(s=3;s<i;++s){wf(t._,n._,r=e[s]),r=new Mf(r),u=n.next,l=t.previous,c=n._.r,f=t._.r;do{if(c<=f){if(Af(u._,r._)){t.next=n=u,n.previous=t,--s;continue e}c+=u._.r,u=u.next}else{if(Af(l._,r._)){(t=l).next=n,n.previous=t,--s;continue e}f+=l._.r,l=l.previous}}while(u!==l.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,o=Ef(t);(r=r.next)!==n;)(a=Ef(r))<o&&(t=r,o=a);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=hf(t),s=0;s<i;++s)(t=e[s]).x-=r.x,t.y-=r.y;return r.r}function kf(e){if("function"!=typeof e)throw new Error;return e}function Tf(){return 0}function _f(e){return function(){return e}}function Sf(e){return Math.sqrt(e.value)}function If(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Rf(e,t){return function(n){if(r=n.children){var r,i,o,a=r.length,s=e(n)*t||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=Cf(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function Lf(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Of(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Nf(e,t,n,r,i){for(var o,a=e.children,s=-1,u=a.length,l=e.value&&(r-t)/e.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}var Pf="$",Df={depth:-1},Bf={};function Vf(e){return e.id}function zf(e){return e.parentId}function Ff(e,t){return e.parent===t.parent?1:2}function Gf(e){var t=e.children;return t?t[0]:e.t}function Hf(e){var t=e.children;return t?t[t.length-1]:e.t}function Wf(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Zf(e,t,n){return e.a.parent===t.parent?e.a:n}function Yf(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function jf(e,t,n,r,i){for(var o,a=e.children,s=-1,u=a.length,l=e.value&&(i-n)/e.value;++s<u;)(o=a[s]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}Yf.prototype=Object.create(ff.prototype);var Uf=(1+Math.sqrt(5))/2;function Xf(e,t,n,r,i,o){for(var a,s,u,l,c,f,d,h,p,g,v,m=[],y=t.children,b=0,x=0,w=y.length,A=t.value;b<w;){u=i-n,l=o-r;do{c=y[x++].value}while(!c&&x<w);for(f=d=c,v=c*c*(g=Math.max(l/u,u/l)/(A*e)),p=Math.max(d/v,v/f);x<w;++x){if(c+=s=y[x].value,s<f&&(f=s),s>d&&(d=s),v=c*c*g,(h=Math.max(d/v,v/f))>p){c-=s;break}p=h}m.push(a={value:c,dice:u<l,children:y.slice(b,x)}),a.dice?Nf(a,n,r,i,A?r+=l*c/A:o):jf(a,n,r,A?n+=u*c/A:i,o),A-=c,b=x}return m}var qf=function e(t){function n(e,n,r,i,o){Xf(t,e,n,r,i,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Uf),Qf=function e(t){function n(e,n,r,i,o){if((a=e._squarify)&&a.ratio===t)for(var a,s,u,l,c,f=-1,d=a.length,h=e.value;++f<d;){for(u=(s=a[f]).children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?Nf(s,n,r,i,r+=(o-r)*s.value/h):jf(s,n,r,n+=(i-n)*s.value/h,o),h-=s.value}else e._squarify=a=Xf(t,e,n,r,i,o),a.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(Uf);function Kf(e,t){return e[0]-t[0]||e[1]-t[1]}function Jf(e){for(var t,n,r,i=e.length,o=[0,1],a=2,s=2;s<i;++s){for(;a>1&&((n=e[o[a-1]])[0]-(t=e[o[a-2]])[0])*((r=e[s])[1]-t[1])-(n[1]-t[1])*(r[0]-t[0])<=0;)--a;o[a++]=s}return o.slice(0,a)}function $f(){return Math.random()}var ed=function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,1===arguments.length?(n=e,e=0):n-=e,function(){return t()*n+e}}return n.source=e,n}($f),td=function e(t){function n(e,n){var r,i;return e=null==e?0:+e,n=null==n?1:+n,function(){var o;if(null!=r)o=r,r=null;else do{r=2*t()-1,o=2*t()-1,i=r*r+o*o}while(!i||i>1);return e+n*o*Math.sqrt(-2*Math.log(i)/i)}}return n.source=e,n}($f),nd=function e(t){function n(){var e=td.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return n.source=e,n}($f),rd=function e(t){function n(e){return function(){for(var n=0,r=0;r<e;++r)n+=t();return n}}return n.source=e,n}($f),id=function e(t){function n(e){var n=rd.source(t)(e);return function(){return n()/e}}return n.source=e,n}($f),od=function e(t){function n(e){return function(){return-Math.log(1-t())/e}}return n.source=e,n}($f);function ad(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function sd(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}var ud=Array.prototype,ld=ud.map,cd=ud.slice,fd={name:"implicit"};function dd(){var e=qi(),t=[],n=[],r=fd;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==fd)return r;e.set(o,a=t.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=qi();for(var r,o,a=-1,s=n.length;++a<s;)e.has(o=(r=n[a])+"")||e.set(o,t.push(r));return i},i.range=function(e){return arguments.length?(n=cd.call(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return dd(t,n).unknown(r)},ad.apply(i,arguments),i}function hd(){var e,t,n=dd().unknown(void 0),r=n.domain,i=n.range,o=[0,1],a=!1,s=0,u=0,l=.5;function c(){var n=r().length,c=o[1]<o[0],f=o[c-0],d=o[1-c];e=(d-f)/Math.max(1,n-s+2*u),a&&(e=Math.floor(e)),f+=(d-f-e*(n-s))*l,t=e*(1-s),a&&(f=Math.round(f),t=Math.round(t));var h=v(n).map(function(t){return f+e*t});return i(c?h.reverse():h)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),c()):r()},n.range=function(e){return arguments.length?(o=[+e[0],+e[1]],c()):o.slice()},n.rangeRound=function(e){return o=[+e[0],+e[1]],a=!0,c()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(a=!!e,c()):a},n.padding=function(e){return arguments.length?(s=Math.min(1,u=+e),c()):s},n.paddingInner=function(e){return arguments.length?(s=Math.min(1,e),c()):s},n.paddingOuter=function(e){return arguments.length?(u=+e,c()):u},n.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),c()):l},n.copy=function(){return hd(r(),o).round(a).paddingInner(s).paddingOuter(u).align(l)},ad.apply(c(),arguments)}function pd(e){return+e}var gd=[0,1];function vd(e){return e}function md(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function yd(e){var t,n=e[0],r=e[e.length-1];return n>r&&(t=n,n=r,r=t),function(e){return Math.max(n,Math.min(r,e))}}function bd(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=md(i,r),o=n(a,o)):(r=md(r,i),o=n(o,a)),function(e){return o(r(e))}}function xd(e,t,n){var r=Math.min(e.length,t.length)-1,o=new Array(r),a=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)o[s]=md(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(t){var n=i(e,t,1,r)-1;return a[n](o[n](t))}}function wd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ad(){var e,t,n,r,i,o,a=gd,s=gd,u=gn,l=vd;function c(){return r=Math.min(a.length,s.length)>2?xd:bd,i=o=null,f}function f(t){return isNaN(t=+t)?n:(i||(i=r(a.map(e),s,u)))(e(l(t)))}return f.invert=function(n){return l(t((o||(o=r(s,a.map(e),cn)))(n)))},f.domain=function(e){return arguments.length?(a=ld.call(e,pd),l===vd||(l=yd(a)),c()):a.slice()},f.range=function(e){return arguments.length?(s=cd.call(e),c()):s.slice()},f.rangeRound=function(e){return s=cd.call(e),u=vn,c()},f.clamp=function(e){return arguments.length?(l=e?yd(a):vd,f):l!==vd},f.interpolate=function(e){return arguments.length?(u=e,c()):u},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,c()}}function Ed(e,t){return Ad()(e,t)}function Md(t,n,r,i){var o,a=A(t,n,r);switch((i=ba(null==i?",f":i)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(n));return null!=i.precision||isNaN(o=Sa(a,s))||(i.precision=o),e.formatPrefix(i,s);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=Ia(a,Math.max(Math.abs(t),Math.abs(n))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=_a(a))||(i.precision=o-2*("%"===i.type))}return e.format(i)}function Cd(e){var t=e.domain;return e.ticks=function(e){var n=t();return x(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Md(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),o=0,a=i.length-1,s=i[o],u=i[a];return u<s&&(r=s,s=u,u=r,r=o,o=a,a=r),(r=w(s,u,n))>0?r=w(s=Math.floor(s/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=w(s=Math.ceil(s*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(u/r)*r,t(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(u*r)/r,t(i)),e},e}function kd(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function Td(e){return Math.log(e)}function _d(e){return Math.exp(e)}function Sd(e){return-Math.log(-e)}function Id(e){return-Math.exp(-e)}function Rd(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Ld(e){return function(t){return-e(-t)}}function Od(t){var n,r,i=t(Td,_d),o=i.domain,a=10;function s(){return n=(e=a)===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e}),r=function(e){return 10===e?Rd:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(a),o()[0]<0?(n=Ld(n),r=Ld(r),t(Sd,Id)):t(Td,_d),i;var e}return i.base=function(e){return arguments.length?(a=+e,s()):a},i.domain=function(e){return arguments.length?(o(e),s()):o()},i.ticks=function(e){var t,i=o(),s=i[0],u=i[i.length-1];(t=u<s)&&(d=s,s=u,u=d);var l,c,f,d=n(s),h=n(u),p=null==e?10:+e,g=[];if(!(a%1)&&h-d<p){if(d=Math.round(d)-1,h=Math.round(h)+1,s>0){for(;d<h;++d)for(c=1,l=r(d);c<a;++c)if(!((f=l*c)<s)){if(f>u)break;g.push(f)}}else for(;d<h;++d)for(c=a-1,l=r(d);c>=1;--c)if(!((f=l*c)<s)){if(f>u)break;g.push(f)}}else g=x(d,h,Math.min(h-d,p)).map(r);return t?g.reverse():g},i.tickFormat=function(t,o){if(null==o&&(o=10===a?".0e":","),"function"!=typeof o&&(o=e.format(o)),t===1/0)return o;null==t&&(t=10);var s=Math.max(1,a*t/i.ticks().length);return function(e){var t=e/r(Math.round(n(e)));return t*a<a-.5&&(t*=a),t<=s?o(e):""}},i.nice=function(){return o(kd(o(),{floor:function(e){return r(Math.floor(n(e)))},ceil:function(e){return r(Math.ceil(n(e)))}}))},i}function Nd(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Pd(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Dd(e){var t=1,n=e(Nd(t),Pd(t));return n.constant=function(n){return arguments.length?e(Nd(t=+n),Pd(t)):t},Cd(n)}function Bd(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Vd(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function zd(e){return e<0?-e*e:e*e}function Fd(e){var t=e(vd,vd),n=1;return t.exponent=function(t){return arguments.length?1==(n=+t)?e(vd,vd):.5===n?e(Vd,zd):e(Bd(n),Bd(1/n)):n},Cd(t)}function Gd(){var e=Fd(Ad());return e.copy=function(){return wd(e,Gd()).exponent(e.exponent())},ad.apply(e,arguments),e}var Hd=new Date,Wd=new Date;function Zd(e,t,n,r){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return s},i.filter=function(n){return Zd(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})},n&&(i.count=function(t,r){return Hd.setTime(+t),Wd.setTime(+r),e(Hd),e(Wd),Math.floor(n(Hd,Wd))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var Yd=Zd(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});Yd.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Zd(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):Yd:null};var jd=Yd.range,Ud=6e4,Xd=6048e5,qd=Zd(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),Qd=qd.range,Kd=Zd(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},function(e,t){e.setTime(+e+t*Ud)},function(e,t){return(t-e)/Ud},function(e){return e.getMinutes()}),Jd=Kd.range,$d=Zd(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-e.getMinutes()*Ud)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),eh=$d.range,th=Zd(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ud)/864e5},function(e){return e.getDate()-1}),nh=th.range;function rh(e){return Zd(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ud)/Xd})}var ih=rh(0),oh=rh(1),ah=rh(2),sh=rh(3),uh=rh(4),lh=rh(5),ch=rh(6),fh=ih.range,dh=oh.range,hh=ah.range,ph=sh.range,gh=uh.range,vh=lh.range,mh=ch.range,yh=Zd(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),bh=yh.range,xh=Zd(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});xh.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Zd(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var wh=xh.range,Ah=Zd(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*Ud)},function(e,t){return(t-e)/Ud},function(e){return e.getUTCMinutes()}),Eh=Ah.range,Mh=Zd(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),Ch=Mh.range,kh=Zd(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),Th=kh.range;function _h(e){return Zd(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/Xd})}var Sh=_h(0),Ih=_h(1),Rh=_h(2),Lh=_h(3),Oh=_h(4),Nh=_h(5),Ph=_h(6),Dh=Sh.range,Bh=Ih.range,Vh=Rh.range,zh=Lh.range,Fh=Oh.range,Gh=Nh.range,Hh=Ph.range,Wh=Zd(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),Zh=Wh.range,Yh=Zd(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Yh.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Zd(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var jh=Yh.range;function Uh(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Xh(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function qh(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function Qh(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,u=e.shortMonths,l=ip(i),c=op(i),f=ip(o),d=op(o),h=ip(a),p=op(a),g=ip(s),v=op(s),m=ip(u),y=op(u),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Cp,e:Cp,f:Ip,H:kp,I:Tp,j:_p,L:Sp,m:Rp,M:Lp,p:function(e){return i[+(e.getHours()>=12)]},Q:ag,s:sg,S:Op,u:Np,U:Pp,V:Dp,w:Bp,W:Vp,x:null,X:null,y:zp,Y:Fp,Z:Gp,"%":og},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Hp,e:Hp,f:Up,H:Wp,I:Zp,j:Yp,L:jp,m:Xp,M:qp,p:function(e){return i[+(e.getUTCHours()>=12)]},Q:ag,s:sg,S:Qp,u:Kp,U:Jp,V:$p,w:eg,W:tg,x:null,X:null,y:ng,Y:rg,Z:ig,"%":og},w={a:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=d[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=g.exec(t.slice(n));return r?(e.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return M(e,t,n,r)},d:gp,e:gp,f:wp,H:mp,I:mp,j:vp,L:xp,m:pp,M:yp,p:function(e,t,n){var r=l.exec(t.slice(n));return r?(e.p=c[r[0].toLowerCase()],n+r[0].length):-1},Q:Ep,s:Mp,S:bp,u:sp,U:up,V:lp,w:ap,W:cp,x:function(e,t,r){return M(e,n,t,r)},X:function(e,t,n){return M(e,r,t,n)},y:dp,Y:fp,Z:hp,"%":Ap};function A(e,t){return function(n){var r,i,o,a=[],s=-1,u=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(a.push(e.slice(u,s)),null!=(i=Jh[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(e.slice(u,s)),a.join("")}}function E(e,t){return function(n){var r,i,o=qh(1900);if(M(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Xh(qh(o.y))).getUTCDay(),r=i>4||0===i?Ih.ceil(r):Ih(r),r=kh.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=t(qh(o.y))).getDay(),r=i>4||0===i?oh.ceil(r):oh(r),r=th.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Xh(qh(o.y)).getUTCDay():t(qh(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Xh(o)):t(o)}}function M(e,t,n,r){for(var i,o,a=0,s=t.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=w[i in Jh?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=A(n,b),b.X=A(r,b),b.c=A(t,b),x.x=A(n,x),x.X=A(r,x),x.c=A(t,x),{format:function(e){var t=A(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=E(e+="",Uh);return t.toString=function(){return e},t},utcFormat:function(e){var t=A(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=E(e,Xh);return t.toString=function(){return e},t}}}var Kh,Jh={"-":"",_:" ",0:"0"},$h=/^\s*\d+/,ep=/^%/,tp=/[\\^$*+?|[\]().{}]/g;function np(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function rp(e){return e.replace(tp,"\\$&")}function ip(e){return new RegExp("^(?:"+e.map(rp).join("|")+")","i")}function op(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function ap(e,t,n){var r=$h.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function sp(e,t,n){var r=$h.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function up(e,t,n){var r=$h.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function lp(e,t,n){var r=$h.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function cp(e,t,n){var r=$h.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function fp(e,t,n){var r=$h.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function dp(e,t,n){var r=$h.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function hp(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function pp(e,t,n){var r=$h.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function gp(e,t,n){var r=$h.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function vp(e,t,n){var r=$h.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function mp(e,t,n){var r=$h.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function yp(e,t,n){var r=$h.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function bp(e,t,n){var r=$h.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function xp(e,t,n){var r=$h.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function wp(e,t,n){var r=$h.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ap(e,t,n){var r=ep.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Ep(e,t,n){var r=$h.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Mp(e,t,n){var r=$h.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function Cp(e,t){return np(e.getDate(),t,2)}function kp(e,t){return np(e.getHours(),t,2)}function Tp(e,t){return np(e.getHours()%12||12,t,2)}function _p(e,t){return np(1+th.count(xh(e),e),t,3)}function Sp(e,t){return np(e.getMilliseconds(),t,3)}function Ip(e,t){return Sp(e,t)+"000"}function Rp(e,t){return np(e.getMonth()+1,t,2)}function Lp(e,t){return np(e.getMinutes(),t,2)}function Op(e,t){return np(e.getSeconds(),t,2)}function Np(e){var t=e.getDay();return 0===t?7:t}function Pp(e,t){return np(ih.count(xh(e),e),t,2)}function Dp(e,t){var n=e.getDay();return e=n>=4||0===n?uh(e):uh.ceil(e),np(uh.count(xh(e),e)+(4===xh(e).getDay()),t,2)}function Bp(e){return e.getDay()}function Vp(e,t){return np(oh.count(xh(e),e),t,2)}function zp(e,t){return np(e.getFullYear()%100,t,2)}function Fp(e,t){return np(e.getFullYear()%1e4,t,4)}function Gp(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+np(t/60|0,"0",2)+np(t%60,"0",2)}function Hp(e,t){return np(e.getUTCDate(),t,2)}function Wp(e,t){return np(e.getUTCHours(),t,2)}function Zp(e,t){return np(e.getUTCHours()%12||12,t,2)}function Yp(e,t){return np(1+kh.count(Yh(e),e),t,3)}function jp(e,t){return np(e.getUTCMilliseconds(),t,3)}function Up(e,t){return jp(e,t)+"000"}function Xp(e,t){return np(e.getUTCMonth()+1,t,2)}function qp(e,t){return np(e.getUTCMinutes(),t,2)}function Qp(e,t){return np(e.getUTCSeconds(),t,2)}function Kp(e){var t=e.getUTCDay();return 0===t?7:t}function Jp(e,t){return np(Sh.count(Yh(e),e),t,2)}function $p(e,t){var n=e.getUTCDay();return e=n>=4||0===n?Oh(e):Oh.ceil(e),np(Oh.count(Yh(e),e)+(4===Yh(e).getUTCDay()),t,2)}function eg(e){return e.getUTCDay()}function tg(e,t){return np(Ih.count(Yh(e),e),t,2)}function ng(e,t){return np(e.getUTCFullYear()%100,t,2)}function rg(e,t){return np(e.getUTCFullYear()%1e4,t,4)}function ig(){return"+0000"}function og(){return"%"}function ag(e){return+e}function sg(e){return Math.floor(+e/1e3)}function ug(t){return Kh=Qh(t),e.timeFormat=Kh.format,e.timeParse=Kh.parse,e.utcFormat=Kh.utcFormat,e.utcParse=Kh.utcParse,Kh}ug({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var lg=Date.prototype.toISOString?function(e){return e.toISOString()}:e.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),cg=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:e.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),fg=1e3,dg=60*fg,hg=60*dg,pg=24*hg,gg=7*pg,vg=30*pg,mg=365*pg;function yg(e){return new Date(e)}function bg(e){return e instanceof Date?+e:+new Date(+e)}function xg(e,t,r,i,o,a,s,u,l){var c=Ed(vd,vd),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),g=l("%I:%M"),v=l("%I %p"),m=l("%a %d"),y=l("%b %d"),b=l("%B"),x=l("%Y"),w=[[s,1,fg],[s,5,5*fg],[s,15,15*fg],[s,30,30*fg],[a,1,dg],[a,5,5*dg],[a,15,15*dg],[a,30,30*dg],[o,1,hg],[o,3,3*hg],[o,6,6*hg],[o,12,12*hg],[i,1,pg],[i,2,2*pg],[r,1,gg],[t,1,vg],[t,3,3*vg],[e,1,mg]];function E(n){return(s(n)<n?h:a(n)<n?p:o(n)<n?g:i(n)<n?v:t(n)<n?r(n)<n?m:y:e(n)<n?b:x)(n)}function M(t,r,i,o){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(i-r)/t,s=n(function(e){return e[2]}).right(w,a);s===w.length?(o=A(r/mg,i/mg,t),t=e):s?(o=(s=w[a/w[s-1][2]<w[s][2]/a?s-1:s])[1],t=s[0]):(o=Math.max(A(r,i,t),1),t=u)}return null==o?t:t.every(o)}return c.invert=function(e){return new Date(f(e))},c.domain=function(e){return arguments.length?d(ld.call(e,bg)):d().map(yg)},c.ticks=function(e,t){var n,r=d(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=(n=M(e,i,o,t))?n.range(i,o+1):[],a?n.reverse():n},c.tickFormat=function(e,t){return null==t?E:l(t)},c.nice=function(e,t){var n=d();return(e=M(e,n[0],n[n.length-1],t))?d(kd(n,e)):c},c.copy=function(){return wd(c,xg(e,t,r,i,o,a,s,u,l))},c}function wg(){var e,t,n,r,i,o=0,a=1,s=vd,u=!1;function l(t){return isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,u?Math.max(0,Math.min(1,t)):t))}return l.domain=function(i){return arguments.length?(e=r(o=+i[0]),t=r(a=+i[1]),n=e===t?0:1/(t-e),l):[o,a]},l.clamp=function(e){return arguments.length?(u=!!e,l):u},l.interpolator=function(e){return arguments.length?(s=e,l):s},l.unknown=function(e){return arguments.length?(i=e,l):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),l}}function Ag(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Eg(){var e=Fd(wg());return e.copy=function(){return Ag(e,Eg()).exponent(e.exponent())},sd.apply(e,arguments)}function Mg(){var e,t,n,r,i,o,a,s=0,u=.5,l=1,c=vd,f=!1;function d(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(e<t?r:i),c(f?Math.max(0,Math.min(1,e)):e))}return d.domain=function(a){return arguments.length?(e=o(s=+a[0]),t=o(u=+a[1]),n=o(l=+a[2]),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),d):[s,u,l]},d.clamp=function(e){return arguments.length?(f=!!e,d):f},d.interpolator=function(e){return arguments.length?(c=e,d):c},d.unknown=function(e){return arguments.length?(a=e,d):a},function(a){return o=a,e=a(s),t=a(u),n=a(l),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),d}}function Cg(){var e=Fd(Mg());return e.copy=function(){return Ag(e,Cg()).exponent(e.exponent())},sd.apply(e,arguments)}function kg(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}var Tg=kg("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),_g=kg("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Sg=kg("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ig=kg("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Rg=kg("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Lg=kg("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Og=kg("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Ng=kg("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Pg=kg("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Dg(e){return an(e[e.length-1])}var Bg=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(kg),Vg=Dg(Bg),zg=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(kg),Fg=Dg(zg),Gg=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(kg),Hg=Dg(Gg),Wg=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(kg),Zg=Dg(Wg),Yg=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(kg),jg=Dg(Yg),Ug=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(kg),Xg=Dg(Ug),qg=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(kg),Qg=Dg(qg),Kg=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(kg),Jg=Dg(Kg),$g=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(kg),ev=Dg($g),tv=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(kg),nv=Dg(tv),rv=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(kg),iv=Dg(rv),ov=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(kg),av=Dg(ov),sv=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(kg),uv=Dg(sv),lv=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(kg),cv=Dg(lv),fv=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(kg),dv=Dg(fv),hv=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(kg),pv=Dg(hv),gv=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(kg),vv=Dg(gv),mv=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(kg),yv=Dg(mv),bv=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(kg),xv=Dg(bv),wv=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(kg),Av=Dg(wv),Ev=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(kg),Mv=Dg(Ev),Cv=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(kg),kv=Dg(Cv),Tv=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(kg),_v=Dg(Tv),Sv=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(kg),Iv=Dg(Sv),Rv=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(kg),Lv=Dg(Rv),Ov=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(kg),Nv=Dg(Ov),Pv=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(kg),Dv=Dg(Pv),Bv=Wn(Xt(300,.5,0),Xt(-240,.5,1)),Vv=Wn(Xt(-100,.75,.35),Xt(80,1.5,.8)),zv=Wn(Xt(260,.75,.35),Xt(80,1.5,.8)),Fv=Xt(),Gv=gt(),Hv=Math.PI/3,Wv=2*Math.PI/3;function Zv(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var Yv=Zv(kg("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),jv=Zv(kg("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Uv=Zv(kg("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Xv=Zv(kg("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function qv(e){return function(){return e}}var Qv=Math.abs,Kv=Math.atan2,Jv=Math.cos,$v=Math.max,em=Math.min,tm=Math.sin,nm=Math.sqrt,rm=1e-12,im=Math.PI,om=im/2,am=2*im;function sm(e){return e>=1?om:e<=-1?-om:Math.asin(e)}function um(e){return e.innerRadius}function lm(e){return e.outerRadius}function cm(e){return e.startAngle}function fm(e){return e.endAngle}function dm(e){return e&&e.padAngle}function hm(e,t,n,r,i,o,a){var s=e-n,u=t-r,l=(a?o:-o)/nm(s*s+u*u),c=l*u,f=-l*s,d=e+c,h=t+f,p=n+c,g=r+f,v=(d+p)/2,m=(h+g)/2,y=p-d,b=g-h,x=y*y+b*b,w=i-o,A=d*g-p*h,E=(b<0?-1:1)*nm($v(0,w*w*x-A*A)),M=(A*b-y*E)/x,C=(-A*y-b*E)/x,k=(A*b+y*E)/x,T=(-A*y+b*E)/x,_=M-v,S=C-m,I=k-v,R=T-m;return _*_+S*S>I*I+R*R&&(M=k,C=T),{cx:M,cy:C,x01:-c,y01:-f,x11:M*(i/w-1),y11:C*(i/w-1)}}function pm(e){this._context=e}function gm(e){return new pm(e)}function vm(e){return e[0]}function mm(e){return e[1]}function ym(){var e=vm,t=mm,n=qv(!0),r=null,i=gm,o=null;function a(a){var s,u,l,c=a.length,f=!1;for(null==r&&(o=i(l=Hi())),s=0;s<=c;++s)!(s<c&&n(u=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(u,s,a),+t(u,s,a));if(l)return o=null,l+""||null}return a.x=function(t){return arguments.length?(e="function"==typeof t?t:qv(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:qv(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:qv(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a}function bm(){var e=vm,t=null,n=qv(0),r=mm,i=qv(!0),o=null,a=gm,s=null;function u(u){var l,c,f,d,h,p=u.length,g=!1,v=new Array(p),m=new Array(p);for(null==o&&(s=a(h=Hi())),l=0;l<=p;++l){if(!(l<p&&i(d=u[l],l,u))===g)if(g=!g)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=l-1;f>=c;--f)s.point(v[f],m[f]);s.lineEnd(),s.areaEnd()}g&&(v[l]=+e(d,l,u),m[l]=+n(d,l,u),s.point(t?+t(d,l,u):v[l],r?+r(d,l,u):m[l]))}if(h)return s=null,h+""||null}function l(){return ym().defined(i).curve(a).context(o)}return u.x=function(n){return arguments.length?(e="function"==typeof n?n:qv(+n),t=null,u):e},u.x0=function(t){return arguments.length?(e="function"==typeof t?t:qv(+t),u):e},u.x1=function(e){return arguments.length?(t=null==e?null:"function"==typeof e?e:qv(+e),u):t},u.y=function(e){return arguments.length?(n="function"==typeof e?e:qv(+e),r=null,u):n},u.y0=function(e){return arguments.length?(n="function"==typeof e?e:qv(+e),u):n},u.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:qv(+e),u):r},u.lineX0=u.lineY0=function(){return l().x(e).y(n)},u.lineY1=function(){return l().x(e).y(r)},u.lineX1=function(){return l().x(t).y(n)},u.defined=function(e){return arguments.length?(i="function"==typeof e?e:qv(!!e),u):i},u.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),u):a},u.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),u):o},u}function xm(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function wm(e){return e}pm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var Am=Mm(gm);function Em(e){this._curve=e}function Mm(e){function t(t){return new Em(e(t))}return t._curve=e,t}function Cm(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(Mm(e)):t()._curve},e}function km(){return Cm(ym().curve(Am))}function Tm(){var e=bm().curve(Am),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,o=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return Cm(n())},delete e.lineX0,e.lineEndAngle=function(){return Cm(r())},delete e.lineX1,e.lineInnerRadius=function(){return Cm(i())},delete e.lineY0,e.lineOuterRadius=function(){return Cm(o())},delete e.lineY1,e.curve=function(e){return arguments.length?t(Mm(e)):t()._curve},e}function _m(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}Em.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var Sm=Array.prototype.slice;function Im(e){return e.source}function Rm(e){return e.target}function Lm(e){var t=Im,n=Rm,r=vm,i=mm,o=null;function a(){var a,s=Sm.call(arguments),u=t.apply(this,s),l=n.apply(this,s);if(o||(o=a=Hi()),e(o,+r.apply(this,(s[0]=u,s)),+i.apply(this,s),+r.apply(this,(s[0]=l,s)),+i.apply(this,s)),a)return o=null,a+""||null}return a.source=function(e){return arguments.length?(t=e,a):t},a.target=function(e){return arguments.length?(n=e,a):n},a.x=function(e){return arguments.length?(r="function"==typeof e?e:qv(+e),a):r},a.y=function(e){return arguments.length?(i="function"==typeof e?e:qv(+e),a):i},a.context=function(e){return arguments.length?(o=null==e?null:e,a):o},a}function Om(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,i,r,i)}function Nm(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+i)/2,r,n,r,i)}function Pm(e,t,n,r,i){var o=_m(t,n),a=_m(t,n=(n+i)/2),s=_m(r,n),u=_m(r,i);e.moveTo(o[0],o[1]),e.bezierCurveTo(a[0],a[1],s[0],s[1],u[0],u[1])}var Dm={draw:function(e,t){var n=Math.sqrt(t/im);e.moveTo(n,0),e.arc(0,0,n,0,am)}},Bm={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Vm=Math.sqrt(1/3),zm=2*Vm,Fm={draw:function(e,t){var n=Math.sqrt(t/zm),r=n*Vm;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Gm=Math.sin(im/10)/Math.sin(7*im/10),Hm=Math.sin(am/10)*Gm,Wm=-Math.cos(am/10)*Gm,Zm={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),r=Hm*n,i=Wm*n;e.moveTo(0,-n),e.lineTo(r,i);for(var o=1;o<5;++o){var a=am*o/5,s=Math.cos(a),u=Math.sin(a);e.lineTo(u*n,-s*n),e.lineTo(s*r-u*i,u*r+s*i)}e.closePath()}},Ym={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},jm=Math.sqrt(3),Um={draw:function(e,t){var n=-Math.sqrt(t/(3*jm));e.moveTo(0,2*n),e.lineTo(-jm*n,-n),e.lineTo(jm*n,-n),e.closePath()}},Xm=Math.sqrt(3)/2,qm=1/Math.sqrt(12),Qm=3*(qm/2+1),Km={draw:function(e,t){var n=Math.sqrt(t/Qm),r=n/2,i=n*qm,o=r,a=n*qm+n,s=-o,u=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(s,u),e.lineTo(-.5*r-Xm*i,Xm*r+-.5*i),e.lineTo(-.5*o-Xm*a,Xm*o+-.5*a),e.lineTo(-.5*s-Xm*u,Xm*s+-.5*u),e.lineTo(-.5*r+Xm*i,-.5*i-Xm*r),e.lineTo(-.5*o+Xm*a,-.5*a-Xm*o),e.lineTo(-.5*s+Xm*u,-.5*u-Xm*s),e.closePath()}},Jm=[Dm,Bm,Fm,Ym,Zm,Um,Km];function $m(){}function ey(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ty(e){this._context=e}function ny(e){this._context=e}function ry(e){this._context=e}function iy(e,t){this._basis=new ty(e),this._beta=t}ty.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ey(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ey(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ny.prototype={areaStart:$m,areaEnd:$m,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ey(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ry.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ey(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},iy.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],o=t[0],a=e[n]-i,s=t[n]-o,u=-1;++u<=n;)this._basis.point(this._beta*e[u]+(1-this._beta)*(i+(r=u/n)*a),this._beta*t[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var oy=function e(t){function n(e){return 1===t?new ty(e):new iy(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function ay(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function sy(e,t){this._context=e,this._k=(1-t)/6}sy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ay(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ay(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var uy=function e(t){function n(e){return new sy(e,t)}return n.tension=function(t){return e(+t)},n}(0);function ly(e,t){this._context=e,this._k=(1-t)/6}ly.prototype={areaStart:$m,areaEnd:$m,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ay(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var cy=function e(t){function n(e){return new ly(e,t)}return n.tension=function(t){return e(+t)},n}(0);function fy(e,t){this._context=e,this._k=(1-t)/6}fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ay(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var dy=function e(t){function n(e){return new fy(e,t)}return n.tension=function(t){return e(+t)},n}(0);function hy(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>rm){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>rm){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function py(e,t){this._context=e,this._alpha=t}py.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:hy(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var gy=function e(t){function n(e){return t?new py(e,t):new sy(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function vy(e,t){this._context=e,this._alpha=t}vy.prototype={areaStart:$m,areaEnd:$m,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:hy(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var my=function e(t){function n(e){return t?new vy(e,t):new ly(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function yy(e,t){this._context=e,this._alpha=t}yy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hy(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var by=function e(t){function n(e){return t?new yy(e,t):new fy(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function xy(e){this._context=e}function wy(e){return e<0?-1:1}function Ay(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(wy(o)+wy(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Ey(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function My(e,t,n){var r=e._x0,i=e._x1,o=e._y1,a=(i-r)/3;e._context.bezierCurveTo(r+a,e._y0+a*t,i-a,o-a*n,i,o)}function Cy(e){this._context=e}function ky(e){this._context=new Ty(e)}function Ty(e){this._context=e}function _y(e){this._context=e}function Sy(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)o[t]-=n=i[t]/o[t-1],a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function Iy(e,t){this._context=e,this._t=t}function Ry(e,t){if((i=e.length)>1)for(var n,r,i,o=1,a=e[t[0]],s=a.length;o<i;++o)for(r=a,a=e[t[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function Ly(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Oy(e,t){return e[t]}function Ny(e){var t=e.map(Py);return Ly(e).sort(function(e,n){return t[e]-t[n]})}function Py(e){for(var t,n=-1,r=0,i=e.length,o=-1/0;++n<i;)(t=+e[n][1])>o&&(o=t,r=n);return r}function Dy(e){var t=e.map(By);return Ly(e).sort(function(e,n){return t[e]-t[n]})}function By(e){for(var t,n=0,r=-1,i=e.length;++r<i;)(t=+e[r][1])&&(n+=t);return n}function Vy(e){return function(){return e}}function zy(e){return e[0]}function Fy(e){return e[1]}function Gy(){this._=null}function Hy(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Wy(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Zy(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Yy(e){for(;e.L;)e=e.L;return e}function jy(e,t,n,r){var i=[null,null],o=vb.push(i)-1;return i.left=e,i.right=t,n&&Xy(i,e,t,n),r&&Xy(i,t,e,r),pb[e.index].halfedges.push(o),pb[t.index].halfedges.push(o),i}function Uy(e,t,n){var r=[t,n];return r.left=e,r}function Xy(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function qy(e,t,n,r,i){var o,a=e[0],s=e[1],u=a[0],l=a[1],c=0,f=1,d=s[0]-u,h=s[1]-l;if(o=t-u,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<f&&(f=o)}else if(d>0){if(o>f)return;o>c&&(c=o)}if(o=r-u,d||!(o<0)){if(o/=d,d<0){if(o>f)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<f&&(f=o)}if(o=n-l,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>c&&(c=o)}if(o=i-l,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<f&&(f=o)}return!(c>0||f<1)||(c>0&&(e[0]=[u+c*d,l+c*h]),f<1&&(e[1]=[u+f*d,l+f*h]),!0)}}}}}function Qy(e,t,n,r,i){var o=e[1];if(o)return!0;var a,s,u=e[0],l=e.left,c=e.right,f=l[0],d=l[1],h=c[0],p=c[1],g=(f+h)/2;if(p===d){if(g<t||g>=r)return;if(f>h){if(u){if(u[1]>=i)return}else u=[g,n];o=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];o=[g,n]}}else if(s=(d+p)/2-(a=(f-h)/(p-d))*g,a<-1||a>1)if(f>h){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(d<p){if(u){if(u[0]>=r)return}else u=[t,a*t+s];o=[r,a*r+s]}else{if(u){if(u[0]<t)return}else u=[r,a*r+s];o=[t,a*t+s]}return e[0]=u,e[1]=o,!0}function Ky(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Jy(e,t){return t[+(t.left!==e.site)]}function $y(e,t){return t[+(t.left===e.site)]}xy.prototype={areaStart:$m,areaEnd:$m,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Cy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:My(this,this._t0,Ey(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,My(this,Ey(this,n=Ay(this,e,t)),n);break;default:My(this,this._t0,n=Ay(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(ky.prototype=Object.create(Cy.prototype)).point=function(e,t){Cy.prototype.point.call(this,t,e)},Ty.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},_y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Sy(e),i=Sy(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Iy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}},Gy.prototype={constructor:Gy,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=Yy(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(Wy(this,n),n=(e=n).U),n.C=!1,r.C=!0,Zy(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Zy(this,n),n=(e=n).U),n.C=!1,r.C=!0,Wy(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,o=e.L,a=e.R;if(n=o?a?Yy(a):o:a,i?i.L===e?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=e.U,i.L=e=n.R,n.R=a,a.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,Wy(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Zy(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Wy(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,Zy(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Wy(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,Zy(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}};var eb,tb=[];function nb(){Hy(this),this.x=this.y=this.arc=this.site=this.cy=null}function rb(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,l=r[1]-s,c=o[0]-a,f=o[1]-s,d=2*(u*f-l*c);if(!(d>=-yb)){var h=u*u+l*l,p=c*c+f*f,g=(f*h-l*p)/d,v=(u*p-c*h)/d,m=tb.pop()||new nb;m.arc=e,m.site=i,m.x=g+a,m.y=(m.cy=v+s)+Math.sqrt(g*g+v*v),e.circle=m;for(var y=null,b=gb._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}gb.insert(y,m),y||(eb=m)}}}}function ib(e){var t=e.circle;t&&(t.P||(eb=t.N),gb.remove(t),tb.push(t),Hy(t),e.circle=null)}var ob=[];function ab(){Hy(this),this.edge=this.site=this.circle=null}function sb(e){var t=ob.pop()||new ab;return t.site=e,t}function ub(e){ib(e),hb.remove(e),ob.push(e),Hy(e)}function lb(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],o=e.P,a=e.N,s=[e];ub(e);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<mb&&Math.abs(r-u.circle.cy)<mb;)o=u.P,s.unshift(u),ub(u),u=o;s.unshift(u),ib(u);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<mb&&Math.abs(r-l.circle.cy)<mb;)a=l.N,s.push(l),ub(l),l=a;s.push(l),ib(l);var c,f=s.length;for(c=1;c<f;++c)Xy((l=s[c]).edge,(u=s[c-1]).site,l.site,i);(l=s[f-1]).edge=jy((u=s[0]).site,l.site,null,i),rb(u),rb(l)}function cb(e){for(var t,n,r,i,o=e[0],a=e[1],s=hb._;s;)if((r=fb(s,a)-o)>mb)s=s.L;else{if(!((i=o-db(s,a))>mb)){r>-mb?(t=s.P,n=s):i>-mb?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}!function(e){pb[e.index]={site:e,halfedges:[]}}(e);var u=sb(e);if(hb.insert(t,u),t||n){if(t===n)return ib(t),n=sb(t.site),hb.insert(u,n),u.edge=n.edge=jy(t.site,u.site),rb(t),void rb(n);if(n){ib(t),ib(n);var l=t.site,c=l[0],f=l[1],d=e[0]-c,h=e[1]-f,p=n.site,g=p[0]-c,v=p[1]-f,m=2*(d*v-h*g),y=d*d+h*h,b=g*g+v*v,x=[(v*y-h*b)/m+c,(d*b-g*y)/m+f];Xy(n.edge,l,p,x),u.edge=jy(l,e,null,x),n.edge=jy(e,p,null,x),rb(t),rb(n)}else u.edge=jy(t.site,u.site)}}function fb(e,t){var n=e.site,r=n[0],i=n[1],o=i-t;if(!o)return r;var a=e.P;if(!a)return-1/0;var s=(n=a.site)[0],u=n[1],l=u-t;if(!l)return s;var c=s-r,f=1/o-1/l,d=c/l;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*l)-u+l/2+i-o/2)))/f+r:(r+s)/2}function db(e,t){var n=e.N;if(n)return fb(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var hb,pb,gb,vb,mb=1e-6,yb=1e-12;function bb(e,t){return t[1]-e[1]||t[0]-e[0]}function xb(e,t){var n,r,i,o=e.sort(bb).pop();for(vb=[],pb=new Array(e.length),hb=new Gy,gb=new Gy;;)if(i=eb,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(cb(o),n=o[0],r=o[1]),o=e.pop();else{if(!i)break;lb(i.arc)}if(function(){for(var e,t,n,r,i=0,o=pb.length;i<o;++i)if((e=pb[i])&&(r=(t=e.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=Ky(e,vb[t[n]]);for(a.sort(function(e,t){return s[t]-s[e]}),n=0;n<r;++n)s[n]=t[a[n]];for(n=0;n<r;++n)t[n]=s[n]}}(),t){var a=+t[0][0],s=+t[0][1],u=+t[1][0],l=+t[1][1];!function(e,t,n,r){for(var i,o=vb.length;o--;)Qy(i=vb[o],e,t,n,r)&&qy(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>mb||Math.abs(i[0][1]-i[1][1])>mb)||delete vb[o]}(a,s,u,l),function(e,t,n,r){var i,o,a,s,u,l,c,f,d,h,p,g,v=pb.length,m=!0;for(i=0;i<v;++i)if(o=pb[i]){for(a=o.site,s=(u=o.halfedges).length;s--;)vb[u[s]]||u.splice(s,1);for(s=0,l=u.length;s<l;)p=(h=$y(o,vb[u[s]]))[0],g=h[1],f=(c=Jy(o,vb[u[++s%l]]))[0],d=c[1],(Math.abs(p-f)>mb||Math.abs(g-d)>mb)&&(u.splice(s,0,vb.push(Uy(a,h,Math.abs(p-e)<mb&&r-g>mb?[e,Math.abs(f-e)<mb?d:r]:Math.abs(g-r)<mb&&n-p>mb?[Math.abs(d-r)<mb?f:n,r]:Math.abs(p-n)<mb&&g-t>mb?[n,Math.abs(f-n)<mb?d:t]:Math.abs(g-t)<mb&&p-e>mb?[Math.abs(d-t)<mb?f:e,t]:null))-1),++l);l&&(m=!1)}if(m){var y,b,x,w=1/0;for(i=0,m=null;i<v;++i)(o=pb[i])&&(x=(y=(a=o.site)[0]-e)*y+(b=a[1]-t)*b)<w&&(w=x,m=o);if(m){var A=[e,t],E=[e,r],M=[n,r],C=[n,t];m.halfedges.push(vb.push(Uy(a=m.site,A,E))-1,vb.push(Uy(a,E,M))-1,vb.push(Uy(a,M,C))-1,vb.push(Uy(a,C,A))-1)}}for(i=0;i<v;++i)(o=pb[i])&&(o.halfedges.length||delete pb[i])}(a,s,u,l)}this.edges=vb,this.cells=pb,hb=gb=vb=pb=null}function wb(e){return function(){return e}}function Ab(e,t,n){this.target=e,this.type=t,this.transform=n}function Eb(e,t,n){this.k=e,this.x=t,this.y=n}xb.prototype={constructor:xb,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return Jy(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s,u,l,c=n.site,f=-1,d=t[i[o-1]],h=d.left===c?d.right:d.left;++f<o;)a=h,h=(d=t[i[f]]).left===c?d.right:d.left,a&&h&&r<a.index&&r<h.index&&((s=c)[0]-(l=h)[0])*((u=a)[1]-s[1])-(s[0]-u[0])*(l[1]-s[1])<0&&e.push([c.data,a.data,h.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=e-i.site[0],l=t-i.site[1],c=u*u+l*l;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=e-s[0],l=t-s[1],f=u*u+l*l;f<c&&(c=f,a=s.index)}})}while(null!==a);return o._found=r,null==n||c<=n*n?i.site:null}},Eb.prototype={constructor:Eb,scale:function(e){return 1===e?this:new Eb(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Eb(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Mb=new Eb(1,0,0);function Cb(e){return e.__zoom||Mb}function kb(){e.event.stopImmediatePropagation()}function Tb(){e.event.preventDefault(),e.event.stopImmediatePropagation()}function _b(){return!e.event.button}function Sb(){var e,t,n=this;return n instanceof SVGElement?(e=(n=n.ownerSVGElement||n).width.baseVal.value,t=n.height.baseVal.value):(e=n.clientWidth,t=n.clientHeight),[[0,0],[e,t]]}function Ib(){return this.__zoom||Mb}function Rb(){return-e.event.deltaY*(e.event.deltaMode?120:1)/500}function Lb(){return"ontouchstart"in this}function Ob(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}Cb.prototype=Eb.prototype,e.version="5.9.1",e.bisect=i,e.bisectRight=i,e.bisectLeft=o,e.ascending=t,e.bisector=n,e.cross=function(e,t,n){var r,i,o,s,u=e.length,l=t.length,c=new Array(u*l);for(null==n&&(n=a),r=o=0;r<u;++r)for(s=e[r],i=0;i<l;++i,++o)c[o]=n(s,t[i]);return c},e.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},e.deviation=l,e.extent=c,e.histogram=function(){var e=g,t=c,n=E;function r(r){var o,a,s=r.length,u=new Array(s);for(o=0;o<s;++o)u[o]=e(r[o],o,r);var l=t(u),c=l[0],f=l[1],d=n(u,c,f);Array.isArray(d)||(d=A(c,f,d),d=v(Math.ceil(c/d)*d,f,d));for(var h=d.length;d[0]<=c;)d.shift(),--h;for(;d[h-1]>f;)d.pop(),--h;var p,g=new Array(h+1);for(o=0;o<=h;++o)(p=g[o]=[]).x0=o>0?d[o-1]:c,p.x1=o<h?d[o]:f;for(o=0;o<s;++o)c<=(a=u[o])&&a<=f&&g[i(d,a,0,h)].push(r[o]);return g}return r.value=function(t){return arguments.length?(e="function"==typeof t?t:p(t),r):e},r.domain=function(e){return arguments.length?(t="function"==typeof e?e:p([e[0],e[1]]),r):t},r.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?p(d.call(e)):p(e),r):n},r},e.thresholdFreedmanDiaconis=function(e,n,r){return e=h.call(e,s).sort(t),Math.ceil((r-n)/(2*(M(e,.75)-M(e,.25))*Math.pow(e.length,-1/3)))},e.thresholdScott=function(e,t,n){return Math.ceil((n-t)/(3.5*l(e)*Math.pow(e.length,-1/3)))},e.thresholdSturges=E,e.max=C,e.mean=function(e,t){var n,r=e.length,i=r,o=-1,a=0;if(null==t)for(;++o<r;)isNaN(n=s(e[o]))?--i:a+=n;else for(;++o<r;)isNaN(n=s(t(e[o],o,e)))?--i:a+=n;if(i)return a/i},e.median=function(e,n){var r,i=e.length,o=-1,a=[];if(null==n)for(;++o<i;)isNaN(r=s(e[o]))||a.push(r);else for(;++o<i;)isNaN(r=s(n(e[o],o,e)))||a.push(r);return M(a.sort(t),.5)},e.merge=k,e.min=T,e.pairs=function(e,t){null==t&&(t=a);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return o},e.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},e.quantile=M,e.range=v,e.scan=function(e,n){if(r=e.length){var r,i,o=0,a=0,s=e[a];for(null==n&&(n=t);++o<r;)(n(i=e[o],s)<0||0!==n(s,s))&&(s=i,a=o);return 0===n(s,s)?a:void 0}},e.shuffle=function(e,t,n){for(var r,i,o=(null==n?e.length:n)-(t=null==t?0:+t);o;)i=Math.random()*o--|0,r=e[o+t],e[o+t]=e[i+t],e[i+t]=r;return e},e.sum=function(e,t){var n,r=e.length,i=-1,o=0;if(null==t)for(;++i<r;)(n=+e[i])&&(o+=n);else for(;++i<r;)(n=+t(e[i],i,e))&&(o+=n);return o},e.ticks=x,e.tickIncrement=w,e.tickStep=A,e.transpose=_,e.variance=u,e.zip=function(){return _(arguments)},e.axisTop=function(e){return F(L,e)},e.axisRight=function(e){return F(O,e)},e.axisBottom=function(e){return F(N,e)},e.axisLeft=function(e){return F(P,e)},e.brush=function(){return Si(yi)},e.brushX=function(){return Si(vi)},e.brushY=function(){return Si(mi)},e.brushSelection=function(e){var t=e.__brush;return t?t.dim.output(t.selection):null},e.chord=function(){var e=0,t=null,n=null,r=null;function i(i){var o,a,s,u,l,c,f=i.length,d=[],h=v(f),p=[],g=[],m=g.groups=new Array(f),y=new Array(f*f);for(o=0,l=-1;++l<f;){for(a=0,c=-1;++c<f;)a+=i[l][c];d.push(a),p.push(v(f)),o+=a}for(t&&h.sort(function(e,n){return t(d[e],d[n])}),n&&p.forEach(function(e,t){e.sort(function(e,r){return n(i[t][e],i[t][r])})}),u=(o=Pi(0,Ni-e*f)/o)?e:Ni/f,a=0,l=-1;++l<f;){for(s=a,c=-1;++c<f;){var b=h[l],x=p[b][c],w=i[b][x],A=a,E=a+=w*o;y[x*f+b]={index:b,subindex:x,startAngle:A,endAngle:E,value:w}}m[b]={index:b,startAngle:s,endAngle:a,value:d[b]},a+=u}for(l=-1;++l<f;)for(c=l-1;++c<f;){var M=y[c*f+l],C=y[l*f+c];(M.value||C.value)&&g.push(M.value<C.value?{source:C,target:M}:{source:M,target:C})}return r?g.sort(r):g}return i.padAngle=function(t){return arguments.length?(e=Pi(0,t),i):e},i.sortGroups=function(e){return arguments.length?(t=e,i):t},i.sortSubgroups=function(e){return arguments.length?(n=e,i):n},i.sortChords=function(e){return arguments.length?(null==e?r=null:(t=e,r=function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)})._=e,i):r&&r._;var t},i},e.ribbon=function(){var e=Wi,t=Zi,n=Yi,r=ji,i=Ui,o=null;function a(){var a,s=Di.call(arguments),u=e.apply(this,s),l=t.apply(this,s),c=+n.apply(this,(s[0]=u,s)),f=r.apply(this,s)-Oi,d=i.apply(this,s)-Oi,h=c*Ii(f),p=c*Ri(f),g=+n.apply(this,(s[0]=l,s)),v=r.apply(this,s)-Oi,m=i.apply(this,s)-Oi;if(o||(o=a=Hi()),o.moveTo(h,p),o.arc(0,0,c,f,d),f===v&&d===m||(o.quadraticCurveTo(0,0,g*Ii(v),g*Ri(v)),o.arc(0,0,g,v,m)),o.quadraticCurveTo(0,0,h,p),o.closePath(),a)return o=null,a+""||null}return a.radius=function(e){return arguments.length?(n="function"==typeof e?e:Bi(+e),a):n},a.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:Bi(+e),a):r},a.endAngle=function(e){return arguments.length?(i="function"==typeof e?e:Bi(+e),a):i},a.source=function(t){return arguments.length?(e=t,a):e},a.target=function(e){return arguments.length?(t=e,a):t},a.context=function(e){return arguments.length?(o=null==e?null:e,a):o},a},e.nest=function(){var e,t,n,r=[],i=[];function o(n,i,a,s){if(i>=r.length)return null!=e&&n.sort(e),null!=t?t(n):n;for(var u,l,c,f=-1,d=n.length,h=r[i++],p=qi(),g=a();++f<d;)(c=p.get(u=h(l=n[f])+""))?c.push(l):p.set(u,[l]);return p.each(function(e,t){s(g,t,o(e,i,a,s))}),g}return n={object:function(e){return o(e,0,Qi,Ki)},map:function(e){return o(e,0,Ji,$i)},entries:function(e){return function e(n,o){if(++o>r.length)return n;var a,s=i[o-1];return null!=t&&o>=r.length?a=n.entries():(a=[],n.each(function(t,n){a.push({key:n,values:e(t,o)})})),null!=s?a.sort(function(e,t){return s(e.key,t.key)}):a}(o(e,0,Ji,$i),0)},key:function(e){return r.push(e),n},sortKeys:function(e){return i[r.length-1]=e,n},sortValues:function(t){return e=t,n},rollup:function(e){return t=e,n}}},e.set=no,e.map=qi,e.keys=function(e){var t=[];for(var n in e)t.push(n);return t},e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},e.color=ft,e.rgb=gt,e.hsl=bt,e.lab=Lt,e.hcl=zt,e.lch=function(e,t,n,r){return 1===arguments.length?Vt(e):new Ft(n,t,e,null==r?1:r)},e.gray=function(e,t){return new Ot(e,0,0,null==t?1:t)},e.cubehelix=Xt,e.contours=fo,e.contourDensity=function(){var e=go,t=vo,n=mo,r=960,i=500,o=20,a=2,s=3*o,u=r+2*s>>a,l=i+2*s>>a,c=oo(20);function f(r){var i=new Float32Array(u*l),f=new Float32Array(u*l);r.forEach(function(r,o,c){var f=+e(r,o,c)+s>>a,d=+t(r,o,c)+s>>a,h=+n(r,o,c);f>=0&&f<u&&d>=0&&d<l&&(i[f+d*u]+=h)}),ho({width:u,height:l,data:i},{width:u,height:l,data:f},o>>a),po({width:u,height:l,data:f},{width:u,height:l,data:i},o>>a),ho({width:u,height:l,data:i},{width:u,height:l,data:f},o>>a),po({width:u,height:l,data:f},{width:u,height:l,data:i},o>>a),ho({width:u,height:l,data:i},{width:u,height:l,data:f},o>>a),po({width:u,height:l,data:f},{width:u,height:l,data:i},o>>a);var h=c(i);if(!Array.isArray(h)){var p=C(i);h=A(0,p,h),(h=v(0,Math.floor(p/h)*h,h)).shift()}return fo().thresholds(h).size([u,l])(i).map(d)}function d(e){return e.value*=Math.pow(2,-2*a),e.coordinates.forEach(h),e}function h(e){e.forEach(p)}function p(e){e.forEach(g)}function g(e){e[0]=e[0]*Math.pow(2,a)-s,e[1]=e[1]*Math.pow(2,a)-s}function m(){return u=r+2*(s=3*o)>>a,l=i+2*s>>a,f}return f.x=function(t){return arguments.length?(e="function"==typeof t?t:oo(+t),f):e},f.y=function(e){return arguments.length?(t="function"==typeof e?e:oo(+e),f):t},f.weight=function(e){return arguments.length?(n="function"==typeof e?e:oo(+e),f):n},f.size=function(e){if(!arguments.length)return[r,i];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(t>=0||t>=0))throw new Error("invalid size");return r=t,i=n,m()},f.cellSize=function(e){if(!arguments.length)return 1<<a;if(!((e=+e)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(e)/Math.LN2),m()},f.thresholds=function(e){return arguments.length?(c="function"==typeof e?e:Array.isArray(e)?oo(ro.call(e)):oo(e),f):c},f.bandwidth=function(e){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return o=Math.round((Math.sqrt(4*e*e+1)-1)/2),m()},f},e.dispatch=H,e.drag=function(){var t,n,r,i,o=je,a=Ue,s=Xe,u=qe,l={},c=H("start","drag","end"),f=0,d=0;function h(e){e.on("mousedown.drag",p).filter(u).on("touchstart.drag",m).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(){if(!i&&o.apply(this,arguments)){var s=x("mouse",a.apply(this,arguments),Ve,this,arguments);s&&(Le(e.event.view).on("mousemove.drag",g,!0).on("mouseup.drag",v,!0),He(e.event.view),Fe(),r=!1,t=e.event.clientX,n=e.event.clientY,s("start"))}}function g(){if(Ge(),!r){var i=e.event.clientX-t,o=e.event.clientY-n;r=i*i+o*o>d}l.mouse("drag")}function v(){Le(e.event.view).on("mousemove.drag mouseup.drag",null),We(e.event.view,r),Ge(),l.mouse("end")}function m(){if(o.apply(this,arguments)){var t,n,r=e.event.changedTouches,i=a.apply(this,arguments),s=r.length;for(t=0;t<s;++t)(n=x(r[t].identifier,i,ze,this,arguments))&&(Fe(),n("start"))}}function y(){var t,n,r=e.event.changedTouches,i=r.length;for(t=0;t<i;++t)(n=l[r[t].identifier])&&(Ge(),n("drag"))}function b(){var t,n,r=e.event.changedTouches,o=r.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),t=0;t<o;++t)(n=l[r[t].identifier])&&(Fe(),n("end"))}function x(t,n,r,i,o){var a,u,d,p=r(n,t),g=c.copy();if(Te(new Ye(h,"beforestart",a,t,f,p[0],p[1],0,0,g),function(){return null!=(e.event.subject=a=s.apply(i,o))&&(u=a.x-p[0]||0,d=a.y-p[1]||0,!0)}))return function e(s){var c,v=p;switch(s){case"start":l[t]=e,c=f++;break;case"end":delete l[t],--f;case"drag":p=r(n,t),c=f}Te(new Ye(h,s,a,t,c,p[0]+u,p[1]+d,p[0]-v[0],p[1]-v[1],g),g.apply,g,[s,i,o])}}return h.filter=function(e){return arguments.length?(o="function"==typeof e?e:Ze(!!e),h):o},h.container=function(e){return arguments.length?(a="function"==typeof e?e:Ze(e),h):a},h.subject=function(e){return arguments.length?(s="function"==typeof e?e:Ze(e),h):s},h.touchable=function(e){return arguments.length?(u="function"==typeof e?e:Ze(!!e),h):u},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,h):Math.sqrt(d)},h},e.dragDisable=He,e.dragEnable=We,e.dsvFormat=ko,e.csvParse=_o,e.csvParseRows=So,e.csvFormat=Io,e.csvFormatBody=Ro,e.csvFormatRows=Lo,e.tsvParse=No,e.tsvParseRows=Po,e.tsvFormat=Do,e.tsvFormatBody=Bo,e.tsvFormatRows=Vo,e.autoType=function(e){for(var t in e){var n,r=e[t].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/.test(r))continue;r=new Date(r)}else r=n;else r=null;e[t]=r}return e},e.easeLinear=function(e){return+e},e.easeQuad=Rr,e.easeQuadIn=function(e){return e*e},e.easeQuadOut=function(e){return e*(2-e)},e.easeQuadInOut=Rr,e.easeCubic=Lr,e.easeCubicIn=function(e){return e*e*e},e.easeCubicOut=function(e){return--e*e*e+1},e.easeCubicInOut=Lr,e.easePoly=Pr,e.easePolyIn=Or,e.easePolyOut=Nr,e.easePolyInOut=Pr,e.easeSin=Vr,e.easeSinIn=function(e){return 1-Math.cos(e*Br)},e.easeSinOut=function(e){return Math.sin(e*Br)},e.easeSinInOut=Vr,e.easeExp=zr,e.easeExpIn=function(e){return Math.pow(2,10*e-10)},e.easeExpOut=function(e){return 1-Math.pow(2,-10*e)},e.easeExpInOut=zr,e.easeCircle=Fr,e.easeCircleIn=function(e){return 1-Math.sqrt(1-e*e)},e.easeCircleOut=function(e){return Math.sqrt(1- --e*e)},e.easeCircleInOut=Fr,e.easeBounce=Kr,e.easeBounceIn=function(e){return 1-Kr(1-e)},e.easeBounceOut=Kr,e.easeBounceInOut=function(e){return((e*=2)<=1?1-Kr(1-e):Kr(e-1)+1)/2},e.easeBack=ei,e.easeBackIn=Jr,e.easeBackOut=$r,e.easeBackInOut=ei,e.easeElastic=ri,e.easeElasticIn=ni,e.easeElasticOut=ri,e.easeElasticInOut=ii,e.blob=function(e,t){return fetch(e,t).then(zo)},e.buffer=function(e,t){return fetch(e,t).then(Fo)},e.dsv=function(e,t,n,r){3===arguments.length&&"function"==typeof n&&(r=n,n=void 0);var i=ko(e);return Ho(t,n).then(function(e){return i.parse(e,r)})},e.csv=Zo,e.tsv=Yo,e.image=function(e,t){return new Promise(function(n,r){var i=new Image;for(var o in t)i[o]=t[o];i.onerror=r,i.onload=function(){n(i)},i.src=e})},e.json=function(e,t){return fetch(e,t).then(jo)},e.text=Ho,e.xml=Xo,e.html=qo,e.svg=Qo,e.forceCenter=function(e,t){var n;function r(){var r,i,o=n.length,a=0,s=0;for(r=0;r<o;++r)a+=(i=n[r]).x,s+=i.y;for(a=a/o-e,s=s/o-t,r=0;r<o;++r)(i=n[r]).x-=a,i.y-=s}return null==e&&(e=0),null==t&&(t=0),r.initialize=function(e){n=e},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(e){return arguments.length?(t=+e,r):t},r},e.forceCollide=function(e){var t,n,r=1,i=1;function o(){for(var e,o,s,u,l,c,f,d=t.length,h=0;h<i;++h)for(o=ra(t,sa,ua).visitAfter(a),e=0;e<d;++e)f=(c=n[(s=t[e]).index])*c,u=s.x+s.vx,l=s.y+s.vy,o.visit(p);function p(e,t,n,i,o){var a=e.data,d=e.r,h=c+d;if(!a)return t>u+h||i<u-h||n>l+h||o<l-h;if(a.index>s.index){var p=u-a.x-a.vx,g=l-a.y-a.vy,v=p*p+g*g;v<h*h&&(0===p&&(v+=(p=Jo())*p),0===g&&(v+=(g=Jo())*g),v=(h-(v=Math.sqrt(v)))/v*r,s.vx+=(p*=v)*(h=(d*=d)/(f+d)),s.vy+=(g*=v)*h,a.vx-=p*(h=1-h),a.vy-=g*h)}}}function a(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function s(){if(t){var r,i,o=t.length;for(n=new Array(o),r=0;r<o;++r)n[(i=t[r]).index]=+e(i,r,t)}}return"function"!=typeof e&&(e=Ko(null==e?1:+e)),o.initialize=function(e){t=e,s()},o.iterations=function(e){return arguments.length?(i=+e,o):i},o.strength=function(e){return arguments.length?(r=+e,o):r},o.radius=function(t){return arguments.length?(e="function"==typeof t?t:Ko(+t),s(),o):e},o},e.forceLink=function(e){var t,n,r,i,o,a=la,s=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},u=Ko(30),l=1;function c(r){for(var i=0,a=e.length;i<l;++i)for(var s,u,c,f,d,h,p,g=0;g<a;++g)u=(s=e[g]).source,f=(c=s.target).x+c.vx-u.x-u.vx||Jo(),d=c.y+c.vy-u.y-u.vy||Jo(),f*=h=((h=Math.sqrt(f*f+d*d))-n[g])/h*r*t[g],d*=h,c.vx-=f*(p=o[g]),c.vy-=d*p,u.vx+=f*(p=1-p),u.vy+=d*p}function f(){if(r){var s,u,l=r.length,c=e.length,f=qi(r,a);for(s=0,i=new Array(l);s<c;++s)(u=e[s]).index=s,"object"!=typeof u.source&&(u.source=ca(f,u.source)),"object"!=typeof u.target&&(u.target=ca(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(s=0,o=new Array(c);s<c;++s)o[s]=i[(u=e[s]).source.index]/(i[u.source.index]+i[u.target.index]);t=new Array(c),d(),n=new Array(c),h()}}function d(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+s(e[n],n,e)}function h(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+u(e[t],t,e)}return null==e&&(e=[]),c.initialize=function(e){r=e,f()},c.links=function(t){return arguments.length?(e=t,f(),c):e},c.id=function(e){return arguments.length?(a=e,c):a},c.iterations=function(e){return arguments.length?(l=+e,c):l},c.strength=function(e){return arguments.length?(s="function"==typeof e?e:Ko(+e),d(),c):s},c.distance=function(e){return arguments.length?(u="function"==typeof e?e:Ko(+e),h(),c):u},c},e.forceManyBody=function(){var e,t,n,r,i=Ko(-30),o=1,a=1/0,s=.81;function u(r){var i,o=e.length,a=ra(e,fa,da).visitAfter(c);for(n=r,i=0;i<o;++i)t=e[i],a.visit(f)}function l(){if(e){var t,n,o=e.length;for(r=new Array(o),t=0;t<o;++t)r[(n=e[t]).index]=+i(n,t,e)}}function c(e){var t,n,i,o,a,s=0,u=0;if(e.length){for(i=o=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(s+=t.value,u+=n,i+=n*t.x,o+=n*t.y);e.x=i/u,e.y=o/u}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=r[t.data.index]}while(t=t.next)}e.value=s}function f(e,i,u,l){if(!e.value)return!0;var c=e.x-t.x,f=e.y-t.y,d=l-i,h=c*c+f*f;if(d*d/s<h)return h<a&&(0===c&&(h+=(c=Jo())*c),0===f&&(h+=(f=Jo())*f),h<o&&(h=Math.sqrt(o*h)),t.vx+=c*e.value*n/h,t.vy+=f*e.value*n/h),!0;if(!(e.length||h>=a)){(e.data!==t||e.next)&&(0===c&&(h+=(c=Jo())*c),0===f&&(h+=(f=Jo())*f),h<o&&(h=Math.sqrt(o*h)));do{e.data!==t&&(t.vx+=c*(d=r[e.data.index]*n/h),t.vy+=f*d)}while(e=e.next)}}return u.initialize=function(t){e=t,l()},u.strength=function(e){return arguments.length?(i="function"==typeof e?e:Ko(+e),l(),u):i},u.distanceMin=function(e){return arguments.length?(o=e*e,u):Math.sqrt(o)},u.distanceMax=function(e){return arguments.length?(a=e*e,u):Math.sqrt(a)},u.theta=function(e){return arguments.length?(s=e*e,u):Math.sqrt(s)},u},e.forceRadial=function(e,t,n){var r,i,o,a=Ko(.1);function s(e){for(var a=0,s=r.length;a<s;++a){var u=r[a],l=u.x-t||1e-6,c=u.y-n||1e-6,f=Math.sqrt(l*l+c*c),d=(o[a]-f)*i[a]*e/f;u.vx+=l*d,u.vy+=c*d}}function u(){if(r){var t,n=r.length;for(i=new Array(n),o=new Array(n),t=0;t<n;++t)o[t]=+e(r[t],t,r),i[t]=isNaN(o[t])?0:+a(r[t],t,r)}}return"function"!=typeof e&&(e=Ko(+e)),null==t&&(t=0),null==n&&(n=0),s.initialize=function(e){r=e,u()},s.strength=function(e){return arguments.length?(a="function"==typeof e?e:Ko(+e),u(),s):a},s.radius=function(t){return arguments.length?(e="function"==typeof t?t:Ko(+t),u(),s):e},s.x=function(e){return arguments.length?(t=+e,s):t},s.y=function(e){return arguments.length?(n=+e,s):n},s},e.forceSimulation=function(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=qi(),u=nr(c),l=H("tick","end");function c(){f(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function f(r){var u,l,c=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.each(function(e){e(n)}),u=0;u<c;++u)null==(l=e[u]).fx?l.x+=l.vx*=a:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=a:(l.y=l.fy,l.vy=0);return t}function d(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,isNaN(t.fx)||(t.x=t.fx),isNaN(t.fy)||(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=ha*Math.sqrt(n),o=n*pa;t.x=i*Math.cos(o),t.y=i*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function h(t){return t.initialize&&t.initialize(e),t}return null==e&&(e=[]),d(),t={tick:f,restart:function(){return u.restart(c),t},stop:function(){return u.stop(),t},nodes:function(n){return arguments.length?(e=n,d(),s.each(h),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(a=1-e,t):1-a},force:function(e,n){return arguments.length>1?(null==n?s.remove(e):s.set(e,h(n)),t):s.get(e)},find:function(t,n,r){var i,o,a,s,u,l=0,c=e.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(a=(i=t-(s=e[l]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(e,n){return arguments.length>1?(l.on(e,n),t):l.on(e)}}},e.forceX=function(e){var t,n,r,i=Ko(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vx+=(r[o]-i.x)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=Ko(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:Ko(+e),a(),o):i},o.x=function(t){return arguments.length?(e="function"==typeof t?t:Ko(+t),a(),o):e},o},e.forceY=function(e){var t,n,r,i=Ko(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vy+=(r[o]-i.y)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=Ko(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:Ko(+e),a(),o):i},o.y=function(t){return arguments.length?(e="function"==typeof t?t:Ko(+t),a(),o):e},o},e.formatDefaultLocale=Ta,e.formatLocale=ka,e.formatSpecifier=ba,e.precisionFixed=_a,e.precisionPrefix=Sa,e.precisionRound=Ia,e.geoArea=function(e){return vs.reset(),ls(e,ms),2*vs},e.geoBounds=function(e){var t,n,r,i,o,a,s;if(Ls=Rs=-(Ss=Is=1/0),Bs=[],ls(e,nu),n=Bs.length){for(Bs.sort(fu),t=1,o=[r=Bs[0]];t<n;++t)du(r,(i=Bs[t])[0])||du(r,i[1])?(cu(r[0],i[1])>cu(r[0],r[1])&&(r[1]=i[1]),cu(i[0],r[1])>cu(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,t=0,r=o[n=o.length-1];t<=n;r=i,++t)(s=cu(r[1],(i=o[t])[0]))>a&&(a=s,Ss=i[0],Rs=r[1])}return Bs=Vs=null,Ss===1/0||Is===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ss,Is],[Rs,Ls]]},e.geoCentroid=function(e){zs=Fs=Gs=Hs=Ws=Zs=Ys=js=Us=Xs=qs=0,ls(e,hu);var t=Us,n=Xs,r=qs,i=t*t+n*n+r*r;return i<1e-12&&(t=Zs,n=Ys,r=js,Fs<Pa&&(t=Gs,n=Hs,r=Ws),(i=t*t+n*n+r*r)<1e-12)?[NaN,NaN]:[Za(n,t)*Fa,ts(r/Ja(i))*Fa]},e.geoCircle=function(){var e,t,n=Mu([0,0]),r=Mu(90),i=Mu(6),o={point:function(n,r){e.push(n=t(n,r)),n[0]*=Fa,n[1]*=Fa}};function a(){var a=n.apply(this,arguments),s=r.apply(this,arguments)*Ga,u=i.apply(this,arguments)*Ga;return e=[],t=Tu(-a[0]*Ga,-a[1]*Ga,0).invert,Lu(o,s,u,1),a={type:"Polygon",coordinates:[e]},e=t=null,a}return a.center=function(e){return arguments.length?(n="function"==typeof e?e:Mu([+e[0],+e[1]]),a):n},a.radius=function(e){return arguments.length?(r="function"==typeof e?e:Mu(+e),a):r},a.precision=function(e){return arguments.length?(i="function"==typeof e?e:Mu(+e),a):i},a},e.geoClipAntimeridian=Zu,e.geoClipCircle=Yu,e.geoClipExtent=function(){var e,t,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return e&&t===n?e:e=Xu(r,i,o,a)(t=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],e=t=null,n):[[r,i],[o,a]]}}},e.geoClipRectangle=Xu,e.geoContains=function(e,t){return(e&&sl.hasOwnProperty(e.type)?sl[e.type]:ll)(e,t)},e.geoDistance=al,e.geoGraticule=ml,e.geoGraticule10=function(){return ml()()},e.geoInterpolate=function(e,t){var n=e[0]*Ga,r=e[1]*Ga,i=t[0]*Ga,o=t[1]*Ga,a=Ya(r),s=Qa(r),u=Ya(o),l=Qa(o),c=a*Ya(n),f=a*Qa(n),d=u*Ya(i),h=u*Qa(i),p=2*ts(Ja(ns(o-r)+a*u*ns(i-n))),g=Qa(p),v=p?function(e){var t=Qa(e*=p)/g,n=Qa(p-e)/g,r=n*c+t*d,i=n*f+t*h,o=n*s+t*l;return[Za(i,r)*Fa,Za(o,Ja(r*r+i*i))*Fa]}:function(){return[n*Fa,r*Fa]};return v.distance=p,v},e.geoLength=rl,e.geoPath=function(e,t){var n,r,i=4.5;function o(e){return e&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),ls(e,n(r))),r.result()}return o.area=function(e){return ls(e,n(Cl)),Cl.result()},o.measure=function(e){return ls(e,n(fc)),fc.result()},o.bounds=function(e){return ls(e,n(Vl)),Vl.result()},o.centroid=function(e){return ls(e,n(Xl)),Xl.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,yl):(e=t).stream,o):e},o.context=function(e){return arguments.length?(r=null==e?(t=null,new pc):new ic(t=e),"function"!=typeof i&&r.pointRadius(i),o):t},o.pointRadius=function(e){return arguments.length?(i="function"==typeof e?e:(r.pointRadius(+e),+e),o):i},o.projection(e).context(t)},e.geoAlbers=Oc,e.geoAlbersUsa=function(){var e,t,n,r,i,o,a=Oc(),s=Lc().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Lc().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,t){o=[e,t]}};function c(e){var t=e[0],a=e[1];return o=null,n.point(t,a),o||(r.point(t,a),o)||(i.point(t,a),o)}function f(){return e=t=null,c}return c.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(e)},c.stream=function(n){return e&&t===n?e:(r=[a.stream(t=n),s.stream(n),u.stream(n)],i=r.length,e={point:function(e,t){for(var n=-1;++n<i;)r[n].point(e,t)},sphere:function(){for(var e=-1;++e<i;)r[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)r[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)r[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)r[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)r[e].polygonEnd()}});var r,i},c.precision=function(e){return arguments.length?(a.precision(e),s.precision(e),u.precision(e),f()):a.precision()},c.scale=function(e){return arguments.length?(a.scale(e),s.scale(.35*e),u.scale(e),c.translate(a.translate())):a.scale()},c.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),o=+e[0],c=+e[1];return n=a.translate(e).clipExtent([[o-.455*t,c-.238*t],[o+.455*t,c+.238*t]]).stream(l),r=s.translate([o-.307*t,c+.201*t]).clipExtent([[o-.425*t+Pa,c+.12*t+Pa],[o-.214*t-Pa,c+.234*t-Pa]]).stream(l),i=u.translate([o-.205*t,c+.212*t]).clipExtent([[o-.214*t+Pa,c+.166*t+Pa],[o-.115*t-Pa,c+.234*t-Pa]]).stream(l),f()},c.fitExtent=function(e,t){return bc(c,e,t)},c.fitSize=function(e,t){return xc(c,e,t)},c.fitWidth=function(e,t){return wc(c,e,t)},c.fitHeight=function(e,t){return Ac(c,e,t)},c.scale(1070)},e.geoAzimuthalEqualArea=function(){return _c(Dc).scale(124.75).clipAngle(179.999)},e.geoAzimuthalEqualAreaRaw=Dc,e.geoAzimuthalEquidistant=function(){return _c(Bc).scale(79.4188).clipAngle(179.999)},e.geoAzimuthalEquidistantRaw=Bc,e.geoConicConformal=function(){return Ic(Gc).scale(109.5).parallels([30,30])},e.geoConicConformalRaw=Gc,e.geoConicEqualArea=Lc,e.geoConicEqualAreaRaw=Rc,e.geoConicEquidistant=function(){return Ic(Wc).scale(131.154).center([0,13.9389])},e.geoConicEquidistantRaw=Wc,e.geoEqualEarth=function(){return _c(qc).scale(177.158)},e.geoEqualEarthRaw=qc,e.geoEquirectangular=function(){return _c(Hc).scale(152.63)},e.geoEquirectangularRaw=Hc,e.geoGnomonic=function(){return _c(Qc).scale(144.049).clipAngle(60)},e.geoGnomonicRaw=Qc,e.geoIdentity=function(){var e,t,n,r,i,o,a=1,s=0,u=0,l=1,c=1,f=yl,d=null,h=yl;function p(){return r=i=null,o}return o={stream:function(e){return r&&i===e?r:r=f(h(i=e))},postclip:function(r){return arguments.length?(h=r,d=e=t=n=null,p()):h},clipExtent:function(r){return arguments.length?(h=null==r?(d=e=t=n=null,yl):Xu(d=+r[0][0],e=+r[0][1],t=+r[1][0],n=+r[1][1]),p()):null==d?null:[[d,e],[t,n]]},scale:function(e){return arguments.length?(f=Kc((a=+e)*l,a*c,s,u),p()):a},translate:function(e){return arguments.length?(f=Kc(a*l,a*c,s=+e[0],u=+e[1]),p()):[s,u]},reflectX:function(e){return arguments.length?(f=Kc(a*(l=e?-1:1),a*c,s,u),p()):l<0},reflectY:function(e){return arguments.length?(f=Kc(a*l,a*(c=e?-1:1),s,u),p()):c<0},fitExtent:function(e,t){return bc(o,e,t)},fitSize:function(e,t){return xc(o,e,t)},fitWidth:function(e,t){return wc(o,e,t)},fitHeight:function(e,t){return Ac(o,e,t)}}},e.geoProjection=_c,e.geoProjectionMutator=Sc,e.geoMercator=function(){return zc(Vc).scale(961/za)},e.geoMercatorRaw=Vc,e.geoNaturalEarth1=function(){return _c(Jc).scale(175.295)},e.geoNaturalEarth1Raw=Jc,e.geoOrthographic=function(){return _c($c).scale(249.5).clipAngle(90+Pa)},e.geoOrthographicRaw=$c,e.geoStereographic=function(){return _c(ef).scale(250).clipAngle(142)},e.geoStereographicRaw=ef,e.geoTransverseMercator=function(){var e=zc(tf),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)},e.geoTransverseMercatorRaw=tf,e.geoRotation=Ru,e.geoStream=ls,e.geoTransform=function(e){return{stream:vc(e)}},e.cluster=function(){var e=nf,t=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter(function(t){var n=t.children;n?(t.x=function(e){return e.reduce(rf,0)/e.length}(n),t.y=1+n.reduce(of,0)):(t.x=o?a+=e(t,o):0,t.y=0,o=t)});var s=function(e){for(var t;t=e.children;)e=t[0];return e}(i),u=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),l=s.x-e(s,u)/2,c=u.x+e(u,s)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-l)/(c-l)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},e.hierarchy=sf,e.pack=function(){var e=null,t=1,n=1,r=Tf;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(If(e)).eachAfter(Rf(r,.5)).eachBefore(Lf(1)):i.eachBefore(If(Sf)).eachAfter(Rf(Tf,1)).eachAfter(Rf(r,i.r/Math.min(t,n))).eachBefore(Lf(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=null==(n=t)?null:kf(n),i):e;var n},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:_f(+e),i):r},i},e.packSiblings=function(e){return Cf(e),e},e.packEnclose=hf,e.partition=function(){var e=1,t=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/o,i.eachBefore(function(e,t){return function(r){r.children&&Nf(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(t,o)),r&&i.eachBefore(Of),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i},e.stratify=function(){var e=Vf,t=zf;function n(n){var r,i,o,a,s,u,l,c=n.length,f=new Array(c),d={};for(i=0;i<c;++i)s=f[i]=new ff(r=n[i]),null!=(u=e(r,i,n))&&(u+="")&&(d[l=Pf+(s.id=u)]=l in d?Bf:s);for(i=0;i<c;++i)if(s=f[i],null!=(u=t(n[i],i,n))&&(u+="")){if(!(a=d[Pf+u]))throw new Error("missing: "+u);if(a===Bf)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=Df,o.eachBefore(function(e){e.depth=e.parent.depth+1,--c}).eachBefore(cf),o.parent=null,c>0)throw new Error("cycle");return o}return n.id=function(t){return arguments.length?(e=kf(t),n):e},n.parentId=function(e){return arguments.length?(t=kf(e),n):t},n},e.tree=function(){var e=Ff,t=1,n=1,r=null;function i(i){var u=function(e){for(var t,n,r,i,o,a=new Yf(e,0),s=[a];t=s.pop();)if(r=t._.children)for(t.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=t.children[i]=new Yf(r[i],i)),n.parent=t;return(a.parent=new Yf(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var l=i,c=i,f=i;i.eachBefore(function(e){e.x<l.x&&(l=e),e.x>c.x&&(c=e),e.depth>f.depth&&(f=e)});var d=l===c?1:e(l,c)/2,h=d-l.x,p=t/(c.x+d+h),g=n/(f.depth||1);i.eachBefore(function(e){e.x=(e.x+h)*p,e.y=e.depth*g})}return i}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o=t,a=t,s=n,u=o.parent.children[0],l=o.m,c=a.m,f=s.m,d=u.m;s=Hf(s),o=Gf(o),s&&o;)u=Gf(u),(a=Hf(a)).a=t,(i=s.z+f-o.z-l+e(s._,o._))>0&&(Wf(Zf(s,t,r),t,i),l+=i,c+=i),f+=s.m,l+=o.m,d+=u.m,c+=a.m;s&&!Hf(a)&&(a.t=s,a.m+=f-c),o&&!Gf(u)&&(u.t=o,u.m+=l-d,r=t)}return r}(t,i,t.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},e.treemap=function(){var e=qf,t=!1,n=1,r=1,i=[0],o=Tf,a=Tf,s=Tf,u=Tf,l=Tf;function c(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(f),i=[0],t&&e.eachBefore(Of),e}function f(t){var n=i[t.depth],r=t.x0+n,c=t.y0+n,f=t.x1-n,d=t.y1-n;f<r&&(r=f=(r+f)/2),d<c&&(c=d=(c+d)/2),t.x0=r,t.y0=c,t.x1=f,t.y1=d,t.children&&(n=i[t.depth+1]=o(t)/2,r+=l(t)-n,c+=a(t)-n,(f-=s(t)-n)<r&&(r=f=(r+f)/2),(d-=u(t)-n)<c&&(c=d=(c+d)/2),e(t,r,c,f,d))}return c.round=function(e){return arguments.length?(t=!!e,c):t},c.size=function(e){return arguments.length?(n=+e[0],r=+e[1],c):[n,r]},c.tile=function(t){return arguments.length?(e=kf(t),c):e},c.padding=function(e){return arguments.length?c.paddingInner(e).paddingOuter(e):c.paddingInner()},c.paddingInner=function(e){return arguments.length?(o="function"==typeof e?e:_f(+e),c):o},c.paddingOuter=function(e){return arguments.length?c.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):c.paddingTop()},c.paddingTop=function(e){return arguments.length?(a="function"==typeof e?e:_f(+e),c):a},c.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:_f(+e),c):s},c.paddingBottom=function(e){return arguments.length?(u="function"==typeof e?e:_f(+e),c):u},c.paddingLeft=function(e){return arguments.length?(l="function"==typeof e?e:_f(+e),c):l},c},e.treemapBinary=function(e,t,n,r,i){var o,a,s=e.children,u=s.length,l=new Array(u+1);for(l[0]=a=o=0;o<u;++o)l[o+1]=a+=s[o].value;!function e(t,n,r,i,o,a,u){if(t>=n-1){var c=s[t];return c.x0=i,c.y0=o,c.x1=a,void(c.y1=u)}for(var f=l[t],d=r/2+f,h=t+1,p=n-1;h<p;){var g=h+p>>>1;l[g]<d?h=g+1:p=g}d-l[h-1]<l[h]-d&&t+1<h&&--h;var v=l[h]-f,m=r-v;if(a-i>u-o){var y=(i*m+a*v)/r;e(t,h,v,i,o,y,u),e(h,n,m,y,o,a,u)}else{var b=(o*m+u*v)/r;e(t,h,v,i,o,a,b),e(h,n,m,i,b,a,u)}}(0,u,e.value,t,n,r,i)},e.treemapDice=Nf,e.treemapSlice=jf,e.treemapSliceDice=function(e,t,n,r,i){(1&e.depth?jf:Nf)(e,t,n,r,i)},e.treemapSquarify=qf,e.treemapResquarify=Qf,e.interpolate=gn,e.interpolateArray=un,e.interpolateBasis=Kt,e.interpolateBasisClosed=Jt,e.interpolateDate=ln,e.interpolateDiscrete=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},e.interpolateHue=function(e,t){var n=tn(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},e.interpolateNumber=cn,e.interpolateObject=fn,e.interpolateRound=vn,e.interpolateString=pn,e.interpolateTransformCss=Cn,e.interpolateTransformSvg=kn,e.interpolateZoom=Ln,e.interpolateRgb=rn,e.interpolateRgbBasis=an,e.interpolateRgbBasisClosed=sn,e.interpolateHsl=Nn,e.interpolateHslLong=Pn,e.interpolateLab=function(e,t){var n=nn((e=Lt(e)).l,(t=Lt(t)).l),r=nn(e.a,t.a),i=nn(e.b,t.b),o=nn(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=o(t),e+""}},e.interpolateHcl=Bn,e.interpolateHclLong=Vn,e.interpolateCubehelix=Hn,e.interpolateCubehelixLong=Wn,e.piecewise=function(e,t){for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}},e.quantize=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n},e.path=Hi,e.polygonArea=function(e){for(var t,n=-1,r=e.length,i=e[r-1],o=0;++n<r;)o+=(t=i)[1]*(i=e[n])[0]-t[0]*i[1];return o/2},e.polygonCentroid=function(e){for(var t,n,r=-1,i=e.length,o=0,a=0,s=e[i-1],u=0;++r<i;)u+=n=(t=s)[0]*(s=e[r])[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o/(u*=3),a/u]},e.polygonHull=function(e){if((n=e.length)<3)return null;var t,n,r=new Array(n),i=new Array(n);for(t=0;t<n;++t)r[t]=[+e[t][0],+e[t][1],t];for(r.sort(Kf),t=0;t<n;++t)i[t]=[r[t][0],-r[t][1]];var o=Jf(r),a=Jf(i),s=a[0]===o[0],u=a[a.length-1]===o[o.length-1],l=[];for(t=o.length-1;t>=0;--t)l.push(e[r[o[t]][2]]);for(t=+s;t<a.length-u;++t)l.push(e[r[a[t]][2]]);return l},e.polygonContains=function(e,t){for(var n,r,i=e.length,o=e[i-1],a=t[0],s=t[1],u=o[0],l=o[1],c=!1,f=0;f<i;++f)n=(o=e[f])[0],(r=o[1])>s!=l>s&&a<(u-n)*(s-r)/(l-r)+n&&(c=!c),u=n,l=r;return c},e.polygonLength=function(e){for(var t,n,r=-1,i=e.length,o=e[i-1],a=o[0],s=o[1],u=0;++r<i;)t=a,n=s,t-=a=(o=e[r])[0],n-=s=o[1],u+=Math.sqrt(t*t+n*n);return u},e.quadtree=ra,e.randomUniform=ed,e.randomNormal=td,e.randomLogNormal=nd,e.randomBates=id,e.randomIrwinHall=rd,e.randomExponential=od,e.scaleBand=hd,e.scalePoint=function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return e(n())},t}(hd.apply(null,arguments).paddingInner(1))},e.scaleIdentity=function e(t){var n;function r(e){return isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=ld.call(e,pd),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?ld.call(t,pd):[0,1],Cd(r)},e.scaleLinear=function e(){var t=Ed(vd,vd);return t.copy=function(){return wd(t,e())},ad.apply(t,arguments),Cd(t)},e.scaleLog=function e(){var t=Od(Ad()).domain([1,10]);return t.copy=function(){return wd(t,e()).base(t.base())},ad.apply(t,arguments),t},e.scaleSymlog=function e(){var t=Dd(Ad());return t.copy=function(){return wd(t,e()).constant(t.constant())},ad.apply(t,arguments)},e.scaleOrdinal=dd,e.scaleImplicit=fd,e.scalePow=Gd,e.scaleSqrt=function(){return Gd.apply(null,arguments).exponent(.5)},e.scaleQuantile=function e(){var n,r=[],o=[],a=[];function s(){var e=0,t=Math.max(1,o.length);for(a=new Array(t-1);++e<t;)a[e-1]=M(r,e/t);return u}function u(e){return isNaN(e=+e)?n:o[i(a,e)]}return u.invertExtent=function(e){var t=o.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:r[0],t<a.length?a[t]:r[r.length-1]]},u.domain=function(e){if(!arguments.length)return r.slice();r=[];for(var n,i=0,o=e.length;i<o;++i)null==(n=e[i])||isNaN(n=+n)||r.push(n);return r.sort(t),s()},u.range=function(e){return arguments.length?(o=cd.call(e),s()):o.slice()},u.unknown=function(e){return arguments.length?(n=e,u):n},u.quantiles=function(){return a.slice()},u.copy=function(){return e().domain(r).range(o).unknown(n)},ad.apply(u,arguments)},e.scaleQuantize=function e(){var t,n=0,r=1,o=1,a=[.5],s=[0,1];function u(e){return e<=e?s[i(a,e,0,o)]:t}function l(){var e=-1;for(a=new Array(o);++e<o;)a[e]=((e+1)*r-(e-o)*n)/(o+1);return u}return u.domain=function(e){return arguments.length?(n=+e[0],r=+e[1],l()):[n,r]},u.range=function(e){return arguments.length?(o=(s=cd.call(e)).length-1,l()):s.slice()},u.invertExtent=function(e){var t=s.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,a[0]]:t>=o?[a[o-1],r]:[a[t-1],a[t]]},u.unknown=function(e){return arguments.length?(t=e,u):u},u.thresholds=function(){return a.slice()},u.copy=function(){return e().domain([n,r]).range(s).unknown(t)},ad.apply(Cd(u),arguments)},e.scaleThreshold=function e(){var t,n=[.5],r=[0,1],o=1;function a(e){return e<=e?r[i(n,e,0,o)]:t}return a.domain=function(e){return arguments.length?(n=cd.call(e),o=Math.min(n.length,r.length-1),a):n.slice()},a.range=function(e){return arguments.length?(r=cd.call(e),o=Math.min(n.length,r.length-1),a):r.slice()},a.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},a.unknown=function(e){return arguments.length?(t=e,a):t},a.copy=function(){return e().domain(n).range(r).unknown(t)},ad.apply(a,arguments)},e.scaleTime=function(){return ad.apply(xg(xh,yh,ih,th,$d,Kd,qd,Yd,e.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},e.scaleUtc=function(){return ad.apply(xg(Yh,Wh,Sh,kh,Mh,Ah,qd,Yd,e.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},e.scaleSequential=function e(){var t=Cd(wg()(vd));return t.copy=function(){return Ag(t,e())},sd.apply(t,arguments)},e.scaleSequentialLog=function e(){var t=Od(wg()).domain([1,10]);return t.copy=function(){return Ag(t,e()).base(t.base())},sd.apply(t,arguments)},e.scaleSequentialPow=Eg,e.scaleSequentialSqrt=function(){return Eg.apply(null,arguments).exponent(.5)},e.scaleSequentialSymlog=function e(){var t=Dd(wg());return t.copy=function(){return Ag(t,e()).constant(t.constant())},sd.apply(t,arguments)},e.scaleSequentialQuantile=function e(){var n=[],r=vd;function o(e){if(!isNaN(e=+e))return r((i(n,e)-1)/(n.length-1))}return o.domain=function(e){if(!arguments.length)return n.slice();n=[];for(var r,i=0,a=e.length;i<a;++i)null==(r=e[i])||isNaN(r=+r)||n.push(r);return n.sort(t),o},o.interpolator=function(e){return arguments.length?(r=e,o):r},o.copy=function(){return e(r).domain(n)},sd.apply(o,arguments)},e.scaleDiverging=function e(){var t=Cd(Mg()(vd));return t.copy=function(){return Ag(t,e())},sd.apply(t,arguments)},e.scaleDivergingLog=function e(){var t=Od(Mg()).domain([.1,1,10]);return t.copy=function(){return Ag(t,e()).base(t.base())},sd.apply(t,arguments)},e.scaleDivergingPow=Cg,e.scaleDivergingSqrt=function(){return Cg.apply(null,arguments).exponent(.5)},e.scaleDivergingSymlog=function e(){var t=Dd(Mg());return t.copy=function(){return Ag(t,e()).constant(t.constant())},sd.apply(t,arguments)},e.tickFormat=Md,e.schemeCategory10=Tg,e.schemeAccent=_g,e.schemeDark2=Sg,e.schemePaired=Ig,e.schemePastel1=Rg,e.schemePastel2=Lg,e.schemeSet1=Og,e.schemeSet2=Ng,e.schemeSet3=Pg,e.interpolateBrBG=Vg,e.schemeBrBG=Bg,e.interpolatePRGn=Fg,e.schemePRGn=zg,e.interpolatePiYG=Hg,e.schemePiYG=Gg,e.interpolatePuOr=Zg,e.schemePuOr=Wg,e.interpolateRdBu=jg,e.schemeRdBu=Yg,e.interpolateRdGy=Xg,e.schemeRdGy=Ug,e.interpolateRdYlBu=Qg,e.schemeRdYlBu=qg,e.interpolateRdYlGn=Jg,e.schemeRdYlGn=Kg,e.interpolateSpectral=ev,e.schemeSpectral=$g,e.interpolateBuGn=nv,e.schemeBuGn=tv,e.interpolateBuPu=iv,e.schemeBuPu=rv,e.interpolateGnBu=av,e.schemeGnBu=ov,e.interpolateOrRd=uv,e.schemeOrRd=sv,e.interpolatePuBuGn=cv,e.schemePuBuGn=lv,e.interpolatePuBu=dv,e.schemePuBu=fv,e.interpolatePuRd=pv,e.schemePuRd=hv,e.interpolateRdPu=vv,e.schemeRdPu=gv,e.interpolateYlGnBu=yv,e.schemeYlGnBu=mv,e.interpolateYlGn=xv,e.schemeYlGn=bv,e.interpolateYlOrBr=Av,e.schemeYlOrBr=wv,e.interpolateYlOrRd=Mv,e.schemeYlOrRd=Ev,e.interpolateBlues=kv,e.schemeBlues=Cv,e.interpolateGreens=_v,e.schemeGreens=Tv,e.interpolateGreys=Iv,e.schemeGreys=Sv,e.interpolatePurples=Lv,e.schemePurples=Rv,e.interpolateReds=Nv,e.schemeReds=Ov,e.interpolateOranges=Dv,e.schemeOranges=Pv,e.interpolateCubehelixDefault=Bv,e.interpolateRainbow=function(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Fv.h=360*e-100,Fv.s=1.5-1.5*t,Fv.l=.8-.9*t,Fv+""},e.interpolateWarm=Vv,e.interpolateCool=zv,e.interpolateSinebow=function(e){var t;return e=(.5-e)*Math.PI,Gv.r=255*(t=Math.sin(e))*t,Gv.g=255*(t=Math.sin(e+Hv))*t,Gv.b=255*(t=Math.sin(e+Wv))*t,Gv+""},e.interpolateViridis=Yv,e.interpolateMagma=jv,e.interpolateInferno=Uv,e.interpolatePlasma=Xv,e.create=function(e){return Le(q(e).call(document.documentElement))},e.creator=q,e.local=Ne,e.matcher=ee,e.mouse=Ve,e.namespace=X,e.namespaces=U,e.clientPoint=Be,e.select=Le,e.selectAll=function(e){return"string"==typeof e?new Ie([document.querySelectorAll(e)],[document.documentElement]):new Ie([null==e?[]:e],Se)},e.selection=Re,e.selector=K,e.selectorAll=$,e.style=ue,e.touch=ze,e.touches=function(e,t){null==t&&(t=De().touches);for(var n=0,r=t?t.length:0,i=new Array(r);n<r;++n)i[n]=Be(e,t[n]);return i},e.window=se,e.customEvent=Te,e.arc=function(){var e=um,t=lm,n=qv(0),r=null,i=cm,o=fm,a=dm,s=null;function u(){var u,l,c,f=+e.apply(this,arguments),d=+t.apply(this,arguments),h=i.apply(this,arguments)-om,p=o.apply(this,arguments)-om,g=Qv(p-h),v=p>h;if(s||(s=u=Hi()),d<f&&(l=d,d=f,f=l),d>rm)if(g>am-rm)s.moveTo(d*Jv(h),d*tm(h)),s.arc(0,0,d,h,p,!v),f>rm&&(s.moveTo(f*Jv(p),f*tm(p)),s.arc(0,0,f,p,h,v));else{var m,y,b=h,x=p,w=h,A=p,E=g,M=g,C=a.apply(this,arguments)/2,k=C>rm&&(r?+r.apply(this,arguments):nm(f*f+d*d)),T=em(Qv(d-f)/2,+n.apply(this,arguments)),_=T,S=T;if(k>rm){var I=sm(k/f*tm(C)),R=sm(k/d*tm(C));(E-=2*I)>rm?(w+=I*=v?1:-1,A-=I):(E=0,w=A=(h+p)/2),(M-=2*R)>rm?(b+=R*=v?1:-1,x-=R):(M=0,b=x=(h+p)/2)}var L=d*Jv(b),O=d*tm(b),N=f*Jv(A),P=f*tm(A);if(T>rm){var D,B=d*Jv(x),V=d*tm(x),z=f*Jv(w),F=f*tm(w);if(g<im&&(D=function(e,t,n,r,i,o,a,s){var u=z-L,l=F-O,c=N-B,f=P-V,d=f*u-c*l;if(!(d*d<rm))return[L+(d=(c*(O-V)-f*(L-B))/d)*u,O+d*l]}())){var G=L-D[0],H=O-D[1],W=B-D[0],Z=V-D[1],Y=1/tm(((c=(G*W+H*Z)/(nm(G*G+H*H)*nm(W*W+Z*Z)))>1?0:c<-1?im:Math.acos(c))/2),j=nm(D[0]*D[0]+D[1]*D[1]);_=em(T,(f-j)/(Y-1)),S=em(T,(d-j)/(Y+1))}}M>rm?S>rm?(m=hm(z,F,L,O,d,S,v),y=hm(B,V,N,P,d,S,v),s.moveTo(m.cx+m.x01,m.cy+m.y01),S<T?s.arc(m.cx,m.cy,S,Kv(m.y01,m.x01),Kv(y.y01,y.x01),!v):(s.arc(m.cx,m.cy,S,Kv(m.y01,m.x01),Kv(m.y11,m.x11),!v),s.arc(0,0,d,Kv(m.cy+m.y11,m.cx+m.x11),Kv(y.cy+y.y11,y.cx+y.x11),!v),s.arc(y.cx,y.cy,S,Kv(y.y11,y.x11),Kv(y.y01,y.x01),!v))):(s.moveTo(L,O),s.arc(0,0,d,b,x,!v)):s.moveTo(L,O),f>rm&&E>rm?_>rm?(m=hm(N,P,B,V,f,-_,v),y=hm(L,O,z,F,f,-_,v),s.lineTo(m.cx+m.x01,m.cy+m.y01),_<T?s.arc(m.cx,m.cy,_,Kv(m.y01,m.x01),Kv(y.y01,y.x01),!v):(s.arc(m.cx,m.cy,_,Kv(m.y01,m.x01),Kv(m.y11,m.x11),!v),s.arc(0,0,f,Kv(m.cy+m.y11,m.cx+m.x11),Kv(y.cy+y.y11,y.cx+y.x11),v),s.arc(y.cx,y.cy,_,Kv(y.y11,y.x11),Kv(y.y01,y.x01),!v))):s.arc(0,0,f,A,w,v):s.lineTo(N,P)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-im/2;return[Jv(r)*n,tm(r)*n]},u.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:qv(+t),u):e},u.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:qv(+e),u):t},u.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:qv(+e),u):n},u.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:qv(+e),u):r},u.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:qv(+e),u):i},u.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:qv(+e),u):o},u.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:qv(+e),u):a},u.context=function(e){return arguments.length?(s=null==e?null:e,u):s},u},e.area=bm,e.line=ym,e.pie=function(){var e=wm,t=xm,n=null,r=qv(0),i=qv(am),o=qv(0);function a(a){var s,u,l,c,f,d=a.length,h=0,p=new Array(d),g=new Array(d),v=+r.apply(this,arguments),m=Math.min(am,Math.max(-am,i.apply(this,arguments)-v)),y=Math.min(Math.abs(m)/d,o.apply(this,arguments)),b=y*(m<0?-1:1);for(s=0;s<d;++s)(f=g[p[s]=s]=+e(a[s],s,a))>0&&(h+=f);for(null!=t?p.sort(function(e,n){return t(g[e],g[n])}):null!=n&&p.sort(function(e,t){return n(a[e],a[t])}),s=0,l=h?(m-d*b)/h:0;s<d;++s,v=c)c=v+((f=g[u=p[s]])>0?f*l:0)+b,g[u]={data:a[u],index:s,value:f,startAngle:v,endAngle:c,padAngle:y};return g}return a.value=function(t){return arguments.length?(e="function"==typeof t?t:qv(+t),a):e},a.sortValues=function(e){return arguments.length?(t=e,n=null,a):t},a.sort=function(e){return arguments.length?(n=e,t=null,a):n},a.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:qv(+e),a):r},a.endAngle=function(e){return arguments.length?(i="function"==typeof e?e:qv(+e),a):i},a.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:qv(+e),a):o},a},e.areaRadial=Tm,e.radialArea=Tm,e.lineRadial=km,e.radialLine=km,e.pointRadial=_m,e.linkHorizontal=function(){return Lm(Om)},e.linkVertical=function(){return Lm(Nm)},e.linkRadial=function(){var e=Lm(Pm);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e},e.symbol=function(){var e=qv(Dm),t=qv(64),n=null;function r(){var r;if(n||(n=r=Hi()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(t){return arguments.length?(e="function"==typeof t?t:qv(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:qv(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r},e.symbols=Jm,e.symbolCircle=Dm,e.symbolCross=Bm,e.symbolDiamond=Fm,e.symbolSquare=Ym,e.symbolStar=Zm,e.symbolTriangle=Um,e.symbolWye=Km,e.curveBasisClosed=function(e){return new ny(e)},e.curveBasisOpen=function(e){return new ry(e)},e.curveBasis=function(e){return new ty(e)},e.curveBundle=oy,e.curveCardinalClosed=cy,e.curveCardinalOpen=dy,e.curveCardinal=uy,e.curveCatmullRomClosed=my,e.curveCatmullRomOpen=by,e.curveCatmullRom=gy,e.curveLinearClosed=function(e){return new xy(e)},e.curveLinear=gm,e.curveMonotoneX=function(e){return new Cy(e)},e.curveMonotoneY=function(e){return new ky(e)},e.curveNatural=function(e){return new _y(e)},e.curveStep=function(e){return new Iy(e,.5)},e.curveStepAfter=function(e){return new Iy(e,1)},e.curveStepBefore=function(e){return new Iy(e,0)},e.stack=function(){var e=qv([]),t=Ly,n=Ry,r=Oy;function i(i){var o,a,s=e.apply(this,arguments),u=i.length,l=s.length,c=new Array(l);for(o=0;o<l;++o){for(var f,d=s[o],h=c[o]=new Array(u),p=0;p<u;++p)h[p]=f=[0,+r(i[p],d,p,i)],f.data=i[p];h.key=d}for(o=0,a=t(c);o<l;++o)c[a[o]].index=o;return n(c,a),c}return i.keys=function(t){return arguments.length?(e="function"==typeof t?t:qv(Sm.call(t)),i):e},i.value=function(e){return arguments.length?(r="function"==typeof e?e:qv(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?Ly:"function"==typeof e?e:qv(Sm.call(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?Ry:e,i):n},i},e.stackOffsetExpand=function(e,t){if((r=e.length)>0){for(var n,r,i,o=0,a=e[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}Ry(e,t)}},e.stackOffsetDiverging=function(e,t){if((s=e.length)>1)for(var n,r,i,o,a,s,u=0,l=e[t[0]].length;u<l;++u)for(o=a=0,n=0;n<s;++n)(i=(r=e[t[n]][u])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},e.stackOffsetNone=Ry,e.stackOffsetSilhouette=function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=e[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}Ry(e,t)}},e.stackOffsetWiggle=function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,l=0;s<i;++s){for(var c=e[t[s]],f=c[a][1]||0,d=(f-(c[a-1][1]||0))/2,h=0;h<s;++h){var p=e[t[h]];d+=(p[a][1]||0)-(p[a-1][1]||0)}u+=f,l+=d*f}n[a-1][1]+=n[a-1][0]=o,u&&(o-=l/u)}n[a-1][1]+=n[a-1][0]=o,Ry(e,t)}},e.stackOrderAppearance=Ny,e.stackOrderAscending=Dy,e.stackOrderDescending=function(e){return Dy(e).reverse()},e.stackOrderInsideOut=function(e){var t,n,r=e.length,i=e.map(By),o=Ny(e),a=0,s=0,u=[],l=[];for(t=0;t<r;++t)n=o[t],a<s?(a+=i[n],u.push(n)):(s+=i[n],l.push(n));return l.reverse().concat(u)},e.stackOrderNone=Ly,e.stackOrderReverse=function(e){return Ly(e).reverse()},e.timeInterval=Zd,e.timeMillisecond=Yd,e.timeMilliseconds=jd,e.utcMillisecond=Yd,e.utcMilliseconds=jd,e.timeSecond=qd,e.timeSeconds=Qd,e.utcSecond=qd,e.utcSeconds=Qd,e.timeMinute=Kd,e.timeMinutes=Jd,e.timeHour=$d,e.timeHours=eh,e.timeDay=th,e.timeDays=nh,e.timeWeek=ih,e.timeWeeks=fh,e.timeSunday=ih,e.timeSundays=fh,e.timeMonday=oh,e.timeMondays=dh,e.timeTuesday=ah,e.timeTuesdays=hh,e.timeWednesday=sh,e.timeWednesdays=ph,e.timeThursday=uh,e.timeThursdays=gh,e.timeFriday=lh,e.timeFridays=vh,e.timeSaturday=ch,e.timeSaturdays=mh,e.timeMonth=yh,e.timeMonths=bh,e.timeYear=xh,e.timeYears=wh,e.utcMinute=Ah,e.utcMinutes=Eh,e.utcHour=Mh,e.utcHours=Ch,e.utcDay=kh,e.utcDays=Th,e.utcWeek=Sh,e.utcWeeks=Dh,e.utcSunday=Sh,e.utcSundays=Dh,e.utcMonday=Ih,e.utcMondays=Bh,e.utcTuesday=Rh,e.utcTuesdays=Vh,e.utcWednesday=Lh,e.utcWednesdays=zh,e.utcThursday=Oh,e.utcThursdays=Fh,e.utcFriday=Nh,e.utcFridays=Gh,e.utcSaturday=Ph,e.utcSaturdays=Hh,e.utcMonth=Wh,e.utcMonths=Zh,e.utcYear=Yh,e.utcYears=jh,e.timeFormatDefaultLocale=ug,e.timeFormatLocale=Qh,e.isoFormat=lg,e.isoParse=cg,e.now=$n,e.timer=nr,e.timerFlush=rr,e.timeout=sr,e.interval=function(e,t,n){var r=new tr,i=t;return null==t?(r.restart(e,t,n),r):(t=+t,n=null==n?$n():+n,r.restart(function o(a){a+=i,r.restart(o,i+=t,n),e(a)},t,n),r)},e.transition=_r,e.active=function(e,t){var n,r,i=e.__transition;if(i)for(r in t=null==t?null:t+"",i)if((n=i[r]).state>fr&&n.name===t)return new Tr([[e]],si,t,+r);return null},e.interrupt=wr,e.voronoi=function(){var e=zy,t=Fy,n=null;function r(r){return new xb(r.map(function(n,i){var o=[Math.round(e(n,i,r)/mb)*mb,Math.round(t(n,i,r)/mb)*mb];return o.index=i,o.data=n,o}),n)}return r.polygons=function(e){return r(e).polygons()},r.links=function(e){return r(e).links()},r.triangles=function(e){return r(e).triangles()},r.x=function(t){return arguments.length?(e="function"==typeof t?t:Vy(+t),r):e},r.y=function(e){return arguments.length?(t="function"==typeof e?e:Vy(+e),r):t},r.extent=function(e){return arguments.length?(n=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(e){return arguments.length?(n=null==e?null:[[0,0],[+e[0],+e[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r},e.zoom=function(){var t,n,r=_b,i=Sb,o=Ob,a=Rb,s=Lb,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,f=Ln,d=[],h=H("start","zoom","end"),p=500,g=150,v=0;function m(e){e.property("__zoom",Ib).on("wheel.zoom",M).on("mousedown.zoom",C).on("dblclick.zoom",k).filter(s).on("touchstart.zoom",T).on("touchmove.zoom",_).on("touchend.zoom touchcancel.zoom",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new Eb(t,e.x,e.y)}function b(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new Eb(e.k,r,i)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,t,n){e.on("start.zoom",function(){A(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).end()}).tween("zoom",function(){var e=arguments,r=A(this,e),o=i.apply(this,e),a=n||x(o),s=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),u=this.__zoom,l="function"==typeof t?t.apply(this,e):t,c=f(u.invert(a).concat(s/u.k),l.invert(a).concat(s/l.k));return function(e){if(1===e)e=l;else{var t=c(e),n=s/t[2];e=new Eb(n,a[0]-t[0]*n,a[1]-t[1]*n)}r.zoom(null,e)}})}function A(e,t){for(var n,r=0,i=d.length;r<i;++r)if((n=d[r]).that===e)return n;return new E(e,t)}function E(e,t){this.that=e,this.args=t,this.index=-1,this.active=0,this.extent=i.apply(e,t)}function M(){if(r.apply(this,arguments)){var e=A(this,arguments),t=this.__zoom,n=Math.max(u[0],Math.min(u[1],t.k*Math.pow(2,a.apply(this,arguments)))),i=Ve(this);if(e.wheel)e.mouse[0][0]===i[0]&&e.mouse[0][1]===i[1]||(e.mouse[1]=t.invert(e.mouse[0]=i)),clearTimeout(e.wheel);else{if(t.k===n)return;e.mouse=[i,t.invert(i)],wr(this),e.start()}Tb(),e.wheel=setTimeout(function(){e.wheel=null,e.end()},g),e.zoom("mouse",o(b(y(t,n),e.mouse[0],e.mouse[1]),e.extent,l))}}function C(){if(!n&&r.apply(this,arguments)){var t=A(this,arguments),i=Le(e.event.view).on("mousemove.zoom",function(){if(Tb(),!t.moved){var n=e.event.clientX-s,r=e.event.clientY-u;t.moved=n*n+r*r>v}t.zoom("mouse",o(b(t.that.__zoom,t.mouse[0]=Ve(t.that),t.mouse[1]),t.extent,l))},!0).on("mouseup.zoom",function(){i.on("mousemove.zoom mouseup.zoom",null),We(e.event.view,t.moved),Tb(),t.end()},!0),a=Ve(this),s=e.event.clientX,u=e.event.clientY;He(e.event.view),kb(),t.mouse=[a,this.__zoom.invert(a)],wr(this),t.start()}}function k(){if(r.apply(this,arguments)){var t=this.__zoom,n=Ve(this),a=t.invert(n),s=o(b(y(t,t.k*(e.event.shiftKey?.5:2)),n,a),i.apply(this,arguments),l);Tb(),c>0?Le(this).transition().duration(c).call(w,s,n):Le(this).call(m.transform,s)}}function T(){if(r.apply(this,arguments)){var n,i,o,a,s=A(this,arguments),u=e.event.changedTouches,l=u.length;for(kb(),i=0;i<l;++i)a=[a=ze(this,u,(o=u[i]).identifier),this.__zoom.invert(a),o.identifier],s.touch0?s.touch1||(s.touch1=a):(s.touch0=a,n=!0);if(t&&(t=clearTimeout(t),!s.touch1))return s.end(),void((a=Le(this).on("dblclick.zoom"))&&a.apply(this,arguments));n&&(t=setTimeout(function(){t=null},p),wr(this),s.start())}}function _(){var n,r,i,a,s=A(this,arguments),u=e.event.changedTouches,c=u.length;for(Tb(),t&&(t=clearTimeout(t)),n=0;n<c;++n)i=ze(this,u,(r=u[n]).identifier),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var f=s.touch0[0],d=s.touch0[1],h=s.touch1[0],p=s.touch1[1],g=(g=h[0]-f[0])*g+(g=h[1]-f[1])*g,v=(v=p[0]-d[0])*v+(v=p[1]-d[1])*v;r=y(r,Math.sqrt(g/v)),i=[(f[0]+h[0])/2,(f[1]+h[1])/2],a=[(d[0]+p[0])/2,(d[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],a=s.touch0[1]}s.zoom("touch",o(b(r,i,a),s.extent,l))}function S(){var t,r,i=A(this,arguments),o=e.event.changedTouches,a=o.length;for(kb(),n&&clearTimeout(n),n=setTimeout(function(){n=null},p),t=0;t<a;++t)r=o[t],i.touch0&&i.touch0[2]===r.identifier?delete i.touch0:i.touch1&&i.touch1[2]===r.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):i.end()}return m.transform=function(e,t){var n=e.selection?e.selection():e;n.property("__zoom",Ib),e!==n?w(e,t):n.interrupt().each(function(){A(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t){m.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)})},m.scaleTo=function(e,t){m.transform(e,function(){var e=i.apply(this,arguments),n=this.__zoom,r=x(e),a=n.invert(r),s="function"==typeof t?t.apply(this,arguments):t;return o(b(y(n,s),r,a),e,l)})},m.translateBy=function(e,t,n){m.transform(e,function(){return o(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),l)})},m.translateTo=function(e,t,n){m.transform(e,function(){var e=i.apply(this,arguments),r=this.__zoom,a=x(e);return o(Mb.translate(a[0],a[1]).scale(r.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,l)})},E.prototype={start:function(){return 1==++this.active&&(this.index=d.push(this)-1,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(d.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){Te(new Ab(m,e,this.that.__zoom),h.apply,h,[e,this.that,this.args])}},m.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:wb(+e),m):a},m.filter=function(e){return arguments.length?(r="function"==typeof e?e:wb(!!e),m):r},m.touchable=function(e){return arguments.length?(s="function"==typeof e?e:wb(!!e),m):s},m.extent=function(e){return arguments.length?(i="function"==typeof e?e:wb([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):i},m.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],m):[u[0],u[1]]},m.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],m):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},m.constrain=function(e){return arguments.length?(o=e,m):o},m.duration=function(e){return arguments.length?(c=+e,m):c},m.interpolate=function(e){return arguments.length?(f=e,m):f},m.on=function(){var e=h.on.apply(h,arguments);return e===h?m:e},m.clickDistance=function(e){return arguments.length?(v=(e=+e)*e,m):Math.sqrt(v)},m},e.zoomTransform=Cb,e.zoomIdentity=Mb,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3"),require("jquery")):"function"==typeof define&&define.amd?define(["exports","d3","jquery"],t):t((e=e||self).popoto=e.popoto||{},e.d3,e.jQuery)}(this,function(e,t,n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;var r={idGen:0,generateId:function(){return r.idGen++},nodes:[],links:[],getRootNode:function(){return r.nodes[0]}},i={};i.LogLevels=Object.freeze({DEBUG:0,INFO:1,WARN:2,ERROR:3,NONE:4}),i.LEVEL=i.LogLevels.NONE,i.TRACE=!1,i.log=function(e,t){if(console&&e>=i.LEVEL)switch(i.TRACE&&(t=t+"\n"+(new Error).stack),e){case i.LogLevels.DEBUG:case i.LogLevels.INFO:console.log(t);break;case i.LogLevels.WARN:console.warn(t);break;case i.LogLevels.ERROR:console.error(t)}},i.debug=function(e){i.log(i.LogLevels.DEBUG,e)},i.info=function(e){i.log(i.LogLevels.INFO,e)},i.warn=function(e){i.log(i.LogLevels.WARN,e)},i.error=function(e){i.log(i.LogLevels.ERROR,e)};var o={MAX_RESULTS_COUNT:100,VALUE_QUERY_LIMIT:100,USE_PARENT_RELATION:!1,USE_RELATION_DIRECTION:!0,COLLECT_RELATIONS_WITH_VALUES:!1,prefilter:"",prefilterParameters:{},applyPrefilters:function(e){return e.statement=o.prefilter+e.statement,Object.keys(o.prefilterParameters).forEach(function(t){e.parameters[t]=o.prefilterParameters[t]}),e}};o.NEO4J_INTERNAL_ID=Object.freeze({queryInternalName:"NEO4JID"}),o.filterRelation=function(e){return!0},o.generateTaxonomyCountQuery=function(e){var t=E.node.getConstraintAttribute(e),n=[];return E.node.getPredefinedConstraints(e).forEach(function(e){n.push(e.replace(new RegExp("\\$identifier","g"),"n"))}),t===o.NEO4J_INTERNAL_ID?"MATCH (n:`"+e+"`)"+(n.length>0?" WHERE "+n.join(" AND "):"")+" RETURN count(DISTINCT ID(n)) as count":"MATCH (n:`"+e+"`)"+(n.length>0?" WHERE "+n.join(" AND "):"")+" RETURN count(DISTINCT n."+t+") as count"},o.generateNegativeQueryElements=function(){var e=[],t={};return r.nodes.filter(function(e){return!0===e.isNegative}).forEach(function(n){if(void 0!==E.node.getGenerateNegativeNodeValueConstraints(n)){var i=E.node.getGenerateNegativeNodeValueConstraints(n)(n);for(var a in e=e.concat(i.whereElements),i.parameters)i.parameters.hasOwnProperty(a)&&(t[a]=i.parameters[a])}else{var s=o.getLinksToRoot(n,r.links),u=s.length-1,l="(NOT exists(";for(l+="("+r.getRootNode().internalLabel+")";u>=0;){var c=s[u],f=c.target;if(l+=!0===f.isParentRelReverse&&!0===o.USE_RELATION_DIRECTION?"<-":"-",l+="[:`"+c.label+"`]",l+=!0!==f.isParentRelReverse&&!0===o.USE_RELATION_DIRECTION?"->":"-",f===n&&void 0!==f.value&&f.value.length>0){var d=E.node.getConstraintAttribute(f.label),h=f.internalLabel+"_"+d;if(f.value.length>1){for(var p=0;p<f.value.length;p++)t[h+"_"+p]=f.value[p].attributes[d];l+="(:`"+f.label+"`{"+d+":$x$})"}else t[h]=f.value[0].attributes[d],l+="(:`"+f.label+"`{"+d+":$"+h+"})"}else l+="(:`"+f.label+"`)";u--}if(l+="))",void 0!==n.value&&n.value.length>1)for(var g=E.node.getConstraintAttribute(n.label),v=n.internalLabel+"_"+g,m=0;m<f.value.length;m++)e.push(l.replace("$x$","$"+v+"_"+m));else e.push(l)}}),{whereElements:e,parameters:t}},o.generateQueryElements=function(e,t,n,r,i){var a=[],s=[],u=[],l=[],c={};if(E.node.getPredefinedConstraints(e.label).forEach(function(t){s.push(t.replace(new RegExp("\\$identifier","g"),e.internalLabel))}),a.push("("+e.internalLabel+":`"+e.label+"`)"),r||e.immutable){var f=o.generateNodeValueConstraints(e,i);for(var d in s=s.concat(f.whereElements),f.parameters)f.parameters.hasOwnProperty(d)&&(c[d]=f.parameters[d])}var h=0;return n.forEach(function(e){var n=e.source,f=e.target,d="",p="";o.USE_RELATION_DIRECTION?!0===f.isParentRelReverse?(d="<-",p="-"):(d="-",p="->"):(d="-",p="-");var g="r"+h++;u.push(g),E.node.getPredefinedConstraints(f.label).forEach(function(e){s.push(e.replace(new RegExp("\\$identifier","g"),f.internalLabel))}),o.COLLECT_RELATIONS_WITH_VALUES&&f===t&&l.push("COLLECT("+g+") AS incomingRels");var v="";i&&void 0!==E.node.getGenerateNodeValueConstraints(n)||(v=":`"+n.label+"`");var m="";if(i&&void 0!==E.node.getGenerateNodeValueConstraints(f)||(m=":`"+f.label+"`"),a.push("("+n.internalLabel+v+")"+d+"["+g+":`"+e.label+"`]"+p+"("+f.internalLabel+m+")"),f!==t&&(r||f.immutable)){var y=o.generateNodeValueConstraints(f,i);for(var b in s=s.concat(y.whereElements),y.parameters)y.parameters.hasOwnProperty(b)&&(c[b]=y.parameters[b])}}),{matchElements:a,whereElements:s,relationElements:u,returnElements:l,parameters:c}},o.generateNodeValueConstraints=function(e,t){if(t&&void 0!==E.node.getGenerateNodeValueConstraints(e))return E.node.getGenerateNodeValueConstraints(e)(e);var n={},r=[];if(void 0!==e.value&&e.value.length>0){var i,a=E.node.getConstraintAttribute(e.label);i=a===o.NEO4J_INTERNAL_ID?e.internalLabel+"_internalID":e.internalLabel+"_"+a,e.value.length>1?(n[i]=[],e.value.forEach(function(e){n[i].push(a===o.NEO4J_INTERNAL_ID?e.internalID:e.attributes[a])}),r.push(a===o.NEO4J_INTERNAL_ID?"ID("+e.internalLabel+") IN $"+i:e.internalLabel+"."+a+" IN $"+i)):(n[i]=a===o.NEO4J_INTERNAL_ID?e.value[0].internalID:e.value[0].attributes[a],r.push(a===o.NEO4J_INTERNAL_ID?"ID("+e.internalLabel+") = $"+i:e.internalLabel+"."+a+" = $"+i))}return{parameters:n,whereElements:r}},o.getRelevantLinks=function(e,t,n){var r=n.slice(),i=[],o=r.filter(function(e){return e.target===t||void 0!==e.target.value&&e.target.value.length>0&&1==!e.target.isNegative});return o.forEach(function(e){r.splice(r.indexOf(e),1)}),o.forEach(function(t){for(var n=t.source,o=!0;o;){var a=null;r.forEach(function(e){e.target===n&&(a=e)}),null===a?o=!1:a.source===e?(i.push(a),r.splice(r.indexOf(a),1),o=!1):(i.push(a),r.splice(r.indexOf(a),1),n=a.source)}}),o.concat(i)},o.getLinksToRoot=function(e,t){for(var n=[],i=e;i!==r.getRootNode();){for(var o,a=0;a<t.length;a++){var s=t[a];if(s.target===i){o=s;break}}o&&(n.push(o),i=o.source)}return n},o.generateResultQuery=function(e){var t=r.getRootNode(),n=o.generateNegativeQueryElements(),i=o.generateQueryElements(t,t,o.getRelevantLinks(t,t,r.links),!0,!0),a=i.matchElements,s=i.whereElements.concat(n.whereElements),u=i.relationElements,l=[],c=[],f=i.parameters;for(var d in n.parameters)n.parameters.hasOwnProperty(d)&&(f[d]=n.parameters[d]);var h=E.node.getResultOrderByAttribute(t.label);if(null!=h){var p=[],g=E.node.isResultOrderAscending(t.label),v=[];Array.isArray(g)?v=g.map(function(e){return e?"ASC":"DESC"}):v.push(g?"ASC":"DESC"),Array.isArray(h)?p=h.map(function(e){var t=h.indexOf(e);return t<v.length?e+" "+v[t]:e+" "+v[v.length-1]}):p.push(h+" "+v[0]),c.push("ORDER BY "+p.join(", "))}f.limit=o.MAX_RESULTS_COUNT,c.push("LIMIT $limit");var m=E.node.getReturnAttributes(t.label);if(e)l.push(t.internalLabel),u.forEach(function(e){l.push(e)});else for(var y=0;y<m.length;y++){var b=m[y];l.push(b===o.NEO4J_INTERNAL_ID?"ID("+t.internalLabel+") AS "+o.NEO4J_INTERNAL_ID.queryInternalName:t.internalLabel+"."+b+" AS "+b)}var x="MATCH "+a.join(", ")+(s.length>0?" WHERE "+s.join(" AND "):"")+" RETURN DISTINCT "+l.join(", ")+" "+c.join(" "),w=E.node.filterResultQuery(t.label,{statement:x,matchElements:a,whereElements:s,withElements:[],returnElements:l,endElements:c,parameters:f});return o.applyPrefilters(w)},o.generateNodeCountQuery=function(e){var t=o.generateNegativeQueryElements(),n=o.generateQueryElements(r.getRootNode(),e,o.getRelevantLinks(r.getRootNode(),e,r.links),!0,!0),i=n.matchElements,a=n.whereElements.concat(t.whereElements),s=[],u=n.parameters;for(var l in t.parameters)t.parameters.hasOwnProperty(l)&&(u[l]=t.parameters[l]);var c=E.node.getConstraintAttribute(e.label);s.push(c===o.NEO4J_INTERNAL_ID?"count(DISTINCT ID("+e.internalLabel+")) as count":"count(DISTINCT "+e.internalLabel+"."+c+") as count");var f="MATCH "+i.join(", ")+(a.length>0?" WHERE "+a.join(" AND "):"")+" RETURN "+s.join(", "),d=E.node.filterNodeCountQuery(e,{statement:f,matchElements:i,whereElements:a,returnElements:s,endElements:[],parameters:u});return o.applyPrefilters(d)},o.generateNodeValueQuery=function(e){var t=o.generateNegativeQueryElements(),n=r.getRootNode(),i=o.generateQueryElements(n,e,o.getRelevantLinks(n,e,r.links),!0,!1),a=i.matchElements,s=i.whereElements.concat(t.whereElements),u=[],l=[],c=i.parameters;for(var f in t.parameters)t.parameters.hasOwnProperty(f)&&(c[f]=t.parameters[f]);var d=E.node.getValueOrderByAttribute(e.label);if(d){var h=E.node.isValueOrderAscending(e.label)?"ASC":"DESC";l.push("ORDER BY "+d+" "+h)}l.push("LIMIT "+o.VALUE_QUERY_LIMIT);for(var p=E.node.getReturnAttributes(e.label),g=(E.node.getConstraintAttribute(e.label),0);g<p.length;g++)u.push(p[g]===o.NEO4J_INTERNAL_ID?"ID("+e.internalLabel+") AS "+o.NEO4J_INTERNAL_ID.queryInternalName:e.internalLabel+"."+p[g]+" AS "+p[g]);var v=E.node.getConstraintAttribute(n.label);u.push(v===o.NEO4J_INTERNAL_ID?"count(DISTINCT ID("+n.internalLabel+")) AS count":"count(DISTINCT "+n.internalLabel+"."+v+") AS count"),o.COLLECT_RELATIONS_WITH_VALUES&&i.returnElements.forEach(function(e){u.push(e)});var m="MATCH "+a.join(", ")+(s.length>0?" WHERE "+s.join(" AND "):"")+" RETURN "+u.join(", ")+" "+l.join(" "),y=E.node.filterNodeValueQuery(e,{statement:m,matchElements:a,whereElements:s,returnElements:u,endElements:l,parameters:c});return o.applyPrefilters(y)},o.generateNodeRelationQuery=function(e){var t=o.getLinksToRoot(e,r.links),n=o.generateQueryElements(r.getRootNode(),e,t,!1,!1),i=n.matchElements,a=n.whereElements,s=[],u=[],l=n.parameters;i.push("("+e.internalLabel+":`"+e.label+"`)-[r]"+(o.USE_RELATION_DIRECTION?"->":"-")+"(x)"),s.push("type(r) AS label"),s.push(o.USE_PARENT_RELATION?"head(labels(x)) AS target":"last(labels(x)) AS target"),s.push("count(r) AS count"),u.push("ORDER BY count(r) DESC");var c="MATCH "+i.join(", ")+(a.length>0?" WHERE "+a.join(" AND "):"")+" RETURN "+s.join(", ")+" "+u.join(" "),f=E.node.filterNodeRelationQuery(e,{statement:c,matchElements:i,whereElements:a,returnElements:s,endElements:u,parameters:l});return o.applyPrefilters(f)};var a={CYPHER_URL:"http://localhost:7474/db/data/transaction/commit",WITH_CREDENTIALS:!1,post:function(e,t){var r=JSON.stringify(e);i.info("REST POST:"+r);var o={type:"POST",beforeSend:function(e){a.AUTHORIZATION&&e.setRequestHeader("Authorization",a.AUTHORIZATION)},contentType:"application/json"};void 0!==e&&(o.data=r),!0===a.WITH_CREDENTIALS&&(o.xhrFields={withCredentials:!0});var s=a.CYPHER_URL;return void 0!==t&&(s=t),n.ajax(s,o)}};a.response={parse:function(e){i.debug(JSON.stringify(e));var t=[];return void 0!==e&&e.hasOwnProperty("results")&&e.results.length>0&&!(e.hasOwnProperty("errors")&&e.errors.length>0)&&(t=e.results.map(function(e){for(var t=[],n=0;n<e.data.length;n++){for(var r={},i=0;i<e.columns.length;i++)r[e.columns[i]]=e.data[n].row[i];t.push(r)}return t})),i.info(JSON.stringify(t)),t}};var s={};function u(){l();var e=r.getRootNode();e&&void 0!==e.label&&(M.isActive&&M.updateQuery(),C.isActive&&C.updateQuery(),(s.isActive||s.resultListeners.length>0||s.resultCountListeners.length>0||s.graphResultListeners.length>0)&&s.updateResults())}function l(){A.isActive&&(A.link.updateLinks(),A.node.updateNodes(),A.force.nodes(r.nodes),A.force.force("link").links(r.links),A.force.alpha(1).restart())}s.containerId="popoto-results",s.hasChanged=!0,s.resultCountListeners=[],s.resultListeners=[],s.graphResultListeners=[],s.RESULTS_PAGE_SIZE=10,s.TOTAL_COUNT=!1,s.onTotalResultCount=function(e){s.resultCountListeners.push(e)},s.onResultReceived=function(e){s.resultListeners.push(e)},s.onGraphResultReceived=function(e){s.graphResultListeners.push(e)},s.parseGraphResultData=function(e){var t={},n={};e.results[1].data.forEach(function(e){e.graph.nodes.forEach(function(e){t.hasOwnProperty(e.id)||(t[e.id]=e)}),e.graph.relationships.forEach(function(e){n.hasOwnProperty(e.id)||(n[e.id]=e)})});var r=[],i=[];for(var o in t)t.hasOwnProperty(o)&&r.push(t[o]);for(var a in n)n.hasOwnProperty(a)&&i.push(n[a]);return{nodes:r,edges:i}},s.updateResults=function(){if(s.hasChanged){var e={},n=0;void 0!==s.resultsXhr&&s.resultsXhr.abort();var u=o.generateResultQuery();s.lastGeneratedQuery=u;var l={statements:[{statement:u.statement,parameters:u.parameters,resultDataContents:["row"]}]};if(e.results=n++,s.graphResultListeners.length>0){var c=o.generateResultQuery(!0);s.lastGeneratedQuery=c,l.statements.push({statement:c.statement,parameters:c.parameters,resultDataContents:["row","graph"]}),e.graph=n++}if(!0===s.TOTAL_COUNT&&s.resultCountListeners.length>0){var f=o.generateNodeCountQuery(r.getRootNode());l.statements.push({statement:f.statement,parameters:f.parameters}),e.total=n++}i.info("Results ==>"),s.resultsXhr=a.post(l).done(function(n){i.info("<== Results");var o=a.response.parse(n),u=o[e.results].map(function(e,t){return{resultIndex:t,label:r.getRootNode().label,attributes:e}});if(s.lastResults=u,e.hasOwnProperty("total")){var l=o[e.total][0].count;s.resultCountListeners.forEach(function(e){e(l)})}if(s.resultListeners.forEach(function(e){e(u)}),s.graphResultListeners.length>0){var c=s.parseGraphResultData(n);s.graphResultListeners.forEach(function(e){e(c)})}if(s.isActive){var f=t.select("#"+s.containerId).selectAll(".ppt-result").data([]);f.exit().remove(),(f=t.select("#"+s.containerId).selectAll(".ppt-result").data(u.slice(0,s.RESULTS_PAGE_SIZE),function(e){return e.resultIndex})).enter().append("div").attr("class","ppt-result").attr("id",function(e){return"popoto-result-"+e.resultIndex}).each(function(e){E.node.getDisplayResults(e.label)(t.select(this))})}s.hasChanged=!1}).fail(function(e,t,n){"abort"!==t?(i.error(t+': error while accessing Neo4j server on URL:"'+a.CYPHER_URL+'" defined in "rest.CYPHER_URL" property: '+n),s.resultListeners.forEach(function(e){e([])})):i.info("<=X= Results - Aborted!")})}},s.updateResultsCount=function(){s.resultCountListeners.length>0&&s.resultCountListeners.forEach(function(e){e(r.getRootNode().count)})},s.generatePreQuery=function(){var e={ids:[]};return s.lastResults.forEach(function(t){e.ids.push(t.attributes.id)}),{query:"MATCH (d) WHERE d.id IN $ids WITH d",param:e}};var c={containerId:"popoto-taxonomy",createTaxonomyPanel:function(){var e=t.select("#"+c.containerId).append("ul").attr("class","ppt-taxo-ul"),n=c.generateTaxonomiesData(),r=e.selectAll(".taxo").data(n).enter().append("li").attr("id",function(e){return e.id}).attr("class","ppt-taxo-li").attr("value",function(e){return e.label});r.append("span").attr("class",function(e){return"ppt-icon "+E.taxonomy.getCSSClass(e.label,"span-icon")}).html("&nbsp;"),r.append("span").attr("class","ppt-label").text(function(e){return E.taxonomy.getTextValue(e.label)}),r.append("span").attr("class","ppt-count"),r.on("click",c.onClick),c.addTaxonomyChildren(r);var i=[];n.forEach(function(e){i.push(e),e.children&&c.flattenChildren(e,i)}),A.DISABLE_COUNT||c.updateCount(i)},flattenChildren:function(e,t){e.children.forEach(function(e){t.push(e),e.children&&t.concat(c.flattenChildren(e,t))})},updateCount:function(e){var n,r=[];e.forEach(function(e){r.push({statement:o.generateTaxonomyCountQuery(e.label)})}),n=e,i.info("Count taxonomies ==>"),a.post({statements:r}).done(function(e){i.info("<== Count taxonomies");for(var r=a.response.parse(e),o=0;o<n.length;o++){var s=r[o][0].count;t.select("#"+n[o].id).select(".ppt-count").text(" ("+s+")")}}).fail(function(e,n,r){i.error(n+': error while accessing Neo4j server on URL:"'+a.CYPHER_URL+'" defined in "rest.CYPHER_URL" property: '+r),t.select("#popoto-taxonomy").selectAll(".ppt-count").text(" (0)")})},addTaxonomyChildren:function(e){e.each(function(e){var n=t.select(this),r=e.children;if(e.children){var i=n.append("ul").attr("class","ppt-taxo-sub-ul").selectAll("li").data(r).enter().append("li").attr("id",function(e){return e.id}).attr("class","ppt-taxo-sub-li").attr("value",function(e){return e.label});i.append("span").attr("class",function(e){return"ppt-icon "+E.taxonomy.getCSSClass(e.label,"span-icon")}).html("&nbsp;"),i.append("span").attr("class","ppt-label").text(function(e){return E.taxonomy.getTextValue(e.label)}),i.append("span").attr("class","ppt-count"),i.on("click",c.onClick),c.addTaxonomyChildren(i)}})},onClick:function(){t.event.stopPropagation();var e=this.attributes.value.value;r.nodes.length=0,r.links.length=0,A.node.internalLabels={},u(),A.mainLabel=e,void 0!==E.node.getSchema(e)?A.addSchema(E.node.getSchema(e)):A.addRootNode(e),A.hasGraphChanged=!0,s.hasChanged=!0,A.ignoreCount=!1,u(),f.center()},generateTaxonomiesData:function(){var e=0,t=[];for(var n in E.node.Provider)E.node.Provider.hasOwnProperty(n)&&E.node.getProperty(n,"isSearchable")&&!E.node.Provider[n].parent&&t.push({label:n,id:"popoto-lbl-"+e++});return t.forEach(function(t){E.node.getProvider(t.label).hasOwnProperty("children")&&(e=c.addChildrenData(t,e))}),t},addChildrenData:function(e,t){return e.children=[],E.node.getProvider(e.label).children.forEach(function(n){var r=E.node.getProvider(n),i={label:n,id:"popoto-lbl-"+t++};r.hasOwnProperty("children")&&(t=c.addChildrenData(i,t)),E.node.getProperty(n,"isSearchable")&&e.children.push(i)}),t}},f={CENTER_GRAPH:!0,RESET_GRAPH:!0,SAVE_GRAPH:!1,TOGGLE_TAXONOMY:!1,TOGGLE_FULL_SCREEN:!0,TOGGLE_VIEW_RELATION:!0,TOGGLE_FIT_TEXT:!0,reset:function(){r.nodes.length=0,r.links.length=0,A.node.internalLabels={},"string"==typeof A.mainLabel||A.mainLabel instanceof String?void 0!==E.node.getSchema(A.mainLabel)?A.addSchema(E.node.getSchema(A.mainLabel)):A.addRootNode(A.mainLabel):A.loadSchema(A.mainLabel),A.hasGraphChanged=!0,s.hasChanged=!0,u(),f.center()},center:function(){A.svgTag.transition().call(A.zoom.transform,t.zoomIdentity)},toggleTaxonomy:function(){var e=t.select("#"+c.containerId);e.filter(".disabled").empty()?e.classed("disabled",!0):e.classed("disabled",!1),A.centerRootNode()},toggleFitText:function(){A.USE_FIT_TEXT=!A.USE_FIT_TEXT,A.node.updateNodes()},toggleViewRelation:function(){A.DISABLE_RELATION=!A.DISABLE_RELATION,t.selectAll(".ppt-g-node-background").classed("hide",A.DISABLE_RELATION),A.tick()},toggleFullScreen:function(){var e=document.getElementById(A.containerId);document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}},d={};function h(e){return"function"==typeof e?e:function(){return e}}d.LinkTypes=Object.freeze({RELATION:0,VALUE:1,SEGMENT:2}),d.TEXT_DY=-4,d.SHOW_MARKER=!1,d.gID="popoto-glinks",d.updateLinks=function(){var e=d.updateData();d.removeElements(e.exit()),d.addNewElements(e.enter()),d.updateElements()},d.updateData=function(){return A.svg.select("#"+d.gID).selectAll(".ppt-glink").data(r.links,function(e){return e.id})},d.removeElements=function(e){e.remove()},d.addNewElements=function(e){var t=e.append("g").attr("class","ppt-glink").on("click",d.clickLink).on("mouseover",d.mouseOverLink).on("mouseout",d.mouseOutLink);t.append("path").attr("class","ppt-link"),t.append("text").attr("text-anchor","middle").attr("dy",d.TEXT_DY).append("textPath").attr("class","ppt-textPath").attr("startOffset","50%")},d.updateElements=function(){var e=A.svg.select("#"+d.gID).selectAll(".ppt-glink");e.attr("id",function(e){return"ppt-glink_"+e.id}),e.selectAll(".ppt-link").attr("id",function(e){return"ppt-path_"+e.id}).attr("stroke",function(e){return E.link.getColor(e,"path","stroke")}).attr("class",function(e){return"ppt-link "+E.link.getCSSClass(e,"path")}),e.selectAll("text").attr("id",function(e){return"ppt-text_"+e.id}).attr("class",function(e){return E.link.getCSSClass(e,"text")}).attr("fill",function(e){return E.link.getColor(e,"text","fill")}).selectAll(".ppt-textPath").attr("id",function(e){return"ppt-textpath_"+e.id}).attr("class",function(e){return"ppt-textpath "+E.link.getCSSClass(e,"text-path")}).attr("xlink:href",function(e){return"#ppt-path_"+e.id}).text(function(e){return E.link.getTextValue(e)})},d.mouseOverLink=function(){t.select(this).select("path").attr("class",function(e){return"ppt-link "+E.link.getCSSClass(e,"path--hover")}),t.select(this).select("text").attr("class",function(e){return E.link.getCSSClass(e,"text--hover")});var e=t.select(this).data()[0];M.isActive&&(M.queryConstraintSpanElements.filter(function(t){return t.ref===e}).classed("hover",!0),M.querySpanElements.filter(function(t){return t.ref===e}).classed("hover",!0)),C.isActive&&C.querySpanElements.filter(function(t){return t.link===e}).classed("hover",!0)},d.mouseOutLink=function(){t.select(this).select("path").attr("class",function(e){return"ppt-link "+E.link.getCSSClass(e,"path")}),t.select(this).select("text").attr("class",function(e){return E.link.getCSSClass(e,"text")});var e=t.select(this).data()[0];M.isActive&&(M.queryConstraintSpanElements.filter(function(t){return t.ref===e}).classed("hover",!1),M.querySpanElements.filter(function(t){return t.ref===e}).classed("hover",!1)),C.isActive&&C.querySpanElements.filter(function(t){return t.link===e}).classed("hover",!1)},d.clickLink=function(){var e=t.select(this).data()[0];if(e.type!==d.LinkTypes.VALUE){A.node.collapseAllNode();var n=A.node.removeNode(e.target);A.hasGraphChanged=!0,s.hasChanged=n,u()}};var p=document.createElement("canvas").getContext("2d"),g=12;function v(e){return p.measureText(e).width}function m(e){if(null==e)return[];var t=String(e);return function(e,t){for(var n,r=1/0,i=[],o=0,a=e.length;o<a;++o){var s=(n?n.text+" ":"")+e[o],u=v(s);(r+u)/2<t?(n.width=r=u,n.text=s):(r=v(e[o]),i.push(n={width:r,text:e[o]}))}return i}(function(e){var n=t.split(/\s+/g);return n[n.length-1]||n.pop(),n[0]||n.shift(),n}(),Math.sqrt(v(t.trim())*g))}function y(e,n,r,i){var o=h(r),a=h(n);!function(e,n){e.each(function(e){var r=t.select(this).selectAll(".fitted-text").data([{}]);r.enter().append("text").merge(r).attr("class","fitted-text"+(void 0!==n?" "+n(e):"")).attr("style","text-anchor: middle; font: 10px sans-serif")})}(e,i?h(i):i);var s=e.select(".fitted-text");!function(e,n){e.each(function(e){var r=m(n(e)),i=t.select(this).selectAll("tspan").data(r);i.exit().remove(),i.enter().append("tspan").merge(i).attr("x",0).attr("y",function(e,t){return(t-r.length/2+.8)*g}).text(function(e){return e.text})})}(s,a),s.attr("transform",function(e){var t=function(e){for(var t=0,n=0,r=e.length;n<r;++n){var i=e[n].width/2,o=(Math.abs(n-r/2+.5)+.5)*g;t=Math.max(t,Math.sqrt(i*i+o*o))}return t}(m(a(e))),n=1;return 0!==t&&t&&(n=o(e)/t),"translate(0,0) scale("+n+")"})}var b={getNodeBoundingBox:function(e){return e.getBBox()},render:function(e){var n=e.append("rect").attr("fill",function(e){return E.node.getColor(e,"back-text","fill")}).attr("class",function(e){return E.node.getCSSClass(e,"back-text")});y(e,function(e){return E.node.getTextValue(e)},function(e){return E.node.getSize(e)},function(e){return E.node.getCSSClass(e,"text")}),n.attr("x",function(e){return b.getNodeBoundingBox(t.select(this.parentNode).select("text").node()).x-3}).attr("y",function(e){return b.getNodeBoundingBox(t.select(this.parentNode).select("text").node()).y}).attr("rx","5").attr("ry","5").attr("width",function(e){return b.getNodeBoundingBox(t.select(this.parentNode).select("text").node()).width+6}).attr("height",function(e){return b.getNodeBoundingBox(t.select(this.parentNode).select("text").node()).height}).attr("transform",function(e){return t.select(this.parentNode).select("text").attr("transform")})}},x={TEXT_Y:8,getNodeBoundingBox:function(e){return e.getBBox()},render:function(e){var n=e.append("rect").attr("fill",function(e){return E.node.getColor(e,"back-text","fill")}).attr("class",function(e){return E.node.getCSSClass(e,"back-text")});e.append("text").attr("x",0).attr("y",x.TEXT_Y).attr("text-anchor","middle").attr("class",function(e){return E.node.getCSSClass(e,"text")}).on("mouseover",function(e){t.select(this.parentNode).attr("clip-path",null)}).on("mouseout",function(e){t.select(this.parentNode).attr("clip-path",function(e){return"url(#node-view"+e.id+")"})}).text(function(e){return E.node.getTextValue(e)}),n.attr("x",function(e){return x.getNodeBoundingBox(t.select(this.parentNode).select("text").node()).x-3}).attr("y",function(e){return x.getNodeBoundingBox(t.select(this.parentNode).select("text").node()).y}).attr("rx","5").attr("ry","5").attr("width",function(e){return x.getNodeBoundingBox(t.select(this.parentNode).select("text").node()).width+6}).attr("height",function(e){return x.getNodeBoundingBox(t.select(this.parentNode).select("text").node()).height})}},w={gID:"popoto-gnodes",DONUTS_MARGIN:0,DONUT_WIDTH:20,NODE_MAX_CHARS:11,NODE_TITLE_MAX_CHARS:100,PAGE_SIZE:10,CountBox:{x:16,y:33,w:52,h:19},chooseWaiting:!1,getDonutInnerRadius:function(e){return E.node.getSize(e)+w.DONUTS_MARGIN},getDonutOuterRadius:function(e){return E.node.getSize(e)+w.DONUTS_MARGIN+w.DONUT_WIDTH}};w.pie=t.pie().sort(null).value(function(e){return 1}),w.NodeTypes=Object.freeze({ROOT:0,CHOOSE:1,VALUE:2,GROUP:3}),w.internalLabels={},w.generateInternalLabel=function(e){var t=e?e.toLowerCase().replace(/ /g,""):"n";return t in w.internalLabels?(w.internalLabels[t]=w.internalLabels[t]+1,t+w.internalLabels[t]):(w.internalLabels[t]=0,t)},w.updateNodes=function(){var e=w.updateData();w.removeElements(e.exit()),w.addNewElements(e.enter()),w.updateElements()},w.updateData=function(){var e=A.svg.select("#"+w.gID).selectAll(".ppt-gnode").data(r.nodes,function(e){return e.id});return A.hasGraphChanged&&(w.updateAutoLoadValues(),A.DISABLE_COUNT||A.ignoreCount||w.updateCount()),A.hasGraphChanged=!1,e},w.updateCount=function(){void 0!==w.updateCountXhr&&w.updateCountXhr.abort();var e=[],t=r.nodes.filter(function(e){return!(e.type===w.NodeTypes.VALUE||e.type===w.NodeTypes.GROUP||e.hasOwnProperty("isNegative")&&e.isNegative)});t.forEach(function(t){var n=o.generateNodeCountQuery(t);e.push({statement:n.statement,parameters:n.parameters})}),i.info("Count nodes ==>"),w.updateCountXhr=a.post({statements:e}).done(function(e){i.info("<== Count nodes");for(var n=a.response.parse(e),r=0;r<t.length;r++)t[r].count=n[r][0].count;s.resultCountListeners.length>0&&s.updateResultsCount(),w.updateElements(),A.link.updateElements()}).fail(function(e,n,r){"abort"!==n?(i.error(n+': error while accessing Neo4j server on URL:"'+a.CYPHER_URL+'" defined in "rest.CYPHER_URL" property: '+r),t.forEach(function(e){e.count=0}),w.updateElements(),A.link.updateElements()):i.info("<=X= Count nodes - Aborted!")})},w.updateAutoLoadValues=function(){for(var e=[],t=w.getAutoLoadValueNodes(),n=0;n<t.length;n++){var r=o.generateNodeValueQuery(t[n]);e.push({statement:r.statement,parameters:r.parameters})}e.length>0&&(i.info("AutoLoadValue ==>"),a.post({statements:e}).done(function(e){i.info("<== AutoLoadValue");for(var n=a.response.parse(e),r=0;r<t.length;r++){var o=t[r],s=E.node.getConstraintAttribute(o.label);o.data=n[r].filter(function(e){var t=!0;return o.hasOwnProperty("value")&&o.value.length>0&&o.value.forEach(function(n){n.attributes[s]===e[s]&&(t=!1)}),t}),o.page=1}A.notifyListeners(A.Events.GRAPH_NODE_DATA_LOADED,[t])}).fail(function(e,t,n){i.error(t+': error while accessing Neo4j server on URL:"'+a.CYPHER_URL+'" defined in "rest.CYPHER_URL" property: '+n)}))},w.removeElements=function(e){e.filter(function(e){return!e.parent}).remove(),e.filter(function(e){return e.parent}).transition().duration(300).attr("transform",function(e){return"translate("+e.parent.x+","+e.parent.y+")"}).remove()},w.addNewElements=function(e){var n=e.append("g").attr("class","ppt-gnode");n.on("click",w.nodeClick).on("mouseover",w.mouseOverNode).on("mouseout",w.mouseOutNode),n.filter(function(e){return e.type!==w.NodeTypes.VALUE}).on("contextmenu",w.clearSelection),n.filter(function(e){return e.type===w.NodeTypes.VALUE}).on("contextmenu",function(){t.event.preventDefault()}),n.append("defs").append("clipPath").attr("id",function(e){return"node-view"+e.id}).append("circle").attr("cx",0).attr("cy",0),w.addBackgroundElements(n),w.addMiddlegroundElements(n),w.addForegroundElements(n)},w.addBackgroundElements=function(e){var t=e.append("g").attr("class","ppt-g-node-background").classed("hide",A.DISABLE_RELATION);t.append("g").attr("class","ppt-donut-labels"),t.append("g").attr("class","ppt-donut-segments")},w.addMiddlegroundElements=function(e){e.append("g").attr("class","ppt-g-node-middleground")},w.addForegroundElements=function(e){var n=e.append("g").attr("class","ppt-g-node-foreground"),r=n.filter(function(e){return e.type===w.NodeTypes.ROOT||e.type===w.NodeTypes.CHOOSE}).append("g").attr("class","ppt-node-foreground-g-arrows"),i=r.append("g");i.append("circle").attr("class","ppt-larrow").attr("cx","-43").attr("cy","-23").attr("r","17"),i.append("path").attr("class","ppt-arrow").attr("d","m -44.905361,-23 6.742,-6.742 c 0.81,-0.809 0.81,-2.135 0,-2.944 l -0.737,-0.737 c -0.81,-0.811 -2.135,-0.811 -2.945,0 l -8.835,8.835 c -0.435,0.434 -0.628,1.017 -0.597,1.589 -0.031,0.571 0.162,1.154 0.597,1.588 l 8.835,8.834 c 0.81,0.811 2.135,0.811 2.945,0 l 0.737,-0.737 c 0.81,-0.808 0.81,-2.134 0,-2.943 l -6.742,-6.743 z"),i.on("click",function(e){t.event.stopPropagation(),e.page>1&&(e.page--,w.collapseNode(e),w.expandNode(e))});var o=r.append("g");if(o.append("circle").attr("class","ppt-rarrow").attr("cx","43").attr("cy","-23").attr("r","17"),o.append("path").attr("class","ppt-arrow").attr("d","m 51.027875,-24.5875 -8.835,-8.835 c -0.811,-0.811 -2.137,-0.811 -2.945,0 l -0.738,0.737 c -0.81,0.81 -0.81,2.136 0,2.944 l 6.742,6.742 -6.742,6.742 c -0.81,0.81 -0.81,2.136 0,2.943 l 0.737,0.737 c 0.81,0.811 2.136,0.811 2.945,0 l 8.835,-8.836 c 0.435,-0.434 0.628,-1.017 0.597,-1.588 0.032,-0.569 -0.161,-1.152 -0.596,-1.586 z"),o.on("click",function(e){t.event.stopPropagation(),e.page*w.PAGE_SIZE<e.count&&(e.page++,w.collapseNode(e),w.expandNode(e))}),!A.DISABLE_COUNT){var a=n.filter(function(e){return e.type!==w.NodeTypes.GROUP});a.append("rect").attr("x",w.CountBox.x).attr("y",w.CountBox.y).attr("width",w.CountBox.w).attr("height",w.CountBox.h).attr("class","ppt-count-box"),a.append("text").attr("x",42).attr("y",48).attr("text-anchor","middle").attr("class","ppt-count-text")}n.filter(function(e){return e.type===w.NodeTypes.CHOOSE}).append("g").attr("class","ppt-g-node-ban").append("path").attr("d","M89.1 19.2C88 17.7 86.6 16.2 85.2 14.8 83.8 13.4 82.3 12 80.8 10.9 72 3.9 61.3 0 50 0 36.7 0 24.2 5.4 14.8 14.8 5.4 24.2 0 36.7 0 50c0 11.4 3.9 22.1 10.9 30.8 1.2 1.5 2.5 3 3.9 4.4 1.4 1.4 2.9 2.7 4.4 3.9C27.9 96.1 38.6 100 50 100 63.3 100 75.8 94.6 85.2 85.2 94.6 75.8 100 63.3 100 50 100 38.7 96.1 28 89.1 19.2ZM11.9 50c0-10.2 4-19.7 11.1-27C30.3 15.9 39.8 11.9 50 11.9c8.2 0 16 2.6 22.4 7.3L19.3 72.4C14.5 66 11.9 58.2 11.9 50Zm65 27c-7.2 7.1-16.8 11.1-27 11.1-8.2 0-16-2.6-22.4-7.4L80.8 27.6C85.5 34 88.1 41.8 88.1 50c0 10.2-4 19.7-11.1 27z")},w.updateElements=function(){var e=A.svg.select("#"+w.gID).selectAll(".ppt-gnode");e.attr("id",function(e){return"popoto-gnode_"+e.id}),A.USE_VORONOI_LAYOUT&&e.attr("clip-path",function(e){return"url(#voroclip-"+e.id+")"}),e.select("defs").select("clipPath").attr("id",function(e){return"node-view"+e.id}).selectAll("circle").attr("r",function(e){return E.node.getSize(e)}),e.filter(function(e){return e.type!==w.NodeTypes.ROOT}).call(t.drag().on("start",function(e){t.event.active||A.force.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}).on("drag",function(e){e.fx=t.event.x,e.fy=t.event.y}).on("end",function(e){t.event.active||A.force.alphaTarget(0),!1===e.fixed&&(e.fx=null,e.fy=null)})),w.updateBackgroundElements(),w.updateMiddlegroundElements(),w.updateForegroundElements()},w.updateBackgroundElements=function(){var e=A.svg.select("#"+w.gID).selectAll(".ppt-gnode").selectAll(".ppt-g-node-background");e.select(".ppt-donut-labels").selectAll("*").remove(),e.select(".ppt-donut-segments").selectAll("*").remove();var n=e.select(".ppt-donut-segments").selectAll(".ppt-segment-container").data(function(e){var t=[];return e.hasOwnProperty("relationships")&&(t=e.relationships),t},function(e){return e.id}).enter().append("g").attr("class",".ppt-segment-container").on("click",w.segmentClick).on("mouseover",function(e){t.select(this).select(".ppt-text-arc").classed("hover",!0)}).on("mouseout",function(e){t.select(this).select(".ppt-text-arc").classed("hover",!1)});n.append("title").attr("class","ppt-svg-title").text(function(e){return e.label+" "+e.target}),e.select(".ppt-donut-labels").selectAll(".ppt-segment-container").data(function(e){var t=[];return e.hasOwnProperty("relationships")&&(t=e.relationships),t},function(e){return e.id}).enter().append("g").attr("class",".ppt-segment-container").on("click",w.segmentClick).on("mouseover",function(e){t.select(this).select(".ppt-text-arc").classed("hover",!0)}).on("mouseout",function(e){t.select(this).select(".ppt-text-arc").classed("hover",!1)}).append("path").attr("class","ppt-hidden-arc").attr("id",function(e,n){return"arc_"+t.select(this.parentNode.parentNode).datum().id+"_"+n}).attr("d",function(e){var n=t.select(this.parentNode.parentNode).datum(),r={startAngle:e.directionAngle-(Math.PI-.1),endAngle:e.directionAngle+(Math.PI-.1)},i=t.arc().innerRadius(w.getDonutInnerRadius(n)).outerRadius(w.getDonutOuterRadius(n))(r),o=/(^.+?)L/.exec(i);return(o&&o.length>1?o[1]:/(^.+?)M/.exec(i)[1]).replace(/,/g," ")}).style("fill","none").style("stroke","none"),n.append("text").attr("text-anchor","middle").attr("class",function(e){var n=t.select(this.parentNode.parentNode).datum();return n.hasOwnProperty("count")&&0===n.count?"ppt-text-arc disabled":"ppt-text-arc"}).attr("fill",function(e){var n=t.select(this.parentNode.parentNode).datum();return E.link.getColor({label:e.label,type:A.link.LinkTypes.SEGMENT,source:n,target:{label:e.target}},"segment","fill")}).attr("dy",A.link.TEXT_DY).append("textPath").attr("startOffset","50%").attr("xlink:href",function(e,n){return"#arc_"+t.select(this.parentNode.parentNode.parentNode).datum().id+"_"+n}).text(function(e){var n=t.select(this.parentNode.parentNode.parentNode).datum();return E.link.getTextValue({source:n,target:{label:e.target},label:e.label,type:A.link.LinkTypes.SEGMENT})}),n.append("path").attr("class",function(e){var n=t.select(this.parentNode.parentNode).datum();return n.hasOwnProperty("count")&&0===n.count?"ppt-segment disabled":"ppt-segment"}).attr("d",function(e){var n=t.select(this.parentNode.parentNode).datum();return t.arc().innerRadius(w.getDonutInnerRadius(n)).outerRadius(w.getDonutOuterRadius(n))(e)}).attr("fill",function(e){var n=t.select(this.parentNode.parentNode).datum();return E.link.getColor({label:e.label,type:A.link.LinkTypes.RELATION,source:n,target:{label:e.target}},"path","fill")}).attr("stroke",function(e){var n=t.select(this.parentNode.parentNode).datum();return E.link.getColor({label:e.label,type:A.link.LinkTypes.RELATION,source:n,target:{label:e.target}},"path","stroke")})},w.updateMiddlegroundElements=function(){var e=A.svg.select("#"+w.gID).selectAll(".ppt-gnode").selectAll(".ppt-g-node-middleground");e.attr("clip-path",function(e){return"url(#node-view"+e.id+")"}),e.selectAll("*").remove(),w.updateMiddlegroundElementsTooltip(e),w.updateMiddlegroundElementsText(e.filter(function(e){return E.node.getNodeDisplayType(e)===E.node.DisplayTypes.TEXT})),w.updateMiddlegroundElementsImage(e.filter(function(e){return E.node.getNodeDisplayType(e)===E.node.DisplayTypes.IMAGE})),w.updateMiddlegroundElementsSymbol(e.filter(function(e){return E.node.getNodeDisplayType(e)===E.node.DisplayTypes.SYMBOL})),w.updateMiddlegroundElementsSVG(e.filter(function(e){return E.node.getNodeDisplayType(e)===E.node.DisplayTypes.SVG})),w.updateMiddlegroundElementsDisplayedText(e.filter(function(e){return E.node.isTextDisplayed(e)}))},w.updateMiddlegroundElementsTooltip=function(e){e.append("title").attr("class",function(e){return E.node.getCSSClass(e,"title")}).text(function(e){return E.node.getTextValue(e,w.NODE_TITLE_MAX_CHARS)})},w.updateMiddlegroundElementsText=function(e){e.append("circle").attr("r",function(e){return E.node.getSize(e)}).attr("class",function(e){return E.node.getCSSClass(e,"circle")}).attr("fill",function(e){return E.node.getColor(e,"circle","fill")}).attr("stroke",function(e){return E.node.getColor(e,"circle","stroke")})},w.updateMiddlegroundElementsImage=function(e){e.append("circle").attr("r",function(e){return E.node.getSize(e)}).attr("class",function(e){return E.node.getCSSClass(e,"image-background-circle")}),e.append("image").attr("class",function(e){return E.node.getCSSClass(e,"image")}).attr("width",function(e){return E.node.getImageWidth(e)}).attr("height",function(e){return E.node.getImageHeight(e)}).attr("transform",function(e){return"translate("+-E.node.getImageWidth(e)/2+","+-E.node.getImageHeight(e)/2+")"}).attr("xlink:href",function(e){return E.node.getImagePath(e)})},w.updateMiddlegroundElementsSymbol=function(e){e.append("circle").attr("r",function(e){return E.node.getSize(e)}).attr("class",function(e){return E.node.getCSSClass(e,"symbol-background-circle")}).attr("fill",function(e){return E.node.getColor(e,"circle","fill")}).attr("stroke",function(e){return E.node.getColor(e,"circle","stroke")}),e.append("use").attr("class",function(e){return E.node.getCSSClass(e,"symbol")}).attr("width",function(e){return E.node.getImageWidth(e)}).attr("height",function(e){return E.node.getImageHeight(e)}).attr("transform",function(e){return"translate("+-E.node.getImageWidth(e)/2+","+-E.node.getImageHeight(e)/2+")"}).attr("xlink:href",function(e){return E.node.getImagePath(e)}).attr("fill",function(e){return E.node.getColor(e,"circle","fill")}).attr("stroke",function(e){return E.node.getColor(e,"circle","stroke")})},w.updateMiddlegroundElementsSVG=function(e){var n=e.append("g"),r=(n.append("circle").attr("r",function(e){return E.node.getSize(e)}).attr("class","ppt-svg-node-background"),n.selectAll("path").data(function(e){return E.node.getSVGPaths(e)}));r.exit().remove(),r.enter().append("path"),n.selectAll("path").attr("class",function(e){var n=t.select(this.parentNode).datum();return E.node.getCSSClass(n,"path")}).each(function(e,n){for(var r in e)e.hasOwnProperty(r)&&t.select(this).attr(r,e[r])})},w.updateMiddlegroundElementsDisplayedText=function(e){var t=e.filter(function(e){return E.node.isTextDisplayed(e)});A.USE_FIT_TEXT?b.render(t):x.render(t)},w.updateForegroundElements=function(){var e=A.svg.select("#"+w.gID).selectAll(".ppt-gnode").selectAll(".ppt-g-node-foreground").selectAll(".ppt-node-foreground-g-arrows");e.classed("active",function(e){return e.valueExpanded&&e.data&&e.data.length>w.PAGE_SIZE}),e.selectAll(".ppt-larrow").classed("enabled",function(e){return e.page>1}),e.selectAll(".ppt-rarrow").classed("enabled",function(e){return!!e.data&&e.page*w.PAGE_SIZE<e.data.length});var t=A.svg.select("#"+w.gID).selectAll(".ppt-gnode").selectAll(".ppt-g-node-foreground");t.selectAll(".ppt-count-box").filter(function(e){return e.type!==w.NodeTypes.CHOOSE}).classed("root",!0),t.selectAll(".ppt-count-box").filter(function(e){return e.type===w.NodeTypes.CHOOSE}).classed("value",!0),t.selectAll(".ppt-count-box").classed("disabled",function(e){return 0===e.count}),A.DISABLE_COUNT||t.selectAll(".ppt-count-text").text(function(e){return null!==e.count?e.count:"..."}).classed("disabled",function(e){return 0===e.count}),A.svg.select("#"+w.gID).selectAll(".ppt-gnode").selectAll(".ppt-g-node-foreground").filter(function(e){return!0===e.isNegative}).selectAll(".ppt-g-node-ban").attr("transform",function(e){return"translate("+-E.node.getSize(e)+","+-E.node.getSize(e)+") scale("+2*E.node.getSize(e)/100+")"}).attr("stroke-width",function(e){return 2/(2*E.node.getSize(e)/100)+"px"}),A.svg.select("#"+w.gID).selectAll(".ppt-gnode").selectAll(".ppt-g-node-foreground").selectAll(".ppt-g-node-ban").classed("active",function(e){return!0===e.isNegative})},w.segmentClick=function(e){t.event.preventDefault();var n=t.select(this.parentNode.parentNode).datum();A.ignoreCount=!0,A.addRelationshipData(n,e,function(e){A.notifyListeners(A.Events.GRAPH_NODE_RELATION_ADD,[r.links.filter(function(t){return t.target===e})]),A.ignoreCount=!1,A.hasGraphChanged=!0,u()})},w.mouseOverNode=function(){t.event.preventDefault();var e=t.select(this).data()[0];M.isActive&&(M.queryConstraintSpanElements.filter(function(t){return t.ref===e}).classed("hover",!0),M.querySpanElements.filter(function(t){return t.ref===e}).classed("hover",!0)),C.isActive&&C.querySpanElements.filter(function(t){return t.node===e}).classed("hover",!0)},w.mouseOutNode=function(){t.event.preventDefault();var e=t.select(this).data()[0];M.isActive&&(M.queryConstraintSpanElements.filter(function(t){return t.ref===e}).classed("hover",!1),M.querySpanElements.filter(function(t){return t.ref===e}).classed("hover",!1)),C.isActive&&C.querySpanElements.filter(function(t){return t.node===e}).classed("hover",!1)},w.nodeClick=function(){if(!t.event.defaultPrevented){var e=t.select(this).data()[0];if(i.debug("nodeClick ("+e.label+")"),e.type===w.NodeTypes.VALUE)w.valueNodeClick(e);else if(e.type===w.NodeTypes.CHOOSE||e.type===w.NodeTypes.ROOT)if(t.event.ctrlKey){if(e.type===w.NodeTypes.CHOOSE){if(e.isNegative=!e.hasOwnProperty("isNegative")||!e.isNegative,w.collapseAllNode(),e.hasOwnProperty("value")&&e.value.length>0);else if(e.isNegative){for(var n=r.links.length-1;n>=0;n--)r.links[n].source===e&&w.removeNode(r.links[n].target);e.count=0}s.hasChanged=!0,A.hasGraphChanged=!0,u()}}else e.valueExpanded?w.collapseNode(e):w.chooseNodeClick(e)}},w.collapseNode=function(e){if(e.valueExpanded){i.debug("collapseNode ("+e.label+")"),A.notifyListeners(A.Events.GRAPH_NODE_VALUE_COLLAPSE,[e]);var t=r.links.filter(function(t){return t.source===e&&t.type===A.link.LinkTypes.VALUE});t.forEach(function(e){r.nodes.splice(r.nodes.indexOf(e.target),1)});for(var n=r.links.length-1;n>=0;n--)t.indexOf(r.links[n])>=0&&r.links.splice(n,1);e.type!==w.NodeTypes.ROOT&&(e.fixed=!1,e.fx=null,e.fy=null),e.parent&&e.parent.type!==w.NodeTypes.ROOT&&(e.parent.fixed=!1,e.parent.fx=null,e.parent.fy=null),e.valueExpanded=!1,u()}else i.debug("collapseNode called on an unexpanded node")},w.collapseAllNode=function(){r.nodes.forEach(function(e){e.type!==w.NodeTypes.CHOOSE&&e.type!==w.NodeTypes.ROOT||!e.valueExpanded||w.collapseNode(e)})},w.valueNodeClick=function(e){i.debug("valueNodeClick ("+e.label+")"),A.notifyListeners(A.Events.GRAPH_NODE_ADD_VALUE,[e]),void 0===e.parent.value&&(e.parent.value=[]),e.parent.value.push(e),s.hasChanged=!0,A.hasGraphChanged=!0,w.collapseNode(e.parent)},w.chooseNodeClick=function(e){if(i.debug("chooseNodeClick ("+e.label+") with waiting state set to "+w.chooseWaiting),!w.chooseWaiting&&!e.immutable&&0!==e.count)if(w.collapseAllNode(),w.chooseWaiting=!0,void 0!==e.data&&e.isAutoLoadValue)e.page=1,w.expandNode(e),w.chooseWaiting=!1;else{i.info("Values ("+e.label+") ==>");var t=o.generateNodeValueQuery(e);a.post({statements:[{statement:t.statement,parameters:t.parameters}]}).done(function(t){i.info("<== Values ("+e.label+")");var n=a.response.parse(t),r=E.node.getConstraintAttribute(e.label);e.data=n[0].filter(function(t){var n=!0;return e.hasOwnProperty("value")&&e.value.length>0&&e.value.forEach(function(e){e.attributes[r]===t[r]&&(n=!1)}),n}),e.page=1,w.expandNode(e),w.chooseWaiting=!1}).fail(function(e,t,n){w.chooseWaiting=!1,i.error(t+': error while accessing Neo4j server on URL:"'+a.CYPHER_URL+'" defined in "rest.CYPHER_URL" property: '+n)})}},w.addExpandedValue=function(e,t){for(var n=!1,i=r.nodes.length-1;i>=0;i--)if(r.nodes[i].valueExpanded){for(var o=r.nodes[i].data.length-1;o>=0;o--)r.nodes[i].data[o][e]===t&&(n=!0,r.nodes[i].hasOwnProperty("value")||(r.nodes[i].value=[]),r.nodes[i].value.push({attributes:r.nodes[i].data[o]}),r.nodes[i].data.splice(o,1));w.collapseNode(r.nodes[i]),w.expandNode(r.nodes[i])}n&&(s.hasChanged=!0,A.hasGraphChanged=!0,u())},w.getContainingValue=function(e){var t=[],n=r.links,i=r.nodes;if(i.length>0){var o=i[0];void 0!==o.value&&o.value.length>0&&(void 0!==e&&e!==o.label||t.push(o)),n.forEach(function(n){var r=n.target;n.type===A.link.LinkTypes.RELATION&&void 0!==r.value&&r.value.length>0&&(void 0!==e&&e!==r.label||t.push(r))})}return t},w.addValueForLabel=function(e,t){for(var n=!1,i=r.nodes.length-1;i>=0;i--)if(r.nodes[i].type===w.NodeTypes.CHOOSE&&r.nodes[i].label===e){r.nodes[i].hasOwnProperty("value")||(r.nodes[i].value=[]);var o=!1,a=E.node.getConstraintAttribute(e);r.nodes[i].value.forEach(function(e){e.attributes.hasOwnProperty(a)&&e.attributes[a]===t.attributes[a]&&(o=!0)}),o||(r.nodes[i].value.push(t),n=!0)}return n},w.addValue=function(e,t){for(var n=!1,i=0;i<r.nodes.length;i++){var o=r.nodes[i];if(e.indexOf(o.id)>=0){o.hasOwnProperty("value")||(o.value=[]);var a=E.node.getReturnAttributes(o.label)[0];o.data.forEach(function(e){e.hasOwnProperty(a)&&e[a]===t&&(n=!0,o.value.push({attributes:e}))})}}n&&(s.hasChanged=!0,A.hasGraphChanged=!0,u())},w.removeValue=function(e,t){var n=!1;w.collapseNode(e);for(var r=e.value.length-1;r>=0;r--)e.value[r]===t&&(e.value.splice(r,1),n=!0);return n},w.removeValues=function(e){var t=!1;return w.collapseNode(e),void 0!==e.value&&e.value.length>0&&(e.value.length=0,t=!0),t},w.getValue=function(e,t){for(var n=0;n<r.nodes.length;n++){var i=r.nodes[n];if(i.id===e)for(var o=E.node.getConstraintAttribute(i.label),a=i.value.length-1;a>=0;a--)if(i.value[a].attributes[o]===t)return i.value[a]}},w.removeExpandedValue=function(e,t){for(var n=!1,i=r.nodes.length-1;i>=0;i--)if(r.nodes[i].valueExpanded){for(var o=[],a=r.nodes[i].value.length-1;a>=0;a--)r.nodes[i].value[a].attributes[e]===t&&(n=!0,o=o.concat(r.nodes[i].value.splice(a,1)));for(var l=0;l<o.length;l++)r.nodes[i].data.push(o[l].attributes);w.collapseNode(r.nodes[i]),w.expandNode(r.nodes[i])}n&&(s.hasChanged=!0,A.hasGraphChanged=!0,u())},w.getAutoLoadValueNodes=function(){return r.nodes.filter(function(e){return e.hasOwnProperty("isAutoLoadValue")&&!0===e.isAutoLoadValue&&!(!0===e.isNegative)})},w.addRelatedValues=function(e,t,n){var l=w.filterExistingValues(e,t);if(!(l.length<=0)){var c=[];l.forEach(function(e){var t=E.node.getConstraintAttribute(e.label),n="MATCH ";n+=t===o.NEO4J_INTERNAL_ID?"(v:`"+e.label+"`) WHERE (ID(v) = $p)":"(v:`"+e.label+"`) WHERE (v."+t+" = $p)";var r=E.node.getReturnAttributes(e.label),i="";n+=' RETURN DISTINCT "'+e.rel+'" AS rel, "'+e.label+'" AS label, {'+r.reduce(function(e,t){return e+=i+t+":v."+t,i=", ",e},"")+"} AS value LIMIT 1",c.push({statement:n,parameters:{p:e.id},resultDataContents:["row"]})}),i.info("addRelatedValues ==>"),a.post({statements:c}).done(function(t){i.info("<== addRelatedValues");var o=a.response.parse(t),l=0;o.forEach(function(t){if(t.length>0){var i=t[0].label,a=t[0].value,c=t[0].rel,f={id:r.generateId(),parent:e,attributes:a,type:w.NodeTypes.VALUE,label:i};A.ignoreCount=!0;var d=e.relationships.filter(function(e){return e.label===c&&e.target===i}),h={label:c,target:i};d.length>0&&(h=d[0]),A.addRelationshipData(e,h,function(){++l===o.length&&(A.ignoreCount=!1,A.hasGraphChanged=!0,s.hasChanged=!0,u())},[f],n)}})}).fail(function(e,t,n){console.error(e,t,n)})}},w.addRelatedBranch=function(e,t,n,r){if(t.length>0){var i=t[0];t=t.slice(1);var o=e.relationships.filter(function(e){return e.label===i.type&&e.target===i.target});o.length>0&&A.addRelationshipData(e,o[0],function(e){w.addRelatedBranch(e,t,n,r)})}else w.addRelatedValues(e,n,r)},w.filterExistingValues=function(e,t){var n=[],i=r.nodes.filter(function(e){return e.parent===e&&e.hasOwnProperty("value")&&e.value.length>0});return t.forEach(function(e){var t=!1,r=E.node.getConstraintAttribute(e.label);i.forEach(function(n){n.label===e.label&&n.value.forEach(function(n){n.attributes[r]===e.id&&(t=!0)})}),t||n.push(e)}),n},w.expandNode=function(e){A.notifyListeners(A.Events.GRAPH_NODE_VALUE_EXPAND,[e]);var t=e.page*w.PAGE_SIZE,n=e.data.slice(t-w.PAGE_SIZE,t),i=A.computeParentAngle(e),a=1;n.forEach(function(t){var s;s=e.parent?360/(n.length+1)*a:360/n.length*a;var u=e.x+100*Math.cos(s*(Math.PI/180)-i),l=e.y+100*Math.sin(s*(Math.PI/180)-i),c={id:r.generateId(),parent:e,attributes:t,type:w.NodeTypes.VALUE,label:e.label,count:t.count,x:u,y:l,internalID:t[o.NEO4J_INTERNAL_ID.queryInternalName]};r.nodes.push(c),r.links.push({id:"l"+r.generateId(),source:e,target:c,type:A.link.LinkTypes.VALUE}),a++}),e.fixed=!0,e.fx=e.x,e.fy=e.y,e.parent&&e.parent.type!==w.NodeTypes.ROOT&&(e.parent.fixed=!0,e.parent.fx=e.parent.x,e.parent.fy=e.parent.y),e.valueExpanded=!0,u()},w.loadRelationshipData=function(e,t,n){var r=E.node.getSchema(e.label);if(void 0!==r)r.hasOwnProperty("rel")&&r.rel.length>0?t(w.pie.startAngle(n-Math.PI).endAngle(n+Math.PI)(r.rel).map(function(e){var t={id:e.data.label+e.data.target.label,label:e.data.label,target:e.data.target.label,count:0,startAngle:e.startAngle,endAngle:e.endAngle,directionAngle:(e.startAngle+e.endAngle)/2};return!0===e.data.isReverse&&(t.isReverse=!0),t})):t([]);else{var s=o.generateNodeRelationQuery(e);i.info("Relations ("+e.label+") ==>"),a.post({statements:[{statement:s.statement,parameters:s.parameters}]}).done(function(r){i.info("<== Relations ("+e.label+")");var s=a.response.parse(r)[0].filter(function(e){return o.filterRelation(e)});s=w.pie.startAngle(n-Math.PI).endAngle(n+Math.PI)(s).map(function(e){return{id:e.data.label+e.data.target,label:e.data.label,target:e.data.target,count:e.data.count,startAngle:e.startAngle,endAngle:e.endAngle,directionAngle:(e.startAngle+e.endAngle)/2}}),t(s)}).fail(function(e,n,r){i.error(n+': error while accessing Neo4j server on URL:"'+a.CYPHER_URL+'" defined in "rest.CYPHER_URL" property: '+r),t([])})}},w.expandRelationships=function(e,t){var n=0;if(e.hasOwnProperty("relationships")&&e.relationships.length>0)for(var r=0;r<e.relationships.length;r++)A.addRelationshipData(e,e.relationships[r],function(){++n===e.relationships.length&&t()});else t()},w.removeNode=function(e){var t=e.hasOwnProperty("value")&&e.value.length>0;r.links.filter(function(t){return t.source===e}).forEach(function(e){var n=w.removeNode(e.target);t=t||n});for(var n=r.links.length-1;n>=0;n--)r.links[n].target===e&&r.links.splice(n,1);return r.nodes.splice(r.nodes.indexOf(e),1),t},w.removeEmptyBranches=function(e){var t=e.hasOwnProperty("value")&&e.value.length>0;if(r.links.filter(function(t){return t.source===e}).forEach(function(e){var n=!w.removeEmptyBranches(e.target);t=t||n}),!t){for(var n=r.links.length-1;n>=0;n--)r.links[n].target===e&&r.links.splice(n,1);r.nodes.splice(r.nodes.indexOf(e),1)}return!t},w.getTrunkNode=function(e){for(var t=0;t<r.links.length;t++){var n=r.links[t];if(n.target===e&&n.source!==A.getRootNode())return w.getTrunkNode(n.source)}return e},w.clearSelection=function(){t.event.preventDefault();var e=t.select(this).data()[0];if(w.collapseAllNode(),void 0!==e.value&&e.value.length>0&&!e.immutable){if(e.value.pop(),!0===e.isNegative&&0===e.value.length){for(var n=r.links.length-1;n>=0;n--)r.links[n].source===e&&w.removeNode(r.links[n].target);e.count=0}s.hasChanged=!0,A.hasGraphChanged=!0,u()}};var A={};A.link=d,A.node=w,A.DISABLE_RELATION=!1,A.DISABLE_COUNT=!1,A.containerId="popoto-graph",A.hasGraphChanged=!0,A.zoom=t.zoom().scaleExtent([.1,10]),A.WHEEL_ZOOM_ENABLED=!0,A.USE_DONUT_FORCE=!1,A.USE_VORONOI_LAYOUT=!1,A.USE_FIT_TEXT=!1,A.Events=Object.freeze({NODE_ROOT_ADD:"root.node.add",NODE_EXPAND_RELATIONSHIP:"node.expandRelationship",GRAPH_SAVE:"graph.save",GRAPH_RESET:"graph.reset",GRAPH_NODE_RELATION_ADD:"graph.node.relation_add",GRAPH_NODE_VALUE_EXPAND:"graph.node.value_expand",GRAPH_NODE_VALUE_COLLAPSE:"graph.node.value_collapse",GRAPH_NODE_ADD_VALUE:"graph.node.add_value",GRAPH_NODE_DATA_LOADED:"graph.node.data_loaded"}),A.listeners={},A.on=function(e,t){A.listeners.hasOwnProperty(e)||(A.listeners[e]=[]),A.listeners[e].push(t)},A.notifyListeners=function(e,t){A.listeners.hasOwnProperty(e)&&A.listeners[e].forEach(function(n){n.apply(e,t)})},A.onSave=function(e){A.on(A.Events.GRAPH_SAVE,e)},A.onReset=function(e){A.on(A.Events.GRAPH_RESET,e)},A.setDefaultGraph=function(e){e.mainLabel=e},A.createGraphArea=function(){var e,n=t.select("#"+A.containerId);e=n.append("div").attr("class","ppt-toolbar"),f.TOGGLE_VIEW_RELATION&&e.append("span").attr("id","popoto-toggle-relation").attr("class","ppt-icon ppt-menu relation").attr("title",e.TOOL_RELATION).on("click",function(){f.toggleViewRelation()}),f.RESET_GRAPH&&e.append("span").attr("id","popoto-reset-menu").attr("class","ppt-icon ppt-menu reset").attr("title",e.TOOL_RESET).on("click",function(){A.notifyListeners(A.Events.GRAPH_RESET,[]),f.reset()}),f.TOGGLE_TAXONOMY&&e.append("span").attr("id","popoto-taxonomy-menu").attr("class","ppt-icon ppt-menu taxonomy").attr("title",e.TOOL_TAXONOMY).on("click",f.toggleTaxonomy),f.CENTER_GRAPH&&e.append("span").attr("id","popoto-center-menu").attr("class","ppt-icon ppt-menu center").attr("title",e.TOOL_CENTER).on("click",f.center),f.TOGGLE_FULL_SCREEN&&e.append("span").attr("id","popoto-fullscreen-menu").attr("class","ppt-icon ppt-menu fullscreen").attr("title",e.TOOL_FULL_SCREEN).on("click",f.toggleFullScreen),f.SAVE_GRAPH&&e.append("span").attr("id","popoto-save-menu").attr("class","ppt-icon ppt-menu save").attr("title",e.TOOL_SAVE).on("click",function(){A.notifyListeners(A.Events.GRAPH_SAVE,[A.getSchema()])}),f.TOGGLE_FIT_TEXT&&e.append("span").attr("id","popoto-fit-text-menu").attr("class","ppt-icon ppt-menu fit-text").attr("title",e.TOOL_FIT_TEXT).on("click",f.toggleFitText),A.svgTag=n.append("svg").attr("class","ppt-svg-graph").call(A.zoom.on("zoom",A.rescale)),A.svgTag.on("dblclick.zoom",null),A.WHEEL_ZOOM_ENABLED||A.svgTag.on("wheel.zoom",null).on("mousewheel.zoom",null),A.svgdefs=A.svgTag.append("defs"),A.svgdefs.append("marker").attr("id","cross").attr("refX",10).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("class","ppt-marker-cross").attr("d","M5,5 L15,15 M15,5 L5,15"),A.svgdefs.append("marker").attr("id","arrow").attr("refX",9).attr("refY",3).attr("markerWidth",10).attr("markerHeight",10).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("class","ppt-marker-arrow").attr("d","M0,0 L0,6 L9,3 z"),A.svgdefs.append("marker").attr("id","reverse-arrow").attr("refX",0).attr("refY",3).attr("markerWidth",10).attr("markerHeight",10).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("class","ppt-marker-reverse-arrow").attr("d","M0,3 L9,6 L9,0 z"),A.svgdefs.append("filter").attr("id","grayscale").append("feColorMatrix").attr("type","saturate").attr("values","0");var r=A.svgdefs.append("filter").attr("id","gooey");r.append("feGaussianBlur").attr("in","SourceGraphic").attr("stdDeviation","10").attr("color-interpolation-filters","sRGB").attr("result","blur"),r.append("feColorMatrix").attr("class","blurValues").attr("in","blur").attr("mode","matrix").attr("values","1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 35 -6").attr("result","gooey"),r.append("feBlend").attr("in","SourceGraphic").attr("in2","gooey").attr("operator","atop"),A.svgdefs.append("g").attr("id","voronoi-clip-path"),A.svg=A.svgTag.append("svg:g"),A.svg.append("g").attr("id",A.link.gID),A.svg.append("g").attr("id",A.node.gID),window.addEventListener("resize",A.centerRootNode)},A.getRootNode=function(){return r.getRootNode()},A.centerRootNode=function(){r.getRootNode().fx=A.getSVGWidth()/2,r.getRootNode().fy=A.getSVGHeight()/2,u()},A.getSVGWidth=function(){return void 0===A.svg||A.svg.empty()?(i.debug("graph.svg is undefined or empty."),0):document.getElementById(A.containerId).clientWidth},A.getSVGHeight=function(){return void 0===A.svg||A.svg.empty()?(i.debug("graph.svg is undefined or empty."),0):document.getElementById(A.containerId).clientHeight},A.rescale=function(){var e=t.event.transform;isNaN(e.x)||isNaN(e.y)||isNaN(e.k)?A.svg.attr("transform",t.zoomIdentity):A.svg.attr("transform",e)},A.CHARGE=-500,A.createForceLayout=function(){A.force=t.forceSimulation().force("charge",t.forceManyBody().strength(function(e){return e.charge?e.charge:A.CHARGE})).force("link",t.forceLink().id(function(e){return e.id}).distance(E.link.getDistance)),A.force.nodes(r.nodes),A.force.force("link").links(r.links),A.force.on("tick",A.tick)},A.addRootNode=function(e){if(r.nodes.length>0&&i.warn("graph.addRootNode is called but the graph is not empty."),void 0!==E.node.getSchema(e))A.addSchema(E.node.getSchema(e));else{var t={id:r.generateId(),type:A.node.NodeTypes.ROOT,x:A.getSVGWidth()/2,y:A.getSVGHeight()/2,fx:A.getSVGWidth()/2,fy:A.getSVGHeight()/2,tx:A.getSVGWidth()/2,ty:A.getSVGHeight()/2,label:e,fixed:!0,internalLabel:A.node.generateInternalLabel(e),relationships:[],isAutoLoadValue:!0===E.node.getIsAutoLoadValue(e)};r.nodes.push(t),A.notifyListeners(A.Events.NODE_ROOT_ADD,[t]),A.node.loadRelationshipData(t,function(n){t.relationships=n,E.node.getIsAutoExpandRelations(e)?(A.ignoreCount=!0,A.node.expandRelationships(t,function(){A.ignoreCount=!1,A.hasGraphChanged=!0,l()})):(A.hasGraphChanged=!0,l())},Math.PI/2)}},A.loadSchema=function(e){r.nodes.length>0&&i.warn("graph.loadSchema is called but the graph is not empty.");var t=e,n={id:r.generateId(),type:A.node.NodeTypes.ROOT,x:A.getSVGWidth()/2,y:A.getSVGHeight()/2,fx:A.getSVGWidth()/2,fy:A.getSVGHeight()/2,tx:A.getSVGWidth()/2,ty:A.getSVGHeight()/2,label:t.label,fixed:!0,internalLabel:A.node.generateInternalLabel(t.label),relationships:[],isAutoLoadValue:!0===E.node.getIsAutoLoadValue(t.label)};r.nodes.push(n),A.notifyListeners(A.Events.NODE_ROOT_ADD,[n]);var o=E.node.getSchema(e.label);if(void 0!==o&&o.hasOwnProperty("rel")&&o.rel.length>0){var a=Math.PI/2;n.relationships=A.node.pie.startAngle(a-Math.PI).endAngle(a+Math.PI)(o.rel).map(function(e){var t={id:e.data.label+e.data.target.label,label:e.data.label,target:e.data.target.label,count:0,startAngle:e.startAngle,endAngle:e.endAngle,directionAngle:(e.startAngle+e.endAngle)/2};return!0===e.data.isReverse&&(t.isReverse=!0),t})}else A.node.loadRelationshipData(n,function(e){n.relationships=e,A.hasGraphChanged=!0,l()},Math.PI/2);if(t.hasOwnProperty("value")){var s=[].concat(t.value);n.value=[],s.forEach(function(e){n.value.push({id:r.generateId(),parent:n,attributes:e,type:A.node.NodeTypes.VALUE,label:n.label})})}if(t.hasOwnProperty("rel"))for(var u=0;u<t.rel.length;u++)A.loadSchemaRelation(t.rel[u],n,u+1,t.rel.length)},A.loadSchemaRelation=function(e,t,n,i){var o=e.target,a=A.loadSchemaNode(o,t,n,i,e.label,e.hasOwnProperty("isReverse")&&!0===e.isReverse),s={id:"l"+r.generateId(),source:t,target:a,type:A.link.LinkTypes.RELATION,label:e.label,schema:e};r.links.push(s);var u=E.node.getSchema(o.label);if(void 0!==u&&u.hasOwnProperty("rel")&&u.rel.length>0){var c=Math.PI/2;a.relationships=A.node.pie.startAngle(c-Math.PI).endAngle(c+Math.PI)(u.rel).map(function(e){var t={id:e.data.label+e.data.target.label,label:e.data.label,target:e.data.target.label,count:0,startAngle:e.startAngle,endAngle:e.endAngle,directionAngle:(e.startAngle+e.endAngle)/2};return!0===e.data.isReverse&&(t.isReverse=!0),t})}else A.node.loadRelationshipData(a,function(e){a.relationships=e,A.hasGraphChanged=!0,l()},Math.PI/2);if(o.hasOwnProperty("rel"))for(var f=0;f<o.rel.length;f++)A.loadSchemaRelation(o.rel[f],a,f+1,o.rel.length)},A.loadSchemaNode=function(e,t,n,i,o,a){var s,u=E.node.getIsGroup(e),l=A.computeParentAngle(t);s=l?360/(i+1)*n:360/i*n;var c=t.x+200*Math.cos(s*(Math.PI/180)-l),f=t.y+200*Math.sin(s*(Math.PI/180)-l),d={id:r.generateId(),parent:t,parentRel:o,type:u?A.node.NodeTypes.GROUP:A.node.NodeTypes.CHOOSE,label:e.label,fixed:!1,internalLabel:A.node.generateInternalLabel(e.label),x:c,y:f,schema:e,isAutoLoadValue:!0===E.node.getIsAutoLoadValue(e.label),relationships:[]};if(!0===a&&(d.isParentRelReverse=!0),e.hasOwnProperty("isNegative")&&!0===e.isNegative&&(d.isNegative=!0,d.count=0),r.nodes.push(d),e.hasOwnProperty("value")){var h=[].concat(e.value);d.value=[],h.forEach(function(e){d.value.push({id:r.generateId(),parent:d,attributes:e,type:A.node.NodeTypes.VALUE,label:d.label})})}return d},A.addSchema=function(e){r.nodes.length>0&&i.warn("graph.addSchema is called but the graph is not empty.");var t=e,n={id:r.generateId(),type:A.node.NodeTypes.ROOT,x:A.getSVGWidth()/2,y:A.getSVGHeight()/2,fx:A.getSVGWidth()/2,fy:A.getSVGHeight()/2,tx:A.getSVGWidth()/2,ty:A.getSVGHeight()/2,label:t.label,fixed:!0,internalLabel:A.node.generateInternalLabel(t.label),relationships:[],isAutoLoadValue:!0===E.node.getIsAutoLoadValue(t.label)};if(r.nodes.push(n),A.notifyListeners(A.Events.NODE_ROOT_ADD,[n]),t.hasOwnProperty("rel")&&t.rel.length>0){var o=Math.PI/2;n.relationships=A.node.pie.startAngle(o-Math.PI).endAngle(o+Math.PI)(t.rel).map(function(e){var t={id:e.data.label+e.data.target.label,label:e.data.label,target:e.data.target.label,count:0,startAngle:e.startAngle,endAngle:e.endAngle,directionAngle:(e.startAngle+e.endAngle)/2};return!0===e.data.isReverse&&(t.isReverse=!0),t})}},A.addSchemaRelation=function(e,t,n,i){var o=A.addSchemaNode(e.target,t,n,i,e.label),a={id:"l"+r.generateId(),source:t,target:o,type:A.link.LinkTypes.RELATION,label:e.label,schema:e};r.links.push(a)},A.addSchemaNode=function(e,t,n,i,o){var a,s=E.node.getIsGroup(e),u=e.hasOwnProperty("collapsed")&&!0===e.collapsed,l=A.computeParentAngle(t);a=l?360/(i+1)*n:360/i*n;var c=t.x+200*Math.cos(a*(Math.PI/180)-l),f=t.y+200*Math.sin(a*(Math.PI/180)-l),d={id:r.generateId(),parent:t,parentRel:o,type:s?A.node.NodeTypes.GROUP:A.node.NodeTypes.CHOOSE,label:e.label,fixed:!1,internalLabel:A.node.generateInternalLabel(e.label),x:c,y:f,schema:e,isAutoLoadValue:!0===E.node.getIsAutoLoadValue(e.label),relationships:[]};if(e.hasOwnProperty("rel")&&e.rel.length>0){for(var h={},p=[],g=0;g<e.rel.length;g++){var v=e.rel[g],m=v.label+v.target.label;h.hasOwnProperty(m)||(h[m]=v,p.push(v))}d.relationships=A.node.pie(p).map(function(e){return{id:e.data.label+e.data.target.label,count:e.data.count||0,label:e.data.label,target:e.data.target.label,startAngle:e.startAngle,endAngle:e.endAngle,directionAngle:(e.startAngle+e.endAngle)/2}})}if(e.hasOwnProperty("value")){var y=[].concat(e.value);d.value=[],y.forEach(function(e){d.value.push({id:r.generateId(),parent:d,attributes:e,type:A.node.NodeTypes.VALUE,label:d.label})})}if(r.nodes.push(d),!u&&e.hasOwnProperty("rel"))for(var b=0;b<e.rel.length;b++)A.addSchemaRelation(e.rel[b],d,b+1,e.rel.length);return d},A.getSchema=function(){var e={},t=r.getRootNode();e[t.id]={label:t.label},t.hasOwnProperty("value")&&(e[t.id].value=[],t.value.forEach(function(n){e[t.id].value.push(n.attributes)}));var n=r.links;return n.length>0&&n.forEach(function(t){if(t.type===A.link.LinkTypes.RELATION){var n=t.source,r=t.target;e.hasOwnProperty(n.id)||(e[n.id]={label:n.label},n.hasOwnProperty("isNegative")&&!0===n.isNegative&&(e[n.id].isNegative=!0),n.hasOwnProperty("value")&&(e[n.id].value=[],n.value.forEach(function(t){e[n.id].value.push(t.attributes)}))),e.hasOwnProperty(r.id)||(e[r.id]={label:r.label},r.hasOwnProperty("isNegative")&&!0===r.isNegative&&(e[r.id].isNegative=!0),r.hasOwnProperty("value")&&(e[r.id].value=[],r.value.forEach(function(t){e[r.id].value.push(t.attributes)}))),e[n.id].hasOwnProperty("rel")||(e[n.id].rel=[]);var i={label:t.label,target:e[r.id]};r.hasOwnProperty("isParentRelReverse")&&!0===r.isParentRelReverse&&(i.isReverse=!0),e[n.id].rel.push(i)}}),e[t.id]},A.tick=function(){var e=A.svg.selectAll("#"+A.link.gID+" > g");if(e.selectAll(".ppt-link").attr("d",function(e){var t=e.source,n=e.target,r=A.computeParentAngle(n),i=E.node.getSize(t),o=E.node.getSize(n);!A.DISABLE_RELATION&&t.hasOwnProperty("relationships")&&t.relationships.length>0&&(i=A.node.getDonutOuterRadius(t)),!A.DISABLE_RELATION&&n.hasOwnProperty("relationships")&&n.relationships.length>0&&(o=A.node.getDonutOuterRadius(n));var a=n.x+o*Math.cos(r),s=n.y-o*Math.sin(r),u=t.x-i*Math.cos(r),l=t.y+i*Math.sin(r),c=(a+u)/2,f=(s+l)/2;return t.x<=n.x||!0===A.ignoreMirroLinkLabels?"M"+u+" "+l+"L"+c+" "+f+"L"+a+" "+s:"M"+a+" "+s+"L"+c+" "+f+"L"+u+" "+l}).attr("marker-end",function(e){if(A.link.SHOW_MARKER)if(!0===e.target.isParentRelReverse){if(e.source.x>e.target.x)return"url(#arrow)"}else if(e.source.x<=e.target.x)return"url(#arrow)";return null}).attr("marker-start",function(e){if(A.link.SHOW_MARKER)if(!0===e.target.isParentRelReverse){if(e.source.x<=e.target.x)return"url(#reverse-arrow)"}else if(e.source.x>e.target.x)return"url(#reverse-arrow)";return null}),e.selectAll(".ppt-textPath").attr("xlink:href",function(e){return"#ppt-path_"+e.id}),A.svg.selectAll("#"+A.node.gID+" > g").attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),!0===A.USE_VORONOI_LAYOUT){var n=t.select("#voronoi-clip-path").selectAll(".voroclip").data(A.recenterVoronoi(r.nodes),function(e){return e.point.id});n.enter().append("clipPath").attr("id",function(e){return"voroclip-"+e.point.id}).attr("class","voroclip"),n.exit().remove(),n.selectAll("path").remove(),n.append("path").attr("id",function(e){return"pvoroclip-"+e.point.id}).attr("d",function(e){return"M"+e.join(",")+"Z"})}},A.computeParentAngle=function(e){var t=0;if(e.parent){var n=e.parent.x,r=e.parent.y,i=e.x,o=e.y,a=100/(Math.sqrt(Math.pow(n-i,2)+Math.pow(r-o,2))-100),s=((i+a*n)/(1+a)-i)/100;s<-1&&(s=-1),s>1&&(s=1),t=Math.acos(s),r>o&&(t=2*Math.PI-t)}return t},A.addRelationshipData=function(e,t,n,i,o){var a={id:""+r.generateId(),parent:e,parentRel:t.label,type:A.node.NodeTypes.CHOOSE,label:t.target,fixed:!1,internalLabel:A.node.generateInternalLabel(t.target),relationships:[]};!0===t.isReverse&&(a.isParentRelReverse=!0),void 0!==i&&i.length>0&&(a.value=i),void 0!==o&&!0===o&&(a.isNegative=!0);var s={id:"l"+r.generateId(),source:e,target:a,type:A.link.LinkTypes.RELATION,label:t.label};a.x=e.x+2*E.link.getDistance(s)/3*Math.cos(t.directionAngle-Math.PI/2)+10*Math.random(),a.y=e.y+2*E.link.getDistance(s)/3*Math.sin(t.directionAngle-Math.PI/2)+10*Math.random(),a.tx=e.tx+E.link.getDistance(s)*Math.cos(t.directionAngle-Math.PI/2),a.ty=e.ty+E.link.getDistance(s)*Math.sin(t.directionAngle-Math.PI/2),r.nodes.push(a),r.links.push(s),A.hasGraphChanged=!0,l(),A.node.loadRelationshipData(a,function(e){a.relationships=e,A.hasGraphChanged=!0,l(),E.node.getIsAutoExpandRelations(a.label)?A.node.expandRelationships(a,function(){n(a)}):n(a)},t.directionAngle)},A.voronoi=t.voronoi().x(function(e){return e.x}).y(function(e){return e.y}),A.recenterVoronoi=function(e){var t=[];return A.voronoi.polygons(e.map(function(e){return e.x=e.x||0,e.y=e.y||0,e})).forEach(function(e){if(e.length){var n=[];e.forEach(function(t){n.push([t[0]-e.data.x,t[1]-e.data.y])}),n.point=e.data,t.push(n)}}),t};var E={};E.colorScale=t.scaleOrdinal(t.schemeCategory10),E.link={},E.link.Provider={},E.taxonomy={},E.taxonomy.Provider={},E.node={},E.node.Provider={},E.link.getTextValue=function(e){return E.link.Provider.hasOwnProperty("getTextValue")?E.link.Provider.getTextValue(e):E.link.DEFAULT_PROVIDER.hasOwnProperty("getTextValue")?E.link.DEFAULT_PROVIDER.getTextValue(e):void i.error("No provider defined for link getTextValue")},E.link.getColor=function(e,t,n){return E.link.Provider.hasOwnProperty("getColor")?E.link.Provider.getColor(e,t,n):E.link.DEFAULT_PROVIDER.hasOwnProperty("getColor")?E.link.DEFAULT_PROVIDER.getColor(e,t,n):void i.error("No provider defined for getColor")},E.link.getCSSClass=function(e,t){return E.link.Provider.hasOwnProperty("getCSSClass")?E.link.Provider.getCSSClass(e,t):E.link.DEFAULT_PROVIDER.hasOwnProperty("getCSSClass")?E.link.DEFAULT_PROVIDER.getCSSClass(e,t):void i.error("No provider defined for getCSSClass")},E.link.getDistance=function(e){return E.link.Provider.hasOwnProperty("getDistance")?E.link.Provider.getDistance(e):E.link.DEFAULT_PROVIDER.hasOwnProperty("getDistance")?E.link.DEFAULT_PROVIDER.getDistance(e):void i.error("No provider defined for getDistance")},E.link.getSemanticValue=function(e){return E.link.Provider.hasOwnProperty("getSemanticValue")?E.link.Provider.getSemanticValue(e):E.link.DEFAULT_PROVIDER.hasOwnProperty("getSemanticValue")?E.link.DEFAULT_PROVIDER.getSemanticValue(e):void i.error("No provider defined for getSemanticValue")},E.colorLuminance=function(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var n,r,i="#";for(r=0;r<3;r++)n=parseInt(e.substr(2*r,2),16),i+=("00"+(n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16))).substr(n.length);return i},E.link.DEFAULT_PROVIDER={getTextValue:function(e){if(e.type===A.link.LinkTypes.VALUE)return E.node.isTextDisplayed(e.target)?"":E.node.getTextValue(e.target);var t="";return e.type===A.link.LinkTypes.SEGMENT&&(t=" "+E.node.getTextValue(e.target)),e.label+t},getDistance:function(e){return e.type===A.link.LinkTypes.VALUE?13/8*(E.node.getSize(e.source)+E.node.getSize(e.target)):2.5*(E.node.getSize(e.source)+E.node.getSize(e.target))},getColor:function(e,t,n){if(e.type===A.link.LinkTypes.VALUE)return"#525863";var r=E.colorScale(e.source.label+e.label+e.target.label);return"stroke"===n?E.colorLuminance(r,-.2):r},getCSSClass:function(e,t){var n="ppt-link__"+t;if(e.type===A.link.LinkTypes.VALUE)n+="--value";else{var r="ppt-"+e.label.replace(/[^0-9a-z\-_]/gi,"");e.type===A.link.LinkTypes.RELATION&&(n+="--relation",0===e.target.count&&(n+="--disabled"),n=n+" "+r)}return n},getSemanticValue:function(e){return E.link.getTextValue(e)}},E.link.Provider=E.link.DEFAULT_PROVIDER,E.taxonomy.getTextValue=function(e){return E.taxonomy.Provider.hasOwnProperty("getTextValue")?E.taxonomy.Provider.getTextValue(e):E.taxonomy.DEFAULT_PROVIDER.hasOwnProperty("getTextValue")?E.taxonomy.DEFAULT_PROVIDER.getTextValue(e):void i.error("No provider defined for taxonomy getTextValue")},E.taxonomy.getCSSClass=function(e,t){return E.taxonomy.Provider.hasOwnProperty("getCSSClass")?E.taxonomy.Provider.getCSSClass(e,t):E.taxonomy.DEFAULT_PROVIDER.hasOwnProperty("getCSSClass")?E.taxonomy.DEFAULT_PROVIDER.getCSSClass(e,t):void i.error("No provider defined for taxonomy getCSSClass")},E.taxonomy.DEFAULT_PROVIDER={getTextValue:function(e){return e},getCSSClass:function(e,t){return"ppt-taxo__"+t+" "+e.replace(/[^0-9a-z\-_]/gi,"")}},E.taxonomy.Provider=E.taxonomy.DEFAULT_PROVIDER,E.node.DisplayTypes=Object.freeze({TEXT:0,IMAGE:1,SVG:2,SYMBOL:3}),E.node.getProvider=function(e){if(void 0!==e){if(E.node.Provider.hasOwnProperty(e))return E.node.Provider[e];for(var t in i.debug("No direct provider found for label "+e),E.node.Provider)if(E.node.Provider.hasOwnProperty(t)){var n=E.node.Provider[t];if(n.hasOwnProperty("children")&&n.children.indexOf(e)>-1){i.debug("No provider is defined for label ("+e+"), parent ("+t+") will be used");var r={parent:t};for(var o in n)n.hasOwnProperty(o)&&"children"!==o&&"parent"!==o&&(r[o]=n[o]);return E.node.Provider[e]=r,E.node.Provider[e]}}for(var a in i.debug("No label provider defined for label ("+e+") default one will be created from provider.node.DEFAULT_PROVIDER"),E.node.Provider[e]={},E.node.DEFAULT_PROVIDER)E.node.DEFAULT_PROVIDER.hasOwnProperty(a)&&(E.node.Provider[e][a]=E.node.DEFAULT_PROVIDER[a]);return E.node.Provider[e]}i.error("Node label is undefined, no label provider can be found.")},E.node.getProperty=function(e,t){var n=E.node.getProvider(e);if(!n.hasOwnProperty(t)){for(var r=n,o=!1;r.hasOwnProperty("parent")&&!o;)(r=E.node.getProvider(r.parent)).hasOwnProperty(t)&&(n[t]=r[t],o=!0);o||(i.debug('No "'+t+'" property found for node label provider ('+e+"), default value will be used"),E.node.DEFAULT_PROVIDER.hasOwnProperty(t)?n[t]=E.node.DEFAULT_PROVIDER[t]:i.debug('No default value for "'+t+'" property found for label provider ('+e+")"))}return n[t]},E.node.getIsAutoLoadValue=function(e){return E.node.getProperty(e,"isAutoLoadValue")},E.node.getIsSearchable=function(e){return E.node.getProperty(e,"isSearchable")},E.node.getIsAutoExpandRelations=function(e){return E.node.getProperty(e,"autoExpandRelations")},E.node.getSchema=function(e){return E.node.getProperty(e,"schema")},E.node.getReturnAttributes=function(e){var t=E.node.getProvider(e),n={};if(t.hasOwnProperty("returnAttributes"))for(var r=0;r<t.returnAttributes.length;r++)t.returnAttributes[r]===o.NEO4J_INTERNAL_ID?n[o.NEO4J_INTERNAL_ID.queryInternalName]=!0:n[t.returnAttributes[r]]=!0;for(;t.hasOwnProperty("parent");)if((t=E.node.getProvider(t.parent)).hasOwnProperty("returnAttributes"))for(var i=0;i<t.returnAttributes.length;i++)t.returnAttributes[i]===o.NEO4J_INTERNAL_ID?n[o.NEO4J_INTERNAL_ID.queryInternalName]=!0:n[t.returnAttributes[i]]=!0;if(E.node.DEFAULT_PROVIDER.hasOwnProperty("returnAttributes"))for(var a=0;a<E.node.DEFAULT_PROVIDER.returnAttributes.length;a++)E.node.DEFAULT_PROVIDER.returnAttributes[a]!==o.NEO4J_INTERNAL_ID&&(n[E.node.DEFAULT_PROVIDER.returnAttributes[a]]=!0);var s=E.node.getConstraintAttribute(e);s===o.NEO4J_INTERNAL_ID?n[o.NEO4J_INTERNAL_ID.queryInternalName]=!0:n[s]=!0;var u=[];for(var l in n)n.hasOwnProperty(l)&&u.push(l===o.NEO4J_INTERNAL_ID.queryInternalName?o.NEO4J_INTERNAL_ID:l);return u.length<=0&&u.push(o.NEO4J_INTERNAL_ID),u},E.node.getConstraintAttribute=function(e){return E.node.getProperty(e,"constraintAttribute")},E.node.getDisplayAttribute=function(e){var t=E.node.getProperty(e,"displayAttribute");if(void 0===t){var n=E.node.getReturnAttributes(e);t=n.length>0?n[0]:E.node.getConstraintAttribute(e)}return t},E.node.getPredefinedConstraints=function(e){return E.node.getProperty(e,"getPredefinedConstraints")()},E.node.filterResultQuery=function(e,t){return E.node.getProperty(e,"filterResultQuery")(t)},E.node.getValueOrderByAttribute=function(e){return E.node.getProperty(e,"valueOrderByAttribute")},E.node.isValueOrderAscending=function(e){return E.node.getProperty(e,"isValueOrderAscending")},E.node.getResultOrderByAttribute=function(e){return E.node.getProperty(e,"resultOrderByAttribute")},E.node.isResultOrderAscending=function(e){return E.node.getProperty(e,"isResultOrderAscending")},E.node.getTextValue=function(e,t){return E.node.getProperty(e.label,"getTextValue")(e,t)},E.node.getSemanticValue=function(e){return E.node.getProperty(e.label,"getSemanticValue")(e)},E.node.getSVGPaths=function(e){return E.node.getProperty(e.label,"getSVGPaths")(e)},E.node.isTextDisplayed=function(e){return E.node.getProperty(e.label,"getIsTextDisplayed")(e)},E.node.getSize=function(e){return E.node.getProperty(e.label,"getSize")(e)},E.node.getColor=function(e,t){return E.node.getProperty(e.label,"getColor")(e,t)},E.node.getCSSClass=function(e,t){return E.node.getProperty(e.label,"getCSSClass")(e,t)},E.node.getIsGroup=function(e){return E.node.getProperty(e.label,"getIsGroup")(e)},E.node.getNodeDisplayType=function(e){return E.node.getProperty(e.label,"getDisplayType")(e)},E.node.getImagePath=function(e){return E.node.getProperty(e.label,"getImagePath")(e)},E.node.getImageWidth=function(e){return E.node.getProperty(e.label,"getImageWidth")(e)},E.node.getImageHeight=function(e){return E.node.getProperty(e.label,"getImageHeight")(e)},E.node.filterNodeValueQuery=function(e,t){return E.node.getProperty(e.label,"filterNodeValueQuery")(e,t)},E.node.filterNodeCountQuery=function(e,t){return E.node.getProperty(e.label,"filterNodeCountQuery")(e,t)},E.node.filterNodeRelationQuery=function(e,t){return E.node.getProperty(e.label,"filterNodeRelationQuery")(e,t)},E.node.getGenerateNodeValueConstraints=function(e){return E.node.getProperty(e.label,"generateNodeValueConstraints")},E.node.getGenerateNegativeNodeValueConstraints=function(e){return E.node.getProperty(e.label,"generateNegativeNodeValueConstraints")},E.node.getDisplayResults=function(e){return E.node.getProperty(e,"displayResults")},E.node.DEFAULT_PROVIDER={isSearchable:!0,autoExpandRelations:!1,isAutoLoadValue:!1,returnAttributes:[o.NEO4J_INTERNAL_ID],valueOrderByAttribute:"count",isValueOrderAscending:!1,resultOrderByAttribute:null,isResultOrderAscending:!0,constraintAttribute:o.NEO4J_INTERNAL_ID,displayAttribute:void 0,getPredefinedConstraints:function(){return[]},filterResultQuery:function(e){return e},getDisplayType:function(e){return E.node.DisplayTypes.TEXT},getSize:function(e){return 50},getColor:function(e){if(e.type===A.node.NodeTypes.VALUE)return E.node.getColor(e.parent);var t="";return e.hasOwnProperty("parent")&&(t=e.parent.label),E.colorScale(t+(e.parentRel||"")+e.label)},getCSSClass:function(e,t){var n=e.label.replace(/[^0-9a-z\-_]/gi,""),r="ppt-node__"+t;return e.type===A.node.NodeTypes.ROOT&&(r+="--root"),e.type===A.node.NodeTypes.CHOOSE&&(r+="--choose"),e.type===A.node.NodeTypes.GROUP&&(r+="--group"),e.type===A.node.NodeTypes.VALUE&&(r+="--value"),void 0!==e.value&&e.value.length>0&&(r+="--value-selected"),0===e.count&&(r+="--disabled"),r+" "+n},getIsGroup:function(e){return!1},getIsTextDisplayed:function(e){return!0},getTextValue:function(e,t){var n="",r=E.node.getDisplayAttribute(e.label);if(e.type===A.node.NodeTypes.VALUE)n=r===o.NEO4J_INTERNAL_ID?""+e.internalID:""+e.attributes[r];else if(void 0!==e.value&&e.value.length>0)if(r===o.NEO4J_INTERNAL_ID){var i="";e.value.forEach(function(e){n+=i+e.internalID,i=" or "})}else i="",e.value.forEach(function(e){n+=i+e.attributes[r],i=" or "});else n=e.label;return n},getSemanticValue:function(e){var t="",n=E.node.getDisplayAttribute(e.label);if(e.type===A.node.NodeTypes.VALUE)t=n===o.NEO4J_INTERNAL_ID?""+e.internalID:""+e.attributes[n];else if(void 0!==e.value&&e.value.length>0)if(n===o.NEO4J_INTERNAL_ID){var r="";e.value.forEach(function(e){t+=r+e.internalID,r=" or "})}else r="",e.value.forEach(function(e){t+=r+e.attributes[n],r=" or "});else t=e.label;return t},getImagePath:function(e){return"image/node/"+e.label.toLowerCase()+"/"+e.label.toLowerCase()+".svg"},getSVGPaths:function(e){var t=E.node.getSize(e);return[{d:"M 0, 0 m -"+t+", 0 a "+t+","+t+" 0 1,0 "+2*t+",0 a "+t+","+t+" 0 1,0 -"+2*t+",0",fill:"transparent",stroke:E.node.getColor(e),"stroke-width":"2px"}]},getImageWidth:function(e){return 2*E.node.getSize(e)},getImageHeight:function(e){return 2*E.node.getSize(e)},filterNodeValueQuery:function(e,t){return t},filterNodeCountQuery:function(e,t){return t},filterNodeRelationQuery:function(e,t){return t},generateNodeValueConstraints:void 0,generateNegativeNodeValueConstraints:void 0,displayResults:function(e){var t=e.data()[0];E.node.getReturnAttributes(t.label).forEach(function(n){var r=e.append("div").attr("class","ppt-result-attribute-div"),i=n;o.NEO4J_INTERNAL_ID===n&&(i=o.NEO4J_INTERNAL_ID.queryInternalName),r.append("span").text(function(){return n===o.NEO4J_INTERNAL_ID?"internal ID:":n+":"}),void 0!==t.attributes[i]&&r.append("span").text(function(e){return e.attributes[i]})})}};var M={containerId:"popoto-query",QUERY_STARTER:"I'm looking for",CHOOSE_LABEL:"choose",createQueryArea:function(){var e="#"+M.containerId;M.queryConstraintSpanElements=t.select(e).append("p").attr("class","ppt-query-constraint-elements").selectAll(".queryConstraintSpan"),M.querySpanElements=t.select(e).append("p").attr("class","ppt-query-elements").selectAll(".querySpan")},updateQuery:function(){M.queryConstraintSpanElements=M.queryConstraintSpanElements.data([]),M.querySpanElements=M.querySpanElements.data([]),M.queryConstraintSpanElements.exit().remove(),M.querySpanElements.exit().remove(),M.queryConstraintSpanElements=M.queryConstraintSpanElements.data(M.generateConstraintData(r.links,r.nodes)),M.querySpanElements=M.querySpanElements.data(M.generateData(r.links,r.nodes)),M.queryConstraintSpanElements=M.queryConstraintSpanElements.enter().append("span").on("contextmenu",M.rightClickSpan).on("click",M.clickSpan).on("mouseover",M.mouseOverSpan).on("mouseout",M.mouseOutSpan).merge(M.queryConstraintSpanElements),M.querySpanElements=M.querySpanElements.enter().append("span").on("contextmenu",M.rightClickSpan).on("click",M.clickSpan).on("mouseover",M.mouseOverSpan).on("mouseout",M.mouseOutSpan).merge(M.querySpanElements),M.queryConstraintSpanElements.attr("id",function(e){return e.id}).attr("class",function(e){return e.isLink?"ppt-span-link":e.type===A.node.NodeTypes.ROOT?"ppt-span-root":e.type===A.node.NodeTypes.CHOOSE?void 0!==e.ref.value&&e.ref.value.length>0?"ppt-span-value":"ppt-span-choose":e.type===A.node.NodeTypes.VALUE?"ppt-span-value":e.type===A.node.NodeTypes.GROUP?"ppt-span-group":"ppt-span"}).text(function(e){return e.term+" "}),M.querySpanElements.attr("id",function(e){return e.id}).attr("class",function(e){return e.isLink?"ppt-span-link":e.type===A.node.NodeTypes.ROOT?"ppt-span-root":e.type===A.node.NodeTypes.CHOOSE?void 0!==e.ref.value&&e.ref.value.length>0?"ppt-span-value":"ppt-span-choose":e.type===A.node.NodeTypes.VALUE?"ppt-span-value":e.type===A.node.NodeTypes.GROUP?"ppt-span-group":"ppt-span"}).text(function(e){return e.term+" "})},generateConstraintData:function(e,t){var n=[],r=0;return n.push({id:r++,term:M.QUERY_STARTER}),t.length>0&&n.push({id:r++,type:t[0].type,term:E.node.getSemanticValue(t[0]),ref:t[0]}),e.forEach(function(e){var t=e.source,i=e.target;e.type===A.link.LinkTypes.RELATION&&i.type!==A.node.NodeTypes.GROUP&&void 0!==i.value&&i.value.length>0&&(t.type===A.node.NodeTypes.GROUP&&n.push({id:r++,type:t.type,term:E.node.getSemanticValue(t),ref:t}),n.push({id:r++,isLink:!0,term:E.link.getSemanticValue(e),ref:e}),i.type!==A.node.NodeTypes.GROUP&&n.push(void 0!==i.value&&i.value.length>0?{id:r++,type:i.type,term:E.node.getSemanticValue(i),ref:i}:{id:r++,type:i.type,term:"<"+M.CHOOSE_LABEL+" "+E.node.getSemanticValue(i)+">",ref:i}))}),n},generateData:function(e,t){var n=[],r=[],i=0;return e.forEach(function(e){var t=e.source,o=e.target;o.type===A.node.NodeTypes.GROUP&&r.push({id:i++,type:o.type,term:E.node.getSemanticValue(o),ref:o}),e.type!==A.link.LinkTypes.RELATION||o.type===A.node.NodeTypes.GROUP||void 0!==o.value&&0!==o.value.length||(t.type===A.node.NodeTypes.GROUP&&n.push({id:i++,type:t.type,term:E.node.getSemanticValue(t),ref:t}),n.push({id:i++,isLink:!0,term:E.link.getSemanticValue(e),ref:e}),o.type!==A.node.NodeTypes.GROUP&&n.push({id:i++,type:o.type,term:"<"+M.CHOOSE_LABEL+" "+E.node.getSemanticValue(o)+">",ref:o}))}),n.concat(r)},mouseOverSpan:function(){t.select(this).classed("hover",function(e){return e.ref});var e=t.select(this).data()[0];if(e.ref){var n=A.svg.selectAll("#"+A.link.gID+" > g").filter(function(t){return t===e.ref});n.select("path").classed("ppt-link-hover",!0),n.select("text").classed("ppt-link-hover",!0),A.svg.selectAll("#"+A.node.gID+" > g").filter(function(t){return t===e.ref}).select(".ppt-g-node-background").selectAll("circle").transition().style("fill-opacity",.5),C.isActive&&C.querySpanElements.filter(function(t){return t.node===e.ref||t.link===e.ref}).classed("hover",!0)}},rightClickSpan:function(){var e=t.select(this).data()[0];if(!e.isLink&&e.ref){var n=A.svg.selectAll("#"+A.node.gID+" > g").filter(function(t){return t===e.ref});n.on("contextmenu").call(n.node(),e.ref)}},clickSpan:function(){var e=t.select(this).data()[0];if(!e.isLink&&e.ref){var n=A.svg.selectAll("#"+A.node.gID+" > g").filter(function(t){return t===e.ref});n.on("click").call(n.node(),e.ref)}},mouseOutSpan:function(){t.select(this).classed("hover",!1);var e=t.select(this).data()[0];if(e.ref){var n=A.svg.selectAll("#"+A.link.gID+" > g").filter(function(t){return t===e.ref});n.select("path").classed("ppt-link-hover",!1),n.select("text").classed("ppt-link-hover",!1),A.svg.selectAll("#"+A.node.gID+" > g").filter(function(t){return t===e.ref}).select(".ppt-g-node-background").selectAll("circle").transition().style("fill-opacity",0),C.isActive&&C.querySpanElements.filter(function(t){return t.node===e.ref||t.link===e.ref}).classed("hover",!1)}}},C={containerId:"popoto-cypher",MATCH:"MATCH",RETURN:"RETURN",WHERE:"WHERE"};C.QueryElementTypes=Object.freeze({KEYWORD:0,NODE:1,SEPARATOR:2,SOURCE:3,LINK:4,TARGET:5,RETURN:6,WHERE:7}),C.createQueryArea=function(){C.querySpanElements=t.select("#"+C.containerId).append("p").attr("class","ppt-query-constraint-elements").selectAll(".queryConstraintSpan")},C.updateQuery=function(){C.querySpanElements=C.querySpanElements.data([]),C.querySpanElements.exit().remove(),C.querySpanElements=C.querySpanElements.data(C.generateData(r.links,r.nodes)),C.querySpanElements=C.querySpanElements.enter().append("span").attr("id",function(e){return"cypher-"+e.id}).on("mouseover",C.mouseOverSpan).on("mouseout",C.mouseOutSpan).on("contextmenu",C.rightClickSpan).on("click",C.clickSpan).merge(C.querySpanElements),C.querySpanElements.filter(function(e){return e.type===C.QueryElementTypes.KEYWORD}).attr("class","ppt-span").text(function(e){return" "+e.value+" "}),C.querySpanElements.filter(function(e){return e.type===C.QueryElementTypes.SEPARATOR}).attr("class","ppt-span").text(function(e){return e.value+" "}),C.querySpanElements.filter(function(e){return e.type===C.QueryElementTypes.NODE}).attr("class",function(e){return void 0!==e.node.value&&e.node.value.length>0?"ppt-span-root-value":"ppt-span-root"}).text(function(e){return"("+e.node.internalLabel+":`"+e.node.label+"`)"}),C.querySpanElements.filter(function(e){return e.type===C.QueryElementTypes.SOURCE}).attr("class",function(e){return e.node===r.getRootNode()?void 0!==e.node.value&&e.node.value.length>0?"ppt-span-root-value":"ppt-span-root":void 0!==e.node.value&&e.node.value.length>0?"ppt-span-value":"ppt-span-choose"}).text(function(e){var t=e.node;return"("+t.internalLabel+":`"+t.label+"`)"}),C.querySpanElements.filter(function(e){return e.type===C.QueryElementTypes.LINK}).attr("class","ppt-span-link").text(function(e){return!0===e.link.target.isParentRelReverse?"<-[:`"+e.link.label+"`]-":"-[:`"+e.link.label+"`]-"+(o.USE_RELATION_DIRECTION?">":"")}),C.querySpanElements.filter(function(e){return e.type===C.QueryElementTypes.TARGET}).attr("class",function(e){return void 0!==e.node.value&&e.node.value.length>0?"ppt-span-value":"ppt-span-choose"}).text(function(e){return"("+e.node.internalLabel+":`"+e.node.label+"`)"}),C.querySpanElements.filter(function(e){return e.type===C.QueryElementTypes.WHERE}).attr("class",function(e){return e.node===r.getRootNode()?"ppt-span-root-value":"ppt-span-value"}).text(function(e){var t=e.node;if(!0===t.isNegative){if(!t.hasOwnProperty("value")||t.value.length<=0)return"(NOT ("+e.link.source.internalLabel+":`"+e.link.source.label+"`)-[:`"+e.link.label+"`]->(:`"+e.link.target.label+"`))";var n=[],r=E.node.getConstraintAttribute(t.label);return t.value.forEach(function(t){n.push("(NOT ("+e.link.source.internalLabel+":`"+e.link.source.label+"`)-[:`"+e.link.label+"`]->(:`"+e.link.target.label+"`{"+r+":"+t.attributes[r]+"}))")}),n.join(" AND ")}var i=E.node.getConstraintAttribute(t.label),a="",s="";return a+=i===o.NEO4J_INTERNAL_ID?t.internalLabel+".id":t.internalLabel+"."+i,t.hasOwnProperty("value")&&t.value.length>1?a+=" IN [":a+=" = ",t.value.forEach(function(e){if(a+=s,s=", ",i===o.NEO4J_INTERNAL_ID)a+=e.internalID;else{var t=e.attributes[i];a+="boolean"==typeof t||"number"==typeof t?t:'"'+t+'"'}}),t.value.length>1&&(a+="]"),"("+a+")"}),C.querySpanElements.filter(function(e){return e.type===C.QueryElementTypes.RETURN}).attr("class",function(e){return void 0!==e.node.value&&e.node.value.length>0?"ppt-span-root-value":"ppt-span-root"}).text(function(e){return e.node.internalLabel})},C.generateData=function(e){var t=[],n=0,i=r.getRootNode(),a=o.getRelevantLinks(i,i,e),s=a.filter(function(e){return!0===e.target.isNegative&&(!e.target.hasOwnProperty("value")||e.target.value.length<=0)});t.push({id:n++,type:C.QueryElementTypes.KEYWORD,value:C.MATCH}),i&&t.push({id:n++,type:C.QueryElementTypes.NODE,node:i}),a.length>0&&a.length>s.length&&t.push({id:n++,type:C.QueryElementTypes.SEPARATOR,value:","});for(var u=0;u<a.length;u++)!0===(c=a[u]).target.isNegative&&(!c.target.hasOwnProperty("value")||c.target.value.length<=0)||(t.push({id:n++,type:C.QueryElementTypes.SOURCE,node:c.source}),t.push({id:n++,type:C.QueryElementTypes.LINK,link:c}),t.push({id:n++,type:C.QueryElementTypes.TARGET,node:c.target}),u<a.length-1&&t.push({id:n++,type:C.QueryElementTypes.SEPARATOR,value:","}));(i&&void 0!==i.value&&i.value.length>0||a.length>0)&&t.push({id:n++,type:C.QueryElementTypes.KEYWORD,value:C.WHERE}),i&&void 0!==i.value&&i.value.length>0&&(t.push({id:n++,type:C.QueryElementTypes.WHERE,node:i}),a.length>0&&t.push({id:n++,type:C.QueryElementTypes.SEPARATOR,value:" AND "}));var l=!1;for(u=0;u<a.length;u++){var c;!0===(c=a[u]).target.isNegative?(l&&t.push({id:n++,type:C.QueryElementTypes.SEPARATOR,value:" AND "}),t.push({id:n++,type:C.QueryElementTypes.WHERE,node:c.target,link:c}),l=!0):void 0!==c.target.value&&c.target.value.length>0&&(l&&t.push({id:n++,type:C.QueryElementTypes.SEPARATOR,value:" AND "}),t.push({id:n++,type:C.QueryElementTypes.WHERE,node:c.target}),l=!0)}return t.push({id:n++,type:C.QueryElementTypes.KEYWORD,value:C.RETURN}),i&&t.push({id:n++,type:C.QueryElementTypes.RETURN,node:i}),t},C.mouseOverSpan=function(){var e=t.select(this).data()[0];if(e.node)C.querySpanElements.filter(function(t){return t.node===e.node}).classed("hover",!0),A.svg.selectAll("#"+A.node.gID+" > g").filter(function(t){return t===e.node}).select(".ppt-g-node-background").selectAll("circle").transition().style("fill-opacity",.5),M.isActive&&(M.queryConstraintSpanElements.filter(function(t){return t.ref===e.node}).classed("hover",!0),M.querySpanElements.filter(function(t){return t.ref===e.node}).classed("hover",!0));else if(e.link){t.select(this).classed("hover",!0);var n=A.svg.selectAll("#"+A.link.gID+" > g").filter(function(t){return t===e.link});n.select("path").classed("ppt-link-hover",!0),n.select("text").classed("ppt-link-hover",!0)}},C.mouseOutSpan=function(){var e=t.select(this).data()[0];if(e.node)C.querySpanElements.filter(function(t){return t.node===e.node}).classed("hover",!1),A.svg.selectAll("#"+A.node.gID+" > g").filter(function(t){return t===e.node}).select(".ppt-g-node-background").selectAll("circle").transition().style("fill-opacity",0),M.isActive&&(M.queryConstraintSpanElements.filter(function(t){return t.ref===e.node}).classed("hover",!1),M.querySpanElements.filter(function(t){return t.ref===e.node}).classed("hover",!1));else if(e.link){t.select(this).classed("hover",!1);var n=A.svg.selectAll("#"+A.link.gID+" > g").filter(function(t){return t===e.link});n.select("path").classed("ppt-link-hover",!1),n.select("text").classed("ppt-link-hover",!1)}},C.clickSpan=function(){var e=t.select(this).data()[0];if(e.node){var n=A.svg.selectAll("#"+A.node.gID+" > g").filter(function(t){return t===e.node});n.on("click").call(n.node(),e.node)}},C.rightClickSpan=function(){var e=t.select(this).data()[0];if(e.node){var n=A.svg.selectAll("#"+A.node.gID+" > g").filter(function(t){return t===e.node});n.on("contextmenu").call(n.node(),e.node)}},e.version="2.0.17",e.cypherviewer=C,e.dataModel=r,e.graph=A,e.logger=i,e.provider=E,e.query=o,e.queryviewer=M,e.rest=a,e.result=s,e.taxonomy=c,e.tools=f,e.start=function(e){if(i.info("Popoto 2.0.17 start on "+e),A.mainLabel=e,void 0===a.CYPHER_URL)i.error("popoto.rest.CYPHER_URL is not set but is required.");else{if(r=t.select("#"+A.containerId),o=t.select("#"+c.containerId),l=t.select("#"+M.containerId),f=t.select("#"+C.containerId),d=t.select("#"+s.containerId),r.empty()?(i.debug("The page doesn't contain a container with ID = \""+A.containerId+'" no graph area will be generated. This ID is defined in graph.containerId property.'),A.isActive=!1):A.isActive=!0,o.empty()?(i.debug("The page doesn't contain a container with ID = \""+c.containerId+'" no taxonomy filter will be generated. This ID is defined in taxonomy.containerId property.'),c.isActive=!1):c.isActive=!0,l.empty()?(i.debug("The page doesn't contain a container with ID = \""+M.containerId+'" no query viewer will be generated. This ID is defined in queryviewer.containerId property.'),M.isActive=!1):M.isActive=!0,f.empty()?(i.debug("The page doesn't contain a container with ID = \""+C.containerId+'" no cypher query viewer will be generated. This ID is defined in cypherviewer.containerId property.'),C.isActive=!1):C.isActive=!0,d.empty()?(i.debug("The page doesn't contain a container with ID = \""+s.containerId+'" no result area will be generated. This ID is defined in result.containerId property.'),s.isActive=!1):s.isActive=!0,c.isActive&&c.createTaxonomyPanel(),A.isActive)if(A.createGraphArea(),A.createForceLayout(),"string"==typeof e||e instanceof String){var n=E.node.getSchema(e);void 0!==n?A.addSchema(n):A.addRootNode(e)}else A.loadSchema(e);M.isActive&&M.createQueryArea(),C.isActive&&C.createQueryArea(),!0===A.USE_VORONOI_LAYOUT&&A.voronoi.extent([[-popoto.graph.getSVGWidth(),-popoto.graph.getSVGWidth()],[2*popoto.graph.getSVGWidth(),2*popoto.graph.getSVGHeight()]]),u()}var r,o,l,f,d},e.update=u,e.updateGraph=l,e.appendFittedText=y,Object.defineProperty(e,"__esModule",{value:!0})});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();"undefined"==typeof jQuery&&("function"==typeof require?jQuery=$=require("jquery"):jQuery=$),function(e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):"object"==typeof module&&"object"==typeof module.exports?exports=e(require("jquery")):e(jQuery)}(function(e){function t(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}e.easing.jswing=e.easing.swing;var n=Math.pow,r=Math.sqrt,i=Math.sin,o=Math.cos,a=Math.PI,s=1.70158,u=1.525*s,l=2*a/3,c=2*a/4.5;e.extend(e.easing,{def:"easeOutQuad",swing:function(t){return e.easing[e.easing.def](t)},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-n(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-n(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-n(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-n(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-n(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-n(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-n(-2*e+2,5)/2},easeInSine:function(e){return 1-o(e*a/2)},easeOutSine:function(e){return i(e*a/2)},easeInOutSine:function(e){return-(o(a*e)-1)/2},easeInExpo:function(e){return 0===e?0:n(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-n(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?n(2,20*e-10)/2:(2-n(2,-20*e+10))/2},easeInCirc:function(e){return 1-r(1-n(e,2))},easeOutCirc:function(e){return r(1-n(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-r(1-n(2*e,2)))/2:(r(1-n(-2*e+2,2))+1)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-n(2,10*e-10)*i((10*e-10.75)*l)},easeOutElastic:function(e){return 0===e?0:1===e?1:n(2,-10*e)*i((10*e-.75)*l)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-n(2,20*e-10)*i((20*e-11.125)*c)/2:n(2,-20*e+10)*i((20*e-11.125)*c)/2+1},easeInBack:function(e){return 2.70158*e*e*e-s*e*e},easeOutBack:function(e){return 1+2.70158*n(e-1,3)+s*n(e-1,2)},easeInOutBack:function(e){return e<.5?n(2*e,2)*(7.189819*e-u)/2:(n(2*e-2,2)*((u+1)*(2*e-2)+u)+2)/2},easeInBounce:function(e){return 1-t(1-e)},easeOutBounce:t,easeInOutBounce:function(e){return e<.5?(1-t(1-2*e))/2:(1+t(2*e-1))/2}})}),jQuery.extend(jQuery.easing,{easeInOutMaterial:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:r/4*((t-=2)*t*t+2)+n}}),jQuery.Velocity?console.log("Velocity is already loaded. You may be needlessly importing Velocity again; note that Materialize includes Velocity."):(function(e){function t(e){var t=e.length,r=n.type(e);return"function"!==r&&!n.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}if(!e.jQuery){var n=function(e,t){return new n.fn.init(e,t)};n.isWindow=function(e){return null!=e&&e==e.window},n.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?i[a.call(e)]||"object":typeof e},n.isArray=Array.isArray||function(e){return"array"===n.type(e)},n.isPlainObject=function(e){var t;if(!e||"object"!==n.type(e)||e.nodeType||n.isWindow(e))return!1;try{if(e.constructor&&!o.call(e,"constructor")&&!o.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(t in e);return void 0===t||o.call(e,t)},n.each=function(e,n,r){var i=0,o=e.length,a=t(e);if(r){if(a)for(;o>i&&!1!==n.apply(e[i],r);i++);else for(i in e)if(!1===n.apply(e[i],r))break}else if(a)for(;o>i&&!1!==n.call(e[i],i,e[i]);i++);else for(i in e)if(!1===n.call(e[i],i,e[i]))break;return e},n.data=function(e,t,i){if(void 0===i){var o=(a=e[n.expando])&&r[a];if(void 0===t)return o;if(o&&t in o)return o[t]}else if(void 0!==t){var a=e[n.expando]||(e[n.expando]=++n.uuid);return r[a]=r[a]||{},r[a][t]=i,i}},n.removeData=function(e,t){var i=e[n.expando],o=i&&r[i];o&&n.each(t,function(e,t){delete o[t]})},n.extend=function(){var e,t,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[u]||{},u++),"object"!=typeof s&&"function"!==n.type(s)&&(s={}),u===l&&(s=this,u--);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],s!==(r=o[i])&&(c&&r&&(n.isPlainObject(r)||(t=n.isArray(r)))?(t?(t=!1,a=e&&n.isArray(e)?e:[]):a=e&&n.isPlainObject(e)?e:{},s[i]=n.extend(c,a,r)):void 0!==r&&(s[i]=r));return s},n.queue=function(e,r,i){if(e){var o=n.data(e,r=(r||"fx")+"queue");return i?(!o||n.isArray(i)?o=n.data(e,r,function(e,n){var r=[];return null!=e&&(t(Object(e))?function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;)e[i++]=t[r++];if(n!=n)for(;void 0!==t[r];)e[i++]=t[r++];e.length=i}(r,"string"==typeof e?[e]:e):[].push.call(r,e)),r}(i)):o.push(i),o):o||[]}},n.dequeue=function(e,t){n.each(e.nodeType?[e]:e,function(e,r){var i=n.queue(r,t=t||"fx"),o=i.shift();"inprogress"===o&&(o=i.shift()),o&&("fx"===t&&i.unshift("inprogress"),o.call(r,function(){n.dequeue(r,t)}))})},n.fn=n.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var t=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:t.top+(e.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:t.left+(e.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&"html"===!e.nodeType.toLowerCase&&"static"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),r=this.offset(),i=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:n(e).offset();return r.top-=parseFloat(t.style.marginTop)||0,r.left-=parseFloat(t.style.marginLeft)||0,e.style&&(i.top+=parseFloat(e.style.borderTopWidth)||0,i.left+=parseFloat(e.style.borderLeftWidth)||0),{top:r.top-i.top,left:r.left-i.left}}};var r={};n.expando="velocity"+(new Date).getTime(),n.uuid=0;for(var i={},o=i.hasOwnProperty,a=i.toString,s="Boolean Number String Function Array Date RegExp Object Error".split(" "),u=0;u<s.length;u++)i["[object "+s[u]+"]"]=s[u].toLowerCase();n.fn.init.prototype=n.fn,e.Velocity={Utilities:n}}}(window),function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}(function(){return function(e,t,n,r){function i(e){return h.isWrapped(e)?e=[].slice.call(e):h.isNode(e)&&(e=[e]),e}function o(e){var t=c.data(e,"velocity");return null===t?r:t}function a(e,n,r,i){function o(e,t){return 1-3*t+3*e}function a(e,t){return 3*t-6*e}function s(e){return 3*e}function u(e,t,n){return((o(t,n)*e+a(t,n))*e+s(t))*e}function l(e,t,n){return 3*o(t,n)*e*e+2*a(t,n)*e+s(t)}var c="Float32Array"in t;if(4!==arguments.length)return!1;for(var f=0;4>f;++f)if("number"!=typeof arguments[f]||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var d=c?new Float32Array(11):new Array(11),h=!1,p=function(t){return h||(h=!0,(e!=n||r!=i)&&function(){for(var t=0;11>t;++t)d[t]=u(.1*t,e,r)}()),e===n&&r===i?t:0===t?0:1===t?1:u(function(t){for(var n=0,i=1;10!=i&&d[i]<=t;++i)n+=.1;var o=n+(t-d[--i])/(d[i+1]-d[i])*.1,a=l(o,e,r);return a>=.001?function(t,n){for(var i=0;4>i;++i){var o=l(n,e,r);if(0===o)return n;n-=(u(n,e,r)-t)/o}return n}(t,o):0==a?o:function(t,n,i){var o,a,s=0;do{(o=u(a=n+(i-n)/2,e,r)-t)>0?i=a:n=a}while(Math.abs(o)>1e-7&&++s<10);return a}(t,n,n+.1)}(t),n,i)};p.getControlPoints=function(){return[{x:e,y:n},{x:r,y:i}]};var g="generateBezier("+[e,n,r,i]+")";return p.toString=function(){return g},p}function s(e,t){var n=e;return h.isString(e)?m.Easings[e]||(n=!1):n=h.isArray(e)&&1===e.length?(function(e){return function(t){return Math.round(t*e)*(1/e)}}).apply(null,e):h.isArray(e)&&2===e.length?y.apply(null,e.concat([t])):!(!h.isArray(e)||4!==e.length)&&a.apply(null,e),!1===n&&(n=m.Easings[m.defaults.easing]?m.defaults.easing:v),n}function u(e){if(e){var t=(new Date).getTime(),n=m.State.calls.length;n>1e4&&(m.State.calls=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r}(m.State.calls));for(var i=0;n>i;i++)if(m.State.calls[i]){var a=m.State.calls[i],s=a[0],f=a[2],d=a[3],p=!!d,g=null;d||(d=m.State.calls[i][3]=t-16);for(var v=Math.min((t-d)/f.duration,1),y=0,x=s.length;x>y;y++){var A=s[y],E=A.element;if(o(E)){var M=!1;for(var C in f.display!==r&&null!==f.display&&"none"!==f.display&&("flex"===f.display&&c.each(["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"],function(e,t){b.setPropertyValue(E,"display",t)}),b.setPropertyValue(E,"display",f.display)),f.visibility!==r&&"hidden"!==f.visibility&&b.setPropertyValue(E,"visibility",f.visibility),A)if("element"!==C){var k,T=A[C],_=h.isString(T.easing)?m.Easings[T.easing]:T.easing;if(1===v)k=T.endValue;else{var S=T.endValue-T.startValue;if(k=T.startValue+S*_(v,f,S),!p&&k===T.currentValue)continue}if(T.currentValue=k,"tween"===C)g=k;else{if(b.Hooks.registered[C]){var I=b.Hooks.getRoot(C),R=o(E).rootPropertyValueCache[I];R&&(T.rootPropertyValue=R)}var L=b.setPropertyValue(E,C,T.currentValue+(0===parseFloat(k)?"":T.unitType),T.rootPropertyValue,T.scrollData);b.Hooks.registered[C]&&(o(E).rootPropertyValueCache[I]=b.Normalizations.registered[I]?b.Normalizations.registered[I]("extract",null,L[1]):L[1]),"transform"===L[0]&&(M=!0)}}f.mobileHA&&o(E).transformCache.translate3d===r&&(o(E).transformCache.translate3d="(0px, 0px, 0px)",M=!0),M&&b.flushTransformCache(E)}}f.display!==r&&"none"!==f.display&&(m.State.calls[i][2].display=!1),f.visibility!==r&&"hidden"!==f.visibility&&(m.State.calls[i][2].visibility=!1),f.progress&&f.progress.call(a[1],a[1],v,Math.max(0,d+f.duration-t),d,g),1===v&&l(i)}}m.State.isTicking&&w(u)}function l(e,t){if(!m.State.calls[e])return!1;for(var n=m.State.calls[e][0],i=m.State.calls[e][1],a=m.State.calls[e][2],s=m.State.calls[e][4],u=!1,l=0,f=n.length;f>l;l++){var d=n[l].element;if(t||a.loop||("none"===a.display&&b.setPropertyValue(d,"display",a.display),"hidden"===a.visibility&&b.setPropertyValue(d,"visibility",a.visibility)),!0!==a.loop&&(c.queue(d)[1]===r||!/\.velocityQueueEntryFlag/i.test(c.queue(d)[1]))&&o(d)){o(d).isAnimating=!1,o(d).rootPropertyValueCache={};var h=!1;c.each(b.Lists.transforms3D,function(e,t){var n=/^scale/.test(t)?1:0,i=o(d).transformCache[t];o(d).transformCache[t]!==r&&new RegExp("^\\("+n+"[^.]").test(i)&&(h=!0,delete o(d).transformCache[t])}),a.mobileHA&&(h=!0,delete o(d).transformCache.translate3d),h&&b.flushTransformCache(d),b.Values.removeClass(d,"velocity-animating")}if(!t&&a.complete&&!a.loop&&l===f-1)try{a.complete.call(i,i)}catch(e){setTimeout(function(){throw e},1)}s&&!0!==a.loop&&s(i),o(d)&&!0===a.loop&&!t&&(c.each(o(d).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360),/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)}),m(d,"reverse",{loop:!0,delay:a.delay})),!1!==a.queue&&c.dequeue(d,a.queue)}m.State.calls[e]=!1;for(var p=0,g=m.State.calls.length;g>p;p++)if(!1!==m.State.calls[p]){u=!0;break}!1===u&&(m.State.isTicking=!1,delete m.State.calls,m.State.calls=[])}var c,f=function(){if(n.documentMode)return n.documentMode;for(var e=7;e>4;e--){var t=n.createElement("div");if(t.innerHTML="\x3c!--[if IE "+e+"]><span></span><![endif]--\x3e",t.getElementsByTagName("span").length)return t=null,e}return r}(),d=function(){var e=0;return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){var n,r=(new Date).getTime();return n=Math.max(0,16-(r-e)),e=r+n,setTimeout(function(){t(r+n)},n)}}(),h={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==r&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},isWrapped:function(e){return e&&(e.jquery||t.Zepto&&t.Zepto.zepto.isZ(e))},isSVG:function(e){return t.SVGElement&&e instanceof t.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},p=!1;if(e.fn&&e.fn.jquery?(c=e,p=!0):c=t.Velocity.Utilities,8>=f&&!p)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(!(7>=f)){var g=400,v="swing",m={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:t.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:c,Redirects:{},Easings:{},Promise:t.Promise,defaults:{queue:"",duration:g,easing:v,begin:r,complete:r,progress:r,display:r,visibility:r,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){c.data(e,"velocity",{isSVG:h.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};t.pageYOffset!==r?(m.State.scrollAnchor=t,m.State.scrollPropertyLeft="pageXOffset",m.State.scrollPropertyTop="pageYOffset"):(m.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,m.State.scrollPropertyLeft="scrollLeft",m.State.scrollPropertyTop="scrollTop");var y=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,n,r){var i={x:t.x+r.dx*n,v:t.v+r.dv*n,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}function n(n,r){var i={dx:n.v,dv:e(n)},o=t(n,.5*r,i),a=t(n,.5*r,o),s=t(n,r,a),u=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+1/6*(i.dx+2*(o.dx+a.dx)+s.dx)*r,n.v=n.v+u*r,n}return function e(t,r,i){var o,a,s,u={x:-1,v:0,tension:null,friction:null},l=[0],c=0;for(t=parseFloat(t)||500,r=parseFloat(r)||20,i=i||null,u.tension=t,u.friction=r,a=(o=null!==i)?(c=e(t,r))/i*.016:.016;s=n(s||u,a),l.push(1+s.x),c+=16,Math.abs(s.x)>1e-4&&Math.abs(s.v)>1e-4;);return o?function(e){return l[e*(l.length-1)|0]}:c}}();m.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},c.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){m.Easings[t[0]]=a.apply(null,t[1])});var b=m.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(i=0;i<b.Lists.colors.length;i++)b.Hooks.templates[b.Lists.colors[i]]=["Red Green Blue Alpha","color"===b.Lists.colors[i]?"0 0 0 1":"255 255 255 1"];var e,t,n;if(f)for(e in b.Hooks.templates){n=(t=b.Hooks.templates[e])[0].split(" ");var r=t[1].match(b.RegEx.valueSplit);"Color"===n[0]&&(n.push(n.shift()),r.push(r.shift()),b.Hooks.templates[e]=[n.join(" "),r.join(" ")])}for(e in b.Hooks.templates)for(var i in n=(t=b.Hooks.templates[e])[0].split(" "))b.Hooks.registered[e+n[i]]=[e,i]},getRoot:function(e){var t=b.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return b.RegEx.valueUnwrap.test(t)&&(t=t.match(b.RegEx.valueUnwrap)[1]),b.Values.isCSSNullValue(t)&&(t=b.Hooks.templates[e][1]),t},extractValue:function(e,t){var n=b.Hooks.registered[e];if(n){var r=n[1];return(t=b.Hooks.cleanRootPropertyValue(n[0],t)).toString().match(b.RegEx.valueSplit)[r]}return t},injectValue:function(e,t,n){var r=b.Hooks.registered[e];if(r){var i,o=r[1];return(i=(n=b.Hooks.cleanRootPropertyValue(r[0],n)).toString().match(b.RegEx.valueSplit))[o]=t,i.join(" ")}return n}},Normalizations:{registered:{clip:function(e,t,n){switch(e){case"name":return"clip";case"extract":var r;return b.RegEx.wrappedValueAlreadyExtracted.test(n)?n:(r=n.toString().match(b.RegEx.valueUnwrap))?r[1].replace(/,(\s+)?/g," "):n;case"inject":return"rect("+n+")"}},blur:function(e,t,n){switch(e){case"name":return m.State.isFirefox?"filter":"-webkit-filter";case"extract":var r=parseFloat(n);if(!r&&0!==r){var i=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);r=i?i[1]:0}return r;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(e,t,n){if(8>=f)switch(e){case"name":return"filter";case"extract":var r=n.toString().match(/alpha\(opacity=(.*)\)/i);return r?r[1]/100:1;case"inject":return t.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(e){case"name":return"opacity";case"extract":case"inject":return n}}},register:function(){for(9>=f||m.State.isGingerbread||(b.Lists.transformsBase=b.Lists.transformsBase.concat(b.Lists.transforms3D)),e=0;e<b.Lists.transformsBase.length;e++)!function(){var t=b.Lists.transformsBase[e];b.Normalizations.registered[t]=function(e,n,i){switch(e){case"name":return"transform";case"extract":return o(n)===r||o(n).transformCache[t]===r?/^scale/i.test(t)?1:0:o(n).transformCache[t].replace(/[()]/g,"");case"inject":var a=!1;switch(t.substr(0,t.length-1)){case"translate":a=!/(%|px|em|rem|vw|vh|\d)$/i.test(i);break;case"scal":case"scale":m.State.isAndroid&&o(n).transformCache[t]===r&&1>i&&(i=1),a=!/(\d)$/i.test(i);break;case"skew":a=!/(deg|\d)$/i.test(i);break;case"rotate":a=!/(deg|\d)$/i.test(i)}return a||(o(n).transformCache[t]="("+i+")"),o(n).transformCache[t]}}}();for(var e=0;e<b.Lists.colors.length;e++)!function(){var t=b.Lists.colors[e];b.Normalizations.registered[t]=function(e,n,i){switch(e){case"name":return t;case"extract":var o;if(b.RegEx.wrappedValueAlreadyExtracted.test(i))o=i;else{var a,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(i)?a=s[i]!==r?s[i]:s.black:b.RegEx.isHex.test(i)?a="rgb("+b.Values.hexToRgb(i).join(" ")+")":/^rgba?\(/i.test(i)||(a=s.black),o=(a||i).toString().match(b.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return 8>=f||3!==o.split(" ").length||(o+=" 1"),o;case"inject":return 8>=f?4===i.split(" ").length&&(i=i.split(/\s+/).slice(0,3).join(" ")):3===i.split(" ").length&&(i+=" 1"),(8>=f?"rgb":"rgba")+"("+i.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(f||m.State.isAndroid&&!m.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(m.State.prefixMatches[e])return[m.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],n=0,r=t.length;r>n;n++){var i;if(i=0===n?e:t[n]+e.replace(/^\w/,function(e){return e.toUpperCase()}),h.isString(m.State.prefixElement.style[i]))return m.State.prefixMatches[e]=i,[i,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t;return e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,r){return t+t+n+n+r+r}),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,n,i,a){function s(e,n){function i(){d&&b.setPropertyValue(e,"display","none")}var u=0;if(8>=f)u=c.css(e,n);else{var l,d=!1;if(/^(width|height)$/.test(n)&&0===b.getPropertyValue(e,"display")&&(d=!0,b.setPropertyValue(e,"display",b.Values.getDisplayType(e))),!a){if("height"===n&&"border-box"!==b.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var h=e.offsetHeight-(parseFloat(b.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(b.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(b.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(b.getPropertyValue(e,"paddingBottom"))||0);return i(),h}if("width"===n&&"border-box"!==b.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var p=e.offsetWidth-(parseFloat(b.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(b.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(b.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(b.getPropertyValue(e,"paddingRight"))||0);return i(),p}}l=o(e)===r?t.getComputedStyle(e,null):o(e).computedStyle?o(e).computedStyle:o(e).computedStyle=t.getComputedStyle(e,null),"borderColor"===n&&(n="borderTopColor"),(""===(u=9===f&&"filter"===n?l.getPropertyValue(n):l[n])||null===u)&&(u=e.style[n]),i()}if("auto"===u&&/^(top|right|bottom|left)$/i.test(n)){var g=s(e,"position");("fixed"===g||"absolute"===g&&/top|left/i.test(n))&&(u=c(e).position()[n]+"px")}return u}var u;if(b.Hooks.registered[n]){var l=n,d=b.Hooks.getRoot(l);i===r&&(i=b.getPropertyValue(e,b.Names.prefixCheck(d)[0])),b.Normalizations.registered[d]&&(i=b.Normalizations.registered[d]("extract",e,i)),u=b.Hooks.extractValue(l,i)}else if(b.Normalizations.registered[n]){var h,p;"transform"!==(h=b.Normalizations.registered[n]("name",e))&&(p=s(e,b.Names.prefixCheck(h)[0]),b.Values.isCSSNullValue(p)&&b.Hooks.templates[n]&&(p=b.Hooks.templates[n][1])),u=b.Normalizations.registered[n]("extract",e,p)}if(!/^[\d-]/.test(u))if(o(e)&&o(e).isSVG&&b.Names.SVGAttribute(n))if(/^(height|width)$/i.test(n))try{u=e.getBBox()[n]}catch(e){u=0}else u=e.getAttribute(n);else u=s(e,b.Names.prefixCheck(n)[0]);return b.Values.isCSSNullValue(u)&&(u=0),m.debug>=2&&console.log("Get "+n+": "+u),u},setPropertyValue:function(e,n,r,i,a){var s=n;if("scroll"===n)a.container?a.container["scroll"+a.direction]=r:"Left"===a.direction?t.scrollTo(r,a.alternateValue):t.scrollTo(a.alternateValue,r);else if(b.Normalizations.registered[n]&&"transform"===b.Normalizations.registered[n]("name",e))b.Normalizations.registered[n]("inject",e,r),s="transform",r=o(e).transformCache[n];else{if(b.Hooks.registered[n]){var u=n,l=b.Hooks.getRoot(n);i=i||b.getPropertyValue(e,l),r=b.Hooks.injectValue(u,r,i),n=l}if(b.Normalizations.registered[n]&&(r=b.Normalizations.registered[n]("inject",e,r),n=b.Normalizations.registered[n]("name",e)),s=b.Names.prefixCheck(n)[0],8>=f)try{e.style[s]=r}catch(e){m.debug&&console.log("Browser does not support ["+r+"] for ["+s+"]")}else o(e)&&o(e).isSVG&&b.Names.SVGAttribute(n)?e.setAttribute(n,r):e.style[s]=r;m.debug>=2&&console.log("Set "+n+" ("+s+"): "+r)}return[s,r]},flushTransformCache:function(e){function t(t){return parseFloat(b.getPropertyValue(e,t))}var n="";if((f||m.State.isAndroid&&!m.State.isChrome)&&o(e).isSVG){var r={translate:[t("translateX"),t("translateY")],skewX:[t("skewX")],skewY:[t("skewY")],scale:1!==t("scale")?[t("scale"),t("scale")]:[t("scaleX"),t("scaleY")],rotate:[t("rotateZ"),0,0]};c.each(o(e).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),r[e]&&(n+=e+"("+r[e].join(" ")+") ",delete r[e])})}else{var i,a;c.each(o(e).transformCache,function(t){return i=o(e).transformCache[t],"transformPerspective"===t?(a=i,!0):(9===f&&"rotateZ"===t&&(t="rotate"),void(n+=t+i+" "))}),a&&(n="perspective"+a+" "+n)}b.setPropertyValue(e,"transform",n)}};b.Hooks.register(),b.Normalizations.register(),m.hook=function(e,t,n){var a=r;return e=i(e),c.each(e,function(e,i){if(o(i)===r&&m.init(i),n===r)a===r&&(a=m.CSS.getPropertyValue(i,t));else{var s=m.CSS.setPropertyValue(i,t,n);"transform"===s[0]&&m.CSS.flushTransformCache(i),a=s}}),a};var x=function(){function e(){return f?T.promise||null:d}function a(){function e(e){function d(e,t){var n=r,i=r,o=r;return h.isArray(e)?(n=e[0],!h.isArray(e[1])&&/^[\d-]/.test(e[1])||h.isFunction(e[1])||b.RegEx.isHex.test(e[1])?o=e[1]:(h.isString(e[1])&&!b.RegEx.isHex.test(e[1])||h.isArray(e[1]))&&(i=t?e[1]:s(e[1],l.duration),e[2]!==r&&(o=e[2]))):n=e,t||(i=i||l.easing),h.isFunction(n)&&(n=n.call(a,M,E)),h.isFunction(o)&&(o=o.call(a,M,E)),[n||0,i,o]}function p(e,t){var n,r;return r=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return n=e,""}),n||(n=b.Values.getUnitType(e)),[r,n]}if(l.begin&&0===M)try{l.begin.call(v,v)}catch(e){setTimeout(function(){throw e},1)}if("scroll"===k){var g,x,A,C=/^x$/i.test(l.axis)?"Left":"Top",_=parseFloat(l.offset)||0;l.container?h.isWrapped(l.container)||h.isNode(l.container)?(l.container=l.container[0]||l.container,A=(g=l.container["scroll"+C])+c(a).position()[C.toLowerCase()]+_):l.container=null:(g=m.State.scrollAnchor[m.State["scrollProperty"+C]],x=m.State.scrollAnchor[m.State["scrollProperty"+("Left"===C?"Top":"Left")]],A=c(a).offset()[C.toLowerCase()]+_),f={scroll:{rootPropertyValue:!1,startValue:g,currentValue:g,endValue:A,unitType:"",easing:l.easing,scrollData:{container:l.container,direction:C,alternateValue:x}},element:a},m.debug&&console.log("tweensContainer (scroll): ",f.scroll,a)}else if("reverse"===k){if(!o(a).tweensContainer)return void c.dequeue(a,l.queue);for(var S in"none"===o(a).opts.display&&(o(a).opts.display="auto"),"hidden"===o(a).opts.visibility&&(o(a).opts.visibility="visible"),o(a).opts.loop=!1,o(a).opts.begin=null,o(a).opts.complete=null,w.easing||delete l.easing,w.duration||delete l.duration,l=c.extend({},o(a).opts,l),R=c.extend(!0,{},o(a).tweensContainer))if("element"!==S){var I=R[S].startValue;R[S].startValue=R[S].currentValue=R[S].endValue,R[S].endValue=I,h.isEmptyObject(w)||(R[S].easing=l.easing),m.debug&&console.log("reverse tweensContainer ("+S+"): "+JSON.stringify(R[S]),a)}f=R}else if("start"===k){var R;for(var N in o(a).tweensContainer&&!0===o(a).isAnimating&&(R=o(a).tweensContainer),c.each(y,function(e,t){if(RegExp("^"+b.Lists.colors.join("$|^")+"$").test(e)){var n=d(t,!0),i=n[0],o=n[1],a=n[2];if(b.RegEx.isHex.test(i)){for(var s=["Red","Green","Blue"],u=b.Values.hexToRgb(i),l=a?b.Values.hexToRgb(a):r,c=0;c<s.length;c++){var f=[u[c]];o&&f.push(o),l!==r&&f.push(l[c]),y[e+s[c]]=f}delete y[e]}}}),y){var P=d(y[N]),D=P[0],B=P[1],V=P[2];N=b.Names.camelCase(N);var z=b.Hooks.getRoot(N),F=!1;if(o(a).isSVG||"tween"===z||!1!==b.Names.prefixCheck(z)[1]||b.Normalizations.registered[z]!==r){(l.display!==r&&null!==l.display&&"none"!==l.display||l.visibility!==r&&"hidden"!==l.visibility)&&/opacity|filter/.test(N)&&!V&&0!==D&&(V=0),l._cacheValues&&R&&R[N]?(V===r&&(V=R[N].endValue+R[N].unitType),F=o(a).rootPropertyValueCache[z]):b.Hooks.registered[N]?V===r?(F=b.getPropertyValue(a,z),V=b.getPropertyValue(a,N,F)):F=b.Hooks.templates[z][1]:V===r&&(V=b.getPropertyValue(a,N));var G,H,W,Z=!1;if(V=(G=p(N,V))[0],W=G[1],D=(G=p(N,D))[0].replace(/^([+-\/*])=/,function(e,t){return Z=t,""}),H=G[1],V=parseFloat(V)||0,D=parseFloat(D)||0,"%"===H&&(/^(fontSize|lineHeight)$/.test(N)?(D/=100,H="em"):/^scale/.test(N)?(D/=100,H=""):/(Red|Green|Blue)$/i.test(N)&&(D=D/100*255,H="")),/[\/*]/.test(Z))H=W;else if(W!==H&&0!==V)if(0===D)H=W;else{i=i||function(){var e={myParent:a.parentNode||n.body,position:b.getPropertyValue(a,"position"),fontSize:b.getPropertyValue(a,"fontSize")},r=e.position===L.lastPosition&&e.myParent===L.lastParent,i=e.fontSize===L.lastFontSize;L.lastParent=e.myParent,L.lastPosition=e.position,L.lastFontSize=e.fontSize;var s=100,u={};if(i&&r)u.emToPx=L.lastEmToPx,u.percentToPxWidth=L.lastPercentToPxWidth,u.percentToPxHeight=L.lastPercentToPxHeight;else{var l=o(a).isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");m.init(l),e.myParent.appendChild(l),c.each(["overflow","overflowX","overflowY"],function(e,t){m.CSS.setPropertyValue(l,t,"hidden")}),m.CSS.setPropertyValue(l,"position",e.position),m.CSS.setPropertyValue(l,"fontSize",e.fontSize),m.CSS.setPropertyValue(l,"boxSizing","content-box"),c.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){m.CSS.setPropertyValue(l,t,s+"%")}),m.CSS.setPropertyValue(l,"paddingLeft",s+"em"),u.percentToPxWidth=L.lastPercentToPxWidth=(parseFloat(b.getPropertyValue(l,"width",null,!0))||1)/s,u.percentToPxHeight=L.lastPercentToPxHeight=(parseFloat(b.getPropertyValue(l,"height",null,!0))||1)/s,u.emToPx=L.lastEmToPx=(parseFloat(b.getPropertyValue(l,"paddingLeft"))||1)/s,e.myParent.removeChild(l)}return null===L.remToPx&&(L.remToPx=parseFloat(b.getPropertyValue(n.body,"fontSize"))||16),null===L.vwToPx&&(L.vwToPx=parseFloat(t.innerWidth)/100,L.vhToPx=parseFloat(t.innerHeight)/100),u.remToPx=L.remToPx,u.vwToPx=L.vwToPx,u.vhToPx=L.vhToPx,m.debug>=1&&console.log("Unit ratios: "+JSON.stringify(u),a),u}();var Y=/margin|padding|left|right|width|text|word|letter/i.test(N)||/X$/.test(N)||"x"===N?"x":"y";switch(W){case"%":V*="x"===Y?i.percentToPxWidth:i.percentToPxHeight;break;case"px":break;default:V*=i[W+"ToPx"]}switch(H){case"%":V*=1/("x"===Y?i.percentToPxWidth:i.percentToPxHeight);break;case"px":break;default:V*=1/i[H+"ToPx"]}}switch(Z){case"+":D=V+D;break;case"-":D=V-D;break;case"*":D*=V;break;case"/":D=V/D}f[N]={rootPropertyValue:F,startValue:V,currentValue:V,endValue:D,unitType:H,easing:B},m.debug&&console.log("tweensContainer ("+N+"): "+JSON.stringify(f[N]),a)}else m.debug&&console.log("Skipping ["+z+"] due to a lack of browser support.")}f.element=a}f.element&&(b.Values.addClass(a,"velocity-animating"),O.push(f),""===l.queue&&(o(a).tweensContainer=f,o(a).opts=l),o(a).isAnimating=!0,M===E-1?(m.State.calls.push([O,v,l,null,T.resolver]),!1===m.State.isTicking&&(m.State.isTicking=!0,u())):M++)}var i,a=this,l=c.extend({},m.defaults,w),f={};switch(o(a)===r&&m.init(a),parseFloat(l.delay)&&!1!==l.queue&&c.queue(a,l.queue,function(e){m.velocityQueueEntryFlag=!0,o(a).delayTimer={setTimeout:setTimeout(e,parseFloat(l.delay)),next:e}}),l.duration.toString().toLowerCase()){case"fast":l.duration=200;break;case"normal":l.duration=g;break;case"slow":l.duration=600;break;default:l.duration=parseFloat(l.duration)||1}!1!==m.mock&&(!0===m.mock?l.duration=l.delay=1:(l.duration*=parseFloat(m.mock)||1,l.delay*=parseFloat(m.mock)||1)),l.easing=s(l.easing,l.duration),l.begin&&!h.isFunction(l.begin)&&(l.begin=null),l.progress&&!h.isFunction(l.progress)&&(l.progress=null),l.complete&&!h.isFunction(l.complete)&&(l.complete=null),l.display!==r&&null!==l.display&&(l.display=l.display.toString().toLowerCase(),"auto"===l.display&&(l.display=m.CSS.Values.getDisplayType(a))),l.visibility!==r&&null!==l.visibility&&(l.visibility=l.visibility.toString().toLowerCase()),l.mobileHA=l.mobileHA&&m.State.isMobile&&!m.State.isGingerbread,!1===l.queue?l.delay?setTimeout(e,l.delay):e():c.queue(a,l.queue,function(t,n){return!0===n?(T.promise&&T.resolver(v),!0):(m.velocityQueueEntryFlag=!0,void e(t))}),""!==l.queue&&"fx"!==l.queue||"inprogress"===c.queue(a)[0]||c.dequeue(a)}var f,d,p,v,y,w,A=arguments[0]&&(arguments[0].p||c.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||h.isString(arguments[0].properties));if(h.isWrapped(this)?(f=!1,p=0,v=this,d=this):(f=!0,p=1,v=A?arguments[0].elements||arguments[0].e:arguments[0]),v=i(v)){A?(y=arguments[0].properties||arguments[0].p,w=arguments[0].options||arguments[0].o):(y=arguments[p],w=arguments[p+1]);var E=v.length,M=0;if(!/^(stop|finish)$/i.test(y)&&!c.isPlainObject(w)){w={};for(var C=p+1;C<arguments.length;C++)h.isArray(arguments[C])||!/^(fast|normal|slow)$/i.test(arguments[C])&&!/^\d/.test(arguments[C])?h.isString(arguments[C])||h.isArray(arguments[C])?w.easing=arguments[C]:h.isFunction(arguments[C])&&(w.complete=arguments[C]):w.duration=arguments[C]}var k,T={promise:null,resolver:null,rejecter:null};switch(f&&m.Promise&&(T.promise=new m.Promise(function(e,t){T.resolver=e,T.rejecter=t})),y){case"scroll":k="scroll";break;case"reverse":k="reverse";break;case"finish":case"stop":c.each(v,function(e,t){o(t)&&o(t).delayTimer&&(clearTimeout(o(t).delayTimer.setTimeout),o(t).delayTimer.next&&o(t).delayTimer.next(),delete o(t).delayTimer)});var _=[];return c.each(m.State.calls,function(e,t){t&&c.each(t[1],function(n,i){var a=w===r?"":w;return!0!==a&&t[2].queue!==a&&(w!==r||!1!==t[2].queue)||void c.each(v,function(n,r){r===i&&((!0===w||h.isString(w))&&(c.each(c.queue(r,h.isString(w)?w:""),function(e,t){h.isFunction(t)&&t(null,!0)}),c.queue(r,h.isString(w)?w:"",[])),"stop"===y?(o(r)&&o(r).tweensContainer&&!1!==a&&c.each(o(r).tweensContainer,function(e,t){t.endValue=t.currentValue}),_.push(e)):"finish"===y&&(t[2].duration=1))})})}),"stop"===y&&(c.each(_,function(e,t){l(t,!0)}),T.promise&&T.resolver(v)),e();default:if(!c.isPlainObject(y)||h.isEmptyObject(y)){if(h.isString(y)&&m.Redirects[y]){var S=(P=c.extend({},w)).duration,I=P.delay||0;return!0===P.backwards&&(v=c.extend(!0,[],v).reverse()),c.each(v,function(e,t){parseFloat(P.stagger)?P.delay=I+parseFloat(P.stagger)*e:h.isFunction(P.stagger)&&(P.delay=I+P.stagger.call(t,e,E)),P.drag&&(P.duration=parseFloat(S)||(/^(callout|transition)/.test(y)?1e3:g),P.duration=Math.max(P.duration*(P.backwards?1-e/E:(e+1)/E),.75*P.duration,200)),m.Redirects[y].call(t,t,P||{},e,E,v,T.promise?T:r)}),e()}var R="Velocity: First argument ("+y+") was not a property map, a known action, or a registered redirect. Aborting.";return T.promise?T.rejecter(new Error(R)):console.log(R),e()}k="start"}var L={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},O=[];c.each(v,function(e,t){h.isNode(t)&&a.call(t)});var N,P=c.extend({},m.defaults,w);if(P.loop=parseInt(P.loop),N=2*P.loop-1,P.loop)for(var D=0;N>D;D++){var B={delay:P.delay,progress:P.progress};D===N-1&&(B.display=P.display,B.visibility=P.visibility,B.complete=P.complete),x(v,"reverse",B)}return e()}};(m=c.extend(x,m)).animate=x;var w=t.requestAnimationFrame||d;return m.State.isMobile||n.hidden===r||n.addEventListener("visibilitychange",function(){n.hidden?(w=function(e){return setTimeout(function(){e(!0)},16)},u()):w=t.requestAnimationFrame||d}),e.Velocity=m,e!==t&&(e.fn.velocity=x,e.fn.velocity.defaults=m.defaults),c.each(["Down","Up"],function(e,t){m.Redirects["slide"+t]=function(e,n,i,o,a,s){var u=c.extend({},n),l=u.begin,f=u.complete,d={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},h={};u.display===r&&(u.display="Down"===t?"inline"===m.CSS.Values.getDisplayType(e)?"inline-block":"block":"none"),u.begin=function(){for(var n in l&&l.call(a,a),d){h[n]=e.style[n];var r=m.CSS.getPropertyValue(e,n);d[n]="Down"===t?[r,0]:[0,r]}h.overflow=e.style.overflow,e.style.overflow="hidden"},u.complete=function(){for(var t in h)e.style[t]=h[t];f&&f.call(a,a),s&&s.resolver(a)},m(e,d,u)}}),c.each(["In","Out"],function(e,t){m.Redirects["fade"+t]=function(e,n,i,o,a,s){var u=c.extend({},n),l={opacity:"In"===t?1:0},f=u.complete;u.complete=i!==o-1?u.begin=null:function(){f&&f.call(a,a),s&&s.resolver(a)},u.display===r&&(u.display="In"===t?"auto":"none"),m(this,l,u)}}),m}jQuery.fn.velocity=jQuery.fn.animate}(window.jQuery||window.Zepto||window,window,document)})),function(e,t,n,r){"use strict";function i(e,t,n){return setTimeout(c(e,n),t)}function o(e,t,n){return!!Array.isArray(e)&&(a(e,n[t],n),!0)}function a(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==r)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function s(e,t,n){for(var i=Object.keys(t),o=0;o<i.length;)(!n||n&&e[i[o]]===r)&&(e[i[o]]=t[i[o]]),o++;return e}function u(e,t){return s(e,t,!0)}function l(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&s(r,n)}function c(e,t){return function(){return e.apply(t,arguments)}}function f(e,t){return typeof e==$?e.apply(t&&t[0]||r,t):e}function d(e,t){return e===r?t:e}function h(e,t,n){a(m(t),function(t){e.addEventListener(t,n,!1)})}function p(e,t,n){a(m(t),function(t){e.removeEventListener(t,n,!1)})}function g(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function v(e,t){return e.indexOf(t)>-1}function m(e){return e.trim().split(/\s+/g)}function y(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function b(e){return Array.prototype.slice.call(e,0)}function x(e,t,n){for(var r=[],i=[],o=0;o<e.length;){var a=t?e[o][t]:e[o];y(i,a)<0&&r.push(e[o]),i[o]=a,o++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function w(e,t){for(var n,i,o=t[0].toUpperCase()+t.slice(1),a=0;a<K.length;){if((i=(n=K[a])?n+o:t)in e)return i;a++}return r}function A(e){var t=e.ownerDocument;return t.defaultView||t.parentWindow}function E(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){f(e.options.enable,[e])&&n.handler(t)},this.init()}function M(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,o=t&ce&&0==r-i,a=t&(fe|de)&&0==r-i;n.isFirst=!!o,n.isFinal=!!a,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=k(t)),i>1&&!n.firstMultiple?n.firstMultiple=k(t):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=t.center=T(r);t.timeStamp=ne(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=I(s,u),t.distance=S(s,u),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},o=e.prevInput||{};(t.eventType===ce||o.eventType===fe)&&(i=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=_(t.deltaX,t.deltaY),t.scale=a?function(e,t){return S(r[0],r[1],Ae)/S(e[0],e[1],Ae)}(a.pointers):1,t.rotation=a?function(e,t){return I(r[1],r[0],Ae)-I(e[1],e[0],Ae)}(a.pointers):0,C(n,t);var l=e.element;g(t.srcEvent.target,l)&&(l=t.srcEvent.target),t.target=l}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function C(e,t){var n,i,o,a,s=e.lastInterval||t,u=t.timeStamp-s.timeStamp;if(t.eventType!=de&&(u>le||s.velocity===r)){var l=s.deltaX-t.deltaX,c=s.deltaY-t.deltaY,f={x:l/u||0,y:c/u||0};i=f.x,o=f.y,n=te(f.x)>te(f.y)?f.x:f.y,a=_(l,c),e.lastInterval=t}else n=s.velocity,i=s.velocityX,o=s.velocityY,a=s.direction;t.velocity=n,t.velocityX=i,t.velocityY=o,t.direction=a}function k(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:ee(e.pointers[n].clientX),clientY:ee(e.pointers[n].clientY)},n++;return{timeStamp:ne(),pointers:t,center:T(t),deltaX:e.deltaX,deltaY:e.deltaY}}function T(e){var t=e.length;if(1===t)return{x:ee(e[0].clientX),y:ee(e[0].clientY)};for(var n=0,r=0,i=0;t>i;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:ee(n/t),y:ee(r/t)}}function _(e,t){return e===t?he:te(e)>=te(t)?e>0?pe:ge:t>0?ve:me}function S(e,t,n){n||(n=we);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function I(e,t,n){return n||(n=we),180*Math.atan2(t[n[1]]-e[n[1]],t[n[0]]-e[n[0]])/Math.PI}function R(){this.evEl=Me,this.evWin=Ce,this.allow=!0,this.pressed=!1,E.apply(this,arguments)}function L(){this.evEl=_e,this.evWin=Se,E.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Re,this.evWin=Le,this.started=!1,E.apply(this,arguments)}function N(){this.evTarget=Ne,this.targetIds={},E.apply(this,arguments)}function P(){E.apply(this,arguments);var e=c(this.handler,this);this.touch=new N(this.manager,e),this.mouse=new R(this.manager,e)}function D(e,t){this.manager=e,this.set(t)}function B(e){this.id=re++,this.manager=null,this.options=u(e||{},this.defaults),this.options.enable=d(this.options.enable,!0),this.state=He,this.simultaneous={},this.requireFail=[]}function V(e){return e==me?"down":e==ve?"up":e==pe?"left":e==ge?"right":""}function z(e,t){var n=t.manager;return n?n.get(e):e}function F(){B.apply(this,arguments)}function G(){F.apply(this,arguments),this.pX=null,this.pY=null}function H(){F.apply(this,arguments)}function W(){B.apply(this,arguments),this._timer=null,this._input=null}function Z(){F.apply(this,arguments)}function Y(){F.apply(this,arguments)}function j(){B.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function U(e,t){return(t=t||{}).recognizers=d(t.recognizers,U.defaults.preset),new X(e,t)}function X(e,t){this.options=u(t=t||{},U.defaults),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=function(e){return new(e.options.inputClass||(oe?L:ae?N:ie?P:R))(e,M)}(this),this.touchAction=new D(this,this.options.touchAction),q(this,!0),a(t.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function q(e,t){var n=e.element;a(e.options.cssProps,function(e,r){n.style[w(n.style,r)]=t?e:""})}function Q(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}var K=["","webkit","moz","MS","ms","o"],J=t.createElement("div"),$="function",ee=Math.round,te=Math.abs,ne=Date.now,re=1,ie="ontouchstart"in e,oe=w(e,"PointerEvent")!==r,ae=ie&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),se="touch",ue="mouse",le=25,ce=1,fe=4,de=8,he=1,pe=2,ge=4,ve=8,me=16,ye=pe|ge,be=ve|me,xe=ye|be,we=["x","y"],Ae=["clientX","clientY"];E.prototype={handler:function(){},init:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(A(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(A(this.element),this.evWin,this.domHandler)}};var Ee={mousedown:ce,mousemove:2,mouseup:fe},Me="mousedown",Ce="mousemove mouseup";l(R,E,{handler:function(e){var t=Ee[e.type];t&ce&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=fe),this.pressed&&this.allow&&(t&fe&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:ue,srcEvent:e}))}});var ke={pointerdown:ce,pointermove:2,pointerup:fe,pointercancel:de,pointerout:de},Te={2:se,3:"pen",4:ue,5:"kinect"},_e="pointerdown",Se="pointermove pointerup pointercancel";e.MSPointerEvent&&(_e="MSPointerDown",Se="MSPointerMove MSPointerUp MSPointerCancel"),l(L,E,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=ke[r],o=Te[e.pointerType]||e.pointerType,a=o==se,s=y(t,e.pointerId,"pointerId");i&ce&&(0===e.button||a)?0>s&&(t.push(e),s=t.length-1):i&(fe|de)&&(n=!0),0>s||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(s,1))}});var Ie={touchstart:ce,touchmove:2,touchend:fe,touchcancel:de},Re="touchstart",Le="touchstart touchmove touchend touchcancel";l(O,E,{handler:function(e){var t=Ie[e.type];if(t===ce&&(this.started=!0),this.started){var n=(function(e,t){var n=b(e.touches),r=b(e.changedTouches);return t&(fe|de)&&(n=x(n.concat(r),"identifier",!0)),[n,r]}).call(this,e,t);t&(fe|de)&&0==n[0].length-n[1].length&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:se,srcEvent:e})}}});var Oe={touchstart:ce,touchmove:2,touchend:fe,touchcancel:de},Ne="touchstart touchmove touchend touchcancel";l(N,E,{handler:function(e){var t=Oe[e.type],n=(function(e,t){var n=b(e.touches),r=this.targetIds;if(t&(2|ce)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=b(e.changedTouches),s=[],u=this.target;if(o=n.filter(function(e){return g(e.target,u)}),t===ce)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),t&(fe|de)&&delete r[a[i].identifier],i++;return s.length?[x(o.concat(s),"identifier",!0),s]:void 0}).call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:se,srcEvent:e})}}),l(P,E,{handler:function(e,t,n){var r=n.pointerType==ue;if(n.pointerType==se)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;t&(fe|de)&&(this.mouse.allow=!0),this.callback(e,t,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Pe=w(J.style,"touchAction"),De=Pe!==r,Be="compute",Ve="manipulation",ze="none",Fe="pan-x",Ge="pan-y";D.prototype={set:function(e){e==Be&&(e=this.compute()),De&&(this.manager.element.style[Pe]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return a(this.manager.recognizers,function(t){f(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(v(e,ze))return ze;var t=v(e,Fe),n=v(e,Ge);return t&&n?Fe+" "+Ge:t||n?t?Fe:Ge:v(e,Ve)?Ve:"auto"}(e.join(" "))},preventDefaults:function(e){if(!De){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var r=this.actions,i=v(r,ze),o=v(r,Ge),a=v(r,Fe);return i||o&&n&ye||a&&n&be?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var He=1,We=2,Ze=4,Ye=8,je=Ye,Ue=16;B.prototype={defaults:{},set:function(e){return s(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(o(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=z(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return o(e,"dropRecognizeWith",this)?this:(e=z(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(o(e,"requireFailure",this))return this;var t=this.requireFail;return-1===y(t,e=z(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(o(e,"dropRequireFailure",this))return this;e=z(e,this);var t=y(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(n.options.event+(t?r&Ue?"cancel":r&Ye?"end":r&Ze?"move":r&We?"start":"":""),e)}var n=this,r=this.state;Ye>r&&t(!0),t(),r>=Ye&&t(!0)},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=32)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|He)))return!1;e++}return!0},recognize:function(e){var t=s({},e);return f(this.options.enable,[this,t])?(this.state&(je|Ue|32)&&(this.state=He),this.state=this.process(t),void(this.state&(We|Ze|Ye|Ue)&&this.tryEmit(t))):(this.reset(),void(this.state=32))},process:function(){},getTouchAction:function(){},reset:function(){}},l(F,B,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(We|Ze),i=this.attrTest(e);return r&&(n&de||!i)?t|Ue:r||i?n&fe?t|Ye:t&We?t|Ze:We:32}}),l(G,F,{defaults:{event:"pan",threshold:10,pointers:1,direction:xe},getTouchAction:function(){var e=this.options.direction,t=[];return e&ye&&t.push(Ge),e&be&&t.push(Fe),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,o=e.deltaX,a=e.deltaY;return i&t.direction||(t.direction&ye?(i=0===o?he:0>o?pe:ge,n=o!=this.pX,r=Math.abs(e.deltaX)):(i=0===a?he:0>a?ve:me,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return F.prototype.attrTest.call(this,e)&&(this.state&We||!(this.state&We)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=V(e.direction);t&&this.manager.emit(this.options.event+t,e),this._super.emit.call(this,e)}}),l(H,F,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ze]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&We)},emit:function(e){this._super.emit.call(this,e),1!==e.scale&&this.manager.emit(this.options.event+(e.scale<1?"in":"out"),e)}}),l(W,B,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(fe|de)&&!o)this.reset();else if(e.eventType&ce)this.reset(),this._timer=i(function(){this.state=je,this.tryEmit()},t.time,this);else if(e.eventType&fe)return je;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===je&&(e&&e.eventType&fe?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=ne(),this.manager.emit(this.options.event,this._input)))}}),l(Z,F,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ze]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&We)}}),l(Y,F,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:ye|be,pointers:1},getTouchAction:function(){return G.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(ye|be)?t=e.velocity:n&ye?t=e.velocityX:n&be&&(t=e.velocityY),this._super.attrTest.call(this,e)&&n&e.direction&&e.distance>this.options.threshold&&te(t)>this.options.velocity&&e.eventType&fe},emit:function(e){var t=V(e.direction);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),l(j,B,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[Ve]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),e.eventType&ce&&0===this.count)return this.failTimeout();if(r&&o&&n){if(e.eventType!=fe)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||S(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&a?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=i(function(){this.state=je,this.tryEmit()},t.interval,this),We):je}return 32},failTimeout:function(){return this._timer=i(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==je&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),U.VERSION="2.0.4",U.defaults={domEvents:!1,touchAction:Be,enable:!0,inputTarget:null,inputClass:null,preset:[[Z,{enable:!1}],[H,{enable:!1},["rotate"]],[Y,{direction:ye}],[G,{direction:ye},["swipe"]],[j],[j,{event:"doubletap",taps:2},["tap"]],[W]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},X.prototype={set:function(e){return s(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,r=this.recognizers,i=t.curRecognizer;(!i||i&&i.state&je)&&(i=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&n.state&(We|Ze|Ye)&&(i=t.curRecognizer=n),o++}},get:function(e){if(e instanceof B)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(o(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(o(e,"remove",this))return this;var t=this.recognizers;return e=this.get(e),t.splice(y(t,e),1),this.touchAction.update(),this},on:function(e,t){var n=this.handlers;return a(m(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},off:function(e,t){var n=this.handlers;return a(m(e),function(e){t?n[e].splice(y(n[e],t),1):delete n[e]}),this},emit:function(e,t){this.options.domEvents&&Q(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&q(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(U,{INPUT_START:ce,INPUT_MOVE:2,INPUT_END:fe,INPUT_CANCEL:de,STATE_POSSIBLE:He,STATE_BEGAN:We,STATE_CHANGED:Ze,STATE_ENDED:Ye,STATE_RECOGNIZED:je,STATE_CANCELLED:Ue,STATE_FAILED:32,DIRECTION_NONE:he,DIRECTION_LEFT:pe,DIRECTION_RIGHT:ge,DIRECTION_UP:ve,DIRECTION_DOWN:me,DIRECTION_HORIZONTAL:ye,DIRECTION_VERTICAL:be,DIRECTION_ALL:xe,Manager:X,Input:E,TouchAction:D,TouchInput:N,MouseInput:R,PointerEventInput:L,TouchMouseInput:P,SingleTouchInput:O,Recognizer:B,AttrRecognizer:F,Tap:j,Pan:G,Swipe:Y,Pinch:H,Rotate:Z,Press:W,on:h,off:p,each:a,merge:u,extend:s,inherit:l,bindFn:c,prefixed:w}),typeof define==$&&define.amd?define(function(){return U}):"undefined"!=typeof module&&module.exports?module.exports=U:e.Hammer=U}(window,document),function(e){"function"==typeof define&&define.amd?define(["jquery","hammerjs"],e):"object"==typeof exports?e(require("jquery"),require("hammerjs")):e(jQuery,Hammer)}(function(e,t){function n(n,r){var i=e(n);i.data("hammer")||i.data("hammer",new t(i[0],r))}e.fn.hammer=function(e){return this.each(function(){n(this,e)})},t.Manager.prototype.emit=function(t){return function(n,r){t.call(this,n,r),e(this.element).trigger({type:n,gesture:r})}}(t.Manager.prototype.emit)}),function(e){e.Package?Materialize={}:e.Materialize={}}(window),"undefined"==typeof exports||exports.nodeType||("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=Materialize),exports.default=Materialize),function(e){for(var t=0,n=["webkit","moz"],r=e.requestAnimationFrame,i=e.cancelAnimationFrame,o=n.length;--o>=0&&!r;)r=e[n[o]+"RequestAnimationFrame"],i=e[n[o]+"CancelRequestAnimationFrame"];r&&i||(r=function(e){var n=+Date.now(),r=Math.max(t+16,n);return setTimeout(function(){e(t=r)},r-n)},i=clearTimeout),e.requestAnimationFrame=r,e.cancelAnimationFrame=i}(window),Materialize.objectSelectorString=function(e){return((e.prop("tagName")||"")+(e.attr("id")||"")+(e.attr("class")||"")).replace(/\s/g,"")},Materialize.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),Materialize.escapeHash=function(e){return e.replace(/(:|\.|\[|\]|,|=)/g,"\\$1")},Materialize.elementOrParentIsFixed=function(e){var t=$(e),n=!1;return t.add(t.parents()).each(function(){if("fixed"===$(this).css("position"))return n=!0,!1}),n};var Vel,getTime=Date.now||function(){return(new Date).getTime()};Materialize.throttle=function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:getTime(),a=null,o=e.apply(r,i),r=i=null};return function(){var l=getTime();s||!1!==n.leading||(s=l);var c=t-(l-s);return r=this,i=arguments,c<=0?(clearTimeout(a),a=null,s=l,o=e.apply(r,i),r=i=null):a||!1===n.trailing||(a=setTimeout(u,c)),o}},Vel=jQuery?jQuery.Velocity:$?$.Velocity:Velocity,Materialize.Vel=Vel||Velocity,function(e){e.fn.collapsible=function(t,n){var r=t;return t=e.extend({accordion:void 0,onOpen:void 0,onClose:void 0},t),this.each(function(){function i(t){f=c.find("> li > .collapsible-header"),t.hasClass("active")?t.parent().addClass("active"):t.parent().removeClass("active"),t.parent().hasClass("active")?t.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height","")}}):t.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height","")}}),f.not(t).removeClass("active").parent().removeClass("active"),f.not(t).parent().children(".collapsible-body").stop(!0,!1).each(function(){e(this).is(":visible")&&e(this).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height",""),s(e(this).siblings(".collapsible-header"))}})})}function o(t){t.hasClass("active")?t.parent().addClass("active"):t.parent().removeClass("active"),t.parent().hasClass("active")?t.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height","")}}):t.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){e(this).css("height","")}})}function a(e,n){n||e.toggleClass("active"),t.accordion||"accordion"===d||void 0===d?i(e):o(e),s(e)}function s(e){e.hasClass("active")?"function"==typeof t.onOpen&&t.onOpen.call(this,e.parent()):"function"==typeof t.onClose&&t.onClose.call(this,e.parent())}function u(e){return e.closest("li > .collapsible-header")}function l(){c.off("click.collapse","> li > .collapsible-header")}var c=e(this),f=e(this).find("> li > .collapsible-header"),d=c.data("collapsible");if("destroy"!==r)if(n>=0&&n<f.length){var h=f.eq(n);h.length&&("open"===r||"close"===r&&h.hasClass("active"))&&a(h)}else l(),c.on("click.collapse","> li > .collapsible-header",function(t){var n=e(t.target);u(n).length>0&&(n=u(n)),a(n)}),t.accordion||"accordion"===d||void 0===d?a(f.filter(".active").first(),!0):f.filter(".active").each(function(){a(e(this),!0)});else l()})},e(document).ready(function(){e(".collapsible").collapsible()})}(jQuery),function(e){e.fn.scrollTo=function(t){return e(this).scrollTop(e(this).scrollTop()-e(this).offset().top+e(t).offset().top),this},e.fn.dropdown=function(t){var n={inDuration:300,outDuration:225,constrainWidth:!0,hover:!1,gutter:0,belowOrigin:!1,alignment:"left",stopPropagation:!1};return"open"===t?(this.each(function(){e(this).trigger("open")}),!1):"close"===t?(this.each(function(){e(this).trigger("close")}),!1):void this.each(function(){function r(){void 0!==a.data("induration")&&(s.inDuration=a.data("induration")),void 0!==a.data("outduration")&&(s.outDuration=a.data("outduration")),void 0!==a.data("constrainwidth")&&(s.constrainWidth=a.data("constrainwidth")),void 0!==a.data("hover")&&(s.hover=a.data("hover")),void 0!==a.data("gutter")&&(s.gutter=a.data("gutter")),void 0!==a.data("beloworigin")&&(s.belowOrigin=a.data("beloworigin")),void 0!==a.data("alignment")&&(s.alignment=a.data("alignment")),void 0!==a.data("stoppropagation")&&(s.stopPropagation=a.data("stoppropagation"))}function i(t){"focus"===t&&(u=!0),r(),l.addClass("active"),a.addClass("active");var n=a[0].getBoundingClientRect().width;!0===s.constrainWidth?l.css("width",n):l.css("white-space","nowrap");var i=window.innerHeight,c=a.innerHeight(),f=a.offset().left,d=a.offset().top-e(window).scrollTop(),h=s.alignment,p=0,g=0,v=0;!0===s.belowOrigin&&(v=c);var m=0,y=0,b=a.parent();b.is("body")||(b[0].scrollHeight>b[0].clientHeight&&(m=b[0].scrollTop),b[0].scrollWidth>b[0].clientWidth&&(y=b[0].scrollLeft)),f+l.innerWidth()>e(window).width()?h="right":f-l.innerWidth()+a.innerWidth()<0&&(h="left"),d+l.innerHeight()>i&&(d+c-l.innerHeight()<0?l.css("max-height",i-d-v):(v||(v+=c),v-=l.innerHeight())),"left"===h?(p=s.gutter,g=a.position().left+p):"right"===h&&(l.stop(!0,!0).css({opacity:0,left:0}),g=a.position().left+n-l.width()+(p=-s.gutter)),l.css({position:"absolute",top:a.position().top+v+m,left:g+y}),l.slideDown({queue:!1,duration:s.inDuration,easing:"easeOutCubic",complete:function(){e(this).css("height","")}}).animate({opacity:1},{queue:!1,duration:s.inDuration,easing:"easeOutSine"}),setTimeout(function(){e(document).on("click."+l.attr("id"),function(t){o(),e(document).off("click."+l.attr("id"))})},0)}function o(){u=!1,l.fadeOut(s.outDuration),l.removeClass("active"),a.removeClass("active"),e(document).off("click."+l.attr("id")),setTimeout(function(){l.css("max-height","")},s.outDuration)}var a=e(this),s=e.extend({},n,t),u=!1,l=e("#"+a.attr("data-activates"));if(r(),a.after(l),s.hover){var c=!1;a.off("click."+a.attr("id")),a.on("mouseenter",function(e){!1===c&&(i(),c=!0)}),a.on("mouseleave",function(t){e(t.toElement||t.relatedTarget).closest(".dropdown-content").is(l)||(l.stop(!0,!0),o(),c=!1)}),l.on("mouseleave",function(t){e(t.toElement||t.relatedTarget).closest(".dropdown-button").is(a)||(l.stop(!0,!0),o(),c=!1)})}else a.off("click."+a.attr("id")),a.on("click."+a.attr("id"),function(t){u||(a[0]!=t.currentTarget||a.hasClass("active")||0!==e(t.target).closest(".dropdown-content").length?a.hasClass("active")&&(o(),e(document).off("click."+l.attr("id"))):(t.preventDefault(),s.stopPropagation&&t.stopPropagation(),i("click")))});a.on("open",function(e,t){i(t)}),a.on("close",o)})},e(document).ready(function(){e(".dropdown-button").dropdown()})}(jQuery),function(e,t){"use strict";var n={opacity:.5,inDuration:250,outDuration:250,ready:void 0,complete:void 0,dismissible:!0,startingTop:"4%",endingTop:"10%"},r=function(){function r(t,n){_classCallCheck(this,r),t[0].M_Modal&&t[0].M_Modal.destroy(),this.$el=t,this.options=e.extend({},r.defaults,n),this.isOpen=!1,this.$el[0].M_Modal=this,this.id=t.attr("id"),this.openingTrigger=void 0,this.$overlay=e('<div class="modal-overlay"></div>'),r._increment++,r._count++,this.$overlay[0].style.zIndex=1e3+2*r._increment,this.$el[0].style.zIndex=1e3+2*r._increment+1,this.setupEventHandlers()}return _createClass(r,[{key:"getInstance",value:function(){return this}},{key:"destroy",value:function(){this.removeEventHandlers(),this.$el[0].removeAttribute("style"),this.$overlay[0].parentNode&&this.$overlay[0].parentNode.removeChild(this.$overlay[0]),this.$el[0].M_Modal=void 0,r._count--}},{key:"setupEventHandlers",value:function(){this.handleOverlayClickBound=this.handleOverlayClick.bind(this),this.handleModalCloseClickBound=this.handleModalCloseClick.bind(this),1===r._count&&document.body.addEventListener("click",this.handleTriggerClick),this.$overlay[0].addEventListener("click",this.handleOverlayClickBound),this.$el[0].addEventListener("click",this.handleModalCloseClickBound)}},{key:"removeEventHandlers",value:function(){0===r._count&&document.body.removeEventListener("click",this.handleTriggerClick),this.$overlay[0].removeEventListener("click",this.handleOverlayClickBound),this.$el[0].removeEventListener("click",this.handleModalCloseClickBound)}},{key:"handleTriggerClick",value:function(t){var n=e(t.target).closest(".modal-trigger");if(t.target&&n.length){var r=n[0].getAttribute("href");r=r?r.slice(1):n[0].getAttribute("data-target");var i=document.getElementById(r).M_Modal;i&&i.open(n),t.preventDefault()}}},{key:"handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"handleModalCloseClick",value:function(t){var n=e(t.target).closest(".modal-close");t.target&&n.length&&this.close()}},{key:"handleKeydown",value:function(e){27===e.keyCode&&this.options.dismissible&&this.close()}},{key:"animateIn",value:function(){var n=this;e.extend(this.$el[0].style,{display:"block",opacity:0}),e.extend(this.$overlay[0].style,{display:"block",opacity:0}),t(this.$overlay[0],{opacity:this.options.opacity},{duration:this.options.inDuration,queue:!1,ease:"easeOutCubic"});var r={duration:this.options.inDuration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof n.options.ready&&n.options.ready.call(n,n.$el,n.openingTrigger)}};this.$el[0].classList.contains("bottom-sheet")?t(this.$el[0],{bottom:0,opacity:1},r):(t.hook(this.$el[0],"scaleX",.7),this.$el[0].style.top=this.options.startingTop,t(this.$el[0],{top:this.options.endingTop,opacity:1,scaleX:1},r))}},{key:"animateOut",value:function(){var e=this;t(this.$overlay[0],{opacity:0},{duration:this.options.outDuration,queue:!1,ease:"easeOutQuart"});var n={duration:this.options.outDuration,queue:!1,ease:"easeOutCubic",complete:function(){e.$el[0].style.display="none","function"==typeof e.options.complete&&e.options.complete.call(e,e.$el),e.$overlay[0].parentNode.removeChild(e.$overlay[0])}};this.$el[0].classList.contains("bottom-sheet")?t(this.$el[0],{bottom:"-100%",opacity:0},n):t(this.$el[0],{top:this.options.startingTop,opacity:0,scaleX:.7},n)}},{key:"open",value:function(e){if(!this.isOpen){this.isOpen=!0;var t=document.body;return t.style.overflow="hidden",this.$el[0].classList.add("open"),t.appendChild(this.$overlay[0]),this.openingTrigger=e||void 0,this.options.dismissible&&(this.handleKeydownBound=this.handleKeydown.bind(this),document.addEventListener("keydown",this.handleKeydownBound)),this.animateIn(),this}}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,this.$el[0].classList.remove("open"),document.body.style.overflow="",this.options.dismissible&&document.removeEventListener("keydown",this.handleKeydownBound),this.animateOut(),this}}],[{key:"init",value:function(t,n){var i=[];return t.each(function(){i.push(new r(e(this),n))}),i}},{key:"defaults",get:function(){return n}}]),r}();r._increment=0,r._count=0,Materialize.Modal=r,e.fn.modal=function(t){return r.prototype[t]?"get"===t.slice(0,3)?this.first()[0].M_Modal[t]():this.each(function(){this.M_Modal[t]()}):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.modal"):(r.init(this,arguments[0]),this)}}(jQuery,Materialize.Vel),function(e){e.fn.materialbox=function(){return this.each(function(){function t(){o=!1;var t=s.parent(".material-placeholder"),r=(window,window,s.data("width")),u=s.data("height");s.velocity("stop",!0),e("#materialbox-overlay").velocity("stop",!0),e(".materialbox-caption").velocity("stop",!0),e(window).off("scroll.materialbox"),e(document).off("keyup.materialbox"),e(window).off("resize.materialbox"),e("#materialbox-overlay").velocity({opacity:0},{duration:a,queue:!1,easing:"easeOutQuad",complete:function(){i=!1,e(this).remove()}}),s.velocity({width:r,height:u,left:0,top:0},{duration:a,queue:!1,easing:"easeOutQuad",complete:function(){t.css({height:"",width:"",position:"",top:"",left:""}),s.removeAttr("style"),s.attr("style",l),s.removeClass("active"),o=!0,n&&n.css("overflow","")}}),e(".materialbox-caption").velocity({opacity:0},{duration:a,queue:!1,easing:"easeOutQuad",complete:function(){e(this).remove()}})}if(!e(this).hasClass("initialized")){e(this).addClass("initialized");var n,r,i=!1,o=!0,a=200,s=e(this),u=e("<div></div>").addClass("material-placeholder"),l=s.attr("style");s.wrap(u),s.on("click",function(){var a=s.parent(".material-placeholder"),u=window.innerWidth,l=window.innerHeight,c=s.width(),f=s.height();if(!1===o)return t(),!1;if(i&&!0===o)return t(),!1;for(o=!1,s.addClass("active"),i=!0,a.css({width:a[0].getBoundingClientRect().width,height:a[0].getBoundingClientRect().height,position:"relative",top:0,left:0}),n=void 0,r=a[0].parentNode;null!==r&&!e(r).is(document);){var d=e(r);"visible"!==d.css("overflow")&&(d.css("overflow","visible"),n=void 0===n?d:n.add(d)),r=r.parentNode}s.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}).data("width",c).data("height",f);var h=e('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){!0===o&&t()});s.before(h);var p=h[0].getBoundingClientRect();if(h.css({width:u,height:l,left:-1*p.left,top:-1*p.top}),h.velocity({opacity:1},{duration:275,queue:!1,easing:"easeOutQuad"}),""!==s.data("caption")){var g=e('<div class="materialbox-caption"></div>');g.text(s.data("caption")),e("body").append(g),g.css({display:"inline"}),g.velocity({opacity:1},{duration:275,queue:!1,easing:"easeOutQuad"})}var v=0,m=0;c/u>f/l?(v=.9*u,m=.9*u*(f/c)):(v=.9*l*(c/f),m=.9*l),s.hasClass("responsive-img")?s.velocity({"max-width":v,width:c},{duration:0,queue:!1,complete:function(){s.css({left:0,top:0}).velocity({height:m,width:v,left:e(document).scrollLeft()+u/2-s.parent(".material-placeholder").offset().left-v/2,top:e(document).scrollTop()+l/2-s.parent(".material-placeholder").offset().top-m/2},{duration:275,queue:!1,easing:"easeOutQuad",complete:function(){o=!0}})}}):s.css("left",0).css("top",0).velocity({height:m,width:v,left:e(document).scrollLeft()+u/2-s.parent(".material-placeholder").offset().left-v/2,top:e(document).scrollTop()+l/2-s.parent(".material-placeholder").offset().top-m/2},{duration:275,queue:!1,easing:"easeOutQuad",complete:function(){o=!0}}),e(window).on("scroll.materialbox",function(){i&&t()}),e(window).on("resize.materialbox",function(){i&&t()}),e(document).on("keyup.materialbox",function(e){27===e.keyCode&&!0===o&&i&&t()})})}})},e(document).ready(function(){e(".materialboxed").materialbox()})}(jQuery),function(e){e.fn.parallax=function(){var t=e(window).width();return this.each(function(n){function r(n){var r;r=t<601?i.height()>0?i.height():i.children("img").height():i.height()>0?i.height():500;var o=i.children("img").first(),a=o.height()-r,s=i.offset().top+r,u=i.offset().top,l=e(window).scrollTop(),c=window.innerHeight,f=Math.round(a*((l+c-u)/(r+c)));n&&o.css("display","block"),s>l&&u<l+c&&o.css("transform","translate3D(-50%,"+f+"px, 0)")}var i=e(this);i.addClass("parallax"),i.children("img").one("load",function(){r(!0)}).each(function(){this.complete&&e(this).trigger("load")}),e(window).scroll(function(){t=e(window).width(),r(!1)}),e(window).resize(function(){t=e(window).width(),r(!1)})})}}(jQuery),function(e){var t={init:function(t){t=e.extend({onShow:null,swipeable:!1,responsiveThreshold:1/0},t);var n=Materialize.objectSelectorString(e(this));return this.each(function(r){var i,o,a,s,u=n+r,l=e(this),c=e(window).width(),f=l.find("li.tab a"),d=l.width(),h=e(),p=Math.max(d,l[0].scrollWidth)/f.length,g=0,v=0,m=!1,y=function(e){return Math.ceil(d-e.position().left-e[0].getBoundingClientRect().width-l.scrollLeft())},b=function(e){return Math.floor(e.position().left+l.scrollLeft())},x=function(e){g-e>=0?(s.velocity({right:y(i)},{duration:300,queue:!1,easing:"easeOutQuad"}),s.velocity({left:b(i)},{duration:300,queue:!1,easing:"easeOutQuad",delay:90})):(s.velocity({left:b(i)},{duration:300,queue:!1,easing:"easeOutQuad"}),s.velocity({right:y(i)},{duration:300,queue:!1,easing:"easeOutQuad",delay:90}))};t.swipeable&&c>t.responsiveThreshold&&(t.swipeable=!1),0===(i=e(f.filter('[href="'+location.hash+'"]'))).length&&(i=e(this).find("li.tab a.active").first()),0===i.length&&(i=e(this).find("li.tab a").first()),i.addClass("active"),(g=f.index(i))<0&&(g=0),void 0!==i[0]&&(o=e(i[0].hash)).addClass("active"),l.find(".indicator").length||l.append('<li class="indicator"></li>'),s=l.find(".indicator"),l.append(s),l.is(":visible")&&setTimeout(function(){s.css({right:y(i)}),s.css({left:b(i)})},0),e(window).off("resize.tabs-"+u).on("resize.tabs-"+u,function(){d=l.width(),p=Math.max(d,l[0].scrollWidth)/f.length,g<0&&(g=0),0!==p&&0!==d&&(s.css({right:y(i)}),s.css({left:b(i)}))}),t.swipeable?(f.each(function(){var t=e(Materialize.escapeHash(this.hash));t.addClass("carousel-item"),h=h.add(t)}),a=h.wrapAll('<div class="tabs-content carousel"></div>'),h.css("display",""),e(".tabs-content.carousel").carousel({fullWidth:!0,noWrap:!0,onCycleTo:function(e){if(!m){var n=g;g=a.index(e),i.removeClass("active"),(i=f.eq(g)).addClass("active"),x(n),"function"==typeof t.onShow&&t.onShow.call(l[0],o)}}})):f.not(i).each(function(){e(Materialize.escapeHash(this.hash)).hide()}),l.off("click.tabs").on("click.tabs","a",function(n){if(e(this).parent().hasClass("disabled"))n.preventDefault();else if(!e(this).attr("target")){m=!0,d=l.width(),p=Math.max(d,l[0].scrollWidth)/f.length,i.removeClass("active");var r=o;i=e(this),o=e(Materialize.escapeHash(this.hash)),f=l.find("li.tab a"),i.position(),i.addClass("active"),v=g,(g=f.index(e(this)))<0&&(g=0),t.swipeable?h.length&&h.carousel("set",g,function(){"function"==typeof t.onShow&&t.onShow.call(l[0],o)}):(void 0!==o&&(o.show(),o.addClass("active"),"function"==typeof t.onShow&&t.onShow.call(this,o)),void 0===r||r.is(o)||(r.hide(),r.removeClass("active"))),setTimeout(function(){m=!1},300),x(v),n.preventDefault()}})})},select_tab:function(e){this.find('a[href="#'+e+'"]').trigger("click")}};e.fn.tabs=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.tabs"):t.init.apply(this,arguments)},e(document).ready(function(){e("ul.tabs").tabs()})}(jQuery),function(e){e.fn.tooltip=function(n){return"remove"===n?(this.each(function(){e("#"+e(this).attr("data-tooltip-id")).remove(),e(this).removeAttr("data-tooltip-id"),e(this).off("mouseenter.tooltip mouseleave.tooltip")}),!1):(n=e.extend({delay:350,tooltip:"",position:"bottom",html:!1},n),this.each(function(){var r=Materialize.guid(),i=e(this);i.attr("data-tooltip-id")&&e("#"+i.attr("data-tooltip-id")).remove(),i.attr("data-tooltip-id",r);var o,a,s,u,l,c,f=function(){o=i.attr("data-html")?"true"===i.attr("data-html"):n.html,a=void 0===(a=i.attr("data-delay"))||""===a?n.delay:a,s=void 0===(s=i.attr("data-position"))||""===s?n.position:s,u=void 0===(u=i.attr("data-tooltip"))||""===u?n.tooltip:u};f(),l=function(){var t=e('<div class="material-tooltip"></div>');return u=o?e("<span></span>").html(u):e("<span></span>").text(u),t.append(u).appendTo(e("body")).attr("id",r),(c=e('<div class="backdrop"></div>')).appendTo(t),t}(),i.off("mouseenter.tooltip mouseleave.tooltip");var d,h=!1;i.on({"mouseenter.tooltip":function(e){d=setTimeout(function(){f(),h=!0,l.velocity("stop"),c.velocity("stop"),l.css({visibility:"visible",left:"0px",top:"0px"});var e,n,r,o,a,u,d=i.outerWidth(),p=i.outerHeight(),g=l.outerHeight(),v=l.outerWidth(),m="0px",y="0px",b=c[0].offsetWidth,x=c[0].offsetHeight;"top"===s?(e=i.offset().top-g-5,n=i.offset().left+d/2-v/2,r=t(n,e,v,g),m="-10px",c.css({bottom:0,left:0,borderRadius:"14px 14px 0 0",transformOrigin:"50% 100%",marginTop:g,marginLeft:v/2-b/2})):"left"===s?(e=i.offset().top+p/2-g/2,n=i.offset().left-v-5,r=t(n,e,v,g),y="-10px",c.css({top:"-7px",right:0,width:"14px",height:"14px",borderRadius:"14px 0 0 14px",transformOrigin:"95% 50%",marginTop:g/2,marginLeft:v})):"right"===s?(e=i.offset().top+p/2-g/2,n=i.offset().left+d+5,r=t(n,e,v,g),y="+10px",c.css({top:"-7px",left:0,width:"14px",height:"14px",borderRadius:"0 14px 14px 0",transformOrigin:"5% 50%",marginTop:g/2,marginLeft:"0px"})):(e=i.offset().top+i.outerHeight()+5,n=i.offset().left+d/2-v/2,r=t(n,e,v,g),m="+10px",c.css({top:0,left:0,marginLeft:v/2-b/2})),l.css({top:r.y,left:r.x}),o=Math.SQRT2*v/parseInt(b),a=Math.SQRT2*g/parseInt(x),u=Math.max(o,a),l.velocity({translateY:m,translateX:y},{duration:350,queue:!1}).velocity({opacity:1},{duration:300,delay:50,queue:!1}),c.css({visibility:"visible"}).velocity({opacity:1},{duration:55,delay:0,queue:!1}).velocity({scaleX:u,scaleY:u},{duration:300,delay:0,queue:!1,easing:"easeInOutQuad"})},a)},"mouseleave.tooltip":function(){h=!1,clearTimeout(d),setTimeout(function(){!0!==h&&(l.velocity({opacity:0,translateY:0,translateX:0},{duration:225,queue:!1}),c.velocity({opacity:0,scaleX:1,scaleY:1},{duration:225,queue:!1,complete:function(){c.css({visibility:"hidden"}),l.css({visibility:"hidden"}),h=!1}}))},225)}})}))};var t=function(t,n,r,i){var o=t,a=n;return o<0?o=4:o+r>window.innerWidth&&(o-=o+r-window.innerWidth),a<0?a=4:a+i>window.innerHeight+e(window).scrollTop&&(a-=a+i-window.innerHeight),{x:o,y:a}};e(document).ready(function(){e(".tooltipped").tooltip()})}(jQuery),function(e){"use strict";function t(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t}function n(t){var n=function(e){if(!1===a.allowEvent(e))return null;for(var t=null,n=e.target||e.srcElement;null!==n.parentNode;){if(!(n instanceof SVGElement)&&-1!==n.className.indexOf("waves-effect")){t=n;break}n=n.parentNode}return t}(t);null!==n&&(o.show(t,n),"ontouchstart"in e&&(n.addEventListener("touchend",o.hide,!1),n.addEventListener("touchcancel",o.hide,!1)),n.addEventListener("mouseup",o.hide,!1),n.addEventListener("mouseleave",o.hide,!1),n.addEventListener("dragend",o.hide,!1))}var r=r||{},i=document.querySelectorAll.bind(document),o={duration:750,show:function(e,n){if(2===e.button)return!1;var r=n||this,i=document.createElement("div");i.className="waves-ripple",r.appendChild(i);var a=function(e){var t,n,i={top:0,left:0},o=r&&r.ownerDocument;return t=o.documentElement,void 0!==r.getBoundingClientRect&&(i=r.getBoundingClientRect()),n=function(e){return function(e){return null!==e&&e===e.window}(e)?e:9===e.nodeType&&e.defaultView}(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}}(),s=e.pageY-a.top,u=e.pageX-a.left,l="scale("+r.clientWidth/100*10+")";"touches"in e&&(s=e.touches[0].pageY-a.top,u=e.touches[0].pageX-a.left),i.setAttribute("data-hold",Date.now()),i.setAttribute("data-scale",l),i.setAttribute("data-x",u),i.setAttribute("data-y",s);var c={top:s+"px",left:u+"px"};i.className=i.className+" waves-notransition",i.setAttribute("style",t(c)),i.className=i.className.replace("waves-notransition",""),c["-webkit-transform"]=l,c["-moz-transform"]=l,c["-ms-transform"]=l,c["-o-transform"]=l,c.transform=l,c.opacity="1",c["-webkit-transition-duration"]=o.duration+"ms",c["-moz-transition-duration"]=o.duration+"ms",c["-o-transition-duration"]=o.duration+"ms",c["transition-duration"]=o.duration+"ms",c["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",c["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",c["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",c["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",i.setAttribute("style",t(c))},hide:function(e){a.touchup(e);var n=this,r=null,i=n.getElementsByClassName("waves-ripple");if(!(i.length>0))return!1;var s=(r=i[i.length-1]).getAttribute("data-x"),u=r.getAttribute("data-y"),l=r.getAttribute("data-scale"),c=350-(Date.now()-Number(r.getAttribute("data-hold")));c<0&&(c=0),setTimeout(function(){r.setAttribute("style",t({top:u+"px",left:s+"px",opacity:"0","-webkit-transition-duration":o.duration+"ms","-moz-transition-duration":o.duration+"ms","-o-transition-duration":o.duration+"ms","transition-duration":o.duration+"ms","-webkit-transform":l,"-moz-transform":l,"-ms-transform":l,"-o-transform":l,transform:l})),setTimeout(function(){try{n.removeChild(r)}catch(e){return!1}},o.duration)},c)},wrapInput:function(e){for(var t=0;t<e.length;t++){var n=e[t];if("input"===n.tagName.toLowerCase()){var r=n.parentNode;if("i"===r.tagName.toLowerCase()&&-1!==r.className.indexOf("waves-effect"))continue;var i=document.createElement("i");i.className=n.className+" waves-input-wrapper";var o=n.getAttribute("style");o||(o=""),i.setAttribute("style",o),n.className="waves-button-input",n.removeAttribute("style"),r.replaceChild(i,n),i.appendChild(n)}}}},a={touches:0,allowEvent:function(e){var t=!0;return"touchstart"===e.type?a.touches+=1:"touchend"===e.type||"touchcancel"===e.type?setTimeout(function(){a.touches>0&&(a.touches-=1)},500):"mousedown"===e.type&&a.touches>0&&(t=!1),t},touchup:function(e){a.allowEvent(e)}};r.displayEffect=function(t){"duration"in(t=t||{})&&(o.duration=t.duration),o.wrapInput(i(".waves-effect")),"ontouchstart"in e&&document.body.addEventListener("touchstart",n,!1),document.body.addEventListener("mousedown",n,!1)},r.attach=function(t){"input"===t.tagName.toLowerCase()&&(o.wrapInput([t]),t=t.parentNode),"ontouchstart"in e&&t.addEventListener("touchstart",n,!1),t.addEventListener("mousedown",n,!1)},e.Waves=r,document.addEventListener("DOMContentLoaded",function(){r.displayEffect()},!1)}(window),function(e,t){"use strict";var n={displayLength:1/0,inDuration:300,outDuration:375,className:void 0,completeCallback:void 0,activationPercent:.8},r=function(){function r(t,n,i,o){if(_classCallCheck(this,r),t){this.options={displayLength:n,className:i,completeCallback:o},this.options=e.extend({},r.defaults,this.options),this.message=t,this.panning=!1,this.timeRemaining=this.options.displayLength,0===r._toasts.length&&r._createContainer(),r._toasts.push(this);var a=this.createToast();a.M_Toast=this,this.el=a,this._animateIn(),this.setTimer()}}return _createClass(r,[{key:"createToast",value:function(){var t=document.createElement("div");if(t.classList.add("toast"),this.options.className){var n,i=this.options.className.split(" "),o=void 0;for(o=0,n=i.length;o<n;o++)t.classList.add(i[o])}return("object"==typeof HTMLElement?this.message instanceof HTMLElement:this.message&&"object"==typeof this.message&&null!==this.message&&1===this.message.nodeType&&"string"==typeof this.message.nodeName)?t.appendChild(this.message):this.message instanceof jQuery?e(t).append(this.message):t.innerHTML=this.message,r._container.appendChild(t),t}},{key:"_animateIn",value:function(){t(this.el,{top:0,opacity:1},{duration:300,easing:"easeOutCubic",queue:!1})}},{key:"setTimer",value:function(){var e=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){e.panning||(e.timeRemaining-=20),e.timeRemaining<=0&&e.remove()},20))}},{key:"remove",value:function(){var e=this;window.clearInterval(this.counterInterval);var n=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+n+"px)",this.el.style.opacity=0),t(this.el,{opacity:0,marginTop:"-40px"},{duration:this.options.outDuration,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof e.options.completeCallback&&e.options.completeCallback(),e.el.parentNode.removeChild(e.el),r._toasts.splice(r._toasts.indexOf(e),1),0===r._toasts.length&&r._removeContainer()}})}}],[{key:"_createContainer",value:function(){var e=document.createElement("div");e.setAttribute("id","toast-container"),e.addEventListener("touchstart",r._onDragStart),e.addEventListener("touchmove",r._onDragMove),e.addEventListener("touchend",r._onDragEnd),e.addEventListener("mousedown",r._onDragStart),document.addEventListener("mousemove",r._onDragMove),document.addEventListener("mouseup",r._onDragEnd),document.body.appendChild(e),r._container=e}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",r._onDragMove),document.removeEventListener("mouseup",r._onDragEnd),r._container.parentNode.removeChild(r._container),r._container=null}},{key:"_onDragStart",value:function(t){if(t.target&&e(t.target).closest(".toast").length){var n=e(t.target).closest(".toast")[0].M_Toast;n.panning=!0,r._draggedToast=n,n.el.classList.add("panning"),n.el.style.transition="",n.startingXPos=r._xPos(t),n.time=Date.now(),n.xPos=r._xPos(t)}}},{key:"_onDragMove",value:function(e){if(r._draggedToast){e.preventDefault();var t=r._draggedToast;t.deltaX=Math.abs(t.xPos-r._xPos(e)),t.xPos=r._xPos(e),t.velocityX=t.deltaX/(Date.now()-t.time),t.time=Date.now();var n=t.xPos-t.startingXPos,i=t.el.offsetWidth*t.options.activationPercent;t.el.style.transform="translateX("+n+"px)",t.el.style.opacity=1-Math.abs(n/i)}}},{key:"_onDragEnd",value:function(e){if(r._draggedToast){var t=r._draggedToast;t.panning=!1,t.el.classList.remove("panning");var n=t.el.offsetWidth*t.options.activationPercent;Math.abs(t.xPos-t.startingXPos)>n||t.velocityX>1?(t.wasSwiped=!0,t.remove()):(t.el.style.transition="transform .2s, opacity .2s",t.el.style.transform="",t.el.style.opacity=""),r._draggedToast=null}}},{key:"_xPos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}},{key:"removeAll",value:function(){for(var e in r._toasts)r._toasts[e].remove()}},{key:"defaults",get:function(){return n}}]),r}();r._toasts=[],r._container=null,r._draggedToast=null,Materialize.Toast=r,Materialize.toast=function(e,t,n,i){return new r(e,t,n,i)}}(jQuery,Materialize.Vel),function(e){var t={init:function(t){t=e.extend({menuWidth:300,edge:"left",closeOnClick:!1,draggable:!0,onOpen:null,onClose:null},t),e(this).each(function(){var n=e(this),r=n.attr("data-activates"),i=e("#"+r);300!=t.menuWidth&&i.css("width",t.menuWidth);var o=e('.drag-target[data-sidenav="'+r+'"]');t.draggable?(o.length&&o.remove(),o=e('<div class="drag-target"></div>').attr("data-sidenav",r),e("body").append(o)):o=e(),"left"==t.edge?(i.css("transform","translateX(-100%)"),o.css({left:0})):(i.addClass("right-aligned").css("transform","translateX(100%)"),o.css({right:0})),i.hasClass("fixed")&&window.innerWidth>992&&i.css("transform","translateX(0)"),i.hasClass("fixed")&&e(window).resize(function(){window.innerWidth>992?0!==e("#sidenav-overlay").length&&s?a(!0):i.css("transform","translateX(0%)"):!1===s&&i.css("transform","left"===t.edge?"translateX(-100%)":"translateX(100%)")}),!0===t.closeOnClick&&i.on("click.itemclick","a:not(.collapsible-header)",function(){window.innerWidth>992&&i.hasClass("fixed")||a()});var a=function(n){s=!1,e("body").css({overflow:"",width:""}),e("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){e(this).remove()}}),"left"===t.edge?(o.css({width:"",right:"",left:"0"}),i.velocity({translateX:"-100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){!0===n&&(i.removeAttr("style"),i.css("width",t.menuWidth))}})):(o.css({width:"",right:"0",left:""}),i.velocity({translateX:"100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){!0===n&&(i.removeAttr("style"),i.css("width",t.menuWidth))}})),"function"==typeof t.onClose&&t.onClose.call(this,i)},s=!1;t.draggable&&(o.on("click",function(){s&&a()}),o.hammer({prevent_default:!1}).on("pan",function(n){if("touch"==n.gesture.pointerType){var r=n.gesture.center.x;if(0===r&&0===n.gesture.center.y)return;var o,u=e("body"),l=e("#sidenav-overlay"),c=u.innerWidth();if(u.css("overflow","hidden"),u.width(c),0===l.length&&((l=e('<div id="sidenav-overlay"></div>')).css("opacity",0).click(function(){a()}),"function"==typeof t.onOpen&&t.onOpen.call(this,i),e("body").append(l)),"left"===t.edge&&(r>t.menuWidth?r=t.menuWidth:r<0&&(r=0)),"left"===t.edge)r<t.menuWidth/2?s=!1:r>=t.menuWidth/2&&(s=!0),i.css("transform","translateX("+(r-t.menuWidth)+"px)");else{r<window.innerWidth-t.menuWidth/2?s=!0:r>=window.innerWidth-t.menuWidth/2&&(s=!1);var f=r-t.menuWidth/2;f<0&&(f=0),i.css("transform","translateX("+f+"px)")}"left"===t.edge?l.velocity({opacity:o=r/t.menuWidth},{duration:10,queue:!1,easing:"easeOutQuad"}):(o=Math.abs((r-window.innerWidth)/t.menuWidth),l.velocity({opacity:o},{duration:10,queue:!1,easing:"easeOutQuad"}))}}).on("panend",function(n){if("touch"==n.gesture.pointerType){var r=e("#sidenav-overlay"),a=n.gesture.velocityX,u=n.gesture.center.x,l=u-t.menuWidth,c=u-t.menuWidth/2;l>0&&(l=0),c<0&&(c=0),"left"===t.edge?s&&a<=.3||a<-.5?(0!==l&&i.velocity({translateX:[0,l]},{duration:300,queue:!1,easing:"easeOutQuad"}),r.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),o.css({width:"50%",right:0,left:""}),s=!0):(!s||a>.3)&&(e("body").css({overflow:"",width:""}),i.velocity({translateX:[-1*t.menuWidth-10,l]},{duration:200,queue:!1,easing:"easeOutQuad"}),r.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){"function"==typeof t.onClose&&t.onClose.call(this,i),e(this).remove()}}),o.css({width:"10px",right:"",left:0})):s&&a>=-.3||a>.5?(0!==c&&i.velocity({translateX:[0,c]},{duration:300,queue:!1,easing:"easeOutQuad"}),r.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),o.css({width:"50%",right:"",left:0}),s=!0):(!s||a<-.3)&&(e("body").css({overflow:"",width:""}),i.velocity({translateX:[t.menuWidth+10,c]},{duration:200,queue:!1,easing:"easeOutQuad"}),r.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){"function"==typeof t.onClose&&t.onClose.call(this,i),e(this).remove()}}),o.css({width:"10px",right:0,left:""}))}})),n.off("click.sidenav").on("click.sidenav",function(){if(!0===s)s=!1,a();else{var n=e("body"),r=e('<div id="sidenav-overlay"></div>'),u=n.innerWidth();n.css("overflow","hidden"),n.width(u),e("body").append(o),"left"===t.edge?(o.css({width:"50%",right:0,left:""}),i.velocity({translateX:[0,-1*t.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})):(o.css({width:"50%",right:"",left:0}),i.velocity({translateX:[0,t.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})),r.css("opacity",0).click(function(){s=!1,a(),r.velocity({opacity:0},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){e(this).remove()}})}),e("body").append(r),r.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){s=!0}}),"function"==typeof t.onOpen&&t.onOpen.call(this,i)}return!1})})},destroy:function(){var t=e("#sidenav-overlay"),n=e('.drag-target[data-sidenav="'+e(this).attr("data-activates")+'"]');t.trigger("click"),n.remove(),e(this).off("click"),t.remove()},show:function(){this.trigger("click")},hide:function(){e("#sidenav-overlay").trigger("click")}};e.fn.sideNav=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.sideNav"):t.init.apply(this,arguments)}}(jQuery),function(e){function t(t,n,r,i){var a=e();return e.each(o,function(e,o){if(o.height()>0){var s=o.offset().top,u=o.offset().left,l=u+o.width(),c=s+o.height();!(u>n||l<i||s>r||c<t)&&a.push(o)}}),a}function n(n){++u;var r=i.scrollTop(),o=i.scrollLeft(),s=o+i.width(),c=r+i.height(),f=t(r+l.top+n||200,s+l.right,c+l.bottom,o+l.left);e.each(f,function(e,t){"number"!=typeof t.data("scrollSpy:ticks")&&t.triggerHandler("scrollSpy:enter"),t.data("scrollSpy:ticks",u)}),e.each(a,function(e,t){var n=t.data("scrollSpy:ticks");"number"==typeof n&&n!==u&&(t.triggerHandler("scrollSpy:exit"),t.data("scrollSpy:ticks",null))}),a=f}function r(){i.trigger("scrollSpy:winSize")}var i=e(window),o=[],a=[],s=!1,u=0,l={top:0,right:0,bottom:0,left:0};e.scrollSpy=function(t,r){r=e.extend({throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(e){return'a[href="#'+e+'"]'}},r);var a=[];(t=e(t)).each(function(t,n){o.push(e(n)),e(n).data("scrollSpy:id",t),e('a[href="#'+e(n).attr("id")+'"]').click(function(t){t.preventDefault();var n=e(Materialize.escapeHash(this.hash)).offset().top+1;e("html, body").animate({scrollTop:n-r.scrollOffset},{duration:400,queue:!1,easing:"easeOutCubic"})})}),l.top=r.offsetTop||0,l.right=r.offsetRight||0,l.bottom=r.offsetBottom||0,l.left=r.offsetLeft||0;var u=Materialize.throttle(function(){n(r.scrollOffset)},r.throttle||100),c=function(){e(document).ready(u)};return s||(i.on("scroll",c),i.on("resize",c),s=!0),setTimeout(c,0),t.on("scrollSpy:enter",function(){a=e.grep(a,function(e){return 0!=e.height()});var t=e(this);a[0]?(e(r.getActiveElement(a[0].attr("id"))).removeClass(r.activeClass),t.data("scrollSpy:id")<a[0].data("scrollSpy:id")?a.unshift(e(this)):a.push(e(this))):a.push(e(this)),e(r.getActiveElement(a[0].attr("id"))).addClass(r.activeClass)}),t.on("scrollSpy:exit",function(){if((a=e.grep(a,function(e){return 0!=e.height()}))[0]){e(r.getActiveElement(a[0].attr("id"))).removeClass(r.activeClass);var t=e(this);(a=e.grep(a,function(e){return e.attr("id")!=t.attr("id")}))[0]&&e(r.getActiveElement(a[0].attr("id"))).addClass(r.activeClass)}}),t},e.winSizeSpy=function(t){return e.winSizeSpy=function(){return i},t=t||{throttle:100},i.on("resize",Materialize.throttle(r,t.throttle||100))},e.fn.scrollSpy=function(t){return e.scrollSpy(e(this),t)}}(jQuery),function(e){e(document).ready(function(){Materialize.updateTextFields=function(){e("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea").each(function(t,n){var r=e(this);e(n).val().length>0||e(n).is(":focus")||n.autofocus||void 0!==r.attr("placeholder")?r.siblings("label").addClass("active"):e(n)[0].validity?r.siblings("label").toggleClass("active",!0===e(n)[0].validity.badInput):r.siblings("label").removeClass("active")})};var t="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";e(document).on("change",t,function(){0===e(this).val().length&&void 0===e(this).attr("placeholder")||e(this).siblings("label").addClass("active"),validate_field(e(this))}),e(document).ready(function(){Materialize.updateTextFields()}),e(document).on("reset",function(n){var r=e(n.target);r.is("form")&&(r.find(t).removeClass("valid").removeClass("invalid"),r.find(t).each(function(){""===e(this).attr("value")&&e(this).siblings("label").removeClass("active")}),r.find("select.initialized").each(function(){var e=r.find("option[selected]").text();r.siblings("input.select-dropdown").val(e)}))}),e(document).on("focus",t,function(){e(this).siblings("label, .prefix").addClass("active")}),e(document).on("blur",t,function(){var t=e(this),n=".prefix";0===t.val().length&&!0!==t[0].validity.badInput&&void 0===t.attr("placeholder")&&(n+=", label"),t.siblings(n).removeClass("active"),validate_field(t)}),window.validate_field=function(e){var t=void 0!==e.attr("data-length"),n=parseInt(e.attr("data-length")),r=e.val().length;0!==e.val().length||!1!==e[0].validity.badInput||e.is(":required")?e.hasClass("validate")&&(e.is(":valid")&&t&&r<=n||e.is(":valid")&&!t?(e.removeClass("invalid"),e.addClass("valid")):(e.removeClass("valid"),e.addClass("invalid"))):e.hasClass("validate")&&(e.removeClass("valid"),e.removeClass("invalid"))},e(document).on("keyup.radio","input[type=radio], input[type=checkbox]",function(t){if(9===t.which)return e(this).addClass("tabbed"),void e(this).one("blur",function(t){e(this).removeClass("tabbed")})});var n=e(".hiddendiv").first();n.length||(n=e('<div class="hiddendiv common"></div>'),e("body").append(n)),e(".materialize-textarea").each(function(){var t=e(this);t.data("original-height",t.height()),t.data("previous-length",t.val().length)}),e("body").on("keyup keydown autoresize",".materialize-textarea",function(){!function(t){var r=t.css("font-family"),i=t.css("font-size"),o=t.css("line-height"),a=t.css("padding");i&&n.css("font-size",i),r&&n.css("font-family",r),o&&n.css("line-height",o),a&&n.css("padding",a),t.data("original-height")||t.data("original-height",t.height()),"off"===t.attr("wrap")&&n.css("overflow-wrap","normal").css("white-space","pre"),n.text(t.val()+"\n");var s=n.html().replace(/\n/g,"<br>");n.html(s),t.is(":visible")?n.css("width",t.width()):n.css("width",e(window).width()/2),t.data("original-height")<=n.height()?t.css("height",n.height()):t.val().length<t.data("previous-length")&&t.css("height",t.data("original-height")),t.data("previous-length",t.val().length)}(e(this))}),e(document).on("change",'.file-field input[type="file"]',function(){for(var t=e(this).closest(".file-field").find("input.file-path"),n=e(this)[0].files,r=[],i=0;i<n.length;i++)r.push(n[i].name);t.val(r.join(", ")),t.trigger("change")});var r="input[type=range]",i=!1;e(r).each(function(){var t=e('<span class="thumb"><span class="value"></span></span>');e(this).after(t)});var o=function(e){var t=-7+parseInt(e.parent().css("padding-left"))+"px";e.velocity({height:"30px",width:"30px",top:"-30px",marginLeft:t},{duration:300,easing:"easeOutExpo"})},a=function(e){var t=e.width()-15,n=parseFloat(e.attr("max")),r=parseFloat(e.attr("min"));return(parseFloat(e.val())-r)/(n-r)*t};e(document).on("change",r,function(t){var n=e(this).siblings(".thumb");n.find(".value").html(e(this).val()),n.hasClass("active")||o(n);var r=a(e(this));n.addClass("active").css("left",r)}),e(document).on("mousedown touchstart",r,function(t){var n=e(this).siblings(".thumb");if(n.length<=0&&(n=e('<span class="thumb"><span class="value"></span></span>'),e(this).after(n)),n.find(".value").html(e(this).val()),i=!0,e(this).addClass("active"),n.hasClass("active")||o(n),"input"!==t.type){var r=a(e(this));n.addClass("active").css("left",r)}}),e(document).on("mouseup touchend",".range-field",function(){i=!1,e(this).removeClass("active")}),e(document).on("input mousemove touchmove",".range-field",function(t){var n=e(this).children(".thumb"),s=e(this).find(r);if(i){n.hasClass("active")||o(n);var u=a(s);n.addClass("active").css("left",u),n.find(".value").html(n.siblings(r).val())}}),e(document).on("mouseout touchleave",".range-field",function(){if(!i){var t=e(this).children(".thumb"),n=7+parseInt(e(this).css("padding-left"))+"px";t.hasClass("active")&&t.velocity({height:"0",width:"0",top:"10px",marginLeft:n},{duration:100}),t.removeClass("active")}}),e.fn.autocomplete=function(t){return t=e.extend({data:{},limit:1/0,onAutocomplete:null,minLength:1},t),this.each(function(){var n,r=e(this),i=t.data,o=0,a=-1,s=r.closest(".input-field");if(e.isEmptyObject(i))r.off("keyup.autocomplete focus.autocomplete");else{var u,l=e('<ul class="autocomplete-content dropdown-content"></ul>');s.length?(u=s.children(".autocomplete-content.dropdown-content").first()).length||s.append(l):(u=r.next(".autocomplete-content.dropdown-content")).length||r.after(l),u.length&&(l=u);var c=function(e,t){var n=t.find("img"),r=t.text().toLowerCase().indexOf(""+e.toLowerCase()),i=r+e.length-1,o=t.text().slice(0,r),a=t.text().slice(r,i+1),s=t.text().slice(i+1);t.html("<span>"+o+"<span class='highlight'>"+a+"</span>"+s+"</span>"),n.length&&t.prepend(n)},f=function(){l.empty(),a=-1,l.find(".active").removeClass("active"),n=void 0};r.off("blur.autocomplete").on("blur.autocomplete",function(){f()}),r.off("keyup.autocomplete focus.autocomplete").on("keyup.autocomplete focus.autocomplete",function(a){o=0;var s=r.val().toLowerCase();if(13!==a.which&&38!==a.which&&40!==a.which){if(n!==s&&(f(),s.length>=t.minLength))for(var u in i)if(i.hasOwnProperty(u)&&-1!==u.toLowerCase().indexOf(s)){if(o>=t.limit)break;var d=e("<li></li>");d.append(i[u]?'<img src="'+i[u]+'" class="right circle"><span>'+u+"</span>":"<span>"+u+"</span>"),l.append(d),c(s,d),o++}n=s}}),r.off("keydown.autocomplete").on("keydown.autocomplete",function(e){var t,n=e.which,r=l.children("li").length,i=l.children(".active").first();13===n&&a>=0?(t=l.children("li").eq(a)).length&&(t.trigger("mousedown.autocomplete"),e.preventDefault()):38!==n&&40!==n||(e.preventDefault(),38===n&&a>0&&a--,40===n&&a<r-1&&a++,i.removeClass("active"),a>=0&&l.children("li").eq(a).addClass("active"))}),l.off("mousedown.autocomplete touchstart.autocomplete").on("mousedown.autocomplete touchstart.autocomplete","li",function(){var n=e(this).text().trim();r.val(n),r.trigger("change"),f(),"function"==typeof t.onAutocomplete&&t.onAutocomplete.call(this,n)})}})}}),e.fn.material_select=function(t){function n(e,t,n){var r=e.indexOf(t),i=-1===r;return i?e.push(t):e.splice(r,1),n.siblings("ul.dropdown-content").find("li:not(.optgroup)").eq(t).toggleClass("active"),n.find("option").eq(t).prop("selected",i),function(e,t){for(var n="",r=0,i=e.length;r<i;r++){var o=t.find("option").eq(e[r]).text();n+=0===r?o:", "+o}""===n&&(n=t.find("option:disabled").eq(0).text()),t.siblings("input.select-dropdown").val(n)}(e,n),i}e(this).each(function(){var r=e(this);if(!r.hasClass("browser-default")){var i=!!r.attr("multiple"),o=r.attr("data-select-id");if(o&&(r.parent().find("span.caret").remove(),r.parent().find("input").remove(),r.unwrap(),e("ul#select-options-"+o).remove()),"destroy"===t)return r.removeAttr("data-select-id").removeClass("initialized"),void e(window).off("click.select");var a=Materialize.guid();r.attr("data-select-id",a);var s=e('<div class="select-wrapper"></div>');s.addClass(r.attr("class")),r.is(":disabled")&&s.addClass("disabled");var u=e('<ul id="select-options-'+a+'" class="dropdown-content select-dropdown '+(i?"multiple-select-dropdown":"")+'"></ul>'),l=r.children("option, optgroup"),c=[],f=!1,d=r.find("option:selected").html()||r.find("option:first").html()||"",h=function(t,n,r){var o=n.is(":disabled")?"disabled ":"",a="optgroup-option"===r?"optgroup-option ":"",s=i?'<input type="checkbox"'+o+"/><label></label>":"",l=n.data("icon"),c=n.attr("class");if(l){var f="";return c&&(f=' class="'+c+'"'),u.append(e('<li class="'+o+a+'"><img alt="" src="'+l+'"'+f+"><span>"+s+n.html()+"</span></li>")),!0}u.append(e('<li class="'+o+a+'"><span>'+s+n.html()+"</span></li>"))};l.length&&l.each(function(){if(e(this).is("option"))i?h(0,e(this),"multiple"):h(0,e(this));else if(e(this).is("optgroup")){var t=e(this).children("option");u.append(e('<li class="optgroup"><span>'+e(this).attr("label")+"</span></li>")),t.each(function(){h(0,e(this),"optgroup-option")})}}),u.find("li:not(.optgroup)").each(function(o){e(this).click(function(a){if(!e(this).hasClass("disabled")&&!e(this).hasClass("optgroup")){var s=!0;i?(e('input[type="checkbox"]',this).prop("checked",function(e,t){return!t}),s=n(c,o,r),v.trigger("focus")):(u.find("li").removeClass("active"),e(this).toggleClass("active"),v.val(e(this).text())),m(u,e(this)),r.find("option").eq(o).prop("selected",s),r.trigger("change"),void 0!==t&&t()}a.stopPropagation()})}),r.wrap(s);var p=e('<span class="caret">&#9660;</span>'),g=d.replace(/"/g,"&quot;"),v=e('<input type="text" class="select-dropdown" readonly="true" '+(r.is(":disabled")?"disabled":"")+' data-activates="select-options-'+a+'" value="'+g+'"/>');r.before(v),v.before(p),v.after(u),r.is(":disabled")||v.dropdown({hover:!1}),r.attr("tabindex")&&e(v[0]).attr("tabindex",r.attr("tabindex")),r.addClass("initialized"),v.on({focus:function(){if(e("ul.select-dropdown").not(u[0]).is(":visible")&&(e("input.select-dropdown").trigger("close"),e(window).off("click.select")),!u.is(":visible")){e(this).trigger("open",["focus"]);var t=e(this).val();i&&t.indexOf(",")>=0&&(t=t.split(",")[0]);var n=u.find("li").filter(function(){return e(this).text().toLowerCase()===t.toLowerCase()})[0];m(u,n,!0),e(window).off("click.select").on("click.select",function(){i&&(f||v.trigger("close")),e(window).off("click.select")})}},click:function(e){e.stopPropagation()}}),v.on("blur",function(){i||(e(this).trigger("close"),e(window).off("click.select")),u.find("li.selected").removeClass("selected")}),u.hover(function(){f=!0},function(){f=!1}),i&&r.find("option:selected:not(:disabled)").each(function(){var e=this.index;n(c,e,r),u.find("li:not(.optgroup)").eq(e).find(":checkbox").prop("checked",!0)});var m=function(t,n,r){if(n){t.find("li.selected").removeClass("selected");var o=e(n);o.addClass("selected"),i&&!r||u.scrollTo(o)}},y=[];v.on("keydown",function(t){if(9!=t.which)if(40!=t.which||u.is(":visible")){if(13!=t.which||u.is(":visible")){t.preventDefault();var n=String.fromCharCode(t.which).toLowerCase();if(n&&-1===[9,13,27,38,40].indexOf(t.which)){y.push(n);var r=y.join(""),o=u.find("li").filter(function(){return 0===e(this).text().toLowerCase().indexOf(r)})[0];o&&m(u,o)}if(13==t.which){var a=u.find("li.selected:not(.disabled)")[0];a&&(e(a).trigger("click"),i||v.trigger("close"))}40==t.which&&(o=u.find("li.selected").length?u.find("li.selected").next("li:not(.disabled)")[0]:u.find("li:not(.disabled)")[0],m(u,o)),27==t.which&&v.trigger("close"),38==t.which&&(o=u.find("li.selected").prev("li:not(.disabled)")[0])&&m(u,o),setTimeout(function(){y=[]},1e3)}}else v.trigger("open");else v.trigger("close")})}})}}(jQuery),function(e){var t={init:function(t){return t=e.extend({indicators:!0,height:400,transition:500,interval:6e3},t),this.each(function(){function n(e,t){e.hasClass("center-align")?e.velocity({opacity:0,translateY:-100},{duration:t,queue:!1}):e.hasClass("right-align")?e.velocity({opacity:0,translateX:100},{duration:t,queue:!1}):e.hasClass("left-align")&&e.velocity({opacity:0,translateX:-100},{duration:t,queue:!1})}function r(e){e>=l.length?e=0:e<0&&(e=l.length-1),(c=u.find(".active").index())!=e&&(i=l.eq(c),$caption=i.find(".caption"),i.removeClass("active"),i.velocity({opacity:0},{duration:t.transition,queue:!1,easing:"easeOutQuad",complete:function(){l.not(".active").velocity({opacity:0,translateX:0,translateY:0},{duration:0,queue:!1})}}),n($caption,t.transition),t.indicators&&o.eq(c).removeClass("active"),l.eq(e).velocity({opacity:1},{duration:t.transition,queue:!1,easing:"easeOutQuad"}),l.eq(e).find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:t.transition,delay:t.transition,queue:!1,easing:"easeOutQuad"}),l.eq(e).addClass("active"),t.indicators&&o.eq(e).addClass("active"))}var i,o,a,s=e(this),u=s.find("ul.slides").first(),l=u.find("> li"),c=u.find(".active").index();-1!=c&&(i=l.eq(c)),s.hasClass("fullscreen")||(s.height(t.indicators?t.height+40:t.height),u.height(t.height)),l.find(".caption").each(function(){n(e(this),0)}),l.find("img").each(function(){var t="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";e(this).attr("src")!==t&&(e(this).css("background-image",'url("'+e(this).attr("src")+'")'),e(this).attr("src",t))}),t.indicators&&(o=e('<ul class="indicators"></ul>'),l.each(function(n){var i=e('<li class="indicator-item"></li>');i.click(function(){r(u.parent().find(e(this)).index()),clearInterval(a),a=setInterval(function(){c=u.find(".active").index(),l.length==c+1?c=0:c+=1,r(c)},t.transition+t.interval)}),o.append(i)}),s.append(o),o=s.find("ul.indicators").find("li.indicator-item")),i?i.show():(l.first().addClass("active").velocity({opacity:1},{duration:t.transition,queue:!1,easing:"easeOutQuad"}),i=l.eq(c=0),t.indicators&&o.eq(c).addClass("active")),i.find("img").each(function(){i.find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:t.transition,queue:!1,easing:"easeOutQuad"})}),a=setInterval(function(){r((c=u.find(".active").index())+1)},t.transition+t.interval);var f=!1,d=!1;s.hammer({prevent_default:!1}).on("pan",function(e){if("touch"===e.gesture.pointerType){clearInterval(a);var t,n=e.gesture.direction,r=e.gesture.deltaX,i=e.gesture.velocityX,o=e.gesture.velocityY;$curr_slide=u.find(".active"),Math.abs(i)>Math.abs(o)&&$curr_slide.velocity({translateX:r},{duration:50,queue:!1,easing:"easeOutQuad"}),4===n&&(r>s.innerWidth()/2||i<-.65)?d=!0:2===n&&(r<-1*s.innerWidth()/2||i>.65)&&(f=!0),f&&(0===(t=$curr_slide.next()).length&&(t=l.first()),t.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"})),d&&(0===(t=$curr_slide.prev()).length&&(t=l.last()),t.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"}))}}).on("panend",function(e){"touch"===e.gesture.pointerType&&($curr_slide=u.find(".active"),curr_index=u.find(".active").index(),!d&&!f||l.length<=1?$curr_slide.velocity({translateX:0},{duration:300,queue:!1,easing:"easeOutQuad"}):f?(r(curr_index+1),$curr_slide.velocity({translateX:-1*s.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})):d&&(r(curr_index-1),$curr_slide.velocity({translateX:s.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})),f=!1,d=!1,clearInterval(a),a=setInterval(function(){c=u.find(".active").index(),l.length==c+1?c=0:c+=1,r(c)},t.transition+t.interval))}),s.on("sliderPause",function(){clearInterval(a)}),s.on("sliderStart",function(){clearInterval(a),a=setInterval(function(){c=u.find(".active").index(),l.length==c+1?c=0:c+=1,r(c)},t.transition+t.interval)}),s.on("sliderNext",function(){r((c=u.find(".active").index())+1)}),s.on("sliderPrev",function(){r((c=u.find(".active").index())-1)})})},pause:function(){e(this).trigger("sliderPause")},start:function(){e(this).trigger("sliderStart")},next:function(){e(this).trigger("sliderNext")},prev:function(){e(this).trigger("sliderPrev")}};e.fn.slider=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.tooltip"):t.init.apply(this,arguments)}}(jQuery),function(e){e(document).ready(function(){e(document).on("click.card",".card",function(t){if(e(this).find("> .card-reveal").length){var n=e(t.target).closest(".card");void 0===n.data("initialOverflow")&&n.data("initialOverflow",void 0===n.css("overflow")?"":n.css("overflow")),e(t.target).is(e(".card-reveal .card-title"))||e(t.target).is(e(".card-reveal .card-title i"))?e(this).find(".card-reveal").velocity({translateY:0},{duration:225,queue:!1,easing:"easeInOutQuad",complete:function(){e(this).css({display:"none"}),n.css("overflow",n.data("initialOverflow"))}}):(e(t.target).is(e(".card .activator"))||e(t.target).is(e(".card .activator i")))&&(n.css("overflow","hidden"),e(this).find(".card-reveal").css({display:"block"}).velocity("stop",!1).velocity({translateY:"-100%"},{duration:300,queue:!1,easing:"easeInOutQuad"}))}})})}(jQuery),function(e){var t={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{}};e(document).ready(function(){e(document).on("click",".chip .close",function(t){e(this).closest(".chips").attr("data-initialized")||e(this).closest(".chip").remove()})}),e.fn.material_chip=function(n){var r=this;if(this.$el=e(this),this.$document=e(document),this.SELS={CHIPS:".chips",CHIP:".chip",INPUT:"input",DELETE:".material-icons",SELECTED_CHIP:".selected"},"data"===n)return this.$el.data("chips");var i=e.extend({},t,n);r.hasAutocomplete=!e.isEmptyObject(i.autocompleteOptions.data),this.init=function(){var t=0;r.$el.each(function(){var n=e(this),o=Materialize.guid();r.chipId=o,i.data&&i.data instanceof Array||(i.data=[]),n.data("chips",i.data),n.attr("data-index",t),n.attr("data-initialized",!0),n.hasClass(r.SELS.CHIPS)||n.addClass("chips"),r.chips(n,o),t++})},this.handleEvents=function(){var t=r.SELS;r.$document.off("click.chips-focus",t.CHIPS).on("click.chips-focus",t.CHIPS,function(n){e(n.target).find(t.INPUT).focus()}),r.$document.off("click.chips-select",t.CHIP).on("click.chips-select",t.CHIP,function(n){var i=e(n.target);if(i.length){var o=i.hasClass("selected"),a=i.closest(t.CHIPS);e(t.CHIP).removeClass("selected"),o||r.selectChip(i.index(),a)}}),r.$document.off("keydown.chips").on("keydown.chips",function(n){if(!e(n.target).is("input, textarea")){var i,o=r.$document.find(t.CHIP+t.SELECTED_CHIP),a=o.closest(t.CHIPS),s=o.siblings(t.CHIP).length;if(o.length)if(8===n.which||46===n.which){n.preventDefault(),i=o.index(),r.deleteChip(i,a);var u=null;i+1<s?u=i:i!==s&&i+1!==s||(u=s-1),u<0&&(u=null),null!==u&&r.selectChip(u,a),s||a.find("input").focus()}else if(37===n.which){if((i=o.index()-1)<0)return;e(t.CHIP).removeClass("selected"),r.selectChip(i,a)}else if(39===n.which){if(i=o.index()+1,e(t.CHIP).removeClass("selected"),i>s)return void a.find("input").focus();r.selectChip(i,a)}}}),r.$document.off("focusin.chips",t.CHIPS+" "+t.INPUT).on("focusin.chips",t.CHIPS+" "+t.INPUT,function(n){var r=e(n.target).closest(t.CHIPS);r.addClass("focus"),r.siblings("label, .prefix").addClass("active"),e(t.CHIP).removeClass("selected")}),r.$document.off("focusout.chips",t.CHIPS+" "+t.INPUT).on("focusout.chips",t.CHIPS+" "+t.INPUT,function(n){var r=e(n.target).closest(t.CHIPS);r.removeClass("focus"),void 0!==r.data("chips")&&r.data("chips").length||r.siblings("label").removeClass("active"),r.siblings(".prefix").removeClass("active")}),r.$document.off("keydown.chips-add",t.CHIPS+" "+t.INPUT).on("keydown.chips-add",t.CHIPS+" "+t.INPUT,function(n){var i=e(n.target),o=i.closest(t.CHIPS),a=o.children(t.CHIP).length;if(13===n.which){if(r.hasAutocomplete&&o.find(".autocomplete-content.dropdown-content").length&&o.find(".autocomplete-content.dropdown-content").children().length)return;return n.preventDefault(),r.addChip({tag:i.val()},o),void i.val("")}if((8===n.keyCode||37===n.keyCode)&&""===i.val()&&a)return n.preventDefault(),r.selectChip(a-1,o),void i.blur()}),r.$document.off("click.chips-delete",t.CHIPS+" "+t.DELETE).on("click.chips-delete",t.CHIPS+" "+t.DELETE,function(n){var i=e(n.target),o=i.closest(t.CHIPS),a=i.closest(t.CHIP);n.stopPropagation(),r.deleteChip(a.index(),o),o.find("input").focus()})},this.chips=function(t,n){t.empty(),t.data("chips").forEach(function(e){t.append(r.renderChip(e))}),t.append(e('<input id="'+n+'" class="input" placeholder="">')),r.setPlaceholder(t);var o=t.next("label");o.length&&(o.attr("for",n),void 0!==t.data("chips")&&t.data("chips").length&&o.addClass("active"));var a=e("#"+n);r.hasAutocomplete&&(i.autocompleteOptions.onAutocomplete=function(e){r.addChip({tag:e},t),a.val(""),a.focus()},a.autocomplete(i.autocompleteOptions))},this.renderChip=function(t){if(t.tag){var n=e('<div class="chip"></div>');return n.text(t.tag),t.image&&n.prepend(e("<img />").attr("src",t.image)),n.append(e('<i class="material-icons close">close</i>')),n}},this.setPlaceholder=function(e){void 0!==e.data("chips")&&!e.data("chips").length&&i.placeholder?e.find("input").prop("placeholder",i.placeholder):(void 0===e.data("chips")||e.data("chips").length)&&i.secondaryPlaceholder&&e.find("input").prop("placeholder",i.secondaryPlaceholder)},this.isValid=function(e,t){for(var n=e.data("chips"),r=!1,i=0;i<n.length;i++)if(n[i].tag===t.tag)return void(r=!0);return""!==t.tag&&!r},this.addChip=function(e,t){if(r.isValid(t,e)){for(var n=r.renderChip(e),i=[],o=t.data("chips"),a=0;a<o.length;a++)i.push(o[a]);i.push(e),t.data("chips",i),n.insertBefore(t.find("input")),t.trigger("chip.add",e),r.setPlaceholder(t)}},this.deleteChip=function(e,t){var n=t.data("chips")[e];t.find(".chip").eq(e).remove();for(var i=[],o=t.data("chips"),a=0;a<o.length;a++)a!==e&&i.push(o[a]);t.data("chips",i),t.trigger("chip.delete",n),r.setPlaceholder(t)},this.selectChip=function(e,t){var n=t.find(".chip").eq(e);n&&!1===n.hasClass("selected")&&(n.addClass("selected"),t.trigger("chip.select",t.data("chips")[e]))},this.getChipsElement=function(e,t){return t.eq(e)},this.init(),this.handleEvents()}}(jQuery),function(e){e.fn.pushpin=function(t){return"remove"===t?(this.each(function(){(id=e(this).data("pushpin-id"))&&(e(window).off("scroll."+id),e(this).removeData("pushpin-id").removeClass("pin-top pinned pin-bottom").removeAttr("style"))}),!1):(t=e.extend({top:0,bottom:1/0,offset:0},t),$index=0,this.each(function(){function n(e){e.removeClass("pin-top"),e.removeClass("pinned"),e.removeClass("pin-bottom")}function r(r,i){r.each(function(){t.top<=i&&t.bottom>=i&&!e(this).hasClass("pinned")&&(n(e(this)),e(this).css("top",t.offset),e(this).addClass("pinned")),i<t.top&&!e(this).hasClass("pin-top")&&(n(e(this)),e(this).css("top",0),e(this).addClass("pin-top")),i>t.bottom&&!e(this).hasClass("pin-bottom")&&(n(e(this)),e(this).addClass("pin-bottom"),e(this).css("top",t.bottom-a))})}var i=Materialize.guid(),o=e(this),a=e(this).offset().top;e(this).data("pushpin-id",i),r(o,e(window).scrollTop()),e(window).on("scroll."+i,function(){var n=e(window).scrollTop()+t.offset;r(o,n)})}))}}(jQuery),function(e){e(document).ready(function(){e.fn.reverse=[].reverse,e(document).on("mouseenter.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(n){var r=e(this);t(r)}),e(document).on("mouseleave.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(t){var r=e(this);n(r)}),e(document).on("click.fabClickToggle",".fixed-action-btn.click-to-toggle > a",function(r){var i=e(this).parent();i.hasClass("active")?n(i):t(i)}),e(document).on("click.fabToolbar",".fixed-action-btn.toolbar > a",function(t){var n=e(this).parent();r(n)})}),e.fn.extend({openFAB:function(){t(e(this))},closeFAB:function(){n(e(this))},openToolbar:function(){r(e(this))},closeToolbar:function(){i(e(this))}});var t=function(t){var n=t;if(!1===n.hasClass("active")){var r,i;!0===n.hasClass("horizontal")?i=40:r=40,n.addClass("active"),n.find("ul .btn-floating").velocity({scaleY:".4",scaleX:".4",translateY:r+"px",translateX:i+"px"},{duration:0});var o=0;n.find("ul .btn-floating").reverse().each(function(){e(this).velocity({opacity:"1",scaleX:"1",scaleY:"1",translateY:"0",translateX:"0"},{duration:80,delay:o}),o+=40})}},n=function(e){var t,n,r=e;!0===r.hasClass("horizontal")?n=40:t=40,r.removeClass("active"),r.find("ul .btn-floating").velocity("stop",!0),r.find("ul .btn-floating").velocity({opacity:"0",scaleX:".4",scaleY:".4",translateY:t+"px",translateX:n+"px"},{duration:80})},r=function(t){if("true"!==t.attr("data-open")){var n,r,o,a=window.innerWidth,s=window.innerHeight,u=t[0].getBoundingClientRect(),l=t.find("> a").first(),c=t.find("> ul").first(),f=e('<div class="fab-backdrop"></div>'),d=l.css("background-color");l.append(f),n=u.left-a/2+u.width/2,r=s-u.bottom,o=a/f.width(),t.attr("data-origin-bottom",u.bottom),t.attr("data-origin-left",u.left),t.attr("data-origin-width",u.width),t.addClass("active"),t.attr("data-open",!0),t.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+n+"px)",transition:"none"}),l.css({transform:"translateY("+-r+"px)",transition:"none"}),f.css({"background-color":d}),setTimeout(function(){t.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),l.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){t.css({overflow:"hidden","background-color":d}),f.css({transform:"scale("+o+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),c.find("> li > a").css({opacity:1}),e(window).on("scroll.fabToolbarClose",function(){i(t),e(window).off("scroll.fabToolbarClose"),e(document).off("click.fabToolbarClose")}),e(document).on("click.fabToolbarClose",function(n){e(n.target).closest(c).length||(i(t),e(window).off("scroll.fabToolbarClose"),e(document).off("click.fabToolbarClose"))})},100)},0)}},i=function(e){if("true"===e.attr("data-open")){var t,n,r=window.innerWidth,i=window.innerHeight,o=e.attr("data-origin-width"),a=e.attr("data-origin-bottom"),s=e.attr("data-origin-left"),u=e.find("> .btn-floating").first(),l=e.find("> ul").first(),c=e.find(".fab-backdrop"),f=u.css("background-color");t=s-r/2+o/2,n=i-a,c.width(),e.removeClass("active"),e.attr("data-open",!1),e.css({"background-color":"transparent",transition:"none"}),u.css({transition:"none"}),c.css({transform:"scale(0)","background-color":f}),l.find("> li > a").css({opacity:""}),setTimeout(function(){c.remove(),e.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-t+"px,0,0)"}),u.css({overflow:"",transform:"translate3d(0,"+n+"px,0)"}),setTimeout(function(){e.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),u.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}}(jQuery),function(e){Materialize.fadeInImage=function(t){var n;if("string"==typeof t)n=e(t);else{if("object"!=typeof t)return;n=t}n.css({opacity:0}),e(n).velocity({opacity:1},{duration:650,queue:!1,easing:"easeOutSine"}),e(n).velocity({opacity:1},{duration:1300,queue:!1,easing:"swing",step:function(t,n){n.start=100;var r=t/100,i=150-(100-t)/1.75;i<100&&(i=100),t>=0&&e(this).css({"-webkit-filter":"grayscale("+r+")brightness("+i+"%)",filter:"grayscale("+r+")brightness("+i+"%)"})}})},Materialize.showStaggeredList=function(t){var n;if("string"==typeof t)n=e(t);else{if("object"!=typeof t)return;n=t}var r=0;n.find("li").velocity({translateX:"-100px"},{duration:0}),n.find("li").each(function(){e(this).velocity({opacity:"1",translateX:"0"},{duration:800,delay:r,easing:[60,10]}),r+=120})},e(document).ready(function(){var t=!1,n=!1;e(".dismissable").each(function(){e(this).hammer({prevent_default:!1}).on("pan",function(r){if("touch"===r.gesture.pointerType){var i=e(this),o=r.gesture.direction,a=r.gesture.deltaX,s=r.gesture.velocityX;i.velocity({translateX:a},{duration:50,queue:!1,easing:"easeOutQuad"}),4===o&&(a>i.innerWidth()/2||s<-.75)&&(t=!0),2===o&&(a<-1*i.innerWidth()/2||s>.75)&&(n=!0)}}).on("panend",function(r){if(Math.abs(r.gesture.deltaX)<e(this).innerWidth()/2&&(n=!1,t=!1),"touch"===r.gesture.pointerType){var i,o=e(this);t||n?(i=t?o.innerWidth():-1*o.innerWidth(),o.velocity({translateX:i},{duration:100,queue:!1,easing:"easeOutQuad",complete:function(){o.css("border","none"),o.velocity({height:0,padding:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){o.remove()}})}})):o.velocity({translateX:0},{duration:100,queue:!1,easing:"easeOutQuad"}),t=!1,n=!1}})})})}(jQuery),function(e){var t=!1;Materialize.scrollFire=function(e){var n=Materialize.throttle(function(){!function(){for(var t=window.pageYOffset+window.innerHeight,n=0;n<e.length;n++){var r=e[n],i=r.offset,o=r.callback,a=document.querySelector(r.selector);null!==a&&t>a.getBoundingClientRect().top+window.pageYOffset+i&&!0!==r.done&&("function"==typeof o?o.call(this,a):"string"==typeof o&&new Function(o)(a),r.done=!0)}}()},e.throttle||100);t||(window.addEventListener("scroll",n),window.addEventListener("resize",n),t=!0),setTimeout(n,0)}}(jQuery),Materialize.Picker=function(e){function t(i,a,l,c){function f(){return t._.node("div",t._.node("div",t._.node("div",t._.node("div",x.component.nodes(g.open),m.box),m.wrap),m.frame),m.holder)}function d(e){var t=e.keyCode,n=/^(8|46)$/.test(t);if(27==t)return x.close(),!1;(32==t||n||!g.open&&x.component.key[t])&&(e.preventDefault(),e.stopPropagation(),n?x.clear().close():x.open())}function h(e){e.stopPropagation(),"focus"==e.type&&x.$root.addClass(m.focused),x.open()}if(!i)return t;var p=!1,g={id:i.id||"P"+Math.abs(~~(Math.random()*new Date))},v=l?e.extend(!0,{},l.defaults,c):c||{},m=e.extend({},t.klasses(),v.klass),y=e(i),b=function(){return this.start()},x=b.prototype={constructor:b,$node:y,start:function(){return g&&g.start?x:(g.methods={},g.start=!0,g.open=!1,g.type=i.type,i.autofocus=i==o(),i.readOnly=!v.editable,i.id=i.id||g.id,"text"!=i.type&&(i.type="text"),x.component=new l(x,v),x.$root=e(t._.node("div",f(),m.picker,'id="'+i.id+'_root" tabindex="0"')),x.$root.on({keydown:d,focusin:function(e){x.$root.removeClass(m.focused),e.stopPropagation()},"mousedown click":function(t){var n=t.target;n!=x.$root.children()[0]&&(t.stopPropagation(),"mousedown"!=t.type||e(n).is("input, select, textarea, button, option")||(t.preventDefault(),x.$root.eq(0).focus()))}}).on({focus:function(){y.addClass(m.target)},blur:function(){y.removeClass(m.target)}}).on("focus.toOpen",h).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var t=e(this),n=t.data(),r=t.hasClass(m.navDisabled)||t.hasClass(m.disabled),i=o();i=i&&(i.type||i.href)&&i,(r||i&&!e.contains(x.$root[0],i))&&x.$root.eq(0).focus(),!r&&n.nav?x.set("highlight",x.component.item.highlight,{nav:n.nav}):!r&&"pick"in n?(x.set("select",n.pick),v.closeOnSelect&&x.close(!0)):n.clear?(x.clear(),v.closeOnSelect&&x.close(!0)):n.close&&x.close(!0)}),r(x.$root[0],"hidden",!0),v.formatSubmit&&function(){var t;!0===v.hiddenName?(t=i.name,i.name=""):t=(t=["string"==typeof v.hiddenPrefix?v.hiddenPrefix:"","string"==typeof v.hiddenSuffix?v.hiddenSuffix:"_submit"])[0]+i.name+t[1],x._hidden=e('<input type=hidden name="'+t+'"'+(y.data("value")||i.value?' value="'+x.get("select",v.formatSubmit)+'"':"")+">")[0],y.on("change."+g.id,function(){x._hidden.value=i.value?x.get("select",v.formatSubmit):""}),v.container?e(v.container).append(x._hidden):y.before(x._hidden)}(),y.data(a,x).addClass(m.input).attr("tabindex",-1).val(y.data("value")?x.get("select",v.format):i.value),v.editable||y.on("focus."+g.id+" click."+g.id,function(e){e.preventDefault(),x.$root.eq(0).focus()}).on("keydown."+g.id,d),r(i,{haspopup:!0,expanded:!1,readonly:!1,owns:i.id+"_root"}),v.container?e(v.container).append(x.$root):y.before(x.$root),x.on({start:x.component.onStart,render:x.component.onRender,stop:x.component.onStop,open:x.component.onOpen,close:x.component.onClose,set:x.component.onSet}).on({start:v.onStart,render:v.onRender,stop:v.onStop,open:v.onOpen,close:v.onClose,set:v.onSet}),p=function(e){var t;return e.currentStyle?t=e.currentStyle.position:window.getComputedStyle&&(t=getComputedStyle(e).position),"fixed"==t}(x.$root.children()[0]),i.autofocus&&x.open(),x.trigger("start").trigger("render"))},render:function(e){return e?x.$root.html(f()):x.$root.find("."+m.box).html(x.component.nodes(g.open)),x.trigger("render")},stop:function(){return g.start?(x.close(),x._hidden&&x._hidden.parentNode.removeChild(x._hidden),x.$root.remove(),y.removeClass(m.input).removeData(a),setTimeout(function(){y.off("."+g.id)},0),i.type=g.type,i.readOnly=!1,x.trigger("stop"),g.methods={},g.start=!1,x):x},open:function(o){return g.open?x:(y.addClass(m.active),r(i,"expanded",!0),setTimeout(function(){x.$root.addClass(m.opened),r(x.$root[0],"hidden",!1)},0),!1!==o&&(g.open=!0,p&&u.css("overflow","hidden").css("padding-right","+="+n()),x.$root.eq(0).focus(),s.on("click."+g.id+" focusin."+g.id,function(e){var t=e.target;t!=i&&t!=document&&3!=e.which&&x.close(t===x.$root.children()[0])}).on("keydown."+g.id,function(n){var r=n.keyCode,i=x.component.key[r],o=n.target;27==r?x.close(!0):o!=x.$root[0]||!i&&13!=r?e.contains(x.$root[0],o)&&13==r&&(n.preventDefault(),o.click()):(n.preventDefault(),i?t._.trigger(x.component.key.go,x,[t._.trigger(i)]):x.$root.find("."+m.highlighted).hasClass(m.disabled)||(x.set("select",x.component.item.highlight),v.closeOnSelect&&x.close(!0)))})),x.trigger("open"))},close:function(e){return e&&(x.$root.off("focus.toOpen").eq(0).focus(),setTimeout(function(){x.$root.on("focus.toOpen",h)},0)),y.removeClass(m.active),r(i,"expanded",!1),setTimeout(function(){x.$root.removeClass(m.opened+" "+m.focused),r(x.$root[0],"hidden",!0)},0),g.open?(g.open=!1,p&&u.css("overflow","").css("padding-right","-="+n()),s.off("."+g.id),x.trigger("close")):x},clear:function(e){return x.set("clear",null,e)},set:function(t,n,r){var i,o,a=e.isPlainObject(t),s=a?t:{};if(r=a&&e.isPlainObject(n)?n:r||{},t){for(i in a||(s[t]=n),s)o=s[i],i in x.component.item&&(void 0===o&&(o=null),x.component.set(i,o,r)),"select"!=i&&"clear"!=i||y.val("clear"==i?"":x.get(i,v.format)).trigger("change");x.render()}return r.muted?x:x.trigger("set",s)},get:function(e,n){if(null!=g[e=e||"value"])return g[e];if("valueSubmit"==e){if(x._hidden)return x._hidden.value;e="value"}if("value"==e)return i.value;if(e in x.component.item){if("string"==typeof n){var r=x.component.get(e);return r?t._.trigger(x.component.formats.toString,x.component,[n,r]):""}return x.component.get(e)}},on:function(t,n,r){var i,o,a=e.isPlainObject(t),s=a?t:{};if(t)for(i in a||(s[t]=n),s)o=s[i],r&&(i="_"+i),g.methods[i]=g.methods[i]||[],g.methods[i].push(o);return x},off:function(){var e,t,n=arguments;for(e=0,namesCount=n.length;e<namesCount;e+=1)(t=n[e])in g.methods&&delete g.methods[t];return x},trigger:function(e,n){var r=function(e){var r=g.methods[e];r&&r.map(function(e){t._.trigger(e,x,[n])})};return r("_"+e),r(e),x}};return new b}function n(){if(u.height()<=a.height())return 0;var t=e('<div style="visibility:hidden;width:100px" />').appendTo("body"),n=t[0].offsetWidth;t.css("overflow","scroll");var r=e('<div style="width:100%" />').appendTo(t)[0].offsetWidth;return t.remove(),n-r}function r(t,n,r){if(e.isPlainObject(n))for(var o in n)i(t,o,n[o]);else i(t,n,r)}function i(e,t,n){e.setAttribute(("role"==t?"":"aria-")+t,n)}function o(){try{return document.activeElement}catch(e){}}var a=e(window),s=e(document),u=e(document.documentElement);return t.klasses=function(e){return{picker:e=e||"picker",opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",target:e+"__input--target",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},t._={group:function(e){for(var n,r="",i=t._.trigger(e.min,e);i<=t._.trigger(e.max,e,[i]);i+=e.i)n=t._.trigger(e.item,e,[i]),r+=t._.node(e.node,n[0],n[1],n[2]);return r},node:function(t,n,r,i){return n?"<"+t+(r=r?' class="'+r+'"':"")+(i=i?" "+i:"")+">"+(n=e.isArray(n)?n.join(""):n)+"</"+t+">":""},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,n){return"function"==typeof e?e.apply(t,n||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return{}.toString.call(e).indexOf("Date")>-1&&this.isInteger(e.getDate())},isInteger:function(e){return{}.toString.call(e).indexOf("Number")>-1&&e%1==0},ariaAttr:function(t,n){for(var r in e.isPlainObject(t)||(t={attribute:n}),n="",t)n+=null==t[r]?"":("role"==r?"":"aria-")+r+'="'+t[r]+'"';return n}},t.extend=function(n,r){e.fn[n]=function(i,o){var a=this.data(n);return"picker"==i?a:a&&"string"==typeof i?t._.trigger(a[i],a,[o]):this.each(function(){e(this).data(n)||new t(this,n,r,i)})},e.fn[n].defaults=r.defaults},t}(jQuery),function(e,t){function n(e,t){var n=this,r=e.$node[0],i=r.value,o=e.$node.data("value"),a=o||i,s=o?t.formatSubmit:t.format,u=function(){return r.currentStyle?"rtl"==r.currentStyle.direction:"rtl"==getComputedStyle(e.$root[0]).direction};n.settings=t,n.$node=e.$node,n.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},n.item={},n.item.clear=null,n.item.disable=(t.disable||[]).slice(0),n.item.enable=-function(e){return!0===e[0]?e.shift():-1}(n.item.disable),n.set("min",t.min).set("max",t.max).set("now"),a?n.set("select",a,{format:s}):n.set("select",null).set("highlight",n.item.now),n.key={40:7,38:-7,39:function(){return u()?-1:1},37:function(){return u()?1:-1},go:function(e){var t=n.item.highlight,r=new Date(t.year,t.month,t.date+e);n.set("highlight",r,{interval:e}),this.render()}},e.on("render",function(){e.$root.find("."+t.klass.selectMonth).on("change",function(){var n=this.value;n&&(e.set("highlight",[e.get("view").year,n,e.get("highlight").date]),e.$root.find("."+t.klass.selectMonth).trigger("focus"))}),e.$root.find("."+t.klass.selectYear).on("change",function(){var n=this.value;n&&(e.set("highlight",[n,e.get("view").month,e.get("highlight").date]),e.$root.find("."+t.klass.selectYear).trigger("focus"))})},1).on("open",function(){var r="";n.disabled(n.get("now"))&&(r=":not(."+t.klass.buttonToday+")"),e.$root.find("button"+r+", select").attr("disabled",!1)},1).on("close",function(){e.$root.find("button, select").attr("disabled",!0)},1)}var r=e._;n.prototype.set=function(e,t,n){var r=this,i=r.item;return null===t?("clear"==e&&(e="select"),i[e]=t,r):(i["enable"==e?"disable":"flip"==e?"enable":e]=r.queue[e].split(" ").map(function(i){return t=r[i](e,t,n)}).pop(),"select"==e?r.set("highlight",i.select,n):"highlight"==e?r.set("view",i.highlight,n):e.match(/^(flip|min|max|disable|enable)$/)&&(i.select&&r.disabled(i.select)&&r.set("select",i.select,n),i.highlight&&r.disabled(i.highlight)&&r.set("highlight",i.highlight,n)),r)},n.prototype.get=function(e){return this.item[e]},n.prototype.create=function(e,n,i){var o,a=this;return(n=void 0===n?e:n)==-1/0||n==1/0?o=n:t.isPlainObject(n)&&r.isInteger(n.pick)?n=n.obj:t.isArray(n)?(n=new Date(n[0],n[1],n[2]),n=r.isDate(n)?n:a.create().obj):n=r.isInteger(n)||r.isDate(n)?a.normalize(new Date(n),i):a.now(e,n,i),{year:o||n.getFullYear(),month:o||n.getMonth(),date:o||n.getDate(),day:o||n.getDay(),obj:o||n,pick:o||n.getTime()}},n.prototype.createRange=function(e,n){var i=this,o=function(e){return!0===e||t.isArray(e)||r.isDate(e)?i.create(e):e};return r.isInteger(e)||(e=o(e)),r.isInteger(n)||(n=o(n)),r.isInteger(e)&&t.isPlainObject(n)?e=[n.year,n.month,n.date+e]:r.isInteger(n)&&t.isPlainObject(e)&&(n=[e.year,e.month,e.date+n]),{from:o(e),to:o(n)}},n.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},n.prototype.overlapRanges=function(e,t){var n=this;return e=n.createRange(e.from,e.to),t=n.createRange(t.from,t.to),n.withinRange(e,t.from)||n.withinRange(e,t.to)||n.withinRange(t,e.from)||n.withinRange(t,e.to)},n.prototype.now=function(e,t,n){return t=new Date,n&&n.rel&&t.setDate(t.getDate()+n.rel),this.normalize(t,n)},n.prototype.navigate=function(e,n,r){var i,o,a,s,u=t.isArray(n),l=t.isPlainObject(n),c=this.item.view;if(u||l){for(l?(o=n.year,a=n.month,s=n.date):(o=+n[0],a=+n[1],s=+n[2]),r&&r.nav&&c&&c.month!==a&&(o=c.year,a=c.month),o=(i=new Date(o,a+(r&&r.nav?r.nav:0),1)).getFullYear(),a=i.getMonth();new Date(o,a,s).getMonth()!==a;)s-=1;n=[o,a,s]}return n},n.prototype.normalize=function(e){return e.setHours(0,0,0,0),e},n.prototype.measure=function(e,t){return t?"string"==typeof t?t=this.parse(e,t):r.isInteger(t)&&(t=this.now(e,t,{rel:t})):t="min"==e?-1/0:1/0,t},n.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},n.prototype.validate=function(e,n,i){var o,a,s,u,l=this,c=n,f=i&&i.interval?i.interval:1,d=-1===l.item.enable,h=l.item.min,p=l.item.max,g=d&&l.item.disable.filter(function(e){if(t.isArray(e)){var i=l.create(e).pick;i<n.pick?o=!0:i>n.pick&&(a=!0)}return r.isInteger(e)}).length;if((!i||!i.nav)&&(!d&&l.disabled(n)||d&&l.disabled(n)&&(g||o||a)||!d&&(n.pick<=h.pick||n.pick>=p.pick)))for(d&&!g&&(!a&&f>0||!o&&f<0)&&(f*=-1);l.disabled(n)&&(Math.abs(f)>1&&(n.month<c.month||n.month>c.month)&&(n=c,f=f>0?1:-1),n.pick<=h.pick?(s=!0,f=1,n=l.create([h.year,h.month,h.date+(n.pick===h.pick?0:-1)])):n.pick>=p.pick&&(u=!0,f=-1,n=l.create([p.year,p.month,p.date+(n.pick===p.pick?0:1)])),!s||!u);)n=l.create([n.year,n.month,n.date+f]);return n},n.prototype.disabled=function(e){var n=this,i=n.item.disable.filter(function(i){return r.isInteger(i)?e.day===(n.settings.firstDay?i:i-1)%7:t.isArray(i)||r.isDate(i)?e.pick===n.create(i).pick:t.isPlainObject(i)?n.withinRange(i,e):void 0});return i=i.length&&!i.filter(function(e){return t.isArray(e)&&"inverted"==e[3]||t.isPlainObject(e)&&e.inverted}).length,-1===n.item.enable?!i:i||e.pick<n.item.min.pick||e.pick>n.item.max.pick},n.prototype.parse=function(e,t,n){var i=this,o={};return t&&"string"==typeof t?(n&&n.format||((n=n||{}).format=i.settings.format),i.formats.toArray(n.format).map(function(e){var n=i.formats[e],a=n?r.trigger(n,i,[t,o]):e.replace(/^!/,"").length;n&&(o[e]=t.substr(0,a)),t=t.substr(a)}),[o.yyyy||o.yy,+(o.mm||o.m)-1,o.dd||o.d]):t},n.prototype.formats=function(){function e(e,t,n){var r=e.match(/\w+/)[0];return n.mm||n.m||(n.m=t.indexOf(r)+1),r.length}function t(e){return e.match(/\w+/)[0].length}return{d:function(e,t){return e?r.digits(e):t.date},dd:function(e,t){return e?2:r.lead(t.date)},ddd:function(e,n){return e?t(e):this.settings.weekdaysShort[n.day]},dddd:function(e,n){return e?t(e):this.settings.weekdaysFull[n.day]},m:function(e,t){return e?r.digits(e):t.month+1},mm:function(e,t){return e?2:r.lead(t.month+1)},mmm:function(t,n){var r=this.settings.monthsShort;return t?e(t,r,n):r[n.month]},mmmm:function(t,n){var r=this.settings.monthsFull;return t?e(t,r,n):r[n.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return r.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}}}(),n.prototype.isDateExact=function(e,n){var i=this;return r.isInteger(e)&&r.isInteger(n)||"boolean"==typeof e&&"boolean"==typeof n?e===n:(r.isDate(e)||t.isArray(e))&&(r.isDate(n)||t.isArray(n))?i.create(e).pick===i.create(n).pick:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&i.isDateExact(e.from,n.from)&&i.isDateExact(e.to,n.to)},n.prototype.isDateOverlap=function(e,n){var i=this,o=i.settings.firstDay?1:0;return r.isInteger(e)&&(r.isDate(n)||t.isArray(n))?(e=e%7+o)===i.create(n).day+1:r.isInteger(n)&&(r.isDate(e)||t.isArray(e))?(n=n%7+o)===i.create(e).day+1:!(!t.isPlainObject(e)||!t.isPlainObject(n))&&i.overlapRanges(e,n)},n.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},n.prototype.deactivate=function(e,n){var i=this,o=i.item.disable.slice(0);return"flip"==n?i.flipEnable():!1===n?(i.flipEnable(1),o=[]):!0===n?(i.flipEnable(-1),o=[]):n.map(function(e){for(var n,a=0;a<o.length;a+=1)if(i.isDateExact(e,o[a])){n=!0;break}n||(r.isInteger(e)||r.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&o.push(e)}),o},n.prototype.activate=function(e,n){var i=this,o=i.item.disable,a=o.length;return"flip"==n?i.flipEnable():!0===n?(i.flipEnable(1),o=[]):!1===n?(i.flipEnable(-1),o=[]):n.map(function(e){var n,s,u,l;for(u=0;u<a;u+=1){if(i.isDateExact(s=o[u],e)){n=o[u]=null,l=!0;break}if(i.isDateOverlap(s,e)){t.isPlainObject(e)?(e.inverted=!0,n=e):t.isArray(e)?(n=e)[3]||n.push("inverted"):r.isDate(e)&&(n=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(n)for(u=0;u<a;u+=1)if(i.isDateExact(o[u],e)){o[u]=null;break}if(l)for(u=0;u<a;u+=1)if(i.isDateOverlap(o[u],e)){o[u]=null;break}n&&o.push(n)}),o.filter(function(e){return null!=e})},n.prototype.nodes=function(e){var t=this,n=t.settings,i=t.item,o=i.now,a=i.select,s=i.highlight,u=i.view,l=i.disable,c=i.min,f=i.max,d=function(e,t){return n.firstDay&&(e.push(e.shift()),t.push(t.shift())),r.node("thead",r.node("tr",r.group({min:0,max:6,i:1,node:"th",item:function(r){return[e[r],n.klass.weekdays,'scope=col title="'+t[r]+'"']}})))}((n.showWeekdaysFull?n.weekdaysFull:n.weekdaysLetter).slice(0),n.weekdaysFull.slice(0)),h=function(e){return r.node("div"," ",n.klass["nav"+(e?"Next":"Prev")]+(e&&u.year>=f.year&&u.month>=f.month||!e&&u.year<=c.year&&u.month<=c.month?" "+n.klass.navDisabled:""),"data-nav="+(e||-1)+" "+r.ariaAttr({role:"button",controls:t.$node[0].id+"_table"})+' title="'+(e?n.labelMonthNext:n.labelMonthPrev)+'"')},p=function(i){var o=n.showMonthsShort?n.monthsShort:n.monthsFull;return"short_months"==i&&(o=n.monthsShort),n.selectMonths&&null==i?r.node("select",r.group({min:0,max:11,i:1,node:"option",item:function(e){return[o[e],0,"value="+e+(u.month==e?" selected":"")+(u.year==c.year&&e<c.month||u.year==f.year&&e>f.month?" disabled":"")]}}),n.klass.selectMonth+" browser-default",(e?"":"disabled")+" "+r.ariaAttr({controls:t.$node[0].id+"_table"})+' title="'+n.labelMonthSelect+'"'):"short_months"==i?null!=a?o[a.month]:o[u.month]:r.node("div",o[u.month],n.klass.month)},g=function(i){var o=u.year,s=!0===n.selectYears?5:~~(n.selectYears/2);if(s){var l=c.year,d=f.year,h=o-s,p=o+s;if(l>h&&(p+=l-h,h=l),d<p){var g=h-l,v=p-d;h-=g>v?v:g,p=d}if(n.selectYears&&null==i)return r.node("select",r.group({min:h,max:p,i:1,node:"option",item:function(e){return[e,0,"value="+e+(o==e?" selected":"")]}}),n.klass.selectYear+" browser-default",(e?"":"disabled")+" "+r.ariaAttr({controls:t.$node[0].id+"_table"})+' title="'+n.labelYearSelect+'"')}return"raw"===i&&null!=a?r.node("div",a.year):r.node("div",o,n.klass.year)};return createDayLabel=function(){return null!=a?a.date:o.date},createWeekdayLabel=function(){return n.weekdaysShort[null!=a?a.day:o.day]},r.node("div",r.node("div",g("raw"),n.klass.year_display)+r.node("span",createWeekdayLabel()+", ","picker__weekday-display")+r.node("span",p("short_months")+" ",n.klass.month_display)+r.node("span",createDayLabel(),n.klass.day_display),n.klass.date_display)+r.node("div",r.node("div",r.node("div",p()+g()+h()+h(1),n.klass.header)+r.node("table",d+r.node("tbody",r.group({min:0,max:5,i:1,node:"tr",item:function(e){var i=n.firstDay&&0===t.create([u.year,u.month,1]).day?-7:0;return[r.group({min:7*e-u.day+i+1,max:function(){return this.min+7-1},i:1,node:"td",item:function(e){e=t.create([u.year,u.month,e+(n.firstDay?1:0)]);var i=a&&a.pick==e.pick,d=s&&s.pick==e.pick,h=l&&t.disabled(e)||e.pick<c.pick||e.pick>f.pick,p=r.trigger(t.formats.toString,t,[n.format,e]);return[r.node("div",e.date,function(t){return t.push(u.month==e.month?n.klass.infocus:n.klass.outfocus),o.pick==e.pick&&t.push(n.klass.now),i&&t.push(n.klass.selected),d&&t.push(n.klass.highlighted),h&&t.push(n.klass.disabled),t.join(" ")}([n.klass.day]),"data-pick="+e.pick+" "+r.ariaAttr({role:"gridcell",label:p,selected:!(!i||t.$node.val()!==p)||null,activedescendant:!!d||null,disabled:!!h||null})+" "+(h?"":'tabindex="0"')),"",r.ariaAttr({role:"presentation"})]}})]}})),n.klass.table,'id="'+t.$node[0].id+'_table" '+r.ariaAttr({role:"grid",controls:t.$node[0].id,readonly:!0})),n.klass.calendar_container)+r.node("div",r.node("button",n.today,"btn-flat picker__today waves-effect","type=button data-pick="+o.pick+(e&&!t.disabled(o)?"":" disabled")+" "+r.ariaAttr({controls:t.$node[0].id}))+r.node("button",n.clear,"btn-flat picker__clear waves-effect","type=button data-clear=1"+(e?"":" disabled")+" "+r.ariaAttr({controls:t.$node[0].id}))+r.node("button",n.close,"btn-flat picker__close waves-effect","type=button data-close=true "+(e?"":" disabled")+" "+r.ariaAttr({controls:t.$node[0].id})),n.klass.footer),"picker__container__wrapper")},n.defaults=function(e){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysLetter:["S","M","T","W","T","F","S"],today:"Today",clear:"Clear",close:"Ok",closeOnSelect:!1,format:"d mmmm, yyyy",klass:{table:e+"table",header:e+"header",date_display:e+"date-display",day_display:e+"day-display",month_display:e+"month-display",year_display:e+"year-display",calendar_container:e+"calendar-container",navPrev:e+"nav--prev",navNext:e+"nav--next",navDisabled:e+"nav--disabled",month:e+"month",year:e+"year",selectMonth:e+"select--month",selectYear:e+"select--year",weekdays:e+"weekday",day:e+"day",disabled:e+"day--disabled",selected:e+"day--selected",highlighted:e+"day--highlighted",now:e+"day--today",infocus:e+"day--infocus",outfocus:e+"day--outfocus",footer:e+"footer",buttonClear:e+"button--clear",buttonToday:e+"button--today",buttonClose:e+"button--close"}}}(e.klasses().picker+"__"),e.extend("pickadate",n)}(Materialize.Picker,jQuery),function(e){function t(e){return document.createElementNS(u,e)}function n(e){return(e<10?"0":"")+e}function r(e){var t=++v+"";return e?e+t:t}function i(i,a){function u(e,t){var n=f.offset(),r=/^touch/.test(e.type),i=n.left+m,o=n.top+m,u=(r?e.originalEvent.touches[0]:e).pageX-i,l=(r?e.originalEvent.touches[0]:e).pageY-o,c=Math.sqrt(u*u+l*l),d=!1;if(!t||!(c<y-x||c>y+x)){e.preventDefault();var g=setTimeout(function(){S.popover.addClass("clockpicker-moving")},200);S.setHand(u,l,!t,!0),s.off(h).on(h,function(e){e.preventDefault();var t=/^touch/.test(e.type),n=(t?e.originalEvent.touches[0]:e).pageX-i,r=(t?e.originalEvent.touches[0]:e).pageY-o;(d||n!==u||r!==l)&&(d=!0,S.setHand(n,r,!1,!0))}),s.off(p).on(p,function(e){s.off(p),e.preventDefault();var n=/^touch/.test(e.type),r=(n?e.originalEvent.changedTouches[0]:e).pageX-i,c=(n?e.originalEvent.changedTouches[0]:e).pageY-o;(t||d)&&r===u&&c===l&&S.setHand(r,c),"hours"===S.currentView?S.toggleView("minutes",A/2):a.autoclose&&(S.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){S.done()},A/2)),f.prepend(P),clearTimeout(g),S.popover.removeClass("clockpicker-moving"),s.off(h)})}}var c=e(E),f=c.find(".clockpicker-plate"),g=c.find(".picker__holder"),v=c.find(".clockpicker-hours"),M=c.find(".clockpicker-minutes"),C=c.find(".clockpicker-am-pm-block"),k="INPUT"===i.prop("tagName"),T=k?i:i.find("input"),_=e("label[for="+T.attr("id")+"]"),S=this;this.id=r("cp"),this.element=i,this.holder=g,this.options=a,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=k,this.input=T,this.label=_,this.popover=c,this.plate=f,this.hoursView=v,this.minutesView=M,this.amPmBlock=C,this.spanHours=c.find(".clockpicker-span-hours"),this.spanMinutes=c.find(".clockpicker-span-minutes"),this.spanAmPm=c.find(".clockpicker-span-am-pm"),this.footer=c.find(".picker__footer"),this.amOrPm="PM",a.twelvehour&&(a.ampmclickable?(this.spanAmPm.empty(),e('<div id="click-am">AM</div>').on("click",function(){S.spanAmPm.children("#click-am").addClass("text-primary"),S.spanAmPm.children("#click-pm").removeClass("text-primary"),S.amOrPm="AM"}).appendTo(this.spanAmPm),e('<div id="click-pm">PM</div>').on("click",function(){S.spanAmPm.children("#click-pm").addClass("text-primary"),S.spanAmPm.children("#click-am").removeClass("text-primary"),S.amOrPm="PM"}).appendTo(this.spanAmPm)):(this.spanAmPm.empty(),e('<div id="click-am">AM</div>').appendTo(this.spanAmPm),e('<div id="click-pm">PM</div>').appendTo(this.spanAmPm))),e('<button type="button" class="btn-flat picker__clear" tabindex="'+(a.twelvehour?"3":"1")+'">'+a.cleartext+"</button>").click(e.proxy(this.clear,this)).appendTo(this.footer),e('<button type="button" class="btn-flat picker__close" tabindex="'+(a.twelvehour?"3":"1")+'">'+a.canceltext+"</button>").click(e.proxy(this.hide,this)).appendTo(this.footer),e('<button type="button" class="btn-flat picker__close" tabindex="'+(a.twelvehour?"3":"1")+'">'+a.donetext+"</button>").click(e.proxy(this.done,this)).appendTo(this.footer),this.spanHours.click(e.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(e.proxy(this.toggleView,this,"minutes")),T.on("focus.clockpicker click.clockpicker",e.proxy(this.show,this));var I,R,L,O,N=e('<div class="clockpicker-tick"></div>');if(a.twelvehour)for(I=1;I<13;I+=1)R=N.clone(),L=I/6*Math.PI,O=y,R.css({left:m+Math.sin(L)*O-x,top:m-Math.cos(L)*O-x}),R.html(0===I?"00":I),v.append(R),R.on(d,u);else for(I=0;I<24;I+=1)R=N.clone(),L=I/6*Math.PI,O=I>0&&I<13?b:y,R.css({left:m+Math.sin(L)*O-x,top:m-Math.cos(L)*O-x}),R.html(0===I?"00":I),v.append(R),R.on(d,u);for(I=0;I<60;I+=5)R=N.clone(),L=I/30*Math.PI,R.css({left:m+Math.sin(L)*y-x,top:m-Math.cos(L)*y-x}),R.html(n(I)),M.append(R),R.on(d,u);if(f.on(d,function(t){0===e(t.target).closest(".clockpicker-tick").length&&u(t,!0)}),l){var P=c.find(".clockpicker-canvas"),D=t("svg");D.setAttribute("class","clockpicker-svg"),D.setAttribute("width",w),D.setAttribute("height",w);var B=t("g");B.setAttribute("transform","translate("+m+","+m+")");var V=t("circle");V.setAttribute("class","clockpicker-canvas-bearing"),V.setAttribute("cx",0),V.setAttribute("cy",0),V.setAttribute("r",4);var z=t("line");z.setAttribute("x1",0),z.setAttribute("y1",0);var F=t("circle");F.setAttribute("class","clockpicker-canvas-bg"),F.setAttribute("r",x),B.appendChild(z),B.appendChild(F),B.appendChild(V),D.appendChild(B),P.append(D),this.hand=z,this.bg=F,this.bearing=V,this.g=B,this.canvas=P}o(this.options.init)}function o(e){e&&"function"==typeof e&&e()}var a=e(window),s=e(document),u="http://www.w3.org/2000/svg",l="SVGAngle"in window&&function(){var e,t=document.createElement("div");return t.innerHTML="<svg/>",e=(t.firstChild&&t.firstChild.namespaceURI)==u,t.innerHTML="",e}(),c=function(){var e=document.createElement("div").style;return"transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e}(),f="ontouchstart"in window,d="mousedown"+(f?" touchstart":""),h="mousemove.clockpicker"+(f?" touchmove.clockpicker":""),p="mouseup.clockpicker"+(f?" touchend.clockpicker":""),g=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,v=0,m=135,y=105,b=70,x=20,w=2*m,A=c?350:1,E=['<div class="clockpicker picker">','<div class="picker__holder">','<div class="picker__frame">','<div class="picker__wrap">','<div class="picker__box">','<div class="picker__date-display">','<div class="clockpicker-display">','<div class="clockpicker-display-column">','<span class="clockpicker-span-hours text-primary"></span>',":",'<span class="clockpicker-span-minutes"></span>',"</div>",'<div class="clockpicker-display-column clockpicker-display-am-pm">','<div class="clockpicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="picker__container__wrapper">','<div class="picker__calendar-container">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>",'<div class="clockpicker-am-pm-block">',"</div>","</div>",'<div class="picker__footer">',"</div>","</div>","</div>","</div>","</div>","</div>","</div>"].join("");i.DEFAULTS={default:"",fromnow:0,donetext:"Ok",cleartext:"Clear",canceltext:"Cancel",autoclose:!1,ampmclickable:!0,darktheme:!1,twelvehour:!0,vibrate:!0},i.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},i.prototype.locate=function(){var e=this.element,t=this.popover;e.offset(),e.outerWidth(),e.outerHeight(),t.show()},i.prototype.show=function(t){if(!this.isShown){o(this.options.beforeShow),e(":input").each(function(){e(this).attr("tabindex",-1)});var r=this;this.input.blur(),this.popover.addClass("picker--opened"),this.input.addClass("picker__input picker__input--active"),e(document.body).css("overflow","hidden");var i=((this.input.prop("value")||this.options.default||"")+"").split(":");if(this.options.twelvehour&&void 0!==i[1]&&(this.amOrPm=i[1].indexOf("AM")>0?"AM":"PM",i[1]=i[1].replace("AM","").replace("PM","")),"now"===i[0]){var u=new Date(+new Date+this.options.fromnow);i=[u.getHours(),u.getMinutes()],this.options.twelvehour&&(this.amOrPm=i[0]>=12&&i[0]<24?"PM":"AM")}if(this.hours=+i[0]||0,this.minutes=+i[1]||0,this.spanHours.html(this.hours),this.spanMinutes.html(n(this.minutes)),!this.isAppended){var l=document.querySelector(this.options.container);this.options.container&&l?l.appendChild(this.popover[0]):this.popover.insertAfter(this.input),this.options.twelvehour&&("PM"===this.amOrPm?(this.spanAmPm.children("#click-pm").addClass("text-primary"),this.spanAmPm.children("#click-am").removeClass("text-primary")):(this.spanAmPm.children("#click-am").addClass("text-primary"),this.spanAmPm.children("#click-pm").removeClass("text-primary"))),a.on("resize.clockpicker"+this.id,function(){r.isShown&&r.locate()}),this.isAppended=!0}this.toggleView("hours"),this.locate(),this.isShown=!0,s.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(t){var n=e(t.target);0===n.closest(r.popover.find(".picker__wrap")).length&&0===n.closest(r.input).length&&r.hide()}),s.on("keyup.clockpicker."+this.id,function(e){27===e.keyCode&&r.hide()}),o(this.options.afterShow)}},i.prototype.hide=function(){o(this.options.beforeHide),this.input.removeClass("picker__input picker__input--active"),this.popover.removeClass("picker--opened"),e(document.body).css("overflow","visible"),this.isShown=!1,e(":input").each(function(t){e(this).attr("tabindex",t+1)}),s.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),s.off("keyup.clockpicker."+this.id),this.popover.hide(),o(this.options.afterHide)},i.prototype.toggleView=function(t,n){var r=!1;"minutes"===t&&"visible"===e(this.hoursView).css("visibility")&&(o(this.options.beforeHourSelect),r=!0);var i="hours"===t,a=i?this.hoursView:this.minutesView,s=i?this.minutesView:this.hoursView;this.currentView=t,this.spanHours.toggleClass("text-primary",i),this.spanMinutes.toggleClass("text-primary",!i),s.addClass("clockpicker-dial-out"),a.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(n),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){s.css("visibility","hidden")},A),r&&o(this.options.afterHourSelect)},i.prototype.resetClock=function(e){var t=this.currentView,n=this[t],r="hours"===t,i=n*(Math.PI/(r?6:30)),o=r&&n>0&&n<13?b:y,a=Math.sin(i)*o,s=-Math.cos(i)*o,u=this;l&&e?(u.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){u.canvas.removeClass("clockpicker-canvas-out"),u.setHand(a,s)},e)):this.setHand(a,s)},i.prototype.setHand=function(t,r,i,o){var a,s=Math.atan2(t,-r),u="hours"===this.currentView,c=Math.PI/(u||i?6:30),f=Math.sqrt(t*t+r*r),d=this.options,h=u&&f<(y+b)/2,p=h?b:y;if(d.twelvehour&&(p=y),s<0&&(s=2*Math.PI+s),s=(a=Math.round(s/c))*c,d.twelvehour?u?0===a&&(a=12):(i&&(a*=5),60===a&&(a=0)):u?(12===a&&(a=0),a=h?0===a?12:a:0===a?0:a+12):(i&&(a*=5),60===a&&(a=0)),this[this.currentView]!==a&&g&&this.options.vibrate&&(this.vibrateTimer||(navigator[g](10),this.vibrateTimer=setTimeout(e.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=a,u?this.spanHours.html(a):this.spanMinutes.html(n(a)),l){var v=Math.sin(s)*(p-x),m=-Math.cos(s)*(p-x),w=Math.sin(s)*p,A=-Math.cos(s)*p;this.hand.setAttribute("x2",v),this.hand.setAttribute("y2",m),this.bg.setAttribute("cx",w),this.bg.setAttribute("cy",A)}else this[u?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var t=e(this);t.toggleClass("active",a===+t.html())})},i.prototype.done=function(){o(this.options.beforeDone),this.hide(),this.label.addClass("active");var e=this.input.prop("value"),t=n(this.hours)+":"+n(this.minutes);this.options.twelvehour&&(t+=this.amOrPm),this.input.prop("value",t),t!==e&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur"),o(this.options.afterDone)},i.prototype.clear=function(){this.hide(),this.label.removeClass("active");var e=this.input.prop("value");this.input.prop("value",""),""!==e&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur")},i.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(a.off("resize.clockpicker"+this.id),this.popover.remove())},e.fn.pickatime=function(t){var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=e(this),o=r.data("clockpicker");if(o)"function"==typeof o[t]&&o[t].apply(o,n);else{var a=e.extend({},i.DEFAULTS,r.data(),"object"==typeof t&&t);r.data("clockpicker",new i(r,a))}})}}(jQuery),function(e){function t(){var t=+e(this).attr("data-length"),n=+e(this).val().length,r=n<=t;e(this).parent().find('span[class="character-counter"]').html(n+"/"+t),function(e,t){var n=t.hasClass("invalid");e&&n?t.removeClass("invalid"):e||n||(t.removeClass("valid"),t.addClass("invalid"))}(r,e(this))}function n(){e(this).parent().find('span[class="character-counter"]').html("")}e.fn.characterCounter=function(){return this.each(function(){var r=e(this);r.parent().find('span[class="character-counter"]').length||void 0!==r.attr("data-length")&&(r.on("input",t),r.on("focus",t),r.on("blur",n),function(t){var n=t.parent().find('span[class="character-counter"]');n.length||(n=e("<span/>").addClass("character-counter").css("float","right").css("font-size","12px").css("height",1),t.parent().append(n))}(r))})},e(document).ready(function(){e("input, textarea").characterCounter()})}(jQuery),function(e){var t={init:function(t){t=e.extend({duration:200,dist:-100,shift:0,padding:0,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},t);var n=Materialize.objectSelectorString(e(this));return this.each(function(r){function i(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function o(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function a(e){return e>=A?e%A:e<0?a(A+e%A):e}function s(n){B.hasClass("scrolling")||B.addClass("scrolling"),null!=P&&window.clearTimeout(P),P=window.setTimeout(function(){B.removeClass("scrolling")},t.duration);var r,i,o,s,u,l,c,f=b;if(m="number"==typeof n?n:m,b=Math.floor((m+w/2)/w),u=-(s=(o=m-b*w)<0?1:-1)*o*2/w,i=A>>1,t.fullWidth?c="translateX(0)":(c="translateX("+(B[0].clientWidth-g)/2+"px) ",c+="translateY("+(B[0].clientHeight-v)/2+"px)"),z){var d=b%A,h=N.find(".indicator-item.active");h.index()!==d&&(h.removeClass("active"),N.find(".indicator-item").eq(d).addClass("active"))}for((!F||b>=0&&b<A)&&(l=p[a(b)],e(l).hasClass("active")||(B.find(".carousel-item").removeClass("active"),e(l).addClass("active")),l.style[_]=c+" translateX("+-o/2+"px) translateX("+s*t.shift*u*r+"px) translateZ("+t.dist*u+"px)",l.style.zIndex=0,tweenedOpacity=t.fullWidth?1:1-.2*u,l.style.opacity=tweenedOpacity,l.style.display="block"),r=1;r<=i;++r)t.fullWidth?(zTranslation=t.dist,tweenedOpacity=r===i&&o<0?1-u:1):(zTranslation=t.dist*(2*r+u*s),tweenedOpacity=1-.2*(2*r+u*s)),(!F||b+r<A)&&((l=p[a(b+r)]).style[_]=c+" translateX("+(t.shift+(w*r-o)/2)+"px) translateZ("+zTranslation+"px)",l.style.zIndex=-r,l.style.opacity=tweenedOpacity,l.style.display="block"),t.fullWidth?(zTranslation=t.dist,tweenedOpacity=r===i&&o>0?1-u:1):(zTranslation=t.dist*(2*r-u*s),tweenedOpacity=1-.2*(2*r-u*s)),(!F||b-r>=0)&&((l=p[a(b-r)]).style[_]=c+" translateX("+((-w*r-o)/2-t.shift)+"px) translateZ("+zTranslation+"px)",l.style.zIndex=-r,l.style.opacity=tweenedOpacity,l.style.display="block");if((!F||b>=0&&b<A)&&((l=p[a(b)]).style[_]=c+" translateX("+-o/2+"px) translateX("+s*t.shift*u+"px) translateZ("+t.dist*u+"px)",l.style.zIndex=0,tweenedOpacity=t.fullWidth?1:1-.2*u,l.style.opacity=tweenedOpacity,l.style.display="block"),f!==b&&"function"==typeof t.onCycleTo){var y=B.find(".carousel-item").eq(a(b));t.onCycleTo.call(this,y,L)}"function"==typeof D&&(D.call(this,y,L),D=null)}function u(){var e,t,n;t=(e=Date.now())-I,I=e,n=m-S,S=m,T=1e3*n/(1+t)*.8+.2*T}function l(){var e,n;C&&(e=Date.now()-I,(n=C*Math.exp(-e/t.duration))>2||n<-2?(s(k-n),requestAnimationFrame(l)):s(k))}function c(e){var t=b%A-e;F||(t<0?Math.abs(t+A)<Math.abs(t)&&(t+=A):t>0&&Math.abs(t-A)<t&&(t-=A)),t<0?B.trigger("carouselNext",[Math.abs(t)]):t>0&&B.trigger("carouselPrev",[t])}function f(t){"mousedown"===t.type&&e(t.target).is("img")&&t.preventDefault(),x=!0,L=!1,O=!1,E=i(t),M=o(t),T=C=0,S=m,I=Date.now(),clearInterval(R),R=setInterval(u,100)}function d(e){var t,n;if(x)if(t=i(e),y=o(e),n=E-t,Math.abs(M-y)<30&&!O)(n>2||n<-2)&&(L=!0,E=t,s(m+n));else{if(L)return e.preventDefault(),e.stopPropagation(),!1;O=!0}if(L)return e.preventDefault(),e.stopPropagation(),!1}function h(e){if(x)return x=!1,clearInterval(R),k=m,(T>10||T<-10)&&(k=m+(C=.9*T)),k=Math.round(k/w)*w,F&&(k>=w*(A-1)?k=w*(A-1):k<0&&(k=0)),C=k-m,I=Date.now(),requestAnimationFrame(l),L&&(e.preventDefault(),e.stopPropagation()),!1}var p,g,v,m,b,x,w,A,E,M,C,k,T,_,S,I,R,L,O,N=e('<ul class="indicators"></ul>'),P=null,D=null,B=e(this),V=B.find(".carousel-item").length>1,z=(B.attr("data-indicators")||t.indicators)&&V,F=B.attr("data-no-wrap")||t.noWrap||!V,G=B.attr("data-namespace")||n+r;B.attr("data-namespace",G);var H=function(t){var n=B.find(".carousel-item.active").length?B.find(".carousel-item.active").first():B.find(".carousel-item").first(),r=n.find("img").first();if(r.length)if(r[0].complete)if(r.height()>0)B.css("height",r.height());else{var i=r[0].naturalWidth,o=r[0].naturalHeight,a=B.width()/i*o;B.css("height",a)}else r.on("load",function(){B.css("height",e(this).height())});else if(!t){var s=n.height();B.css("height",s)}};if(t.fullWidth&&(t.dist=0,H(),z&&B.find(".carousel-fixed-item").addClass("with-indicators")),B.hasClass("initialized"))return e(window).trigger("resize"),B.trigger("carouselNext",[1e-6]),!0;B.addClass("initialized"),x=!1,m=k=0,p=[],g=B.find(".carousel-item").first().innerWidth(),v=B.find(".carousel-item").first().innerHeight(),w=2*g+t.padding,B.find(".carousel-item").each(function(t){if(p.push(e(this)[0]),z){var n=e('<li class="indicator-item"></li>');0===t&&n.addClass("active"),n.click(function(t){t.stopPropagation(),c(e(this).index())}),N.append(n)}}),z&&B.append(N),A=p.length,_="transform",["webkit","Moz","O","ms"].every(function(e){var t=e+"Transform";return void 0===document.body.style[t]||(_=t,!1)});var W=Materialize.throttle(function(){t.fullWidth?(g=B.find(".carousel-item").first().innerWidth(),B.find(".carousel-item.active").height(),w=2*g+t.padding,k=m=2*b*g,H(!0)):s()},200);e(window).off("resize.carousel-"+G).on("resize.carousel-"+G,W),void 0!==window.ontouchstart&&(B.on("touchstart.carousel",f),B.on("touchmove.carousel",d),B.on("touchend.carousel",h)),B.on("mousedown.carousel",f),B.on("mousemove.carousel",d),B.on("mouseup.carousel",h),B.on("mouseleave.carousel",h),B.on("click.carousel",function(n){if(L)return n.preventDefault(),n.stopPropagation(),!1;if(!t.fullWidth){var r=e(n.target).closest(".carousel-item").index();0!=a(b)-r&&(n.preventDefault(),n.stopPropagation()),c(r)}}),s(m),e(this).on("carouselNext",function(e,t,n){void 0===t&&(t=1),"function"==typeof n&&(D=n),k=w*Math.round(m/w)+w*t,m!==k&&(C=k-m,I=Date.now(),requestAnimationFrame(l))}),e(this).on("carouselPrev",function(e,t,n){void 0===t&&(t=1),"function"==typeof n&&(D=n),k=w*Math.round(m/w)-w*t,m!==k&&(C=k-m,I=Date.now(),requestAnimationFrame(l))}),e(this).on("carouselSet",function(e,t,n){void 0===t&&(t=0),"function"==typeof n&&(D=n),c(t)})})},next:function(t,n){e(this).trigger("carouselNext",[t,n])},prev:function(t,n){e(this).trigger("carouselPrev",[t,n])},set:function(t,n){e(this).trigger("carouselSet",[t,n])},destroy:function(){var t=e(this).attr("data-namespace");e(this).removeAttr("data-namespace"),e(this).removeClass("initialized"),e(this).find(".indicators").remove(),e(this).off("carouselNext carouselPrev carouselSet"),e(window).off("resize.carousel-"+t),void 0!==window.ontouchstart&&e(this).off("touchstart.carousel touchmove.carousel touchend.carousel"),e(this).off("mousedown.carousel mousemove.carousel mouseup.carousel mouseleave.carousel click.carousel")}};e.fn.carousel=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void e.error("Method "+n+" does not exist on jQuery.carousel"):t.init.apply(this,arguments)}}(jQuery),function(e){var t={init:function(t){return this.each(function(){var n=e("#"+e(this).attr("data-activates")),r=(e("body"),e(this)),i=r.parent(".tap-target-wrapper"),o=i.find(".tap-target-wave"),a=i.find(".tap-target-origin"),s=r.find(".tap-target-content");i.length||(i=r.wrap(e('<div class="tap-target-wrapper"></div>')).parent()),s.length||(s=e('<div class="tap-target-content"></div>'),r.append(s)),o.length||(o=e('<div class="tap-target-wave"></div>'),a.length||((a=n.clone(!0,!0)).addClass("tap-target-origin"),a.removeAttr("id"),a.removeAttr("style"),o.append(a)),i.append(o));var u=function(){i.is(".open")&&(i.removeClass("open"),a.off("click.tapTarget"),e(document).off("click.tapTarget"),e(window).off("resize.tapTarget"))},l=function(){var t="fixed"===n.css("position");if(!t)for(var a=n.parents(),u=0;u<a.length&&!(t="fixed"==e(a[u]).css("position"));u++);var l=n.outerWidth(),c=n.outerHeight(),f=t?n.offset().top-e(document).scrollTop():n.offset().top,d=t?n.offset().left-e(document).scrollLeft():n.offset().left,h=e(window).width(),p=e(window).height(),g=h/2,v=p/2,m=d<=g,y=d>g,b=f<=v,x=f>v,w=d>=.25*h&&d<=.75*h,A=r.outerWidth(),E=r.outerHeight(),M=f+c/2-E/2,C=d+l/2-A/2,k=t?"fixed":"absolute",T=w?A:A/2+l,_=E/2,S=b?E/2:0,I=m&&!w?A/2-l:0,R=l,L=x?"bottom":"top",O=2*l,N=O,P=E/2-N/2,D=A/2-O/2,B={};B.top=b?M:"",B.right=y?h-C-A:"",B.bottom=x?p-M-E:"",B.left=m?C:"",B.position=k,i.css(B),s.css({width:T,height:_,top:S,right:0,bottom:0,left:I,padding:R,verticalAlign:L}),o.css({top:P,left:D,width:O,height:N})};"open"==t&&(l(),i.is(".open")||(i.addClass("open"),setTimeout(function(){a.off("click.tapTarget").on("click.tapTarget",function(e){u(),a.off("click.tapTarget")}),e(document).off("click.tapTarget").on("click.tapTarget",function(t){u(),e(document).off("click.tapTarget")});var t=Materialize.throttle(function(){l()},200);e(window).off("resize.tapTarget").on("resize.tapTarget",t)},0))),"close"==t&&u()})},open:function(){},close:function(){}};e.fn.tapTarget=function(n){if(t[n]||"object"==typeof n)return t.init.apply(this,arguments);e.error("Method "+n+" does not exist on jQuery.tap-target")}}(jQuery);var autoComplete=function(e){function t(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function n(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)}function r(e,t,n){e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener(t,n)}function i(e,r,i,o){n(o||document,r,function(n){for(var r,o=n.target||n.srcElement;o&&!(r=t(o,e));)o=o.parentElement;r&&i.call(o,n)})}if(document.querySelector){var o={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var n=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(n,"<b>$1</b>")+"</div>"},onSelect:function(){}};for(var a in e)e.hasOwnProperty(a)&&(o[a]=e[a]);for(var s="object"==typeof o.selector?[o.selector]:document.querySelectorAll(o.selector),u=0;u<s.length;u++){var l=s[u];l.sc=document.createElement("div"),l.sc.className="autocomplete-suggestions "+o.menuClass,l.autocompleteAttr=l.getAttribute("autocomplete"),l.setAttribute("autocomplete","off"),l.cache={},l.last_val="",l.updateSC=function(e,t){var n=l.getBoundingClientRect();if(l.sc.style.left=Math.round(n.left+(window.pageXOffset||document.documentElement.scrollLeft)+o.offsetLeft)+"px",l.sc.style.top=Math.round(n.bottom+(window.pageYOffset||document.documentElement.scrollTop)+o.offsetTop)+"px",l.sc.style.width=Math.round(n.right-n.left)+"px",!e&&(l.sc.style.display="block",l.sc.maxHeight||(l.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(l.sc,null):l.sc.currentStyle).maxHeight)),l.sc.suggestionHeight||(l.sc.suggestionHeight=l.sc.querySelector(".autocomplete-suggestion").offsetHeight),l.sc.suggestionHeight))if(t){var r=l.sc.scrollTop,i=t.getBoundingClientRect().top-l.sc.getBoundingClientRect().top;i+l.sc.suggestionHeight-l.sc.maxHeight>0?l.sc.scrollTop=i+l.sc.suggestionHeight+r-l.sc.maxHeight:0>i&&(l.sc.scrollTop=i+r)}else l.sc.scrollTop=0},n(window,"resize",l.updateSC),document.body.appendChild(l.sc),i("autocomplete-suggestion","mouseleave",function(){var e=l.sc.querySelector(".autocomplete-suggestion.selected");e&&setTimeout(function(){e.className=e.className.replace("selected","")},20)},l.sc),i("autocomplete-suggestion","mouseover",function(){var e=l.sc.querySelector(".autocomplete-suggestion.selected");e&&(e.className=e.className.replace("selected","")),this.className+=" selected"},l.sc),i("autocomplete-suggestion","mousedown",function(e){if(t(this,"autocomplete-suggestion")){var n=this.getAttribute("data-val");l.value=n,o.onSelect(e,n,this),l.sc.style.display="none"}},l.sc),l.blurHandler=function(){try{var e=document.querySelector(".autocomplete-suggestions:hover")}catch(t){e=0}e?l!==document.activeElement&&setTimeout(function(){l.focus()},20):(l.last_val=l.value,l.sc.style.display="none",setTimeout(function(){l.sc.style.display="none"},350))},n(l,"blur",l.blurHandler);var c=function(e){var t=l.value;if(l.cache[t]=e,e.length&&t.length>=o.minChars){for(var n="",r=0;r<e.length;r++)n+=o.renderItem(e[r],t);l.sc.innerHTML=n,l.updateSC(0)}else l.sc.style.display="none"};l.keydownHandler=function(e){var t,n=window.event?e.keyCode:e.which;if((40==n||38==n)&&l.sc.innerHTML)return(r=l.sc.querySelector(".autocomplete-suggestion.selected"))?(t=40==n?r.nextSibling:r.previousSibling)?(r.className=r.className.replace("selected",""),t.className+=" selected",l.value=t.getAttribute("data-val")):(r.className=r.className.replace("selected",""),l.value=l.last_val,t=0):((t=40==n?l.sc.querySelector(".autocomplete-suggestion"):l.sc.childNodes[l.sc.childNodes.length-1]).className+=" selected",l.value=t.getAttribute("data-val")),l.updateSC(0,t),!1;if(27==n)l.value=l.last_val,l.sc.style.display="none";else if(13==n||9==n){var r;(r=l.sc.querySelector(".autocomplete-suggestion.selected"))&&"none"!=l.sc.style.display&&(o.onSelect(e,r.getAttribute("data-val"),r),setTimeout(function(){l.sc.style.display="none"},20))}},n(l,"keydown",l.keydownHandler),l.keyupHandler=function(e){var t=window.event?e.keyCode:e.which;if(!t||(35>t||t>40)&&13!=t&&27!=t){var n=l.value;if(n.length>=o.minChars){if(n!=l.last_val){if(l.last_val=n,clearTimeout(l.timer),o.cache){if(n in l.cache)return void c(l.cache[n]);for(var r=1;r<n.length-o.minChars;r++){var i=n.slice(0,n.length-r);if(i in l.cache&&!l.cache[i].length)return void c([])}}l.timer=setTimeout(function(){o.source(n,c)},o.delay)}}else l.last_val=n,l.sc.style.display="none"}},n(l,"keyup",l.keyupHandler),l.focusHandler=function(e){l.last_val="\n",l.keyupHandler(e)},o.minChars||n(l,"focus",l.focusHandler)}this.destroy=function(){for(var e=0;e<s.length;e++){var t=s[e];r(window,"resize",t.updateSC),r(t,"blur",t.blurHandler),r(t,"focus",t.focusHandler),r(t,"keydown",t.keydownHandler),r(t,"keyup",t.keyupHandler),t.autocompleteAttr?t.setAttribute("autocomplete",t.autocompleteAttr):t.removeAttribute("autocomplete"),document.body.removeChild(t.sc),t=null}}}};"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete,function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.KeyLines=t()}(this,function(){"use strict";var e,t=function(e,t){if(e&&"object"==typeof e)if(Array.isArray(e))e.forEach(t);else for(var n=Object.keys(e),r=n.length,i=0;i<r;i++){var o=n[i];t(e[o],o)}};function n(){if("undefined"!=typeof window)return window.devicePixelRatio||1}function r(e){return"rtl"===window.getComputedStyle(e).direction}function i(e){if(null===e)return null;switch(typeof e){case"object":if(Array.isArray(e))return e.slice();if(l(e))return s(e);if(e instanceof Date)return new Date(e.getTime());var n={};return t(e,function(e,t){n[t]=e}),n;case"boolean":case"string":case"number":return e;default:return}}function o(e){return e*(Math.PI/180)}function a(e,n,r){var i,o=n,u=r;if(2===arguments.length&&"string"==typeof o&&(u=o,o=!0),null===e)return null;switch(typeof e){case"object":if(Array.isArray(e)){for(var c=[],f=0;f<e.length;f++)c.push(a(e[f],o,u));return c}return l(e)?s(e,!0):e instanceof Date?new Date(e.getTime()):(i={},t(e,function(e,t){o&&"_"===t.charAt(0)||(i[t]=a(e,o&&t!==u))}),i);case"boolean":case"string":case"number":return e;default:return}}function s(e,t){var n,r=Object.getPrototypeOf(e).constructor;return t?(n=new r,a(Array.from(e)).forEach(function(e){n.add?n.add(e):n.set(e[0],e[1])})):n=new r(e),n}function u(){return Object.isPrototypeOf&&Array.from&&"undefined"!=typeof Set&&"undefined"!=typeof Map}function l(t){return null==e&&u&&(e=u()),!!e&&(Object.prototype.isPrototypeOf.call(Map.prototype,t)||Object.prototype.isPrototypeOf.call(Set.prototype,t))}function c(e,t){if(v(e))return setTimeout(e,t)}function f(e,t){if(v(e))return setInterval(e,t)}function d(){KeyLines._loggerDisabled||console.log([].slice.call(arguments).join(" "))}var h=Number.isNaN||function(e){return e!=e},p=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)};function g(e){return e>>>0===parseFloat(e)}function v(e){return"function"==typeof e}function m(e){return!("object"!=typeof e||e instanceof Date||Array.isArray(e)||S(e))}function y(e){return"[object Date]"===Object.prototype.toString.call(e)&&!h(e.getTime())}function b(e,t){return m(e)&&m(t)?Object.keys(t).every(function(n){return b(e[n],t[n])}):function(e,t){return void 0===e&&void 0===t||!(!h(e)||!h(t)||"number"!=typeof e||"number"!=typeof t)||(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(function(e,n){return b(e,t[n])}):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e===t)}(e,t)}function x(e,t){e&&v(e)&&c(function(){e(t)})}function w(e,t){e&&v(e)&&e(t)}var A=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function E(e,t){try{t(null,e())}catch(e){t(e)}}function M(e){return e&&!Array.isArray(e)&&e.items?e.items:e}function C(e){return Array.isArray(e)?e:[e]}function k(e,n){var r=a(e)||{};return"string"==typeof e?e:(t(n,function(e,t){_(r,t)&&!S(r[t])||(r[t]=e)}),r)}function T(e){return void 0!==e}function _(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function S(e){return null==e}function I(e){return e.lastIndexOf("\u2704")}function R(e){if(S(e))return null;var t=e+"",n=I(t);return-1!==n&&(t=t.substring(0,n)),t}function O(e){if(S(e))return null;var t=e+"",n=I(t);return-1!==n?t.substring(n+1):null}function N(e,t){return e.indexOf(t)>-1}var P=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})};function D(e){return Object.keys(e).length>0}function B(e){return C(e).reduce(function(e,t){return e[R(t)]=1,e},{})}function V(e){return C(e).reduce(function(e,t){return e.set(R(t),1),e},new Map)}function z(e){var t={};return e.forEach(function(e){t[e.id]=e}),t}function F(e){return e.map(function(e){return e.id})}function G(e,n){return e?(t(n,function(t,n){e[n]=t}),e):n}var H=Object.assign||function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n};function W(e,t){return Math.max(1e-4,Math.sqrt(e*e+t*t))}function Z(e,t){var n=e,r=t,i=W(n,r);return[n/=i,r/=i]}function Y(e,t,n,r){var i=Z(e,t),o=Z(n,r);return i[0]*o[0]+i[1]*o[1]}function j(){}function U(e,t){var n,r,i,o;return function(){var a=Date.now();function s(){r=Date.now(),e.apply(i,o)}i=this,o=arguments,n||(!r||a-r>=t?s():n=c(function(){n=null,s()},t-(a-r)))}}function X(e){var t=e,n=2147483647,r=n/48271;return{setSeed:function(e){t=e},next:function(){if(t){var e=t%r*48271-t/r*3399;return 4.656612875245797e-10*(t=e>0?e:e+n)}return Math.random()}}}var q={};function Q(e){if(!q[e]){var t=e;e.match(/'/)&&(t=e.replace(/'/g,"\\'")),t.match(/\s/)&&(t="'"+t+"'"),q[e]=t}return q[e]}function K(e){return J(e,e.target.id)}function J(e,t){var n=function(e){var t=document.getElementById(e),n={top:0,left:0};return t&&(n=t.getBoundingClientRect()),{top:n.top+window.pageYOffset-document.documentElement.clientTop,left:n.left+window.pageXOffset-document.documentElement.clientLeft}}(t);return{x:Math.floor(e.pageX-n.left),y:Math.floor(e.pageY-n.top)}}function $(e){return m(e.pos)&&!S(e.pos.lat)&&!S(e.pos.lng)}function ee(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1,e.preventCapture&&e.preventCapture(),e.preventBubble&&e.preventBubble()}function te(e,t){for(var n=e.split("."),r=t.split("."),i=0;i<n.length&&i<r.length;i++){var o=parseInt(n[i],10),a=parseInt(r[i],10);if(o!==a)return o-a}return n.length!==r.length?n.length-r.length:0}function ne(e){for(var t=0,n=e.length;t<n;t++){var r=e.charCodeAt(t);if(r>=1536&&(r<=1791||r>=64336&&r<=65023||r>=65136&&r<=65279||r>=1872&&r<=1919||r>=2208&&r<=2303))return!0}return!1}function re(e){return Math.floor(e*(11/14))}function ie(e){var t=e.charCodeAt(0);return t<=55295||t>=57344?t:1024*(t-55296)+(e.charCodeAt(1)-56320)+65536}function oe(e){return[[169,169],[174,174],[8252,8252],[8265,8265],[8419,8419],[8482,8482],[8505,8505],[8596,8601],[8617,8618],[8986,8987],[9e3,9e3],[9096,9096],[9167,9167],[9193,9203],[9208,9210],[9410,9410],[9642,9643],[9654,9654],[9664,9664],[9723,9726],[9728,9733],[9735,9746],[9748,9861],[9872,9989],[9992,10002],[10004,10004],[10006,10006],[10013,10013],[10017,10017],[10024,10024],[10035,10036],[10052,10052],[10055,10055],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10083,10087],[10133,10135],[10145,10145],[10160,10160],[10175,10175],[10548,10549],[11013,11015],[11035,11036],[11088,11088],[11093,11093],[12336,12336],[12349,12349],[12951,12951],[12953,12953],[65039,65039],[126976,127231],[127245,127247],[127279,127279],[127340,127345],[127358,127359],[127374,127374],[127377,127386],[127405,127487],[127489,127503],[127514,127514],[127535,127535],[127538,127546],[127548,127551],[127561,128317],[128326,128591],[128640,128767],[128884,128895],[128981,129023],[129036,129039],[129096,129103],[129114,129119],[129160,129167],[129198,129279],[129292,129338],[129340,129349],[129351,131069],[917536,917631]].some(function(t){return e>=t[0]&&e<=t[1]})}function ae(e){return se(e).some(function(e){return oe(ie(e))})}function se(e){for(var t,n=0,r=e.length,i=[];n<r;++n){t=!1;var o=e.charCodeAt(n);o>=55296&&o<=56319&&n+1<r&&(o=e.charCodeAt(n+1))>=56320&&o<=57343&&(i.push(e.slice(n,n+2)),++n,t=!0),t||i.push(e.charAt(n))}return i}function ue(e){var t,n,r,i=[],o=e.length;for(t=0;t<o;t++)r=ie(n=e[t]),0===t?i.push(n):u(r)?i[i.length-1]+=n:65038===r||65039===r?i[i.length-1]+=n:a(r)?i[i.length-1]+=n:s(r)&&2===i[i.length-1].length&&s(ie(i[i.length-1]))?i[i.length-1]+=n:8205===r&&ae(i[i.length-1])&&t<o-1&&oe(ie(e[t+1]))?(i[i.length-1]+=n,i[i.length-1]+=e[++t]):r>=917536&&r<=917631?i[i.length-1]+=n:i.push(n);function a(e){return e>=127995&&e<=127999}function s(e){return e>=127462&&e<=127487}function u(e){return e>=768&&e<=879||e>=8400&&e<=8447}return i}var le={},ce=0,fe=1,de=2,he=3,pe=4,ge=5,ve=6,me=7,ye=8,be=9,xe=10,we=11,Ae=12,Ee=13,Me=14,Ce=15,ke=16,Te=17,_e=18,Se=2,Ie=5,Re=[9,_e,10,ve,11,ge,12,ve,13,ye,14,ge,28,_e,31,ge,32,ve,33,ye,35,pe,38,we,43,pe,44,xe,45,be,46,xe,48,be,58,de,59,be,65,pe,91,ce,97,pe,123,ce,127,pe,133,_e,134,ge,160,_e,161,be,162,pe,166,we,170,pe,171,ce,173,pe,174,_e,176,pe,178,we,180,de,181,pe,182,ce,185,pe,186,de,187,ce,192,pe,215,ce,216,pe,247,ce,248,pe,697,ce,699,pe,706,ce,720,pe,722,ce,736,pe,741,ce,750,pe,751,ce,768,pe,880,Ae,884,ce,886,pe,894,ce,895,pe,900,ce,902,pe,903,ce,904,pe,1014,ce,1015,pe,1155,ce,1162,Ae,1418,ce,1423,pe,1425,we,1470,Ae,1471,fe,1472,Ae,1473,fe,1475,Ae,1476,fe,1478,Ae,1479,fe,1488,Ae,1536,fe,1542,he,1544,pe,1545,me,1547,we,1548,me,1549,be,1550,me,1552,pe,1563,Ae,1611,me,1632,Ae,1642,he,1643,we,1645,he,1648,me,1649,Ae,1750,me,1757,Ae,1758,he,1759,pe,1765,Ae,1767,me,1769,Ae,1770,pe,1774,Ae,1776,me,1786,de,1809,me,1810,Ae,1840,me,1869,Ae,1958,me,1969,Ae,1984,me,2027,fe,2036,Ae,2038,fe,2042,pe,2070,fe,2074,Ae,2075,fe,2084,Ae,2085,fe,2088,Ae,2089,fe,2096,Ae,2137,fe,2142,Ae,2208,fe,2260,me,2274,Ae,2275,he,2307,Ae,2362,ce,2363,Ae,2364,ce,2365,Ae,2369,ce,2377,Ae,2381,ce,2382,Ae,2385,ce,2392,Ae,2402,ce,2404,Ae,2433,ce,2434,Ae,2492,ce,2493,Ae,2497,ce,2503,Ae,2509,ce,2510,Ae,2530,ce,2534,Ae,2546,ce,2548,we,2555,ce,2561,we,2563,Ae,2620,ce,2622,Ae,2625,ce,2649,Ae,2672,ce,2674,Ae,2677,ce,2691,Ae,2748,ce,2749,Ae,2753,ce,2761,Ae,2765,ce,2768,Ae,2786,ce,2790,Ae,2801,ce,2809,we,2817,ce,2818,Ae,2876,ce,2877,Ae,2879,ce,2880,Ae,2881,ce,2887,Ae,2893,ce,2903,Ae,2914,ce,2918,Ae,2946,ce,2947,Ae,3008,ce,3009,Ae,3021,ce,3024,Ae,3059,ce,3065,pe,3066,we,3072,pe,3073,Ae,3134,ce,3137,Ae,3142,ce,3160,Ae,3170,ce,3174,Ae,3192,ce,3199,pe,3201,ce,3202,Ae,3260,ce,3261,Ae,3276,ce,3285,Ae,3298,ce,3302,Ae,3329,ce,3330,Ae,3393,ce,3398,Ae,3405,ce,3406,Ae,3426,ce,3430,Ae,3530,ce,3535,Ae,3538,ce,3544,Ae,3633,ce,3634,Ae,3636,ce,3647,Ae,3648,we,3655,ce,3663,Ae,3761,ce,3762,Ae,3764,ce,3773,Ae,3784,ce,3792,Ae,3864,ce,3866,Ae,3893,ce,3894,Ae,3895,ce,3896,Ae,3897,ce,3898,Ae,3902,pe,3953,ce,3967,Ae,3968,ce,3973,Ae,3974,ce,3976,Ae,3981,ce,4030,Ae,4038,ce,4039,Ae,4141,ce,4145,Ae,4146,ce,4152,Ae,4153,ce,4155,Ae,4157,ce,4159,Ae,4184,ce,4186,Ae,4190,ce,4193,Ae,4209,ce,4213,Ae,4226,ce,4227,Ae,4229,ce,4231,Ae,4237,ce,4238,Ae,4253,ce,4254,Ae,4957,ce,4960,Ae,5008,ce,5024,pe,5120,ce,5121,pe,5760,ce,5761,ye,5787,ce,5792,pe,5906,ce,5920,Ae,5938,ce,5941,Ae,5970,ce,5984,Ae,6002,ce,6016,Ae,6068,ce,6070,Ae,6071,ce,6078,Ae,6086,ce,6087,Ae,6089,ce,6100,Ae,6107,ce,6108,we,6109,ce,6112,Ae,6128,ce,6155,pe,6158,Ae,6160,_e,6277,ce,6279,Ae,6313,ce,6314,Ae,6432,ce,6435,Ae,6439,ce,6441,Ae,6450,ce,6451,Ae,6457,ce,6464,Ae,6470,pe,6622,ce,6656,pe,6679,ce,6681,Ae,6683,ce,6686,Ae,6742,ce,6743,Ae,6744,ce,6753,Ae,6754,ce,6755,Ae,6757,ce,6765,Ae,6771,ce,6784,Ae,6832,ce,6916,Ae,6964,ce,6965,Ae,6966,ce,6971,Ae,6972,ce,6973,Ae,6978,ce,6979,Ae,7019,ce,7028,Ae,7040,ce,7042,Ae,7074,ce,7078,Ae,7080,ce,7082,Ae,7083,ce,7086,Ae,7142,ce,7143,Ae,7144,ce,7146,Ae,7149,ce,7150,Ae,7151,ce,7154,Ae,7212,ce,7220,Ae,7222,ce,7227,Ae,7376,ce,7379,Ae,7380,ce,7393,Ae,7394,ce,7401,Ae,7405,ce,7406,Ae,7412,ce,7413,Ae,7416,ce,7424,Ae,7616,ce,7680,Ae,8125,ce,8126,pe,8127,ce,8130,pe,8141,ce,8144,pe,8157,ce,8160,pe,8173,ce,8178,pe,8189,ce,8192,pe,8203,ye,8206,_e,8207,ce,8208,fe,8232,pe,8233,ye,8234,ge,8235,Ee,8236,Me,8237,Ce,8238,ke,8239,Te,8240,be,8245,we,8260,pe,8261,be,8287,pe,8288,ye,8294,_e,8298,null,8304,_e,8305,de,8308,ce,8314,de,8316,xe,8319,pe,8320,ce,8330,de,8332,xe,8336,pe,8352,ce,8400,we,8448,Ae,8450,pe,8451,ce,8455,pe,8456,ce,8458,pe,8468,ce,8469,pe,8470,ce,8473,pe,8478,ce,8484,pe,8485,ce,8486,pe,8487,ce,8488,pe,8489,ce,8490,pe,8494,ce,8495,we,8506,ce,8508,pe,8512,ce,8517,pe,8522,ce,8526,pe,8528,ce,8544,pe,8585,ce,8722,pe,8723,xe,8724,we,9014,pe,9083,ce,9109,pe,9110,ce,9352,pe,9372,de,9450,ce,9900,pe,9901,ce,10240,pe,10496,ce,11264,pe,11493,ce,11499,pe,11503,ce,11506,Ae,11513,ce,11520,pe,11647,ce,11648,Ae,11744,ce,11776,Ae,12288,pe,12289,ye,12293,pe,12296,ce,12321,pe,12330,ce,12334,Ae,12336,ce,12337,pe,12342,ce,12344,pe,12349,ce,12353,pe,12441,ce,12443,Ae,12445,pe,12448,ce,12449,pe,12539,ce,12540,pe,12736,ce,12784,pe,12829,ce,12832,pe,12880,ce,12896,pe,12924,ce,12927,pe,12977,ce,12992,pe,13004,ce,13008,pe,13175,ce,13179,pe,13278,ce,13280,pe,13311,ce,13312,pe,19904,ce,19968,pe,42128,ce,42192,pe,42509,ce,42512,pe,42607,ce,42611,Ae,42612,pe,42622,Ae,42624,pe,42654,ce,42656,Ae,42736,ce,42738,Ae,42752,ce,42786,pe,42888,ce,42889,pe,43010,ce,43011,Ae,43014,ce,43015,Ae,43019,ce,43020,Ae,43045,ce,43047,Ae,43048,ce,43056,pe,43064,ce,43072,we,43124,ce,43136,pe,43204,ce,43214,Ae,43232,ce,43250,Ae,43302,ce,43310,Ae,43335,ce,43346,Ae,43392,ce,43395,Ae,43443,ce,43444,Ae,43446,ce,43450,Ae,43452,ce,43453,Ae,43493,ce,43494,Ae,43561,ce,43567,Ae,43569,ce,43571,Ae,43573,ce,43584,Ae,43587,ce,43588,Ae,43596,ce,43597,Ae,43644,ce,43645,Ae,43696,ce,43697,Ae,43698,ce,43701,Ae,43703,ce,43705,Ae,43710,ce,43712,Ae,43713,ce,43714,Ae,43756,ce,43758,Ae,43766,ce,43777,Ae,44005,ce,44006,Ae,44008,ce,44009,Ae,44013,ce,44016,Ae,64285,ce,64286,fe,64287,Ae,64297,fe,64298,xe,64336,fe,64830,me,64848,pe,65021,me,65024,pe,65040,Ae,65056,pe,65072,Ae,65104,pe,65105,be,65106,pe,65108,be,65109,pe,65110,be,65119,pe,65120,we,65122,pe,65124,xe,65129,pe,65131,we,65136,pe,65279,me,65281,_e,65283,pe,65286,we,65291,pe,65292,xe,65293,be,65294,xe,65296,be,65306,de,65307,be,65313,pe,65339,ce,65345,pe,65371,ce,65382,pe,65504,ce,65506,we,65509,pe,65512,we,1114109,pe],Le={1536:{t:4},1537:{t:4},1538:{t:4},1539:{t:4},1540:{t:4},1541:{t:4},1544:{t:4},1547:{t:4},1568:{t:2},1569:{t:4,isolated:65152},1570:{t:1,isolated:65153,initial:65154},1571:{t:1,isolated:65155,initial:65156},1572:{t:1,isolated:65157,initial:65158},1573:{t:1,isolated:65159,initial:65160},1574:{t:2,isolated:65161,final:65163,median:65164,initial:65162},1575:{t:1,isolated:65165,initial:65166},1576:{t:2,isolated:65167,final:65169,median:65170,initial:65168},1577:{t:1,isolated:65171,initial:65172},1578:{t:2,isolated:65173,final:65175,median:65176,initial:65174},1579:{t:2,isolated:65177,final:65179,median:65180,initial:65178},1580:{t:2,isolated:65181,final:65183,median:65184,initial:65182},1581:{t:2,isolated:65185,final:65187,median:65188,initial:65186},1582:{t:2,isolated:65189,final:65191,median:65192,initial:65190},1583:{t:1,isolated:65193,initial:65194},1584:{t:1,isolated:65195,initial:65196},1585:{t:1,isolated:65197,initial:65198},1586:{t:1,isolated:65199,initial:65200},1587:{t:2,isolated:65201,final:65203,median:65204,initial:65202},1588:{t:2,isolated:65205,final:65207,median:65208,initial:65206},1589:{t:2,isolated:65209,final:65211,median:65212,initial:65210},1590:{t:2,isolated:65213,final:65215,median:65216,initial:65214},1591:{t:2,isolated:65217,final:65219,median:65220,initial:65218},1592:{t:2,isolated:65221,final:65223,median:65224,initial:65222},1593:{t:2,isolated:65225,final:65227,median:65228,initial:65226},1594:{t:2,isolated:65229,final:65231,median:65232,initial:65230},1595:{t:2},1596:{t:2},1597:{t:2},1598:{t:2},1599:{t:2},1600:{t:3,isolated:1600,final:1600,median:1600,initial:1600},1601:{t:2,isolated:65233,final:65235,median:65236,initial:65234},1602:{t:2,isolated:65237,final:65239,median:65240,initial:65238},1603:{t:2,isolated:65241,final:65243,median:65244,initial:65242},1604:{t:2,isolated:65245,final:65247,median:65248,initial:65246},1605:{t:2,isolated:65249,final:65251,median:65252,initial:65250},1606:{t:2,isolated:65253,final:65255,median:65256,initial:65254},1607:{t:2,isolated:65257,final:65259,median:65260,initial:65258},1608:{t:1,isolated:65261,initial:65262},1609:{t:2,isolated:65263,initial:65264},1610:{t:2,isolated:65265,final:65267,median:65268,initial:65266},1646:{t:2},1647:{t:2},1649:{t:1},1650:{t:1},1651:{t:1},1652:{t:4},1653:{t:1},1654:{t:1},1655:{t:1},1656:{t:2},1657:{t:2},1658:{t:2},1659:{t:2},1660:{t:2},1661:{t:2},1662:{t:2,isolated:64342,final:64344,median:64345,initial:64343},1663:{t:2},1664:{t:2},1665:{t:2},1666:{t:2},1667:{t:2},1668:{t:2},1669:{t:2},1670:{t:2,isolated:64378,final:64380,median:64381,initial:64379},1671:{t:2},1672:{t:1},1673:{t:1},1674:{t:1},1675:{t:1},1676:{t:1},1677:{t:1},1678:{t:1},1679:{t:1},1680:{t:1},1681:{t:1},1682:{t:1},1683:{t:1},1684:{t:1},1685:{t:1},1686:{t:1},1687:{t:1},1688:{t:1,isolated:64394,initial:64395},1689:{t:1},1690:{t:2},1691:{t:2},1692:{t:2},1693:{t:2},1694:{t:2},1695:{t:2},1696:{t:2},1697:{t:2},1698:{t:2},1699:{t:2},1700:{t:2},1701:{t:2},1702:{t:2},1703:{t:2},1704:{t:2},1705:{t:2,isolated:64398,final:64400,median:64401,initial:64399},1706:{t:2},1707:{t:2},1708:{t:2},1709:{t:2},1710:{t:2},1711:{t:2,isolated:64402,final:64404,median:64405,initial:64403},1712:{t:2},1713:{t:2},1714:{t:2},1715:{t:2},1716:{t:2},1717:{t:2},1718:{t:2},1719:{t:2},1720:{t:2},1721:{t:2},1722:{t:2},1723:{t:2},1724:{t:2},1725:{t:2},1726:{t:2},1727:{t:2},1728:{t:1},1729:{t:2},1730:{t:2},1731:{t:1},1732:{t:1},1733:{t:1},1734:{t:1},1735:{t:1},1736:{t:1},1737:{t:1},1738:{t:1},1739:{t:1},1740:{t:2,isolated:64508,final:64510,median:64511,initial:64509},1741:{t:1},1742:{t:2},1743:{t:1},1744:{t:2},1745:{t:2},1746:{t:1},1747:{t:1},1749:{t:1},1757:{t:4},1774:{t:1},1775:{t:1},1786:{t:2},1787:{t:2},1788:{t:2},1791:{t:2},1808:{t:1},1810:{t:2},1811:{t:2},1812:{t:2},1813:{t:1},1814:{t:1},1815:{t:1},1816:{t:1},1817:{t:1},1818:{t:2},1819:{t:2},1820:{t:2},1821:{t:2},1822:{t:1},1823:{t:2},1824:{t:2},1825:{t:2},1826:{t:2},1827:{t:2},1828:{t:2},1829:{t:2},1830:{t:2},1831:{t:2},1832:{t:1},1833:{t:2},1834:{t:1},1835:{t:2},1836:{t:1},1837:{t:2},1838:{t:2},1839:{t:1},1869:{t:1},1870:{t:2},1871:{t:2},1872:{t:2},1873:{t:2},1874:{t:2},1875:{t:2},1876:{t:2},1877:{t:2},1878:{t:2},1879:{t:2},1880:{t:2},1881:{t:1},1882:{t:1},1883:{t:1},1884:{t:2},1885:{t:2},1886:{t:2},1887:{t:2},1888:{t:2},1889:{t:2},1890:{t:2},1891:{t:2},1892:{t:2},1893:{t:2},1894:{t:2},1895:{t:2},1896:{t:2},1897:{t:2},1898:{t:2},1899:{t:1},1900:{t:1},1901:{t:2},1902:{t:2},1903:{t:2},1904:{t:2},1905:{t:1},1906:{t:2},1907:{t:1},1908:{t:1},1909:{t:2},1910:{t:2},1911:{t:2},1912:{t:1},1913:{t:1},1914:{t:2},1915:{t:2},1916:{t:2},1917:{t:2},1918:{t:2},1919:{t:2},2208:{t:2},2209:{t:2},2210:{t:2},2211:{t:2},2212:{t:2},2213:{t:2},2214:{t:2},2215:{t:2},2216:{t:2},2217:{t:2},2218:{t:1},2219:{t:1},2220:{t:1},2221:{t:4},2222:{t:1},2223:{t:2},2224:{t:2},2225:{t:1},2226:{t:1},2227:{t:2},2228:{t:2},2230:{t:2},2231:{t:2},2232:{t:2},2233:{t:1},2234:{t:2},2235:{t:2},2236:{t:2},2237:{t:2},2274:{t:4},8204:{t:4},8205:{t:3},8239:{t:4},8294:{t:4},8295:{t:4},8296:{t:4},8297:{t:4},65269:{t:1,isolated:65269,initial:65270},65271:{t:1,isolated:65271,initial:65272},65273:{t:1,isolated:65273,initial:65274},65275:{t:1,isolated:65275,initial:65276}},Oe={1611:1,1612:1,1613:1,1614:1,1615:1,1616:1,1617:1,1618:1,1619:1,1620:1,1621:1,1648:1},Ne={1456:1,1457:1,1458:1,1459:1,1460:1,1461:1,1462:1,1463:1,1464:1,1465:1,1466:1,1467:1,1473:1,1474:1},Pe={"\u0644":{"\u0627":"\ufefb","\u0622":"\ufef5","\u0623":"\ufef7","\u0625":"\ufef9"},"\u0627":{"\u0644":{"\u0644":{"\u0647":"\ufdf2"}}}},De={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{",">":"<","<":">"},Be=63;function Ve(e,t){if(le[t])return le[t];var n={characters:[],logicalOrder:e,result:[]},r=function(e){return e.map(function(e){return function(e){for(var t=e.charCodeAt(0),n=0;n<Re.length;n+=2)if(t<Re[n])return Re[n+1];return pe}(e)||0})}(e),i=function(e,t){var n=0,r=[],i=[];function o(t){var i=n,o=t.map(function(t){return{text:e[n++],level:0,embeddingLevel:null,type:t}}),a=e.slice(i,i+t.length);r.push({symbols:a,level:0,characters:o})}return t.forEach(function(e){e!==ge?i.push(e):i.length>0&&(o(i),n++,i.length=0)}),i.length>0&&o(i),r}(e,r),o=i.length;return i.forEach(function(e,t){!function(e){e.level=1}(e),function(e){var t=e.level,n=[];n.push({level:e.level,override:0});var r=0,i=n[0],o=i.level,a=[];function s(e,t){if(e<Be)return n.push({level:e,override:t}),e}e.characters.forEach(function(e){var u=e.type;u===Me?(o+=Ze(o)?2:1,t=s(o,0)):u===Ee?(o+=We(o)?2:1,t=s(o,0)):u===Te?(o+=Ze(o)?2:1,t=s(o,2)):u===ke&&(o+=We(o)?2:1,t=s(o,1)),u===Ce?n.length>1&&(i=n.pop()):i=n[n.length-1],o=t=i.level,-1===[_e,Me,Ee,Te,ke,Ce].indexOf(u)&&(i.override>0&&(e.type=2===i.override?fe:ce),e.embeddingLevel=t,e.index=r++,a.push(e))}),e.characters=a}(e),0!==e.characters.length&&(function(e){(function(e){e.characters.filter(Ye(Ae)).forEach(function(t){if(t.isNSM=!0,t.index>0){var n=e.characters[t.index-1].type;n===me&&(t.type=me),fe===n&&(t.type=fe)}})})(e),function(e){e.characters.filter(Ye(de)).forEach(function(t){for(var n=t.index-1;n>=0;n--){var r=e.characters[n].type;if(r===me){t.type=he;break}if([fe,ce].indexOf(r)>-1)break}})}(e),function(e){e.characters.filter(Ye(me)).forEach(function(e){e.type=fe,e.isAL=!0})}(e),function(e){e.characters.filter(Ye([xe,be])).forEach(function(t){var n=t.index;if(n>0&&n<e.characters.length-1){var r=e.characters[n-1].type;r!==e.characters[n+1].type||r!==de&&r!==he||(t.type=r)}})}(e),function(e){e.characters.filter(Ye(we)).forEach(function(t){var n=t.index,r=n;if(n>0){for(var i=e.characters[n-1].type;r-- >0&&i===we;)i=e.characters[r].type;if(i===de)return void(t.type=de)}if(n<e.characters.length-1){var o=e.characters[n+1].type;for(r=n;r++<e.characters.length-1&&o===we;)o=e.characters[r].type;o===de&&(t.type=de)}})}(e),function(e){e.characters.filter(Ye([we,be,xe,he])).forEach(function(e){e.type=pe})}(e),function(e){e.characters.filter(Ye(de)).forEach(function(t){for(var n=t.index-1;n>=0;n--){var r=e.characters[n].type;if(r===fe)return;if(r===ce)return void(t.type=ce)}})}(e)}(e),function(e){(function(e){e.characters.filter(Ye([ge,ve,ye,pe])).forEach(function(t){var n=t.index;if(e.level<t.embeddingLevel)t.type=We(t.embeddingLevel)?ce:fe;else if(0!==n&&n!==e.characters.length-1&&n>0&&n<e.characters.length-1){for(var r=e.characters[n-1].type,i=e.characters[n+1].type,o=n;o-- >0&&-1===[fe,me,de,he,ce].indexOf(r);)r=e.characters[o].type;for(o=n;o++<e.characters.length-1&&-1===[fe,me,de,he,ce].indexOf(i);)i=e.characters[o].type;t.type=[fe,me,de,he].indexOf(r)>-1&&[fe,me,de,he].indexOf(i)>-1?fe:r===ce&&i===ce?ce:We(t.embeddingLevel)?ce:fe}})})(e),function(e){e.characters.filter(Ye([ge,ve,ye,pe])).forEach(function(e){e.type=We(e.embeddingLevel)?ce:fe})}(e)}(e),function(e){var t;e.characters.forEach(function(e){var n=e.type;t=e.embeddingLevel,n===ce?Ze(t)&&t++:n===fe||n===me?We(t)&&t++:n!==de&&n!==he||(We(t)?t+=2:t++),e.level=t})}(e),function(e){e.characters.filter(function(e){return De[e.text]&&Ze(e.level)}).forEach(function(e){e.text=De[e.text]})}(e),function(e){var t=0;e.characters.forEach(function(e){e.level>t&&(t=e.level)}),e.highestLevel=t}(e),function(e){var t=[],n=0,r=0,i={idx:0,length:0,level:e.characters[0].level};e.characters.forEach(function(e){e.level!==n&&0!==r&&(t.push(i),i={idx:r,length:0,level:e.level}),i.length++,r++,n=e.level}),t.push(i),e.levelRuns=t}(e),function(e){var t=e.highestLevel;for(e.reorderedCharacters=a(e.characters);t>0;)ze(e,t),t--}(e),Fe(e,Ne,!1),function(e){Fe(e,Oe,!0),function(e){for(var t=e.reorderedCharacters.reverse(),n=[],r=0,i=t.length;r<i;r++){var o=t[r],a=Pe[o.text[0]];if(a){var s=He(r,a,t);s&&(r+=s.length,o.text=s.text)}n.push(o)}var u=0;e.reorderedCharacters=n.reverse(),e.reorderedCharacters.forEach(function(e){e.index=u++})}(e),function(e){var t,n=function(){e.arabicTextRuns.push(t),t=null},r=e.reorderedCharacters;e.arabicTextRuns=[];for(var i=0,o=r.length;i<o;i++){var a=r[i].text.charCodeAt(0),s=Le[a];if(s&&[fe,Se,ce].indexOf(s.t)>-1){if(t||(t={startIndex:i}),t.endIndex=i+1,i+1<o){var u=r[i+1].text.charCodeAt(0),l=Le[u];l&&l.t===fe&&n()}else n();s.t===ce&&n()}else s&&s.t===Ie||t&&n()}t&&n()}(e),function(e){e.arabicTextRuns.forEach(function(t){for(var n,r=t.startIndex,i=t.endIndex,o=r;o<i;o++){var a=e.reorderedCharacters[o],s=Le[a.text.charCodeAt(0)];n=null,i-r>1?o===r?n=s.initial:o===i-1?n=s.final:o>r&&o<i-1&&(n=s.median):n=s.isolated,n&&(a.text=String.fromCharCode(n)+a.text.substring(1))}})}(e)}(e),n.result=n.result.concat(e.reorderedCharacters),t<o-1&&n.result.push({text:"\n",level:0,type:ge}),n.characters=n.characters.concat(e.characters))}),n.types=r,le[t]=n,n}function ze(e,t){var n,r=[];e.levelRuns.forEach(function(e){e.level>=t?n?n.endIndex+=e.length:r.push(n={startIndex:e.idx,endIndex:e.idx+e.length}):n=null}),r.forEach(function(t){!function(e,t){var n=t.startIndex,r=t.endIndex,i=e.reorderedCharacters.slice(n,r).reverse();e.reorderedCharacters=e.reorderedCharacters.slice(0,n).concat(i).concat(e.reorderedCharacters.slice(r))}(e,t)})}function Fe(e,t,n){for(var r=e.reorderedCharacters.reverse(),i=[],o=0,a=r.length;o<a;o++){var s=r[o],u=Ge(o,r,t);o+=u.length,n||(s.text+=u.join("")),i.push(s)}var l=0;e.reorderedCharacters=i.reverse(),e.reorderedCharacters.forEach(function(e){e.index=l++})}function Ge(e,t,n){for(var r=[],i=e+1;i<t.length;i++){if(!n[t[i].text.charCodeAt(0)])return r;r.push(t[i].text)}return r}function He(e,t,n){for(var r=0,i=t,o=e+1;o<n.length;o++){var a=i[n[o].text[0]];if(!a)return!1;if(r++,"string"==typeof a)return{text:a,length:r};i=a}return!1}function We(e){return e%2==0}function Ze(e){return e%2!=0}function Ye(e){var t=C(e);return function(e){return t.indexOf(e.type)>-1}}var je={},Ue={},Xe="rgb(128, 128, 128)",qe={aqua:"rgb(0, 255, 255)",black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",fuchsia:"rgb(255, 0, 255)",green:"rgb(0, 128, 0)",grey:Xe,gray:Xe,lime:"rgb(0, 255, 0)",maroon:"rgb(128, 0, 0)",navy:"rgb(0, 0, 128)",olive:"rgb(128, 128, 0)",orange:"rgb(255,165,0)",purple:"rgb(128, 0, 128)",red:"rgb(255, 0, 0)",silver:"rgb(192, 192, 192)",teal:"rgb(0, 128, 128)",yellow:"rgb(255, 255, 0)",white:"rgb(255, 255, 255)",ci:"rgb(0, 174, 239)",cia:"rgba(0, 174, 239, 0.5)",keyline:"rgb(88, 89, 91)",midgrey:"rgb(145, 146, 149)",lightgrey:"rgb(208, 209, 211)",edit:"rgb(114, 179, 0)",attention:"rgb(220, 0, 0)",information:"rgb(0, 150, 255)",description:"rgb(255, 175, 0)",textback:"rgba(255,255,255,0.6)",transparent:"rgba(255,255,255,0.0)",touch:"rgba(255,0,0,0.6)"};function Qe(e,t,n){return"rgb("+e+","+t+","+n+")"}function Ke(e,t,n,r){return"rgba("+e+","+t+","+n+","+r+")"}var Je=/^(?:rgb)?\(\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?\)$/i,$e=/^(?:rgba)?\(\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),\s?(0|1|0\.\d{0,20}|1\.0)\)$/i,et=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i,tt=/^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i;function nt(e){return!!rt(e).length}function rt(e){var t,n=[];if("string"!=typeof e)return n;var r=qe[e.toLowerCase()]||e,i=r.match(Je);if(i||(i=r.match($e)),i){for(t=1;t<4;t++)n.push(parseInt(i[t],10));void 0!==i[4]&&n.push(+i[4])}else{if(!(i=r.match(tt))&&(i=r.match(et)))for(t=1;t<4;t++)i[t]=""+i[t]+i[t];if(i)for(t=1;t<4;t++)n.push(parseInt(i[t],16))}return n}function it(e){if("transparent"===e)return 0;var t=e.match($e);return t?parseFloat(t[4]):1}function ot(e){var t=rt(e),n=ct(t[0],t[1],t[2]);return n.push(it(e)),n}function at(e){var t=dt(e[0],e[1],e[2]);return Ke(t[0],t[1],t[2],e[3])}function st(e,t){return 1===t?e:ht(e,t)}function ut(e){function t(){return Math.floor(239*Math.random())+1}var n=Qe(t(),t(),t());return e&&n in e?ut(e):n}function lt(e,t,n){var r;return e&&(e.bg&&e.gh?r=t*n:e.bg?r=t:e.gh&&(r=n)),0===r?1e-6:r}function ct(e,t,n){var r,i,o=e/255,a=t/255,s=n/255,u=Math.max(o,a,s),l=Math.min(o,a,s),c=(u+l)/2;if(u===l)r=0,i=0;else{var f=u-l;switch(i=c>.5?f/(2-u-l):f/(u+l),u){case o:r=(a-s)/f+(a<s?6:0);break;case a:r=(s-o)/f+2;break;case s:r=(o-a)/f+4}r/=6}return[r,i,c]}function ft(e,t,n){var r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function dt(e,t,n){var r,i,o;if(0===t)r=n,i=n,o=n;else{var a=n<.5?n*(1+t):n+t-n*t,s=2*n-a;r=ft(s,a,e+1/3),i=ft(s,a,e),o=ft(s,a,e-1/3)}return[Math.round(255*r),Math.round(255*i),Math.round(255*o)]}function ht(e,t){var n=e+t;if(!je[n]){var r=rt(e),i=it(e);je[n]=Ke(r[0],r[1],r[2],i*t)}return je[n]}function pt(e){if(e){if(!Ue[e]){var t=rt(e),n=it(e);Ue[e]=[t[0],t[1],t[2],Math.floor(255*n)]}return Ue[e]}return e}var gt={circle:"C",arc:"A",line:"L",text:"T",image:"I",rect:"R",roundrect:"RR",triangle:"TR"},vt=14,mt=26,yt=Math.PI/2,bt={},xt=(new Date).getTime()/36774,wt={};function At(){wt={}}var Et="sans-serif",Mt=1;function Ct(e){Mt=e}var kt=!1;function Tt(e){kt=e}function _t(e,t,n,r){var i=!!n,o=Q(r||Et);e===wt.context&&t===wt.fontSize&&i===wt.bold&&o===wt.family||(wt.context=e,wt.fontSize=t,wt.bold=i,wt.family=o,e.font="normal "+(i?"bold":"normal")+" "+t+"px "+o,e.textBaseline="bottom")}function St(e,t){var n=0,r=0,i=0,o=0;switch(t.p){case gt.circle:n=t.x-t.r,r=t.x+t.r,i=t.y-t.r,o=t.y+t.r;break;case gt.line:case gt.rect:case gt.roundrect:case gt.image:n=Math.min(t.x1,t.x2),r=Math.max(t.x1,t.x2),i=Math.min(t.y1,t.y2),o=Math.max(t.y1,t.y2);break;case gt.text:var a=Kt(e,t.t,t.fs,t.bo,t.ff);i=t.y-a.height,r=(n=t.x-(t.xc?a.width/2:0))+a.width,o=t.y;break;case gt.triangle:n=Math.min(t.x1,t.x2,t.x3),r=Math.max(t.x1,t.x2,t.x3),i=Math.min(t.y1,t.y2,t.y3),o=Math.max(t.y1,t.y2,t.y3);break;case gt.arc:var s=t.x+t.r*Math.cos(t.sa),u=t.y+t.r*Math.sin(t.sa),l=t.x+t.r*Math.cos(t.ea),c=t.y+t.r*Math.sin(t.ea);n=Math.min(s,l),r=Math.max(s,l),i=Math.min(u,c),o=Math.max(u,c);for(var f=(Math.floor(t.sa/yt)+1)*yt;f<t.ea;){var d=t.x+t.r*Math.cos(f),h=t.y+t.r*Math.sin(f);n=Math.min(n,d),r=Math.max(r,d),i=Math.min(i,h),o=Math.max(o,h),f+=yt}}var p=t.a;return{x1:n+=p.x,y1:i+=p.y,x2:r+=p.x,y2:o+=p.y}}function It(e,t){return{x1:Math.min(e.x1,t.x1),y1:Math.min(e.y1,t.y1),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Rt(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2}function Lt(e,t,n,r,i,o){var a=o||0;return Math.sqrt((e-r)*(e-r)+(t-i)*(t-i))+a<n}function Ot(e,t,n,r,i){return e.x1<t&&r<e.x2&&e.y1<n&&i<e.y2}function Nt(e,t,n,r,i,o,a){var s=n*n;return(e-r)*(e-r)+(t-i)*(t-i)<s&&(e-r)*(e-r)+(t-a)*(t-a)<s&&(e-o)*(e-o)+(t-i)*(t-i)<s&&(e-o)*(e-o)+(t-a)*(t-a)<s}var Pt=function(e,t,n,r,i,o,a){var s=Math.floor((n.x2-n.x1)/2),u=Math.floor((n.y2-n.y1)/2),l="-resize",c=Math.floor(4*r);zt(e,t,{x:n.x1,y:n.y1},c,1,i+a+"nw"+l,o),Vt(e,t,{x:n.x1+s,y:n.y1},c,1,i+a+"n"+l,o),zt(e,t,{x:n.x2,y:n.y1},c,1,i+a+"ne"+l,o),Vt(e,t,{x:n.x2,y:n.y1+u},c,1,i+a+"e"+l,o),zt(e,t,{x:n.x2,y:n.y2},c,1,i+a+"se"+l,o),Vt(e,t,{x:n.x2-s,y:n.y2},c,1,i+a+"s"+l,o),zt(e,t,{x:n.x1,y:n.y2},c,1,i+a+"sw"+l,o),Vt(e,t,{x:n.x1,y:n.y2-u},c,1,i+a+"w"+l,o)};function Dt(e){return"transparent"===e||e===qe.transparent}var Bt,Vt=function(e,t,n,r,i,o,a){var s=t.x(n.x),u=t.y(n.y),l=Dt(a)?qe.transparent:qe.white;e.rect(s-r,u-r,s+r,u+r,a,i,l,!0,o)},zt=function(e,t,n,r,i,o,a){var s=Dt(a)?qe.transparent:qe.white;e.circle(t.x(n.x),t.y(n.y),r+1,a,i,s,!0,o)};function Ft(e,t,n,r,i,o,a,s){var u=St(t,r);Pt(e,n,u,i,o,a,s)}function Gt(e,t,n,r,i,o){var a=st(t,n);o?(e.fillStyle=a,e.fillRect(0,0,r,i)):(e.webgl?e.webglCanvas:e.canvas).style.background=a}function Ht(e,t,n,r,i,o){if(t)if(o){for(var a=e.createLinearGradient(0,0,0,i),s=0;s<t.length;s++)a.addColorStop(t[s].r,st(t[s].c,n));e.fillStyle=a,e.fillRect(0,0,r,i)}else Wt(e.webgl?e.webglCanvas:e.canvas,t,n)}function Wt(e,t,n){for(var r="linear-gradient(",i=0,o=t.length;i<o;i++){var a=t[i];r+=st(a.c,n),r+=" "+100*parseFloat(a.r)+"%",i+1<o&&(r+=",")}e.style.background=r+=")"}function Zt(e){var t;return"string"==typeof e&&(t=e.split(",")[0]),t}function Yt(e,t){if(A(e))return e;var n=jt();t?document.getElementById(t).appendChild(n):document.body.appendChild(n);var r=e.replace(/\./g,"");n.className!==r&&(n.className=r);var i=window.getComputedStyle(n,":before").getPropertyValue("content");return n.parentNode&&n.parentNode.removeChild(n),n.className="",i.charCodeAt(1)||i.charCodeAt(0)}function jt(){if(Bt)return Bt;var e=document.createElement("span");return e.style.position="absolute",e.style.left="-10000px",e.style.top="-10000px",e.style.visibility="hidden",e.style.lineHeight="normal",e.style.fontSize="200px",e.style.fontVariant="normal",e.style.fontStyle="normal",e.style.letterSpacing="0",e.style.width="auto",e.style.height="auto",e.style.display="block",e.style.margin=0,e.style.padding=0,e.style.whiteSpace="nowrap",Bt=e,e}function Ut(e,t,n){e.style.fontFamily=n,e.innerText=t}function Xt(e,t,n){var r=jt();document.body.appendChild(r),Ut(r,e,n);var i=r.offsetHeight;return Ut(r,"",void 0),i/200*t||t}var qt={},Qt={};function Kt(e,t,n,r,i,o){var a=i||Et,s=t+!!r+a,u=0,l=0,c=qt[s],f=(p(n)?n:vt)/mt;return Qt[a]||(Qt[a]=Xt("|M",mt,a)),l=Qt[a],void 0===c&&(_t(e,mt,r,i),o&&(l=Xt(t,mt,a)),e.webgl?(ne(t)&&(l=re(mt)),u=function(e,t,n,r,i,o){var a,s,u=0,l=ue(se(t));if(ne(t)){var c=Ve(l,t).result;for(a=0,s=c.length;a<s;a++){var f=c[a];ne(f.text)?_t(e,n,i,o):_t(e,r,i,o),u+=e.measureText(f.text).width}}else for(a=0,s=l.length;a<s;a++)u+=e.measureText(l[a]).width;return u}(e,t,l,mt,r,a)):u=e.measureText(t).width,qt[s]=c={width:u,height:l}),{width:Math.round(c.width*f),height:Math.round(c.height*f)}}function Jt(e){var t=e.id||"canvas";return void 0===bt[t]&&(bt[t]=r(e)),bt[t]}var $t=Object.freeze({defaultFontSize:vt,baseLineFontSize:mt,clearLastFont:At,get browserMinimumFontSize(){return Mt},setBrowserMinimumFontSize:Ct,get minimumFontChecked(){return kt},setMinimumFontChecked:Tt,setFont:_t,setExtents:function(e,t,n,r,i,o){var a,s,u=t,l=n,c=r,f=i,d=e.a;switch(u-=d.x,l-=d.y,c-=d.x,f-=d.y,u=Math.round(u),l=Math.round(l),c=Math.round(c),f=Math.round(f),e.p){case gt.circle:a=Math.abs((c-u)/2),s=Math.abs((f-l)/2),e.x=Math.floor(Math.min(u,c)+a),e.y=Math.floor(Math.min(l,f)+s),e.r=o;break;case gt.line:case gt.rect:case gt.roundrect:e.x1=Math.min(u,c),e.x2=Math.max(u,c),e.y1=Math.min(l,f),e.y2=Math.max(l,f);break;case gt.text:e.x=Math.min(u,c),e.y=Math.max(l,f);break;case gt.image:e.x1=Math.min(u,c),e.y1=Math.min(l,f),e.x2=Math.max(u,c),e.y2=Math.max(l,f)}},extents:St,join:It,inside:Rt,insideCircle:Lt,rectContains:Ot,circleContains:Nt,getHandles:Ft,backFill:Gt,backgroundGradient:Ht,setCssGradient:Wt,pickFirstFamily:Zt,getFontIcon:Yt,measureFontHeight:Xt,measureText:Kt,clearMeasureTextCache:function(){qt={},Qt={}},isRTL:Jt});function en(){var e,t={};function n(e,t){for(var n=e.replace(/^\s*|\s*$/g,"").split(/[(\s*,\s*)|(\s+)]/),r=0;r<n.length;r++)t(n[r])}function r(t,r,i,o){var a=(e=e||{public:{},private:{}})[o];n(t,function(e){a[e]=a[e]||[],a[e].push({handler:r,context:i})})}function i(t,r,i){if(e&&e[i])if(t){var o=e[i];n(t,function(e){if(r){if(o[e]){for(var t=[],n=0;n<o[e].length;n++)r!==o[e][n].handler&&t.push(o[e][n]);o[e]=t}}else o[e]=[]})}else e[i]={}}function o(e,t){var n=e[0],r=!1;if(t)for(var i,o=2;o--;){var a=o?n:"all",s=o?e.slice(1):e;if(t[a]){var u=t[a].slice(0);for(i=0;i<u.length;i++){var c=u[i];try{r=c.handler.apply(c.context||this,s)||r}catch(e){l(n,e)}}}}return r}function a(t,n){var r=!1,i=Array.prototype.slice.call(t);return e&&(r=o(i,e.private),n&&(r=o(i,e.public)||r)),r}t.bind=function(e,t,n){r(e,t,n,"public")},t.privateBind=function(e,t,n){r(e,t,n,"private")},t.unbind=function(e,t){i(e,t,"public")},t.privateUnbind=function(e,t){i(e,t,"private")},t.trigger=function(){return a(arguments,!0)},t.privateTrigger=function(){return a(arguments,!1)},t.getErrors=function(){return u};var s=10,u=[];function l(e,n){var r=(new Date).toString()+" Function bound to '"+e+"' threw error: "+n.toString();t.trigger("error",r,n),d(r),u.push(r),u.length>s&&u.shift()}return t.linearEasing=function(e){return e<0?0:e>1?1:e},t.cubicEasing=function(e){return e<0?0:e>1?1:function(e,t,n,r,i,o){var a=.75,s=0-a,u=1-a-s;function l(e){return((u*e+s)*e+a)*e}return function(e,t){var n=function(e,t){var n,r,i,o,c,f;for(i=e,f=0;f<8;f++){if(o=l(i)-e,Math.abs(o)<.005)return i;if(c=(3*u*i+2*s)*i+a,Math.abs(c)<1e-6)break;i-=o/c}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=l(i),Math.abs(o-e)<.005)return i;e>o?n=i:r=i,i=(r-n)/2+n}return i}(e);return((-1.97*n+2.94)*n+.03)*n}(e)}(e)},t.atanEasing=function(e){return Math.atan(1*(e-.5))/(2*Math.atan(.5))+.5},t}function tn(e,t,n){var r=Date.now(),i=Math.floor(r/1e3),o=0,a=!1,s={all:!0,colours:!0,textures:!0,positions:!0,shadow:!0},u=!0,l=0;return{frameRate:function(){return l},update:function(){var c=Date.now(),f=Math.floor(c/1e3);f>i?(l=Math.round(o/(f-i)),o=0,i=f):o++;var d=t(c-r);if(r=c,a=a||d){var h=n();if(h){var p=h.canvas;h.webgl&&(p=h.webglCanvas),p&&p.clientWidth>0&&p.clientHeight>0&&(a=!1,u&&(e(null,s),a||(s.all=!1,s.colours=!1,s.textures=!1,s.positions=!1,s.shadow=!1)))}}},redraw:function(e){a=!0;var t=e||{all:!0,colours:!0,textures:!0,positions:!0,shadow:!0};s.all||(s.all=t.all),s.positions||(s.positions=t.positions),s.shadow||(s.shadow=t.shadow),s.textures||(s.textures=t.textures),s.colours||(s.colours=t.colours)},allowDraw:function(e){e&&!u&&(a=!0),u=e}}}function nn(e,t){var n=!0;return{rebuild:t,animate:function(t){var r=e(t,n);return n=!1,r}}}function rn(e){var t=[],n=[];return{push:function(e,r){e&&(e.queue=r,r?n.push(e):t.push(e))},cancel:function(){t=[],n=[],e()},animate:function(r,i,o){var a=!1,s=!1;if(t.length>0){var u=t;t=[];for(var l=0;l<u.length;l++){var c=u[l].rebuild;u[l].animate(r)&&(s=s||u[l].queue,t.push(u[l])),e(c)}a=!0}return!s&&n.length>0&&(t.push(n.shift()),a=!0),i&&i.animate&&(i.animate(r),a=!0),o&&(a=a||o.animated()),a}}}function on(e,t){var n,r,i,o;return function(a,s,u){var l=t();l===a||o&&r===a||(n=l,r=a,i=0,o||(o=nn(function(e){i=Math.min(s,i+e),t(s<=0?r:n+(r-n)*i/s);var a=i<s;return a||(o=null,w(u)),a}),e.push(o,!1)))}}var an=["mousemove","mousedown","mouseup","mouseleave","mousewheel","dblclick","touchstart","touchmove","touchend","touchcancel","keyup","keydown","gesturestart","gesturechange","gestureend","dragover"];function sn(e,t,n){return function(){if(!n||!n()){var r,i=t[e];return i&&(r=i.apply(null,arguments)),r}}}function un(e,t,n){for(var r=0;r<an.length;r++)e[an[r]]=sn(an[r],t,n)}var ln={b:"grey",bw:1,c:"rgba(240,240,240,0.8)",bs:"solid",re:!1,w:0},cn=["_ha0","_ha1","_ha2","_ha3","_ha4"],fn=cn.concat(["ha0","ha1","ha2","ha3","ha4","ha5","ha6","ha7","ha8","ha9"]),dn=fn.reduce(function(e,t){return e[t]=!0,e},{});function hn(e,t){return e+(p(t)?"-"+t:"")}function pn(e,n,r,i){var o=n||j,s=r||j,u=i||j,l={donutDefaults:{b:"rgb(255, 255, 255)",bw:2,c:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],w:10}},c=l.donutDefaults,f=k(e,{numbers:{},numOrString:{},negatives:{},strings:{},stringValues:{},colours:{},booleans:{},reserved:{},mapPos:{},halos:[]});function d(e){m(e)&&t(e,function(t,n){M(e,n),e.g&&(e.g=I(e.g,!0)),R(e,n,f.reserved)})}function h(e){"w"in e&&(e.w=!!e.w)}l.typeCheck=function(e,t){v(e.items,!1,t)},l.filterNodesAndLinks=function(e,t,n,r){var i=r||{},o=function(e,t,n,r){var i,o=t||{},a=n||{},s={nodes:{},links:{}};return e&&(s=e.reduce(function(e,t){if(t.id&&!function(e,t){return e.id in t.nodes||e.id in t.links}(t,e)&&!("node"===t.type&&t.id in a||"link"===t.type&&t.id in o)){if(i=t.type+"s","node"===t.type){var n=!0;r&&o[t.id]&&(n=!1),n&&L(t)}i in e&&(e[i][t.id]=t)}return e},s)),s}(e,t,n,i.carefulWithXandY);return r.filterComboNodes&&(o.nodes=O(o.nodes)),o.links=N(o.links,o.nodes,t,i.selfLinks),o},l.ensureObject=function(e,t,n){var r=n||{};y(e,t),C(e),e.g&&(Array.isArray(e.g)?(v(e.g),e.g.forEach(h),e.g=I(e.g,"link"===e.type||r[e.id])):delete e.g),function(e,t){f.halos.forEach(function(n){var r=e[n];r&&(t?"c"in r||"r"in r||"w"in r||delete e[n]:"c"in r&&"r"in r&&"w"in r?(E(r,"c"),S(r.c)||S(r.r)||S(r.w)||!p(+r.r)||!p(+r.w)?delete e[n]:(r.r=+r.r,r.w=+r.w)):delete e[n])})}(e,t),e.donut&&function(e,t){t||Array.isArray(e.donut.v)?(e.donut.v&&e.donut.v.forEach(function(t,n){(!p(t)||t<0)&&(e.donut.v[n]=0)}),e.donut.c&&(Array.isArray(e.donut.c)&&!e.donut.c.some(function(e){return!nt(e)})||delete e.donut.c),["bw","w"].forEach(function(t){t in e.donut&&x(e.donut,t)}),"b"in e.donut&&E(e.donut,"b"),t||(e.donut=k(e.donut,c))):delete e.donut}(e,t),e.oc&&function(e){m(e.oc)?g(e.oc):delete e.oc}(e),e.bu&&function(e){Array.isArray(e.bu)?delete e.bu:(e.bu.p||(e.bu.p="ne"),/^(ne|nw|se|sw)$/.test(e.bu.p)||delete e.bu)}(e),e.t1&&d(e.t1),e.t2&&d(e.t2)};var g=l.ensureObject;l.ensureTypesInArray=function(e,t,n){if(e)for(var r=0;r<e.length;r++)g(e[r],t,n)};var v=l.ensureTypesInArray;function y(e,n){t(e,function(t,r){M(e,r),R(e,r,f.reserved),n&&R(e,r,f.booleans)})}function b(e,n){var r=e[n],i=!0;m(r)&&t(r,function(e,t){x(r,t),i=i&&isFinite(e)}),i||delete e[n]}function x(e,t){var n=+e[t];n<0&&!f.negatives[t]&&(n=null),e[t]=n}function w(e,t){S(e[t])||(e[t]+="",f.stringValues[t]&&!f.stringValues[t][e[t]]&&delete e[t])}function E(e,t){e[t]&&(e[t]=nt(e[t])?e[t]:void 0)}function M(e,t){f.strings[t]?w(e,t):f.numbers[t]?x(e,t):f.numOrString[t]?function(e,t){if(!S(e[t])){var n=e[t]+"";isNaN(n)||""===n?w(e,t):x(e,t)}}(e,t):f.colours[t]?E(e,t):f.mapPos[t]&&b(e,t)}function C(e){if(m(e.fi)){var t=e.fi;S(t.t)||(t.t="string"==typeof t.t?t.t.charAt(0):String.fromCharCode(t.t)),t.c&&(t.c=nt(t.c)?t.c:void 0),"ff"in t&&"string"!=typeof t.ff&&(t.ff=void 0)}else null!==e.fi&&delete e.fi}function T(e){return/^(ne|nw|se|sw|n|s|e|w)$/.test(e)}function _(e){return A(e)&&e>=0&&e<360}function I(e,t){var n=e;if(!Array.isArray(n))return!1;if(!t){var r=function(e){var t=function(e){for(var t=0;t<e.length;t++){var n=e[t].p;if(_(n))return!0;if(T(n))return!1}return!1}(e),n=t?_:T,r={};return function(e){var i=e.p;if(!n(i))return!1;(!t||e.r<0)&&delete e.r;var o=t?hn(i,e.r):i;return!r[o]&&(r[o]=!0,!0)}}(n);n=n.filter(r)}return n.forEach(C),n}function R(e,t,n){n[t]&&delete e[t]}l.setZeroXY=function(e){"node"===e.type&&(e.x=e.x||0,e.y=e.y||0)};var L=l.setZeroXY;function O(e){var n=a(e);return t(e,function(e){e.parentId&&delete n[e.parentId]}),n}function N(e,n,r,i){var o={};return t(e,function(e,t){if(P(e,n,r,i))o[t]=e;else{var a=e.parentId;if(a){var s=n[a]||r[a];s&&s._combo&&(s._combo.linkIds=s._combo.linkIds.filter(function(t){return t!==e.id}))}}}),o}l.hasValidEnds=function(e,t,n,r){if(!r&&e.id1===e.id2)return!1;var i=t||{},o=n||{};return(o[e.id1]||i[e.id1])&&(o[e.id2]||i[e.id2])};var P=l.hasValidEnds;l.ensureHiddenItemConsistency=function(e,t){D("hi",e,t)},l.ensureConsistency=function(e,t,n){var r={};V(e,t,n,r),B(r,e,n),u(e),"hi"===e&&s()};var D=l.ensureConsistency;l.applyPropertyRuleToComboLinks=function(e,t,n){Object.keys(e).forEach(function(e){var r=n[e];r._combo.linkIds.every(function(e){return n[e][t]})?(r[t]=!0,o(e)):void 0!==r[t]&&(delete r[t],o(e))})};var B=l.applyPropertyRuleToComboLinks;function V(e,n,r,i){t(r,function(t,a){var s=t.parentId;!0!==n[t.id1][e]&&!0!==n[t.id2][e]||!0===t[e]||(t[e]=!0,r[s]&&(i[s]=!0),o(a))})}return l}function gn(){var e={x:0,y:0,bg:!1,gh:!1,isHitTested:!0},t=0,n=[];return e.reset=function(){t=0},e.getNext=function(){return n[t++]},e.getLast=function(){return t>0?n[t-1]:null},e.add=function(e){n[t++]=e},e.forEach=function(e){for(var r=0;r<t;r++)e(n[r])},e.setPosition=function(t){e.x=t.x||0,e.y=t.y||0},e}function vn(){this.a=null,this.arrowhead=0,this.back=!1,this.bc=null,this.bo=!1,this.bs=null,this.bw=0,this.c=null,this.dirty=!0,this.donut=!1,this.ea=0,this.fc=null,this.ff=null,this.fi=!1,this.fs=null,this.hi=!1,this.hib=!1,this.hib=!1,this.isfi=!1,this.isSel=!1,this.ls=null,this.p=null,this.pf=null,this.r=null,this.s=null,this.sa=null,this.sc=null,this.sm=null,this.t=null,this.u=null,this.vx=!1,this.w=0,this.wbc=null,this.wc=null,this.wfc=null,this.wmargin=0,this.wsc=null,this.x=0,this.x1=0,this.x2=0,this.x3=0,this.xc=!1,this.y=!1,this.y1=0,this.y2=0,this.y3=0,this.yOffset=0}var mn={arc:function(e,t,n){return function(r,i,o,a,s,u,l,c,f,d,h,p,g){var v=n(f,gt.arc),m=v.a;g?(v.x=0,v.y=0):(v.x=r-m.x,v.y=i-m.y),v.r=o,v.sa=a,v.ea=s,v.bw=c,v.ls=d,u!==v.bc&&(v.bc=u,v.wbc=t(u)),l?l!==v.bc2&&(v.bc2=l,v.wbc2=t(l)):(v.bc2=null,v.wbc2=null),v.donut=!!h,v.off=p,v.hib=g,e(v)}},circle:function(e,t,n){return function(r,i,o,a,s,u,l,c,f,d,h,p){var g=n(c,gt.circle),v=g.a;g.x=r-v.x,g.y=i-v.y,g.r=o,g.bw=s,g.fi=l,g.bs=f,g.sm=d,g.noMinBorderWidth=!!h,a!==g.bc&&(g.bc=a,g.wbc=t(a)),u!==g.fc&&(g.fc=u,g.wfc=t(u)),g.hib=p,e(g)}},image:function(e,t,n){return function(t,r,i,o,a,s,u,l,c,f){var d=n(s,gt.image),h=d.a;d.x1=t-h.x,d.y1=r-h.y,d.x2=i-h.x,d.y2=o-h.y,d.u=a,d.s=u,d.vx=l,d.hi=c,d.hib=f,e(d)}},line:function(e,t,n){return function(r,i,o,a,s,u,l,c,f,d){var h=n(c,gt.line),p=h.a;d?(h.x1=0,h.y1=0,h.x2=0,h.y2=0):(h.x1=r-p.x,h.y1=i-p.y,h.x2=o-p.x,h.y2=a-p.y),s!==h.c&&(h.c=s,h.wc=t(s)),u?u!==h.c2&&(h.c2=u,h.wc2=t(u)):(h.c2=null,h.wc2=null),h.w=l,h.ls=f,h.hib=d,e(h)}},rect:function(e,t,n){return function(r,i,o,a,s,u,l,c,f,d,h){var p=n(f,gt.rect),g=p.a;p.x1=r-g.x,p.y1=i-g.y,p.x2=o-g.x,p.y2=a-g.y,p.bw=u,p.fi=c,p.bs=d,s!==p.bc&&(p.bc=s,p.wbc=t(s)),l!==p.fc&&(p.fc=l,p.wfc=t(l)),p.hib=h,e(p)}},roundRect:function(e,t,n){return function(r,i,o,a,s,u,l,c,f,d,h){var p=n(d,gt.roundrect),g=p.a;p.x1=r-g.x,p.y1=i-g.y,p.x2=o-g.x,p.y2=a-g.y,p.r=s,p.bw=l,p.fi=f,u!==p.bc&&(p.bc=u,p.wbc=t(u)),c!==p.fc&&(p.fc=c,p.wfc=t(c)),p.hib=h,e(p)}},text:function(e,t,n){return function(r,i,o,a,s,u,l,c,f,d,h,p,g,v,m,y,b,x,w,A,E){var M=n(l,gt.text),C=M.a;A?(M.x=0,M.y=0):(M.x=r-C.x,M.y=i-C.y),M.yOffset=0|E,M.t=o,M.fs=s,M.bo=u,M.ff=c,M.wmargin=w||0,M.xc=f,M.w=d,M.isfi=h,M.isSel=x,a!==M.c&&(M.c=a,M.wc=t(a)),M.x1=g-C.x,M.y1=v-C.y,M.x2=m-C.x,M.y2=y-C.y,M.back=p,p&&b!==M.bc&&(M.wbc=t(b),M.bc=b),M.hib=A,M.pf=.08,e(M)}},triangle:function(e,t,n){return function(r,i,o,a,s,u,l,c,f,d,h,p,g){var v=n(h,gt.triangle),m=v.a;v.x1=r-m.x,v.y1=i-m.y,v.x2=o-m.x,v.y2=a-m.y,v.x3=s-m.x,v.y3=u-m.y,v.bw=c,v.fi=d,v.arrowhead=p,l!==v.bc&&(v.bc=l,v.wbc=t(l)),f!==v.fc&&(v.fc=f,v.wfc=t(f)),v.hib=g,e(v)}}},yn=[0,0],bn=[];function xn(e){yn[0]&&(yn[0]=0,e.setLineDash(bn),e.lineCap="butt")}function wn(e){return e&&"solid"!==e}function An(e,t,n,r,i){var o,a;"dotted"===r?(o=.5,a=2*n):a=(o=Math.max(2,2*n))/2;var s=Math.round(i?t/(o+a):(t+a)/(o+a));return s>1&&(a=i?(t-s*o)/s:(t-s*o)/(s-1))>0&&(e.lineCap=o>1?"butt":"round",yn[0]=o,yn[1]=a,e.setLineDash(yn)),{dash:o,gap:a}}function En(e,t,n){return n?t>=0?Math.max(1,t):-1:t>0?e-t<4?Math.max(.2,t*((e-t)/4)):Math.max(1,t):-1}var Mn=2*Math.PI;function Cn(e,t,n,r,i,o,a,s,u){e.fillStyle=s?a:qe.transparent,o>=0&&(wn(u)&&An(e,Mn*r,o,u,!0),e.lineWidth=o,e.strokeStyle=i),e.beginPath(),e.arc(t,n,r,0,Mn,!1),e.closePath(),s&&e.fill(),o>=0&&(e.stroke(),u&&xn(e))}function kn(e,t,n,r,i,o,a,s,u,l){var c=t+r*Math.cos(i),f=t+r*Math.cos(o),d=n+r*Math.sin(i),h=n+r*Math.sin(o),p=e.createLinearGradient(c,d,f,h);return p.addColorStop(a,s),p.addColorStop(u,l),p}function Tn(e,t,n,r,i,o,a,s){e.beginPath(),e.strokeStyle=s,e.arc(t,n,r,i,o,a),e.stroke(),e.closePath()}function _n(e,t,n,r,i,o,a,s,u,l){if(e.lineWidth=s,a){var c=e.createLinearGradient(t,n,r,i),f=l.linkStyle.transition;c.addColorStop((1-f)/2,o),c.addColorStop((1+f)/2,a),e.strokeStyle=c}else e.strokeStyle=o;if(wn(u)){var d=r-t,h=i-n;An(e,Math.sqrt(d*d+h*h),s,u)}e.beginPath(),e.moveTo(t,n),e.lineTo(r,i),e.stroke(),e.closePath(),u&&xn(e)}function Sn(e,t,n,r,i,o,a,s,u,l){if(u&&(e.fillStyle=s,e.fillRect(t,n,r-t,i-n)),a>=0)if(wn(l)){var c=Math.floor(a/2);_n(e,t-c,n,r+c,n,o,null,a,l),_n(e,r,n-c,r,i+c,o,null,a,l),_n(e,r+c,i,t-c,i,o,null,a,l),_n(e,t,i+c,t,n-c,o,null,a,l)}else e.lineWidth=a,e.strokeStyle=o,e.strokeRect(t,n,r-t,i-n)}function In(e,t,n,r,i,o,a,s,u,l){e.beginPath(),e.moveTo(t+o,n),e.lineTo(r-o,n),e.arcTo(r,n,r,n+o,o),e.lineTo(r,i-o),e.arcTo(r,i,r-o,i,o),e.lineTo(t+o,i),e.arcTo(t,i,t,i-o,o),e.lineTo(t,n+o),e.arcTo(t,n,t+o,n,o),e.closePath(),l&&(e.fillStyle=u,e.fill()),s>=0&&(e.lineWidth=Math.max(1,s),e.strokeStyle=a,e.stroke())}var Rn=1;function Ln(e,t,n,r,i,o,a,s,u,l,c){(Math.abs(r-t)>Rn||Math.abs(i-n)>Rn)&&(e.beginPath(),e.moveTo(t,n),e.lineTo(r,i),e.lineTo(o,a),e.lineTo(t,n),e.closePath(),c&&(e.fillStyle=l,e.fill()),u>=0&&(e.lineWidth=Math.max(1,u),e.strokeStyle=s,e.stroke()))}function On(e){return e}var Nn={x:On,y:On,w:On,sw:On,worldToViewDistanceInteger:On,worldToViewDistance:On,viewToWorldDistance:On},Pn=function(e){var t={};return Object.keys(e).forEach(function(n){t[gt[n]]=e[n]}),t}({circle:function(e,t,n,r,i,o,a){var s,u;t.sm?(s=n.worldToViewDistance(t.r),u=n.worldToViewDistance(t.bw)):(s=n.worldToViewDistanceInteger(t.r),u=r?n.sw(t.bw):n.w(t.bw));var l=lt(t.a,o,a),c=t.a,f=t.x+c.x,d=t.y+c.y;u=t.noMinBorderWidth?Math.max(1,u):En(s,u,r),r?Cn(e,n.x(f),n.y(d),s,t.bc&&t.sc,u,t.fc&&t.sc,t.fi):Cn(e,n.x(f),n.y(d),s,l?ht(t.bc,l):t.bc,u,l?ht(t.fc,l):t.fc,t.fi,t.bs)},arc:function(e,t,n,r,i,o,a,s){var u,l,c,f,d=t.a,h=t.y+d.y,p=n.x(t.x+d.x),g=n.y(h),v=n.worldToViewDistance(t.r);if(r)u=t.bc&&t.sc,l=null,c=n.sw(t.bw);else{u=t.bc,l=t.bc2;var m=lt(t.a,o,a);m&&(u=ht(u,m),l&&(l=ht(l,m))),c=n.w(t.bw),f=t.ls}!function(e,t,n,r,i,o,a,s,u,l,c,f){e.lineWidth=Math.max(1,u);var d,h=o-i;if(wn(l)&&(d=An(e,h*r,u,l)),s){var p,g,v=f.linkStyle.transition;c>0?(p=a,g=s):(p=s,g=a),0===v?Tn(e,t,n,r,i,o,!1,kn(e,t,n,r,i,o,.5,p,.5,g)):function(e,t,n,r,i,o,a,s,u,l){var c=a-i,f=rt(o);3===f.length&&f.push(1);var d=rt(s);3===d.length&&d.push(1);var h=0;u<1&&(h=c*(1-u)/2);var p,g=c-2*h,v=0;l&&(v=(l.dash+l.gap)/r,p=(g=c-2*(h=Math.floor(h/v)*v))/v);var m=Math.ceil(g/(Math.PI/2)),y=(d[0]-f[0])/m,b=(d[1]-f[1])/m,x=(d[2]-f[2])/m,w=(d[3]-f[3])/m,A=f[0],E=f[1],M=f[2],C=f[3],k=1/r,T=Ke(A,E,M,C);u<1&&(Tn(e,t,n,r,i,i+h,!1,o),Tn(e,t,n,r,a,a-h,!0,s));for(var _=i+h,S=g/m,I=0;I<m;I++){var R,L;l?(R=_,_=L=_+(S=(I<m-1?Math.floor(p/m):p-(m-1)*Math.floor(p/m))*v)):(R=i+h+I*S-.25*k,L=i+h+(I+1)*S,I===m-1&&(L+=.25*k)),Tn(e,t,n,r,R,L,!1,kn(e,t,n,r,R,L,0,T,1,T=Ke(A+=y,E+=b,M+=x,C+=w)))}}(e,t,n,r,i,p,o,g,v,d)}else Tn(e,t,n,r,i,o,!1,a);l&&xn(e)}(e,p,g,v,t.sa,t.ea,u,l,c,f,t.off,s)},line:function(e,t,n,r,i,o,a,s){var u=t.a,l=t.x1+u.x,c=t.y1+u.y,f=t.x2+u.x,d=t.y2+u.y,h=Math.max(1,r?n.sw(t.w):n.w(t.w));if(r)_n(e,n.x(l),n.y(c),n.x(f),n.y(d),t.c&&t.sc,null,h,null,s);else{var p=lt(t.a,o,a),g=t.c,v=t.c2;p&&(g=ht(g,p),v&&(v=ht(t.c2,p))),_n(e,n.x(l),n.y(c),n.x(f),n.y(d),g,v,h,t.ls,s)}},text:function(e,t,n,r,i,o,a){var s=t.a,u=0,l=t.x1+s.x,c=t.y1+s.y,f=t.x2+s.x,d=t.y2+s.y;if(r)u=n.worldToViewDistanceInteger(t.fs)*t.pf,t.back&&Sn(e,n.x(l),n.y(c),n.x(f),n.y(d)+u,t.sc,-1,t.sc,!0);else{var h,p=t.y+s.y,g=t.xc,v=n.x(t.x+s.x),m=n.y(p+t.yOffset),y=n.worldToViewDistanceInteger(t.fs);u=y*t.pf;var b=lt(t.a,o,a);if(t.w&&(y<=3||y<Mt)){var x=n.worldToViewDistanceInteger(t.w),w=t.isSel?t.bc:ht(t.c,.4);w=b?ht(w,b):w,g&&(v-=Math.floor(x/2)),t.back&&t.bc!==qe.textback&&Sn(e,v,m-y,v+x,m+u,h=b?ht(t.bc,b):t.bc,-1,h,!0),Sn(e,v,m-y,v+x,m+u,w,-1,w,!0)}else{var A=b?ht(t.c,b):t.c;t.back&&(h=b?ht(t.bc,b):t.bc,Sn(e,n.x(l),n.y(c),n.x(f),n.y(d)+u,h,-1,h,!0)),function(e,t,n,r,i,o,a,s,u){_t(e,y,a,s),e.fillStyle=i,e.textAlign=u?"center":"left",e.fillText(r,t,n)}(e,v,m+u/2,t.t,A,0,t.bo,t.ff,g)}}},image:function(e,t,n,r,i,o,a){var s=t.a,u=t.y1+s.y,l=t.x2+s.x,c=t.y2+s.y,f=n.x(t.x1+s.x),d=n.y(u),h=n.x(l),p=n.y(c);if(t.vx&&(f-=t.vx,d-=t.vx,h+=t.vx,p+=t.vx),r)Sn(e,f,d,h,p,t.sc,-1,t.sc,!0);else{var g=lt(t.a,o,a),v=e.globalAlpha;e.globalAlpha=g,function(e,t,n,r,i,o,a){if(t.isLoaded){var s=t.im;a&&t[a]&&(s=t[a]),e.imageSmoothingQuality="high",e.drawImage(s,n,r,i-n,o-r)}}(e,"ci"===t.s?i.getCutoutImage(t.u):i.get(t.u),f,d,h,p,t.s),e.globalAlpha=v}},rect:function(e,t,n,r,i,o,a){var s=r?n.sw(t.bw):n.w(t.bw),u=t.a,l=n.x(t.x1+u.x),c=n.y(t.y1+u.y),f=n.x(t.x2+u.x),d=n.y(t.y2+u.y);if(s>=0&&(s=En(Math.min(f-l,d-c)/2,s,r)),r)Sn(e,l,c,f,d,t.bc&&t.sc,s,t.fc&&t.sc,t.fi,null);else{var h=lt(t.a,o,a);Sn(e,l,c,f,d,h?ht(t.bc,h):t.bc,s,h?ht(t.fc,h):t.fc,t.fi,t.bs)}},roundrect:function(e,t,n,r,i,o,a){var s=t.a,u=t.x1+s.x,l=t.y1+s.y,c=t.x2+s.x,f=t.y2+s.y;if(r)In(e,n.x(u),n.y(l),n.x(c),n.y(f),n.worldToViewDistanceInteger(t.r),t.bc&&t.sc,n.sw(t.bw),t.fc&&t.sc,t.fi);else{var d=lt(t.a,o,a);In(e,n.x(u),n.y(l),n.x(c),n.y(f),n.worldToViewDistanceInteger(t.r),d?ht(t.bc,d):t.bc,n.w(t.bw),d?ht(t.fc,d):t.fc,t.fi)}},triangle:function(e,t,n,r,i,o,a){var s=t.a,u=t.x1+s.x,l=t.y1+s.y,c=t.x2+s.x,f=t.y2+s.y,d=t.x3+s.x,h=t.y3+s.y;if(r)Ln(e,n.x(u),n.y(l),n.x(c),n.y(f),n.x(d),n.y(h),t.bc&&t.sc,n.sw(t.bw),t.fc&&t.sc,t.fi);else{var p=lt(t.a,o,a);Ln(e,n.x(u),n.y(l),n.x(c),n.y(f),n.x(d),n.y(h),p?ht(t.bc,p):t.bc,n.w(t.bw),p?ht(t.fc,p):t.fc,t.fi)}}});function Dn(e){e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,e.canvas.width,e.canvas.height),e.restore()}function Bn(e,t,n,r,i,o,a,s,u,l,c,f,d){var h,p,g,v=n,m=t,y=!1,b="boolean"==typeof d;a&&Dn(p=a.getContext("2d")),e.forEach(function(e){if(!s||y){g=!0;var t=!0;b&&!o&&(t=d?v!==Nn:v===Nn),t&&function(e,t,n,r,i,o,a,s,u){if(!t.hib){var l;if(h){var c=h.shadowType;l=r?t.sc&&(!c||c>-1):!c||c<1}else l=!r||t.sc;if(l){var f=Pn[t.p];if(f){var d=t.a;f(m,t,v,r,i,d.bg&&a,d.gh&&s,u)}}}}(0,e,0,o,r,0,c,f,i)}},function(e,r){if(h=e,u&&e.blatOverview&&!l&&u(t,n),y=e.overview,a&&r.bg){var i=!e.bg;i&&g&&(function(e,t,n){e.globalAlpha=c,e.drawImage(t,0,0,t.width,t.height),e.globalAlpha=1}(t,a),Dn(p)),g=!1,m=i?t:p}v=e.useView&&n?n:Nn})}function Vn(e,n){var r,o,a,s,u,l,c,f,d={},h=e||{},p=k(n,{isContentLayer:!1,alwaysUpdate:!1}),g=Object.keys(p),v=!1;try{var m=new Date/12636}catch(e){}function y(e,t){var n;if(v)(n=c.getNext()).dirty=!0;else{if(n=new vn,c.isHitTested){var r=function(e){return a.getColour(e)}(e);n.wsc=r.webgl,n.sc=r.rgb}n.id=e,n.a=c}return n.p=t,n}Object.keys(mn).forEach(function(e){d[e]=mn[e](x,pt,y)}),d.hasLayerPathAt=function(e){return o.hasPath(e)},d.getLayerAt=function(e){return o.get(e)},d.createLayer=function(e,t){var n="";t&&(n=t.getValue().data.path+".");var r={id:e,data:{}};return r.data=H(r.data,{path:n+=e},h[e]),t&&(r.data=k(r.data,t.getValue().data)),r.data=k(r.data,p),r.data.bg=r.data.bg&&!r.data.perItemAlpha,o.append(r,t)};var b=function(){var e,t,n;l={_extras:gn()},t=null,n=null,(e={}).append=function(t){e.insertAfter(n,t)},e.clear=function(){t=null,n=null},e.remove=function(e){e._prev?e._prev._next=e._next:t=e._next,e._next?e._next._prev=e._prev:n=e._prev},e.getFirst=function(){return t},e.getLast=function(){return n},e.getNext=function(e){return e._next},e.getPrevious=function(e){return e._prev},e.insertAfter=function(e,r){if(!r||"object"!=typeof r)throw new Error("Object Required");r._prev=e||null,e?(r._next=e._next,e._next=r):(r._next=t,t=r),r._next?r._next._prev=r:n=r},e.insertBefore=function(t,n){t?e.insertAfter(t._prev||null,n):e.append(n)},e.forEach=function(e){for(var n=t;n;n=n._next){var r=e(n);r&&(n=r)}},e.toArray=function(){for(var e=[],n=t;n;n=n._next)e.push(n);return e},o=function(e){var t={},n=new Map;return t.append=function(t,r){var i=function(e,t,n){var r=new Map,i=H({},e,{isStart:!0,isGroup:!0}),o=H({},e,{isStart:!1,isGroup:!0});return i.endMarker=o,o.startMarker=i,{insert:function(e){n.insertBefore(o,e)},getStartMarker:function(){return i},getEndMarker:function(){return o},getValue:function(){return e},getParent:function(){return t},getChildren:function(){return r}}}(t,r,e);return r?(r.getChildren().set(t.id,i),e.insertBefore(r.getEndMarker(),i.getStartMarker()),e.insertAfter(i.getStartMarker(),i.getEndMarker())):(n.set(t.id,i),e.append(i.getStartMarker()),e.append(i.getEndMarker())),i},t.hasPath=function(e){var t;return e.every(function(e){return!!(t=t?t.getChildren().get(e):n.get(e))})},t.get=function(e){var t,r=null;if(!e.every(function(e){return(r=r?r.getChildren().get(e):n.get(e))&&(t=e),!!r}))throw new Error("Path not found: "+e+". Last entry: "+t);return r},t}(r=e)};function x(e){v||(c.add(e),s.insert(e))}function w(e){e&&(v||e.forEach(r.remove),e.reset())}function A(e){e.dirty=!0}function E(e,t,n){var r=t[n];return e[n]!==r&&(e[n]=r,!0)}function M(e){e.sc=null,e.wsc=null,e.dirty=!0}return d.setup=b,d.startGeneratingFor=function(e,t,n){v=t,(c=l[e.id])?w(c):(c=gn(),l[e.id]=c),c.gh=!!e.gh,c.bg=n&&e.bg,c.setPosition(e)},d.moveItem=function(e,t,n){var r=l[e.id];r&&(r.forEach(A),r.x=t,r.y=n)},d.forEach=function(e,t,n,i){var o,a,s,u,l=H({},p),c={},f=122960683-m;f===Math.abs(f)&&(f=0,r.forEach(function(r){if(r.isGroup){if(r.isStart){if(i)return t(r.data);if(n&&!r.data.alwaysUpdate)return r.endMarker._prev;for(a=0,s=g.length;a<s;a++){var f=E(l,r.data,u=g[a]);f&&(c[u]=!0),o=o||f}if(o&&r.data.isContentLayer)for(t(r.data,c),o=!1,a=0,s=g.length;a<s;a++)c[u=g[a]]=!1}}else e(r);return!1}))},d.startGeneratingForExtras=function(){c=l._extras,v=!1},d.resetExtras=function(){d.startGeneratingForExtras(),w(c)},d.removeItem=function(e){w(l[e])},d.setShadowColourMap=function(e){a=e},d.getLayerPath=function(){return f},d.setLayerPath=function(e){f=e,u=e?o.get(e):null},d.setLayer=function(e){if(e){if(!(s=u?u.getChildren().get(e):o.get([e])))throw new Error("Layer: "+e+" at "+f+" not found")}else s=null},d.getLayer=function(){return s?s.getValue().id:null},d.copyPrimitive=function(e){var n=y(e.id,e.p);t(e,function(e,t){n[t]=e}),x(n)},d.setHitTesting=function(e,t){var n=l[e];n&&(n.isHitTested=t,t||n.forEach(M))},d.getLast=function(){return c?c.getLast():null},d.cloneLast=function(){return i(d.getLast())},d.itemExtents=function(e,n){var r=null;return t(l,function(t,i){"_extras"===i||e&&!e.has(i)||t.forEach(function(e){if(!e.hib){var t=St(n,e);r=r?It(r,t):t}})}),r},d.drawShadowCanvas=function(e,t){Dn(e),Bn(d,e,t,{},{},!0)},b(),d}var zn=function(e){var t={};return["MAIN","BG","FG","COMBOS","REVEALED","TRANSIENT","OVERVIEW_IMAGE","COMBO_CONTAINER","TIMEBAR","BANDS","UNDERLAYS","SHAPES_SEL_BORDER","SHAPES","HALOS","HANDLES","NODES_SEL_BORDER","LINKS","NODES","DRAGGERS","BUBBLES","NODESSEL","BUBBLESSEL","BANDLABELS","OVERLAYS","OVERLAYSSHADOW","OVERVIEW","OVERVIEWSHADOW","WAIT"].forEach(function(e){t[e]=e}),t}(),Fn={};Fn[zn.COMBO_CONTAINER]=zn.NODES_SEL_BORDER,Fn[zn.NODES]=zn.NODES_SEL_BORDER,Fn[zn.SHAPES]=zn.SHAPES_SEL_BORDER;var Gn={UNDERLAYS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1},BANDLABELS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1},BANDS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1},MAIN:{overview:!0},COMBOS:{perItemAlpha:!0,overview:!0},COMBO_CONTAINER:{isContentLayer:!0,overview:!0},REVEALED:{},OVERLAYS:{shadowType:-1,useView:!1,alwaysUpdate:!0,isContentLayer:!0},HANDLES:{useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERLAYSSHADOW:{shadowType:1,useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERVIEWSHADOW:{shadowType:1,useView:!1,alwaysUpdate:!0,isContentLayer:!0},WAIT:{useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERVIEW:{shadowType:-1,useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERVIEW_IMAGE:{shadowType:-1,blatOverview:!0,useView:!1,alwaysUpdate:!0,isContentLayer:!0},DRAGGERS:{alwaysUpdate:!0,isContentLayer:!0},BG:{bg:!0,overview:!1},FG:{bg:!1,overview:!0},SHAPES_SEL_BORDER:{isContentLayer:!0},NODES_SEL_BORDER:{isContentLayer:!0},LINKS:{isContentLayer:!0,newDrawCall:!0},SHAPES:{isContentLayer:!0},NODES:{isContentLayer:!0},HALOS:{isContentLayer:!0},BUBBLES:{isContentLayer:!0}},Hn=[zn.SHAPES_SEL_BORDER,zn.SHAPES,zn.HALOS,zn.NODES_SEL_BORDER,zn.LINKS,zn.NODES,zn.BUBBLES],Wn={shadowType:0,bg:!1,blatOverview:!1,useView:!0,alwaysUpdate:!1,isContentLayer:!1,overview:!1,newDrawCall:!1,perItemAlpha:!1};function Zn(e){return Math.abs(e)<1e-5}function Yn(e){return Array.isArray(e)&&e.length>0}function jn(e){return Yn(e.g)}function Un(e){return isFinite(e.w)&&isFinite(e.h)||e._combo&&e._combo.open}function Xn(e){return e._combo&&e._combo.open}function qn(e,t){return e.oc?void 0===e.oc.bw?t.defaultOpenComboStyle.bw:e.oc.bw:0}function Qn(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}var Kn=34,Jn={MOVED:1,DIRTY:2},$n={small:6,normal:10,large:20,xlarge:30};function er(e,t,n,r){return t*(1.7*e+n*(p($n[r])?$n[r]:$n.normal))}var tr=Math.PI/7,nr=Math.cos(tr);function rr(e,t,n,r){return nr*er(e,t,n,r)}function ir(e,t,n,r,i,o,a,s,u,l,c){var f=er(r,i,l,c.arrows),d=o+Math.PI;e.triangle(t+f*Math.cos(d+tr),n+f*Math.sin(d+tr),t+f*Math.cos(d-tr),n+f*Math.sin(d-tr),t,n,a,-1,a,!0,s,u,!1)}function or(e,t,n){var r,i,o=Un(e);return t&&n.selectedNode?(r=n.selectedNode.b||e.b,i=n.selectedNode.c||e.c):(r=e.b,i=e.c),!(!r&&!i||o)}var ar={t:.5,t1:.15,t2:.85},sr={line:1,arc:2},ur="\u2704";function lr(e,t,n,r,i,o,a,s,u,l,c,f,d){l?e.arc(0,0,0,0,0,a,s,u,t,c,!1,f,!0):e.line(0,0,0,0,a,s,u,t,c,!0);var h=l?sr.arc:sr.line;n&&e.triangle(0,0,0,0,0,0,a,-1,a,!0,t+ur+"a1",h,!0),r&&e.triangle(0,0,0,0,0,0,s||a,-1,s||a,!0,t+ur+"a2",h,!0),d.hib=!0,d.pos.t.lx=(i._sx+o._sx)/2,d.pos.t.ly=(i._sy+o._sy)/2}function cr(e,t,n,r,i,o,a){return{x:((o-r)*n-(a-i)*t)/e,y:((o-r)*t+(a-i)*n)/e}}function fr(e,t,n,r,i,o){function a(i,a,s,u){return function(e,t,n,r,i,o,a,s,u,l){var c=cr(t,n,r,i,o,a,s),f=cr(t,n,r,i,o,u,l),d=e/t/2;if(c.y>d&&f.y>d||c.y<-d&&f.y<-d)return-1/0;if(Zn(f.y-c.y))return Math.max(c.x,f.x);var h=c.y>f.y?c:f,p=c.y>f.y?f:c;return Math.max(d<h.y?h.x-(h.y-d)*(h.x-p.x)/(h.y-p.y):h.x,p.y<-d?p.x-(p.y- -d)*(p.x-h.x)/(p.y-h.y):p.x)}(e,t,n,r,o._sx,o._sy,i+o._sx,a+o._sy,s+o._sx,u+o._sy)}return Math.max(a(i.x1,i.y1,i.x2,i.y1),a(i.x2,i.y1,i.x2,i.y2),a(i.x2,i.y2,i.x1,i.y2),a(i.x1,i.y2,i.x1,i.y1))}function dr(e,t,n,r){var i=-1/0,o=r.cx,a=r.cy,s=e*e,u=-2*e*(o*n-a*t),l=u*u-4*s*(o*o+a*a-r.r*r.r);return l>=0&&(i=(-u+Math.sqrt(l))/(2*s)),i}function hr(e,t,n,r){var i=0;return r._c&&(i=r._c/t),r._cl&&(i=Math.max(i,function(e,t,n,r){for(var i,o=-1/0,a=Math.sin(-n),s=Math.cos(-n),u=r._cl,l=0;l<u.length;l++){var c=u[l];i=c.r?dr(t,a,s,c):fr(e,t,a,s,c,r),o=Math.max(o,i)}return o}(e,t,n,r))),i}var pr="\u2704";function gr(e,t,n,r,i,o){var a=e,s=t,u=Math.ceil(o/8),l=Qn(a,s,n,r);return{x:a+=(a-n)/l*(u-i),y:s+=(s-r)/l*(u-i)}}function vr(e,n,r,i,o,a,s,u,l,c,f,d,h,p,g,v,m){var y=function(e,t,n,r,i,o,a,s,u,l,c,f,d,h){var p={},g=n-e,v=r-t,m=Math.sqrt(g*g+v*v);if(Zn(m))p.skip=!0;else{var y=Math.atan2(v,g),b=hr(h.tight&&u?0:i,m,y,a),x=hr(h.tight&&l?0:i,m,y+Math.PI,s),w=f||0,A=1-((b=Math.max(c||0,b))+(x=Math.max(w,x))),E=0;(u||l)&&(E=rr(i,o,d.unzoom,h.arrows)/m,u&&l&&(E*=1.5)),p.skip=A<Math.max(Math.min(6/m,.1),E),p.skip||(p.cx1=e+b*g,p.cy1=t+b*v,p.cx2=n+x*-g,p.cy2=r+x*-v)}return p}(s._sx,s._sy,u._sx,u._sy,f,d,s,u,n,r,i,o,v,m);if(y.skip)lr(e,a,n,r,s,u,l,c,f,!1,h,null,g);else{var b,x,w,A,E,M,C,k,T,_,S,I,R=y.cx1,L=y.cy1,O=y.cx2,N=y.cy2,P=O-R,D=N-L,B=Math.max(.001,D*D+P*P),V=Math.sqrt(B);(n||r)&&(C=rr(f,d,v.unzoom,m.arrows));var z=!1;m.tight&&(n||(z=or(s,p,m)||Xn(s)),r||z||(z=or(u,p,m)||Xn(u)),z&&(T=P/V,_=D/V,I=.25*f)),n?(b=Math.atan2(D,P),w=R,A=L,k=gr(R,L,O,N,C,f),R=k.x,L=k.y):m.tight&&or(s,p,m)?(R-=I*T,L-=I*_):m.tight&&Xn(s)&&(S=qn(s,m),R-=T*S,L-=_*S),r?(x=Math.atan2(D,P),E=O,M=N,k=gr(O,N,R,L,C,f),O=k.x,N=k.y):m.tight&&or(u,p,m)?(O+=I*T,N+=I*_):m.tight&&Xn(u)&&(S=qn(u,m),O+=T*S,N+=_*S),e.line(R,L,O,N,l,c,f,a,h),n&&ir(e,w,A,f,d,b+Math.PI,l,a+pr+"a1",sr.line,v.unzoom,m),r&&ir(e,E,M,f,d,x,c||l,a+pr+"a2",sr.line,v.unzoom,m),t(g.pos,function(e,t){if("t"===t||g.present[t]){var n=ar[t],r=u._sx-s._sx,i=u._sy-s._sy;0===r&&0===i&&(r=1,i=-1);var o=W(r,i);e.lx=R+n*(O-R),e.ly=L+n*(N-L),e.tdx=r/o,e.tdy=i/o,e.tangent=Math.atan2(i,r),e.R=0}})}}function mr(e,t,n,r,i,o){var a=r-t;if(Math.abs(a)>n)return[];var s=Math.max(i,o),u=Math.min(i,o);if(s<e-n||e+n<u)return[];var l=Math.asin(a/n),c=n*Math.cos(l),f=[];return u<=e-c&&e-c<=s&&f.push(a>0?Math.PI-l:-Math.PI-l),u<=e+c&&e+c<=s&&f.push(l),f}function yr(e,t,n,r,i,o){var a=r-e;if(Math.abs(a)>n)return[];var s=Math.max(i,o),u=Math.min(i,o);if(s<t-n||t+n<u)return[];var l=Math.acos(a/n),c=n*Math.sin(l),f=[];return u<=t-c&&t-c<=s&&f.push(-l),u<=t+c&&t+c<=s&&f.push(l),f}function br(e,t,n,r,i,o){var a=mr(e,t,n,r.y2+o,r.x1+i,r.x2+i),s=mr(e,t,n,r.y1+o,r.x1+i,r.x2+i),u=yr(e,t,n,r.x1+i,r.y1+o,r.y2+o),l=yr(e,t,n,r.x2+i,r.y1+o,r.y2+o);return a.concat(s,l,u)}function xr(e,t,n,r,i,o){var a=r-e,s=i-t,u=Math.sqrt(a*a+s*s);if(u>n+o||u<Math.abs(n-o)||0===u)return[];var l=(n*n-o*o+u*u)/(2*u),c=Math.sqrt(n*n-l*l),f=e+l*a/u,d=t+l*s/u,h=f-c*(s/u),p=d+c*(a/u);return[Math.atan2(d-c*(a/u)-t,f+c*(s/u)-e),Math.atan2(p-t,h-e)]}function wr(e,t,n,r,i){for(var o=Math.PI,a=e,s=0;s<t.length;s++)t[s]+2*Math.PI<r&&(t[s]+=2*Math.PI),n<t[s]&&t[s]<r&&(i?t[s]-a<o&&(a=Math.max(a,t[s])):a-t[s]<o&&(a=Math.min(a,t[s])));return a}function Ar(e,t,n,r,i,o,a){var s=a?r:i,u=o._sx,l=o._sy;if(o._c&&(s=wr(s,xr(e,t,n,u,l,o._c),r,i,a)),o._cl)for(var c=0;c<o._cl.length;c++){var f=o._cl[c];s=wr(s,f.r?xr(e,t,n,u+f.cx,l+f.cy,f.r):br(e,t,n,f,u,l),r,i,a)}return s}function Er(e,t,n,r,i,o,a,s){if(!s.length){var u=e+n*Math.cos(r),l=t+n*Math.sin(r),c=e+n*Math.cos(i),f=t+n*Math.sin(i);if(s.r){var d=o+s.cx,h=a+s.cy,p=Qn(u,l,d,h),g=Qn(c,f,d,h);if(p<=s.r+4&&g<=s.r+4)return!0}else{var v=o+s.x1-4,m=o+s.x2+4,y=a+s.y1-4,b=a+s.y2+4;if(v<=u&&u<=m&&y<=l&&l<=b&&v<=c&&c<=m&&y<=f&&f<=b)return!0}}return!1}function Mr(e,t,n,r,i,o){var a=o.x,s=o.y;if(o._c&&Er(e,t,n,r,i,a,s,{cx:0,cy:0,r:o._c}))return!1;if(o._cl)for(var u=0;u<o._cl.length;u++)if(Er(e,t,n,r,i,a,s,o._cl[u]))return!1;return!0}var Cr="\u2704";function kr(e,t,n,r,i,o,a,s,u,l,c,f,d){var h=xr(i,o,rr(s,u,f,d.arrows),t,n,r);2===h.length?ir(e,i,o,s,u,(a?h[0]:h[1])-Math.PI,l,c,sr.arc,f,d):e.triangle(0,0,0,0,0,0,l,-1,l,!0,c,sr.arc,!0)}function Tr(e,t,n,r,i){return.9*rr(e,t,r,i)/n}function _r(e,n,r,i,o,a,s,u,l,c,f,d,h,p,g,v,m,y){var b=u===l,x=u._sx,w=u._sy,A=l._sx,E=l._sy,M=i||0,C=o||0,k=+(a||0)*h;b&&(k+=Kn*u._sl.e);var T=k>0;if(b){var _=(u._sl.w?180:225)*(Math.PI/180),S=Math.cos(_),I=Math.sin(_);A=x=u._sx+u._sl.x,E=w=u._sy+u._sl.y;var R=-u._sl.e*Kn/2;x+=S*R+.5*I,w+=I*R-.5*S,A+=S*R-.5*I,E+=I*R+.5*S}var L=(x+A)/2,O=(w+E)/2,N=A-x,P=E-w,D=Math.max(.001,P*P+N*N),B=Math.sqrt(D),V=+(D/4+k*k)/(2*Math.abs(k)),z=V-Math.abs(k);if(V>1e5)m.useSlowPathRendering=!0,m.useSlowPathRenderingLastTime=!0,vr(e,n,r,M,C,s,u,l,c,f,d,h,p,g,v,m,y);else{var F=T?1:-1,G=L-P*F*z/B,H=O+N*F*z/B,W=Math.atan2(w-H,x-G),Z=Math.atan2(E-H,A-G),Y=T?W:Z,j=T?Z:W;Y>j&&(j+=2*Math.PI);var U=Y+(T?M:C)*(j-Y),X=Y+(T?1-C:1-M)*(j-Y),q=Ar(G,H,V,Y,j,k>0?u:l,!0),Q=Ar(G,H,V,q,j,k>0?l:u,!1),K={startangle:0,endangle:0};if(u===l||Mr(G,H,V,q,Q,u)&&Mr(G,H,V,q,Q,l)?(K.startangle=q,K.endangle=Q):(K.startangle=2*Math.PI,K.endangle=2*Math.PI),K.startangle=Math.max(U,K.startangle),K.endangle=Math.min(X,K.endangle),K.startangle>=K.endangle)lr(e,s,n,r,u,l,c,f,d,!0,p,k,v);else{var J,$,ee,te,ne,re,ie,oe,ae,se=0;if((n||r)&&(se=Tr(d,h,V,m.unzoom,y.arrows)),y.tight&&(!n||!r)){if(Xn(u)||Xn(l)){var ue=K.endangle-K.startangle;ie=ue/(ue*V)}(or(u,g,y)||or(l,g,y))&&(se=Tr(d,h,V,m.unzoom,y.arrows))}n?(J=T?K.startangle:K.endangle,$=G+V*Math.cos(J),ee=H+V*Math.sin(J),T?K.startangle+=se:K.endangle-=se):y.tight&&(or(u,g,y)?T?K.startangle+=-.25*se:K.endangle-=-.25*se:Xn(u)&&(oe=qn(u,y))&&(ae=oe*ie,T?K.startangle-=ae:K.endangle+=ae)),r?(te=T?K.endangle:K.startangle,ne=G+V*Math.cos(te),re=H+V*Math.sin(te),T?K.endangle-=se:K.startangle+=se):y.tight&&(or(l,g,y)?T?K.endangle-=-.25*se:K.startangle+=-.25*se:Xn(l)&&(oe=qn(l,y))&&(ae=oe*ie,T?K.endangle+=ae:K.startangle-=ae)),K.startangle>=K.endangle?lr(e,s,n,r,u,l,c,f,d,!0,p,k,v):(e.arc(G,H,V,K.startangle,K.endangle,c,f,d,s,p,!1,k),n&&kr(e,G,H,V,$,ee,T,d,h,c,s+Cr+"a1",m.unzoom,y),r&&kr(e,G,H,V,ne,re,!T,d,h,f||c,s+Cr+"a2",m.unzoom,y),t(v.pos,function(e,t){if("t"===t||v.present[t]){var n=F>0?K.startangle:K.endangle,r=n+((F>0?K.endangle:K.startangle)-n)*ar[t];e.lx=G+V*Math.cos(r),e.ly=H+V*Math.sin(r),e.tdx=-F*Math.sin(r),e.tdy=F*Math.cos(r),e.tangent=r,e.R=V,e.signf=F}}))}}}var Sr=Math.PI/256,Ir=9,Rr=2;function Lr(e){return"b"in e?e.b:qe.keyline}function Or(e){var t=Ir;return Lr(e)&&(t+=Rr/2),e.e&&(t*=e.e),t}var Nr=3,Pr=1;function Dr(e){return Or(e)+Nr}function Br(e,t){return Or(e)+Pr+Or(t)}function Vr(e,t){return Qn(e,t,0,0)}function zr(e,t,n,r,i,o,a,s,u,l,c){e.rect(i-a,o-a,i+a,o+a,qe.transparent,-1,qe.transparent,!0,r,null,c);var f=2*a,d=Kt(n,s,f,!1,l||t.fontFamily,!0),h=Vr(d.width,d.height),p=f-(h-f)/2;h=Vr((d=Kt(n,s,p,!1,l||t.fontFamily,!0)).width,d.height);var g=t.imageAlignment[s],v=0,m=0,y=1;g&&(v=g.dx/100*a,m=g.dy/100*a,y=g.e);var b=a*(5/6)*y;e.text(i+v,o+p*y/2+m,s,u,p*y,!1,r,l,!0,h,!0,null,i-b+v,o-b+m,i+b+v,o+b+m,null,null,null,c)}var Fr="\u2704";function Gr(e,t,n,r,i,o,a,s,u,l,c,f,d,h,p,g,v,m,y,b,x,w,A){var E=!0;0===n.length&&(E=!1);var M=o+Fr+(b||"t");if(E&&y)return t.text(0,0,n,s,v,l,M,m,!0,p,!1,a,0,0,0,0,u,g,0,y),c&&(c._edit={hib:!0}),!0;if(f&&p>h)return function(e,t,n,r,i,o,a,s,u,l,c,f,d,h,p,g,v,m,y,b,x,w){return Gr(e,t,n,r,i,o,a,s,u,l,c,f,d,h,Kt(e,n,g,l,v).width,p,g,v,m,y,b,x,w)}(e,t,n,r,i,o,a,s,u,l,c,f,d,h,g,.85*v,m,y,b,x,w,A);var C,k=4*w,T=r-p/2,_={x1:T-k,y1:(C=d?i+(x||1)+v/2:i+(1+v)/2)-v,x2:T+p+k,y2:C};return E&&t.text(r,C,n,s,v,l,M,m,!0,p,!1,a,_.x1,_.y1,_.x2,_.y2,u,g,k,!1,d?A.labelOffset:0),c&&"node"===c.type&&(_.x1-=c._sx,_.y1-=c._sy,_.x2-=c._sx,_.y2-=c._sy),c&&function(e,t,n,r,i){e._edit?(e._edit.hib=!1,e._edit.x1=Math.min(e._edit.x1,t.x1),e._edit.x2=Math.max(e._edit.x2,t.x2),e._edit.y1=Math.min(e._edit.y1,t.y1),e._edit.y2=Math.max(e._edit.y2,t.y2)):e._edit={fs:n,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,hib:!1},i.avoidLabels&&r&&e._cl&&e._cl.push(t)}(c,_,v,E,A),E}var Hr=[12,9,7,7];function Wr(e,t,n,r){e._cl.push({cx:t,cy:n,r:r})}function Zr(e,t,n,r,i,o,a,s,u,l,c,f,d){var h=r,g=i,v=o,m=0;if(a&&!(s&&s._combo&&s._combo.open)){a.e&&(v*=a.e);var y,b=a.a?f.easingValue:1,x=Ir*v*b,w=Lr(a),A=w?Rr*v:-1,E=!!(a.u||a.fi&&a.fi.t),M=0,C=0,k=1;m=x+(w?A/2:0);var T=s&&!p(a.r);if(a.c){if(a.t){var S,I,L,O,N=!_(a,"fb")||a.fb,P=a.fc||qe.white,D=a.ff||d.fontFamily;if(a.w&&l){S=v*Hr[1]*b,I=Kt(t,L=(a.t+"").substring(0,25),S,N,D).width;var B,V,z=(O=Math.max(I,x))+x;switch(u){case"left":B=(V=h+x)-z,h=V-z/2;break;case"centre":B=h-z/2,V=h+z/2;break;default:V=(B=h-x)+z,h=B+z/2}var F=g-x,G=g+x;e.roundRect(B,F,V,G,x,w,A,a.c,!0,n,c),T&&(Wr(s,B+x-s._sx,g-s._sy,m),Wr(s,V-x-s._sx,g-s._sy,m),s._cl.push({x1:B+x-s._sx,x2:V-x-s._sx,y1:F-s._sy-A/2,y2:G-s._sy+A/2}))}else e.circle(h,g,x,w,A,a.c,!0,n,null,null,!1,c),I=Kt(t,L=(a.t+"").substring(0,4),S=v*Hr[L.length-1]*b,N,D).width,O=1.7*x,T&&Wr(s,h-s._sx,g-s._sy,m);Gr(t,e,L,h,g,n,!1,P,qe.white,N,null,!0,!1,O,I,!1,S,D,c,null,null,f.unzoom,d)}else if(e.circle(h,g,x,w,A,a.c,!0,n,null,null,!1,c),T&&Wr(s,h-s._sx,g-s._sy,m),E){var H=x/1.41421;if(a.u){(y=d.imageAlignment[a.u])&&(M=y.dx/100*H,C=y.dy/100*H,k=y.e);var W=H*k;e.image(h-W+M,g-W+C,h+W+M,g+W+C,a.u,n,null,null,null,c)}else zr(e,d,t,n,h,g,H,a.fi.t,a.fi.c||qe.black,a.fi.ff||d.iconFontFamily,c)}}else E&&(T&&Wr(s,h-s._sx,g-s._sy,x),a.u?((y=d.imageAlignment[a.u])&&(M=y.dx/100*x,C=y.dy/100*x,k=y.e),e.image(h-x*k+M,g-x*k+C,h+x*k+M,g+x*k+C,a.u,n,null,null,null,c)):zr(e,d,t,n,h,g,x,a.fi.t,a.fi.c||qe.black,a.fi.ff||d.iconFontFamily,c));a.a&&(f.stillDirty=f.stillDirty||new Map,f.stillDirty.set(R(n),Jn.DIRTY))}return m}var Yr="\u2704",jr="\u2704",Ur="\u2704";function Xr(e,t,n,r,i){var a,s,u=o(e);switch(i){case"circle":a=Math.sin(u)*r,s=-Math.cos(u)*r;break;case"rectangle":var l,c=[Math.atan2(t,n),Math.atan2(t,-n),Math.atan2(-t,-n),Math.atan2(-t,n)];for(l=0;l<c.length;l++)c[l]<0&&(c[l]+=2*Math.PI);u<c[0]||u>c[3]?a=-(s=-n)*Math.tan(u):u<c[1]?(a=t,s=u===Math.PI/2?0:-a/Math.tan(u)):u<c[2]?a=-(s=n)*Math.tan(u):(a=-t,s=u===Math.PI/2*3?0:-a/Math.tan(u));break;default:a=0,s=0}return{gdx:a,gdy:s}}function qr(e,t){return{gdx:Math.sin(o(e))*t,gdy:-Math.cos(o(e))*t}}function Qr(e,t,n,r,i,o,a,s,u,l,c,f,d){var h,g=0,v=p(l.r);if(-1!==["n","ne","e","se","s","sw","w","nw"].indexOf(l.p))h=function(e,t,n,r,i,o){var a=0,s=0,u="centre";return-1===e.indexOf("n")&&-1===e.indexOf("s")||(s=-n,2===e.length&&(s-=r.dy),-1!==e.indexOf("s")&&(s*=-1)),-1===e.indexOf("e")&&-1===e.indexOf("w")||(a=t,u="right",2===e.length&&(a+=r.dx),-1!==e.indexOf("w")&&(a*=-1,u="left")),!i&&o&&(-1!==["n","s"].indexOf(e)?s*=Math.sqrt(2):-1!==["e","w"].indexOf(e)&&(a*=Math.sqrt(2))),{gdx:a,gdy:s,growDirection:u}}(l.p,n,r,c,u,s);else{var m="rectangle",y=0;s&&(m="circle",y=u?Math.min(n,r):Math.sqrt(2)*n),(h=v?qr(l.p,l.r*o):Xr(l.p,n,r,y,m)).growDirection=function(e){var t="centre";return e>0&&e<180?t="right":e>180&&(t="left"),t}(l.p)}return null!==h.gdx&&(h.gdx<0&&h.gdy<0&&l.e&&(i._sl.e=Math.max(i._sl.e,l.e)),g=Zr(e,t,a+Ur+hn(l.p,l.r),i._sx+h.gdx,i._sy+h.gdy,o,l,i,h.growDirection,!0,null,f,d)),i._sy+h.gdy+g}var Kr="\u2704",Jr="\u2704";function $r(e,t,n,r,i,o,a,s){var u=r+o,l=i+o;"circle"===e?a(Math.min(u,l)):s(t-u,n-l,t+u,n+l)}function ei(e,t,n,r,i,o,a,s,u,l,c,f,d,h){$r(d,t,n,r,i,o,function(r){e.circle(t,n,r,a,s,l,c,f,u,!1,!1,h)},function(t,n,r,i){e.rect(t,n,r,i,a,s,l,c,f,u,h)})}function ti(e,t,n,r){var i=t;return""===i||i||(i=e.t),i?(function(e,t,n,r){return n&&("node"===e.type||"link"===e.type)&&i.length>n&&!function(e,t){return r&&r===e}(e.id)}(e,0,n,r)&&(i=i.substring(0,n-3)+"..."),i.split(/\r\n|\r|\n/)):[""]}function ni(e,t,n,r,i,o){for(var a=[],s=0;s<e.length;s++)a[s]=Kt(t,e[s],n,r,i||o).width;return a}var ri="\u2704";function ii(e,t,n,r,i,o,a,s,u,l,c,f,d){var h=a*l.unzoom;if(s.t){var p=r,g=i,v=e.getLayer();u||e.setLayer(zn.BUBBLES);var m=s.p?""+s.p:"ne",y="w"===m.substring(1,2),b="s"===m.substring(0,1),x=n+ri+"bu",w=Number(s.fs?s.fs:d)*h,A=s.b?s.b:qe.keyline,E=s.c?s.c:qe.white,M=s.fc?s.fc:qe.black,C=ti(s,null,c.truncateLabel,f.showFullLabel),k=w+3*h,T=k*C.length,_=ni(C,t,w,s.fb,s.ff,c.fontFamily),S=function(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e[n]);return t}(_),I=13*h,R=6*h,L=2*a,O=9*h,N=13*h,P=10*h,D=o+N,B=T+2*R,V=2*h,z=Math.max(V/2,1),F=3*h;s.g&&delete s.g.e;var G=s.g?17*h:0;y&&(p-=S+2*L+2*I+G),b&&(g+=(w+3)*C.length+2*D+2*R);var H=p+L+.5,W=p+L+2*I+S+G+.5,Z=g-D-B+.5,Y=g-D+.5;e.roundRect(H,Z,W,Y,8*h,A,V,E,!0,x),Zr(e,t,x,p+G,(Z+Y)/2,h,s.g,null,null,null,null,l,c);var j,U=Z-.5+R+k,X=H+I+G-.5;for(j=0;j<C.length;j++)e.text(X,U,C[j],M,w,s.fb,x,s.ff||c.fontFamily,!1,_[j],!1,!1,X-1.5,U-w,W,Y),U+=k;y&&(H=W,O=-O,P=-P,z=-z),b&&(Y=Z,N=-N,F=-F),e.triangle(H+O,Y,H+O+P,Y,H+O,Y+N,A,V,E,!0,x,0,!1),e.triangle(H+O+z,Y-F,H+O+P+z,Y-F,H+O+z,Y+N-F,A,-1,E,!0,x,0,!1),e.setLayer(v)}}var oi=4,ai=27;function si(e,n){var r={},i=vt;r.fontSize=i;var o="\u2704",a={arrows:null,fontFamily:null,glyphsAlongLink:null,iconFontFamily:null,imageAlignment:null,editcolour:null,tight:null,avoidLabels:null,selectionFontColour:null,selectedNode:null,isNodeSelStyle:null,selectedLink:null,isLinkSelStyle:null,labelOffset:0,truncateLabel:null,defaultOpenComboStyle:ln},s={},u={hib:!1,present:{t:!0,t1:!1,t2:!1},pos:{t:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0},t1:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0},t2:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0}}},l={unzoom:1,easingValue:null,resizeRect:null,resizePrimitive:null,stillDirty:null,useSlowPathRendering:!1,useSlowPathRenderingLastTime:!1};r.setSpecialOptions=function(e,t){s[e]=t},r.editColour=function(){return a.editcolour||qe.edit};var c=r.editColour;function f(){return a.selectionFontColour||qe.white}function d(e,r,o,d,p,v,m,y){var b=y.isSelected,x=y.isRevealed,w=1;o._edit=null;var A=o.id,E=b&&!a.isLinkSelStyle,M=E,C=b&&a.isLinkSelStyle,k=C&&a.selectedLink.b1>=0?a.selectedLink.b1:o.b1,T=C&&a.selectedLink.b2>=0?a.selectedLink.b2:o.b2,_=C&&a.selectedLink.c||o.c,S=C&&a.selectedLink.c2||o.c2,I=C&&a.selectedLink.fb||o.fb,R=C&&a.selectedLink.fbc||o.fbc,L=C&&a.selectedLink.fc||o.fc,O=C&&a.selectedLink.ff||o.ff,N=C&&a.selectedLink.fs||o.fs,P=C&&a.selectedLink.t1||o.t1,D=C&&a.selectedLink.t2||o.t2,B=C&&a.selectedLink.ls||o.ls,V=C&&a.selectedLink.w||o.w,z=!1;x&&(z=n.privateTopParentId(o.id1)!==n.privateTopParentId(o.id2)),p.parentId&&(w=g(1,p.parentId,d)),v.parentId&&(w=Math.min(w,g(1,v.parentId,d)));var F=(V||1)*w*l.unzoom,G=_||qe.midgrey,H=0;u.present.t=o.t||o.g&&o.g.length||m,u.present.t1=!!o.t1,u.present.t2=!!o.t2;var W=u.present.t||u.present.t1||u.present.t2;if(u.hib=!1,o.off||p===v){var Z=o.off;z&&(Z=o.off/w),_r(r,o.a1,o.a2,k,T,Z,A,p,v,G,S,F,w,B,b,u,l,a)}else vr(r,o.a1,o.a2,k,T,A,p,v,G,S,F,w,B,b,u,l,a);o._x=u.pos.t.lx,o._y=u.pos.t.ly;var Y=u.hib;if(W&&t(u.pos,function(t,n){if(u.present[n]){var d,h,p,g,v,m,y=t.lx,b=t.ly,x={};"t"===n||"string"==typeof o[n]?m=o[n]:(x=o[n],"t1"===n&&(x=P),"t2"===n&&(x=D),m=x.t?x.t:o[n].t,d=x.fb?x.fb:o[n].fb,h=x.fbc?x.fbc:o[n].fbc,p=x.fc?x.fc:o[n].fc,g=x.ff?x.ff:o[n].ff,v=x.fs?x.fs:o[n].fs);var C=!1,k=y,T=b;v=Number(v||N||i)*w*l.unzoom,m=m||"",g=g||O||a.fontFamily;var _=p||L||qe.black,S=h||R||qe.textback,B=void 0!==d?!!d:I;E&&(_=f(),S=c());var V=ti(o,m,a.truncateLabel,s.showFullLabel),z=ni(V,e,v,B,g,a.fontFamily),G=v+3*l.unzoom;H=G*V.length,V.length>0&&(k-=z[0]/2);for(var W=(V.length-1)*G,Z=x.above?b-(W+G/2+F/2):b-W/2,j=0;j<V.length;j++){0===j&&(T=Z);var U=Gr(e,r,V[j],y,Z,A,!0,_,S,B,o,!1,!0,99,z[j],E,v,g,Y,n,null,l.unzoom,a);C=C||U,Z+=G}C&&(M=!1);var X="t"===n?o.g:x.g;Yn(X)&&(function(e,t,n,r,i,o,a,s,u,l,c,f,d,h,p){var g,v,m,y=X||[],b=r,x=i,w=0,A=function(e,t){return Br(e,t)*o},E=function(){return 0};if(a)if(f.R&&p.glyphsAlongLink){var M=0,C=f.signf,k=f.R;for(w=f.tangent,m=0;m<y.length-1;m++)v=Br(y[m],y[m+1]),M+=C*Math.asin(v/(2*k));var T=w+M/2,_=2*C*k*Math.sin(M/2);b+=C*_*-Math.sin(T),x+=C*_*Math.cos(T),w+=M,A=function(e,t){g-=C*Math.asin(Br(e,t)/(2*k));var n=-C*Math.sin(g);return Br(e,t)*o*n},E=function(e,t){var n=C*Math.cos(g);return g-=C*Math.asin(Br(e,t)/(2*k)),Br(e,t)*o*n}}else{var S=0;for(m=0;m<y.length-1;m++)S+=Br(y[m],y[m+1])*o;p.glyphsAlongLink?(A=function(e,t){return Br(e,t)*o*f.tdx},E=function(e,t){return Br(e,t)*o*f.tdy},b+=S*f.tdx/2,x+=S*f.tdy/2):b+=S/2}else b-=y.length>0?Dr(y[y.length-1])*o:Dr({});function I(e){g=w;for(var t=y.length-1,n=b,r=x;t>=0;t--)e(y[t],n,r),t>0&&(n-=A(y[t-1],y[t]),r-=E(y[t-1],y[t]))}a&&s&&I(function(t,n,r){e.circle(n,r,Or(t)*o*1.25,qe.white,-1,d(),!0,u,null,null,!1,l)});var R=0;I(function(n,r,i){var a=u+Yr+R;c&&(a+="-"+c),Zr(e,t,a,r,i,o,n,null,!1,!1,l,h,p),R++})}(r,e,0,k,T,w,!C,E,A,Y,"t"===n?null:n,t,c,l,a),M=!1)}}),M){var j=Math.max(.66*(V||0),Number(N||i)*l.unzoom/2);r.circle(o._x,o._y,j,qe.white,-1,c(),!0,A,null,null,!1,Y)}o.bu&&ii(r,e,A,o._x,o._y,H/2+4,w,o.bu,!1,l,a,s,i),p.du&&h(p,"id1",A,r,F,G,Y),v.du&&h(v,"id2",A,r,F,G,Y),o._noHalos||function(e,t,n,r,i,o,a,s,u,l){var c,f,d,h=e.getLayer(),p="solid",g=cn;e.setLayer(zn.HALOS);for(var v=!0,m=0;m<g.length;m++)c=i[d=g[m]],f=t+jr+d,c&&(v=!1,i.off||n===r?_r(e,!1,!1,i.b1,i.b2,i.off,f,n,r,c.c,null,c.w,o,p,a,s,u,l):vr(e,!1,!1,i.b1,i.b2,f,n,r,c.c,null,c.w,o,p,a,s,u,l));i._noHalos=v,e.setLayer(h)}(r,A,p,v,o,w,b,u,l,a),Y&&(o._edit={hib:!0})}function h(e,t,n,r,i,a,s){r.circle(e._sx,e._sy,1.5*i,a,i,qe.white,!0,n+o+t,null,null,!1,s)}function g(e,t,n){var r=e,i=n[t];return i&&(r*=i._combo.e,i.parentId&&(r=g(r,i.parentId,n))),r}function v(e,t){for(var n=e,r=n.x,i=n.y;n.parentId;)r=(n=t[n.parentId]).x+(r-n.x)*n._combo.e,i=n.y+(i-n.y)*n._combo.e;return{x:r,y:i}}function y(e,t,n,r,i){if(!n.hi&&!n.du){var s,u,f,d,h,m,y,w,A,E,M,C=i.isOpenCombo,k=n.id,T=Un(n),_=n._combo&&n._combo.open?"circle":T?"circle"===n.sh?n.sh:"box":"box"===n.sh||"circle"===n.sh?n.sh:n.sq?"box":"circle",S=i.isSelected,I=S&&a.isNodeSelStyle,R=S&&!a.isNodeSelStyle,L=I&&a.selectedNode.b||n.b,O=I&&a.selectedNode.bs||n.bs,N=I&&a.selectedNode.c||n.c,P=(T?1:I&&a.selectedNode.e||n.e||1)*l.unzoom;u=!!T&&(I&&a.selectedNode.re||n.re),f=I&&a.selectedNode.u||n.u,d=I&&a.selectedNode.fi||n.fi,h=I&&p(a.selectedNode.bw)?a.selectedNode.bw:n.bw,m=I&&a.selectedNode.w||n.w,y=I&&a.selectedNode.h||n.h,w=n.x,A=n.y;var D,B=n.donut&&"circle"===_&&!C?n.donut:null;if(C){var V=n.oc;if(V?(h=0,null===V.b?L=null:(void 0===V.bw?h=a.defaultOpenComboStyle.bw:V.bw>0&&(h=V.bw),L=V.b||a.defaultOpenComboStyle.b),O=V.bs||a.defaultOpenComboStyle.bs,N=V.c||a.defaultOpenComboStyle.c,u=V.re||a.defaultOpenComboStyle.re,m=V.w||a.defaultOpenComboStyle.w):(L=a.defaultOpenComboStyle.b,h=a.defaultOpenComboStyle.bw,O=a.defaultOpenComboStyle.bs,N=a.defaultOpenComboStyle.c,u=a.defaultOpenComboStyle.re,m=a.defaultOpenComboStyle.w),I){var z=a.selectedNode.oc;z&&(L=z.b||L,h=z.bw||h,O=z.bs||O,N=z.c||N)}d=null,f=null,_="circle",E=I&&a.selectedNode.e||n.e||1,y=m*=P=n._combo.e}var F=1;if(n.parentId){F=g(1,n.parentId,r);var G=v(n,r);m*=F,y*=F,P*=F,w=G.x,A=G.y}n._sx=w,n._sy=A,B?(D=!0,s=B.b,h=P*(B.w+2*B.bw),O=null):L&&(void 0===h||h>0)?(D=!0,s=L,h=P*(h||oi)):(D=!1,s=qe.white,h=0,O=null);var H,W,Z=!!N,Y=!!f||!(!d||!d.t),j=Z?N:qe.white;n._c=0,n._cl=[],n._edit=null,n._sl={e:P},T?(H=m/2,W=y/2):W=H=P*ai;var U,X,q=H+h/2,Q=W+h/2;if(B?(U=P*B.w,X=h/2):X=.75*(U=D?h:P*oi),(Y||D||Z)&&(function(e,t,n,r,i,o,a){$r(_,t,n,q,Q,o,function(t){e._c=t},function(r,i,o,a){e._cl.push({x1:r-t,y1:i-n,x2:o-t,y2:a-n})})}(n,w,A,0,0,a.tight?D||Z?h/2:X-U/2:X+U/2),S&&(!R&&u||R))){var K=Fn[t.getLayer()];b(t,K,i,function(){var e=c();ei(t,w,A,q,Q,X,e,U,null,e,!1,k,_,!R),u&&(l.resizeRect=t.getLast())})}if(Z&&(ei(t,w,A,q,Q,0,s,-1,O,j,Z,k,_),S&&u&&!Y&&(l.resizePrimitive=t.cloneLast())),Y){if(f){var J=0,$=0,ee=1;(M=a.imageAlignment[f])&&(J=M.dx/100*H,$=M.dy/100*W,ee=M.e),t.image(w-H*ee+J,A-W*ee+$,w+H*ee+J,A+W*ee+$,f,k,n.ci?"ci":void 0,1)}else{var te=T?Math.min(H,W):H;zr(t,a,e,k,w,A,te,d.t,d.c||qe.black,d.ff||a.iconFontFamily)}S&&u&&(l.resizePrimitive=t.cloneLast())}if(D){var ne=B&&0===B.bw?-1:h||-1;ne>=0&&ei(t,w,A,q,Q,0,s,ne,O,j,!1,k,_),S&&u&&!Y&&!Z&&(l.resizePrimitive=t.cloneLast())}B&&function(e,t,n,r,i,o,a){var s=i.bw*P,u=i.w*P;if(u>0){var l=i.v.filter(function(e){return e>0}).length;if(1===l){var c=0;i.v.forEach(function(e,t){e>0&&(c=t)}),e.circle(t,n,r,i.c[c],u,qe.white,!1,a+"do0",null,!0)}else{var f=i.v.reduce(function(e,t){return e+t},0),d=s/r,h=2*Math.PI-d*l,p=-Math.PI/2+d/2;h>0&&i.v.reduce(function(o,c,p){var g=o;if(0===c)return g;var v=g+h*c/f,m=v+d;return 0===s&&(0===p?g-=Sr:p!==l-1&&(v+=Sr)),e.arc(t,n,r,g,v,i.c[p%i.c.length],null,u,a+"do"+p,null,!0,0),m},p)}}}(t,w,A,Math.min(q,Q),B,0,k+o),x(t,e,w,A,h,H,W,n,T,_,D,Z,Y,R,P,E,k,I,i)}}function b(e,t,n,r){var i,o=e.getLayerPath(),a=e.getLayer();t&&(n.isRevealed&&(n.isParentRevealed||(i=o.slice(1)),n.isParentTransient&&(i||(i=o.slice(0)),i.unshift(zn.TRANSIENT))),!n.isTransient||n.isInCombo&&n.isParentTransient||(i=o.slice(1)),n.isOpenCombo&&((i=(i=i||o).slice(0,i.length-1))[i.length-1]===zn.COMBOS&&(i[i.length-1]=zn.MAIN),i.push(n.isInBackground?zn.BG:zn.FG)),i&&(e.hasPath(i)||e.createItemLayersAt(i),e.setLayerPath(i)),e.setLayer(t)),r(),t&&(e.setLayerPath(o),e.setLayer(a))}function x(e,t,n,r,o,u,d,h,g,v,m,y,x,w,A,E,M,C,k){var _,S,I,R,L,O,N,P=n,D=r,B=P,V=P,z=D,F=jn(h),G=!1,H=k.isOpenCombo,W=h._combo&&h._combo.open?E:A;C?(S=a.selectedNode.fb||h.fb,I=a.selectedNode.fbc||h.fbc,R=a.selectedNode.fc||h.fc,L=a.selectedNode.ff||h.ff,O=(a.selectedNode.fs||h.fs||i)*W,N=a.selectedNode.tc||h.tc):(S=h.fb,I=h.fbc,R=h.fc,L=h.ff,O=(h.fs||i)*W,N=h.tc),H&&(N=!1);var Z=3*W+O/2,Y=R||qe.black,j=I||qe.textback;w&&(Y=f(),j=c());var U=D+d+Z,X=ti(h,null,a.truncateLabel,s.showFullLabel),q=ni(X,t,O,S,L,a.fontFamily),Q=O+3,K=Q,J=Q*X.length;X.length>0&&(V-=q[0]/2);var $=x||m||y,ee=T(N)?!!N:!x&&!g,te=K/2*(X.length-1);if($)ee&&(U=D-te);else{if(F){var ne=Dr(h.g[h.g.length-1])*W;V=P+ne,P+=q[0]/2+ne}U=D,D+=te}if(X.length>0&&(z=U),m&&!ee&&(U+=o-3*W),$){var re=3,ie=3,oe={dx:0,dy:x?-8:0};g||"circle"!==v||(re+=2,ie+=2,x&&(oe.dx+=2,oe.dy+=2)),g&&!H&&(re++,ie++);var ae=re*W,se=ie*W;if(oe.dx*=W,oe.dy*=W,H){var ue=((h.oc.w||a.defaultOpenComboStyle.w)+(h.oc.bw||a.defaultOpenComboStyle.bw))/2/Math.sqrt(2);h._sl.e=u/ai,h._sl.x=-ue*A-ae/E,h._sl.y=-ue*A-se/E}else h._sl.x=ae-oe.dx-u,h._sl.y=se-oe.dy-d;if(F){var le="circle"===v;for(_=0;_<h.g.length;_++){var ce=Qr(e,t,u-ae,d-se,h,A,M,le,g,h.g[_],oe,l,a),fe=p(h.g[_].r);ee||fe||(U=Math.max(U,ce+Z))}}}for(var de=0;de<X.length;de++){var he=Gr(t,e,X[de],P,U,M,!0,Y,j,S,h,!1,!0,99,q[de],w,O,L||a.fontFamily,null,null,W,l.unzoom,a);G=G||he,U+=K}if(!$){var pe=!h.t||!G;!function(e,t,n,r,i,o,a,s,u,l,c,f,d){var h=n||[],p=pe?B:V;if(a){for(var g=0,v=0;v<h.length-1;v++)g+=Br(h[v],h[v+1])*o;p+=g/2}else p-=h.length>0?Dr(h[h.length-1])*o:Dr({});if(l){var m=p;if(h.length>0){b(function(e,t){m=t});var y=h[0].e||1;m-=y*o*Kn/2,l._sl.e*=y}l._sl.x=m-l._sx,l._sl.y=i-l._sy,l._sl.w=!0}function b(e){for(var t=h.length-1,n=p;t>=0;t--)e(h[t],n),t>0&&(n-=Br(h[t-1],h[t])*o)}a&&s&&b(function(t,n){e.circle(n,i,Or(t)*o*1.25,qe.white,-1,c(),!0,u,null,null,!1,!1)});var x=0;b(function(n,r){Zr(e,t,u+Jr+x,r,i,o,n,l,!1,!1,!1,f,d),x++})}(e,t,h.g,0,z,W,pe,w,M,h,c,l,a)}if(!g&&(!h._noHalos||C)&&b(e,zn.HALOS,k,function(){!function(e,t,n,r,i,o,a,s){for(var u,l=fn,c=!0,f=0;f<l.length;f++){var d=l[f];if(u=a&&s.selectedNode[d]||o[d]){c=!1;var h=t+Kr+d,p=u.r*i,g=u.w*i;g/2>=p?e.circle(n,r,p+g/2,qe.white,-1,u.c,!0,h,null,!0):e.circle(n,r,p,u.c,g,qe.white,!1,h,null,!0)}}o._noHalos=c&&!a}(e,M,P,D,W,h,C,a)}),h.bu){var ge=0;$?ge=d:J>0?ge=J/2+4:jn(h)&&(ge=13*W),ii(e,t,M,P,D,ge,W,h.bu,H,l,a,s,i)}}return r.setOptions=function(e){a.arrows=e.arrows,p(e.labelOffset)&&(a.labelOffset=e.labelOffset),a.truncateLabel=!!(e.truncateLabels&&e.truncateLabels.maxLength&&p(e.truncateLabels.maxLength))&&e.truncateLabels.maxLength,e.selectionColour&&(a.editcolour=nt(e.selectionColour)?e.selectionColour:void 0),a.fontFamily=e.fontFamily,a.glyphsAlongLink="along"===e.linkStyle.glyphs,a.iconFontFamily=e.iconFontFamily,a.imageAlignment=e.imageAlignment||{},a.avoidLabels=e.linkEnds.avoidLabels,a.tight="loose"!==e.linkEnds.spacing,e.selectionFontColour&&(a.selectionFontColour=nt(e.selectionFontColour)?e.selectionFontColour:void 0),a.selectedNode=e.selectedNode,a.isNodeSelStyle=m(e.selectedNode),a.selectedLink=e.selectedLink,a.isLinkSelStyle=m(e.selectedLink)},r.arrowLength=function(e,t){return rr(e,t,l.unzoom,a.arrows)},r.contains=function(e,n){var r=[],i=k(e,{sh:"box",x:0,y:0});function o(e,t){e&&r.push(t)}if(Un(i))if("circle"===i.sh){var a=Math.min(i.w,i.h)/2;t(n,function(e){Un(e)?o("circle"===e.sh?Lt(i.x,i.y,a,e.x,e.y,Math.min(e.w,e.h)/2):Nt(i.x,i.y,a,e.x-e.w/2,e.y-e.h/2,e.x+e.w/2,e.y+e.h/2),e.id):o(Lt(i.x,i.y,a,e.x,e.y),e.id)})}else{var s={x1:i.x-i.w/2,y1:i.y-i.h/2,x2:i.x+i.w/2,y2:i.y+i.h/2};t(n,function(e){if(Un(e))if("circle"===e.sh){var t=Math.min(e.w,e.h)/2;o(Ot(s,e.x-t,e.y-t,e.x+t,e.y+t),e.id)}else o(Ot(s,e.x-e.w/2,e.y-e.h/2,e.x+e.w/2,e.y+e.h/2),e.id);else o(Rt(s,e.x,e.y),e.id)})}return r},r.getResizePrimitive=function(){return l.resizePrimitive},r.animated=function(){return!!l.stillDirty},r.generate=function(t,r,i,o,a,s,u,c,f,h,p,g,m,b){var x,w,A,E,M={isSelected:!1,isOpenCombo:!1,isInCombo:!1,isInBackground:!1,isTransient:!1,isParentTransient:!1,isRevealed:!1,isParentRevealed:!1};l.useSlowPathRendering=l.useSlowPathRenderingLastTime,l.useSlowPathRenderingLastTime=!1;var C=b&&!l.useSlowPathRendering&&!i,k=new Map;function T(e,n){var i=e.parentId,o=!1;if(i){if(!n&&f(i)||p(i))return!0;var a=t[i]||r[i];a&&a.parentId&&(o=T(a))}i=e.id;var s=n&&h.has(i)||k.has(i)||g(i),u=!n&&f(i),l=!n&&p(i);return o||!s&&(u||l)}function _(e){var r,i,o,a=[],l=!1,c=!!e._combo&&e._combo.open,d=e.parentId||c;if(M.isOpenCombo=c,M.isInBackground=e.bg,M.isSelected=f(e.id),M.isInCombo=e.parentId,k.has(e.id)||g(e.id)?(M.isRevealed=!0,k.set(e.id,!0),a.push(zn.REVEALED)):M.isRevealed=!1,d){var h=n.privateGetAncestryIds(e.id);a.push(zn.COMBOS),r=!1;for(var p=0;p<h.length-1;p++){var v=h[p];a.push(s.createComboSegment(v));var m=t[v];r||(r=m&&m._combo&&T(m)),M.isRevealed||i||!(i=k.has(v)||g(v))||(M.isRevealed=!0,k.set(e.id,!0),a.unshift(zn.REVEALED))}M.isParentTransient=!!r,M.isParentRevealed=!!i,c&&a.push(s.createComboSegment(e.id))}else a.push(zn.MAIN),M.isParentTransient=!1,M.isParentRevealed=!1;M.isRevealed||(l=T(e)&&(!Un(e)||d))&&a.unshift(zn.TRANSIENT),M.isTransient=l,s.startGeneratingFor(e,C,M.isInCombo||M.isOpenCombo),c?o=zn.COMBO_CONTAINER:(o=Un(e)?zn.SHAPES:zn.NODES,a.push(e.bg?zn.BG:zn.FG)),d&&!s.hasPath(a)&&s.createItemLayersAt(a),s.setLayerPath(a),s.setLayer(o),y(u,s,e,t,M)}function S(e){var i,o,a,l,c=[],p=e.parentId&&(e._combo||t[e.parentId]),v=r[e.parentId];if(M.isInBackground=e.bg,M.isSelected=f(e.id),M.isInCombo=!!e.parentId,M.isRevealed=h.has(e.id)||g(e.id)||k.has(e.parentId),M.isRevealed||((l=T(e,!0))?(c.push(zn.TRANSIENT),M.isTransient=!0):M.isTransient=!1),s.startGeneratingFor(e,C,M.isInCombo),i=t[e.id1],o=t[e.id2],M.isRevealed){if(i=n.privateFirstVisibleItemInAncestry(e.id1),o=n.privateFirstVisibleItemInAncestry(e.id2),!i||!o||i===o&&i!==t[e.id1])return;c.push(zn.REVEALED)}if(p){for(var y=n.privateGetAncestryIds(e.id,!0),b=[],x=v?2:1,w=0;w<y.length-x;w++){var A=y[w];if(b.push(s.createComboSegment(A)),!l){var E=t[A];a||M.isRevealed||(a=E&&E._combo&&T(E)),a&&c.unshift(zn.TRANSIENT)}}M.isParentTransient=a,b.length>0?(c.push(zn.COMBOS),c=c.concat(b),s.hasPath(c)||s.createItemLayersAt(c)):c.push(zn.MAIN)}else c.push(zn.MAIN);c.push(e.bg?zn.BG:zn.FG),s.setLayerPath(c),s.setLayer(zn.LINKS),d(u,s,e,t,i,o,m,M)}if(h.forEach(function(e,t){var i=r[t];if(i){var o=n.privateFirstVisibleItemInAncestry(i.id1),a=n.privateFirstVisibleItemInAncestry(i.id2);!o||o._combo&&o._combo.open||k.set(o.id,!0),!a||a._combo&&a._combo.open||k.set(a.id,!0)}}),l.resizePrimitive&&(i||a.get(l.resizePrimitive.id)===Jn.DIRTY)&&(l.resizeRect=null,l.resizePrimitive=null),l.stillDirty=null,l.easingValue=e.atanEasing(Date.now()%1e3/1e3),l.unzoom=c.getUnzoom(),i){for(s.removeAllItems(),E=Object.keys(t),A=Object.keys(r),x=0,w=E.length;x<w;x++)_(t[E[x]]);for(x=0,w=A.length;x<w;x++)S(r[A[x]])}else{var I=[];if(a.forEach(function(e,n){var i=t[n];if(i)if(i.parentId||i._combo)_(i);else if(e===Jn.MOVED){if(i.parentId){var o=v(i,t);i._sx=o.x,i._sy=o.y}else i._sx=i.x,i._sy=i.y;s.moveItem(i,i.x,i.y)}else C=!1,_(i);else r[n]?I.push(n):(C=!1,s.removeItem(n))}),o)for(x=0,w=(A=Object.keys(r)).length;x<w;x++)S(r[A[x]]);else I.forEach(function(e){S(r[e])})}return{stillDirty:l.stillDirty,rebuildAll:l.useSlowPathRendering||!C}},r.generateHandles=function(e,t,n,r){var i=e.getLayerPath();e.setLayerPath(null),e.startGeneratingForExtras(),e.setLayer(zn.HANDLES),l.resizeRect&&1===r.size&&(Ft(e,t,n,l.resizeRect,1,l.resizeRect.id,c(),o),Ft(e,t,n,l.resizeRect,4,l.resizeRect.id,qe.transparent,o)),e.setLayerPath(i)},r}function ui(e){return{primitiveMover:function(n,r,i,o,a,s,u,l,c,f,d){if(!e.trigger("dragstart","resize",o,l,c,null)){var h=n.extents(r,a),p=a.r,g={},v={};return t(a,function(e,t){v[t]=e}),v.wc&&(g.c=v.wc[3]),v.wfc&&(g.fc=v.wfc[3]),v.wbc&&(g.bc=v.wbc[3]),function(e,t){for(var n=["c","fc","bc"],r=0;r<n.length;r++){var i=n[r];if(e[i]){var o=rt(e[i]);e[i]=Ke(o[0],o[1],o[2],.5),e["w"+i][3]=127.5}}}(v),{rebuild:{all:!0},animate:void 0,scrollable:!0,getCursor:function(){return s?"crosshair":"move"},generate:function(e){e.copyPrimitive(v)},dragMove:function(e,t,n,r){x(v,e,t,n,r)},endDrag:function(t,n,r,s,u){i.cancelScroll();var l=e.trigger("dragend","resize",o,n,r);v.wc&&(v.wc[3]=g.c),v.wfc&&(v.wfc[3]=g.fc),v.wbc&&(v.wbc[3]=g.bc),!l&&t&&(x(a,n,r,s,u),d(a)),e.trigger("dragcomplete","resize",o,n,r)}}}function m(e,t){return{dx:i.viewToWorldDistance(e-l),dy:i.viewToWorldDistance(t-c)}}function y(e,t,n,r){var i,o={},a=e,s=t;if(u.length>0||f){o.x1=0,o.x2=0,o.y1=0,o.y2=0;for(var l=0;l<u.length;l++){var c="x"===(i=u[l]).charAt(0)?a:s;o[i]=c}(n||f)&&(0!==o.x1&&(o.x2=-o.x1),0!==o.x2&&(o.x1=-o.x2),0!==o.y1&&(o.y2=-o.y1),0!==o.y2&&(o.y1=-o.y2))}else r&&(s=0!==(a=Math.abs(a)>Math.abs(s)?a:0)?0:s),o.x1=a,o.x2=a,o.y1=s,o.y2=s;for(var d={},p=["x1","y1","x2","y2"],g=0;g<p.length;g++)d[i=p[g]]=h[i]+o[i];if(r){var v=h.x2-h.x1,m=h.y2-h.y1;if(Math.abs(v)>0&&Math.abs(m)>0){var y,b=m/v,x=d.x2-d.x1,w=d.y2-d.y1;if(Math.abs(a)>Math.abs(s)){var A=Math.floor(b*(v+x)-m)-w;f||n||!N(u,"y1")&&!N(u,"y2")?(y=Math.floor(A/2),d.y1-=y,d.y2+=y):(N(u,"y1")&&(d.y1-=A),N(u,"y2")&&(d.y2+=A))}else{var E=Math.floor((m+w)/b-v)-x;f||n||!N(u,"x1")&&!N(u,"x2")?(y=Math.floor(E/2),d.x1-=y,d.x2+=y):(N(u,"x1")&&(d.x1-=E),N(u,"x2")&&(d.x2+=E))}}}return d}function b(e,t,n){return"1"===n.charAt(1)?p-("x"===n.charAt(0)?e:t):p+("y"===n.charAt(0)?t:e)}function x(e,t,r,i,o){var s,l=m(t,r);if("C"===a.p)if(u.length>1){var c=b(l.dx,l.dy,u[0]),f=b(l.dx,l.dy,u[1]);s=Math.abs(Math.min(c,f))}else s=Math.abs(b(l.dx,l.dy,u[0]));var d=y(l.dx,l.dy,i,o);n.setExtents(e,d.x1,d.y1,d.x2,d.y2,s)}},createHandDragger:function(n,r,i,o){var a={x:!0,y:!0},s=n.offsetX(),u=n.offsetY(),l=0,c=0,f=!1,d="hand",h=e.trigger("dragstart",d,null,r,i);if(h){if(!m(h))return void o();t(h,function(e,t){a[t]=e})}function p(e,t){f=f||Math.abs(r-e)>10||Math.abs(i-t)>10,l=e-r,c=t-i,a&&(a.x||(l=0),a.y||(c=0))}function g(){f&&(n.offsetX(s+l),n.offsetY(u+c),e.trigger("viewchange"))}return{rebuild:{drawOnly:!0},animate:g,direction:a,dragMove:p,getCursor:function(){return"move"},endDrag:function(t,n,r){var i=e.trigger("dragend",d,null,n,r);f?(!i&&t?p(n,r):(l=0,c=0),g()):o(),e.trigger("dragcomplete",d,null,n,r)}}},createMapDragger:function(t,n,r,i){var o=n?"move":"hand",a=R(n);return e.trigger("dragstart",o,a,r,i,O(n)),{rebuild:void 0,animate:void 0,direction:{},dragMove:function(){},getCursor:function(){return"move"},endDrag:function(t,n,r){e.trigger("dragend",o,a,n,r),e.trigger("dragcomplete",o,a,n,r)}}},createDefaultDragger:function(n,r,i,o,a,s,u,l,c){var f={x:!0,y:!0,add:null,combos:!0},d=R(u),h=r[d],p="move",g=e.trigger("dragstart",p,d,l,c,O(u));if(g)if(Array.isArray(g))f.add=B(g);else{if(!m(g))return;t(g,function(e,t){f[t]=e}),Array.isArray(f.add)&&(f.add=B(f.add))}if(f.combos){var v=a();v.length&&(f.add=f.add||{},v.forEach(function(e){f.add[e]=1}))}function y(e){return f.add&&f.add[e]}var b,x=s?s.viewToWorldX(l):l,w=s?s.viewToWorldY(c):c,A=Object.keys(r),E=N(l,c),M={x:0,y:0},C=!0;function k(){var e=E.dx-M.x,t=E.dy-M.y;M.x=E.dx,M.y=E.dy;var r=A.filter(function(e){return e!==d&&(o(e)||y(e))});o(d)&&(b?r.unshift(d):r.push(d)),n.moveAllNodesBy(r,e,t),C&&(C=!1,n.setDirty(d)),n.drawInTransientLayer(r)}function T(){var e=A.filter(function(e){return o(e)||y(e)});n.moveAllNodesBy(e,-M.x,-M.y)}h&&(b=h.w&&h.h);var _,S,I=!1,L=!1;function N(e,t){I=I||Math.abs(l-e)>10||Math.abs(c-t)>10;var n=s?s.viewToWorldX(e):e,r=s?s.viewToWorldY(t):t;return f&&(f.x||(n=x),f.y||(r=w)),{dx:I?n-x:0,dy:I?r-w:0}}return{rebuild:{positions:!0},scrollable:!0,direction:f,animate:k,generate:function(t){I&&t.setHitTesting(d,!1),I&&!L&&(L=!0,e.privateTrigger("redraw",{all:!0}))},getCursor:function(){return"move"},dragMove:function(e,t){E=N(e,t)},mouseMoved:function(e){return e&&(_=!0),_},afterDraw:function(t,n,r){_=!1;var i=R(t);d!==i&&(void 0===S?S=i:i!==S&&(e.trigger("dragover",i,n,r,O(t)),S=i))},endDrag:function(t,r,i,o,a,l){s.cancelScroll(),e.trigger("dragend",p,R(u),r,i)?T():t&&I?(T(),E=N(r,i),M={x:0,y:0},e.trigger("prechange","move"),k()):T(),l.setHitTesting(d,!0),n.setDirty(d),f.add&&Object.keys(f.add).forEach(n.setDirty),e.trigger("dragcomplete",p,R(u),r,i)}}},createLinkEndDragger:function(t,n,r,i,o,s,u,l,c){if(e.trigger("dragstart","dummy",c,u,l,null))return!1;var f=r?r.viewToWorldX(u):u,d=r?r.viewToWorldY(l):l,h=i[o[s]].x,p=i[o[s]].y;function g(e,t){n.moveNode(o[s],e,t)}var v,m,y=x(u,l),b=null;function x(e,t){var n=r?r.viewToWorldX(e):e,i=r?r.viewToWorldY(t):t;return{dx:n-f,dy:i-d}}return{rebuild:{all:!0},scrollable:!0,animate:function(){g(h+y.dx,p+y.dy)},getCursor:function(){return"move"},dragMove:function(e,n){y=x(e,n),b=t.hittest(e,n,r)},mouseMoved:function(e){return e&&(m=!0),m},afterDraw:function(t,n,r){m=!1;var i=R(t),o=O(t);c===i&&(i=null,o=null),void 0===v?v=i:i!==v&&(e.trigger("dragover",i,n,r,o),v=i)},endDrag:function(u,l,c){if(r.cancelScroll(),!e.trigger("dragend","dummy",b,l,c))if(u)if(g(h,p),e.trigger("prechange","move"),b=R(b),i[b]&&b!==o["id1"===s?"id2":"id1"]){var f=a(o);f[s]=b,delete f.off,n.removeItem([o[s],o.id]),t.merge([f])}else y=x(l,c),g(h+y.dx,p+y.dy),b=null;else g(h,p);e.trigger("dragcomplete","dummy",b,l,c)}}},createLinkDragger:function(n,r,i,o,a,s,u,l){if(e.trigger("dragstart","offset",l,s,u,O(l)))return!1;var c={},f={},d={};o.privateSelection().forEach(function(e,t){if(t){var n=o.getByID(t);n&&"link"===n.type&&(c[t]=n.off||0,f[t]=n.off||0,d[t]=!0)}});var h=!1;function p(e,t,r){var o=e===a,s=o?i.viewToWorldX(t):t,u=o?i.viewToWorldY(r):r,l=n(1,e),h=n(2,e),p=function(e,t,n,r,i,o){return((n-e)*(t-u)-(e-s)*(r-t))/Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}(l.x,l.y,h.x,h.y);d[e.id]&&Math.abs(p-c[e.id])>8&&(d[e.id]=!1),d[e.id]||(Math.abs(o?p:p+c[e.id])<12&&(p=o?0:-c[e.id]),f[e.id]=o?p:p+c[e.id])}return{rebuild:{all:!0},scrollable:!0,animate:function(){t(f,function(e,t){o.setLinkOffset(t,f[t])})},getCursor:function(){return"move"},dragMove:function(e,r){var l=i.viewToWorldX(e)-i.viewToWorldX(s),c=i.viewToWorldY(r)-i.viewToWorldY(u);t(f,function(t,i){var s=o.getByID(i);if(s)if(s===a)p(s,e,r),h=!0;else{var u=n(1,s),f=n(2,s);p(s,(u.x+f.x)/2+l,(u.y+f.y)/2+c)}})},endDrag:function(n,r,a){i.cancelScroll(),!e.trigger("dragend","offset",l,r,a)&&o.getByID(l)&&(n&&h?(t(c,function(e,t){o.getByID(t).off=e}),e.trigger("prechange","offset"),t(f,function(e,t){o.getByID(t).off=e})):(t(f,function(e,t){f[t]=c[t]}),this.animate())),e.trigger("dragcomplete","offset",l,r,a)}}}}}var li,ci,fi=1e-6;function di(e){return function(e){return"number"==typeof e&&isFinite(e)}(e)&&(0|e)===e}function hi(e,t){return Math.sqrt(e*e+t*t)}function pi(e,t,n,r){return hi(e-n,t-r)}function gi(e,t,n){return e<t?t:e>n?n:e}function vi(e,t,n){return n*e+(1-n)*t}function mi(e,t,n,r,i,o,a){var s=1+Math.pow(o*Math.E,-r*(a-n));return e+(t-e)/Math.pow(s,1/i)}function yi(e,t){function n(){this.constructor=e}Object.setPrototypeOf(e,t),null!==t?(n.prototype=t.prototype,e.prototype=new n):e.prototype=Object.create(e)}function bi(e,t,n){for(var r in t)void 0===e[r]?e[r]=t[r]:n&&"object"==typeof e[r]&&!Array.isArray(e[r])&&bi(e[r],t[r])}function xi(){return{next:function(){return Ti},size:0}}function wi(e){var t={value:e,done:!1};return{next:function(){var e=t;return t=Ti,e},size:1}}function Ai(e,t){var n,r={done:!1,value:null},i={size:0,next:function(){return n=e.next(),r.done=n.done,n.done||(r.value=t(n.value)),r}};return"size"in e&&(i.size=e.size),i}function Ei(e,t){for(var n=0,r=e.next();!r.done;)t(r.value,n),e.next(),n++}function Mi(e){if(ci.ensureContiguous(e),e.size<=0)return xi();var t={value:e.begin-1,done:!1};return{size:e.size,next:function(){return++t.value>e.end&&(t.done=!0),t}}}function Ci(e,t){var n={done:0===e.length,value:null,i:-1};return{size:e.length,next:function(){return n.i++,n.i<e.length&&(n.value=t?t(e[n.i],n.i):e[n.i]),n.done=n.i>=e.length,n}}}function ki(e,t){void 0===t&&(t=[]);for(var n=e.next();!n.done;)t.push(n.value),n=e.next();return t}!function(e){function t(t){void 0===t&&(t=1);var n=Math.round(t)%e.randMax,r=48271,i=e.randMax/r,o=e.randMax%r;return function(){var t=r*(n%i|0)-o*(n/i|0);return(n=t>0?t:t+e.randMax)-1}}e.randMax=2147483647,e.createPRNGi32=t,e.createPRNG=function(n,r,i){void 0===n&&(n=1),void 0===r&&(r=0),void 0===i&&(i=1);var o=i-r,a=t(n);return function(){return r+o*(a()/e.randMax)}},e.createGaussianRNG=function(e,t,n){void 0===e&&(e=0),void 0===t&&(t=1),void 0===n&&(n=Math.random);var r=-1,i=!1;return function(){if(i)return i=!1,e+t*r;var o,a,s;do{s=(o=2*n()-1)*o+(a=2*n()-1)*a}while(s>=1||0===s);var u=Math.sqrt(-2*Math.log(s)/s);return r=a*u,i=!0,e+t*o*u}}}(li||(li={})),function(e){function t(e){return 0===e.size||(0|e.begin)===e.begin&&(0|e.end)===e.end&&e.end>=e.begin&&e.end-e.begin+1===e.size}e.isContiguous=t,e.isWithin=function(e,t){return e.size>0&&e.begin<=t&&e.end>=t},e.ensureContiguous=function(e){if(!t(e))throw new Error("non-contiguous Keyspace")},e.fromSize=function(e){return e>0?{size:e,begin:0,end:e-1}:{size:e,begin:-1,end:-1}}}(ci||(ci={}));var Ti={value:null,done:!0},_i=Object.freeze({empty:xi,single:wi,map:Ai,forEach:Ei,fromKeySpace:Mi,fromArray:Ci,toArray:ki,firstn:function(e,t){var n={done:t<1,value:null,i:-1};return{size:t,next:function(){if(n.i++,n.i<t){var r=e.next().value;n.value=r}return n.done=n.i>=t,n}}},allPairs:function(e,t,n){if(void 0===n&&(n=[0,0]),e===t)return xi();var r=e,i=e,o={value:n,done:!1};return{size:(t-e+1)*(t-e)/2,next:function(){return i===t?i=++r+1:i++,r===t?o.done=!0:(o.value[0]=r,o.value[1]=i),o}}}});function Si(e){return e.buffer&&e.buffer instanceof ArrayBuffer}function Ii(e,t){for(var n=0;n<e.length;n++)e[n]=t}function Ri(e,t){return e<t}function Li(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Oi(e,t){void 0===t&&(t=0);for(var n=t,r=0,i=e.length;r<i;r++)e[r]=n++}function Ni(e,t){for(var n=0;n<t.length;n++)if(t[n]<0)t[n]=~t[n];else for(var r=n,i=t[n];i!==n;)Li(e,r,i),i=t[r=i],t[r]=~i}var Pi,Di,Bi=function(){function e(e,t,n,r,i,o){void 0===r&&(r=Pi.sizeFromShape(e)),void 0===i&&(i=0),void 0===o&&(o=Pi.computeStrides(e)),this.shape=e,this.dtype=t,this.values=n,this.size=r,this.offset=i,this.strides=o,this.rank=this.shape.length,this.lastIndex=Pi.lastIndex(this),this.contiguous=this.lastIndex-i==r-1}return e.prototype.getNextIndex=function(e){if(e<0)return this.offset;var t=e+this.strides[this.rank-1];return t>this.lastIndex?-1:t},e}(),Vi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankType=0,t}return yi(t,e),t.prototype.get=function(){return this.values[this.index()]},t.prototype.set=function(e){return this.values[this.index()]=e},t.prototype.index=function(){return 0|this.offset},t}(Bi),zi=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n,r,i,o,a)||this;return s.rankType=1,s.stride0=s.strides[0],s}return yi(t,e),t.prototype.get=function(e){return this.values[this.index(e)]},t.prototype.set=function(e,t){return this.values[this.index(t)]=e},t.prototype.index=function(e){return this.offset+e*this.stride0|0},t}(Bi),Fi=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n,r,i,o,a)||this;return s.rankType=2,s.stride0=s.strides[0],s.stride1=s.strides[1],s}return yi(t,e),t.prototype.get=function(e,t){return this.values[this.index(e,t)]},t.prototype.set=function(e,t,n){return this.values[this.index(t,n)]=e},t.prototype.index=function(e,t){return this.offset+e*this.stride0+t*this.stride1|0},t}(Bi),Gi=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n,r,i,o,a)||this;return s.rankType=3,s.stride0=s.strides[0],s.stride1=s.strides[1],s.stride2=s.strides[2],s}return yi(t,e),t.prototype.get=function(e,t,n){return this.values[this.index(e,t,n)]},t.prototype.set=function(e,t,n,r){return this.values[this.index(t,n,r)]=e},t.prototype.index=function(e,t,n){return this.offset+e*this.stride0+t*this.stride1+n*this.stride2|0},t}(Bi);function Hi(e,t,n){null==t&&(t=Pi.inferShape(e)),null==n&&(n=Pi.inferDType(e,"f32"));var r=Si(e)||Array.isArray(e)?e:[e],i=Pi.asTypedArray(r,n),o=Pi.getViewCtor(t.length);return Pi.sizeFromShape(t),new o(t,n,i)}function Wi(e,t,n){void 0===t&&(t="f32");var r=Pi.sizeFromShape(e),i=Zi(t,r,n);return new(Pi.getViewCtor(e.length))(e,t,i,r)}function Zi(e,t,n){var r;switch(e){case"f32":r=new Float32Array(t);break;case"i32":r=new Int32Array(t);break;case"bool":r=new Uint8Array(t);break;default:Pi.throwUnknownDType(e)}return void 0!==n&&Ii(r,n),r}function Yi(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=[],i=[],o=e.offset,a=0,s=t.length;a<s;a++){var u=e.strides[a];di(t[a])?o+=u*t[a]:(i.push(e.shape[a]),r.push(u))}return new(Pi.getViewCtor(i.length))(i,e.dtype,e.values,Pi.sizeFromShape(i),o,r)}function ji(e,t){void 0===t&&(t=0);for(var n=e.rank,r=e.shape,i=new Array(n),o=0;o<n;o++)i[o]="all";var a=[];for(o=0;o<r[t];o++){i[t]=o;var s=[e].concat(i);a.push(Yi.apply(null,s))}return a}function Ui(e,t){void 0===t&&(t=[]);for(var n=Number.MAX_VALUE,r=Number.MIN_VALUE,i=-1,o=e.values;(i=e.getNextIndex(i))>=0;)o[i]>r&&(r=o[i]),o[i]<n&&(n=o[i]);return t[0]=n,t[1]=r,t}!function(e){function t(e){throw new Error("Unknown data type "+e)}function n(e,t){return e instanceof Float32Array?"f32":e instanceof Int32Array?"i32":e instanceof Uint32Array?"bool":t}function r(e,n){switch(n){case"f32":return new Float32Array(e);case"i32":return new Int32Array(e);case"bool":return new Uint8Array(e)}return t(n),null}e.getViewCtor=function(e){switch(e){case 0:return Vi;case 1:return zi;case 2:return Fi;case 3:return Gi}throw new Error(e+" views not implemented")},e.sizeFromShape=function(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t},e.lastIndex=function(e){for(var t=e.rank,n=e.offset,r=0;r<t;r++)n+=e.strides[r]*(e.shape[r]-1);return n},e.throwUnknownDType=t,e.computeStrides=function(e){var t=e.length,n=new Array(t);n[t-1]=1;for(var r=t-2;r>=0;--r)n[r]=n[r+1]*e[r+1];return n},e.inferShape=function(e){if(Si(e))return[e.length];if(!Array.isArray(e))return[];for(var t=[];e instanceof Array;)t.push(e.length),e=e[0];return t},e.inferDType=n,e.asTypedArray=function(e,t){return n(e)===t?e:(Array.isArray(e)&&(e=function e(t,n){if(void 0===n&&(n=[]),Array.isArray(t))for(var r=0,i=t;r<i.length;r++)e(i[r],n);else n.push(t);return n}(e)),r(e,t))},e.copyToTypedArray=r}(Pi||(Pi={})),function(e){function t(e,t,n,r){if(e>t){var i=t;t=e,e=i}return n>r&&(i=r,r=n,n=i),{tl:{x:e,y:n},br:{x:t,y:r}}}function n(e,t,n,r){return!(t+r>e.br.x||t-r<e.tl.x||n+r>e.br.y||n-r<e.tl.y)}e.copy=function(e){return t(e.tl.x,e.br.x,e.tl.y,e.br.y)},e.copyTo=function(e,t){t.tl.x=e.tl.x,t.tl.y=e.tl.y,t.br.x=e.br.x,t.br.y=e.br.y},e.width=function(e){return e.br.x-e.tl.x},e.height=function(e){return e.br.y-e.tl.y},e.create=t,e.center=function(e,t){return void 0===t&&(t={x:0,y:0}),t.x=e.tl.x+.5*(e.br.x-e.tl.x),t.y=e.tl.y+.5*(e.br.y-e.tl.y),t},e.equals=function(e,t){return e.tl.x===t.tl.x&&e.tl.y===t.tl.y&&e.br.x===t.br.x&&e.br.y===t.br.y},e.contains=n,e.containsPoint=function(e,t){return n(e,t.x,t.y,0)},e.intersects=function(e,t){return e.tl.x<t.br.x&&e.br.x>t.tl.x&&e.tl.y<t.br.y&&e.br.y>t.tl.y},e.union=function(e,n){return t(Math.min(e.tl.x,n.tl.x),Math.max(e.br.x,n.br.x),Math.min(e.tl.y,n.tl.y),Math.max(e.br.y,n.br.y))}}(Di||(Di={}));var Xi=function(e,t,n){this.parentIdx=e,this.beginIdx=t,this.endIdx=n,this.childIndices=null};function qi(e,t){if(null!==e.childIndices)for(;t<=3;t++)if(e.childIndices[t]>=0)return t;return-1}function Qi(e,t,n,r,i){var o=r-n+1;return o<=0?-1:1===o?t[e[n]]<=i?n:-1:function(e,t,n,r,i){void 0===n&&(n=Ri),void 0===r&&(r=0),void 0===i&&(i=e.length-r);for(var o,a=0;i>0;)o=0|r,n(e[o+=a=i/2|0],t)?(r=++o,i-=a+1):i=a;return r}(e,i,function(e,n){return t[e]<=n},n,o)-1}var Ki=new Uint32Array([1431655765,858993459,252645135,16711935]),Ji=function(){function e(e,t){void 0===t&&(t=2),this.maxDepth=e,this.splitThreshold=t,this.zorder=null,this.tree=null,this.N=0,this.aabb=null}return e.prototype.build=function(t,n,r){var i=t.size,o=this.zorder;if(this.maxDepth=void 0!==this.maxDepth?this.maxDepth:Math.min(e.MAX_DEPTH,Math.max(1,Math.ceil(Math.log(i+1)))),!di(this.maxDepth)||this.maxDepth<1||this.maxDepth>e.MAX_DEPTH)throw new Error("Bad maxDepth "+this.maxDepth);if(void 0!==r)this.aabb=Di.copy(r);else{var a=Ui(t),s=a[0],u=a[1],l=Ui(n);this.aabb=r=Di.create(s,u,l[0],l[1])}null!==o&&o.length===i||Oi(o=this.zorder=new Int32Array(i));for(var c=Di.width(r),f=Di.height(r),d=new Uint32Array(i),h=c>0?65535/c:0,p=f>0?65535/f:0,g=r.tl.x,v=r.tl.y,m=function(e,t){return function(e,t){return e=((e=((e=((e=(e|e<<8)&Ki[3])|e<<4)&Ki[2])|e<<2)&Ki[1])|e<<1)&Ki[0],t=((t=((t=((t=(t|t<<8)&Ki[3])|t<<4)&Ki[2])|t<<2)&Ki[1])|t<<1)&Ki[0],(e|(t<<=1))>>>0}((e-g)*h>>>0,(t-v)*p>>>0)},y=0;y<i;){var b=o[y],x=t.get(b),w=n.get(b);Di.contains(r,x,w,0)?(d[b]=m(x,w),y++):Li(o,y,--i)}this.N=i;var A=o.subarray(0,this.N);Array.prototype.sort.call(A,function(e,t){return d[e]-d[t]}),this.buildTree(r,A,d,this.maxDepth,this.splitThreshold,m)},e.prototype.buildTree=function(t,n,r,i,o,a){for(var s=new $i(t),u=this.tree=[new Xi(-1,0,n.length-1)],l={x:0,y:0},c=0;c>=0;){var f=u[c],d=-1;if(null===f.childIndices&&f.endIdx-f.beginIdx>=o-1&&s.depth<i){f.childIndices=[-1,-1,-1,-1],Di.center(s,l);var h=a(l.x,l.y),p=a(s.br.x,l.y),g=a(l.x,s.br.y),v=f.beginIdx,m=f.endIdx,y=Qi(n,r,v,m,h);y>=v&&(f.childIndices[0]=u.push(new Xi(c,v,y))-1,v=y+1);var b=Qi(n,r,v,m,p);b>=v&&(f.childIndices[1]=u.push(new Xi(c,v,b))-1,v=b+1);var x=Qi(n,r,v,m,g);x>=v&&(f.childIndices[2]=u.push(new Xi(c,v,x))-1,v=x+1),m>=v&&(f.childIndices[3]=u.push(new Xi(c,v,m))-1)}else d=s.currentQuad;c=e.nextDFS(u,s,c,d+1)}},e.prototype.traverse=function(){if(null===this.tree||0===this.tree.length)return xi();var t=this.tree,n=new $i(this.aabb),r=0,i={value:null,done:!1};return{next:function(){if(r>=0){var o=t[r];i.value={id:r,aabb:Di.copy(n),count:o.endIdx-o.beginIdx+1},r=e.nextDFS(t,n,r,0)}else i.done=!0;return i},size:t.length}},e.nextDFS=function(e,t,n,r){var i=e[n];if(-1===(r=qi(i,r))){for(;i.parentIdx>=0&&-1===(r=qi(i=e[i.parentIdx],t.pop()+1)););if(-1===r)return-1}return t.descend(r),i.childIndices[r]},e.MAX_DEPTH=15,e}(),$i=function(){function e(e){this.tl={x:0,y:0},this.br={x:0,y:0},this.quadrants=new Int32Array(Ji.MAX_DEPTH),this.quadrants[0]=-1,this.reset(e)}return Object.defineProperty(e.prototype,"currentQuad",{get:function(){return this.quadrants[this.depth]},enumerable:!0,configurable:!0}),e.prototype.reset=function(e){Di.copyTo(e,this),this.depth=0,this.w=Di.width(e),this.h=Di.height(e),this.longestSide=Math.max(this.w,this.h)},e.prototype.descend=function(e){this.w*=.5,this.h*=.5,this.longestSide*=.5,this.quadrants[++this.depth]=e,this.resize(e,this.w,this.h)},e.prototype.pop=function(){var e=this.quadrants[this.depth--];return this.resize(e,-this.w,-this.h),this.w*=2,this.h*=2,this.longestSide*=2,e},e.prototype.resize=function(e,t,n){var r=this.tl,i=this.br;switch(0|e){case 0:i.x-=t,i.y-=n;break;case 1:r.x+=t,i.y-=n;break;case 2:i.x-=t,r.y+=n;break;case 3:r.x+=t,r.y+=n}},e}();function eo(e,t,n){return e>=t&&e<=n}var to=function(e){function t(t,n,r){void 0===t&&(t="f32");var i=e.call(this,n,r)||this;return i.dtype=t,i.outboundExpansions=null,i}return yi(t,e),t.prototype.buildXYM=function(e,t,n,r){var i=r.length;(void 0===this.zxs||this.zxs.length<i)&&(this.zxs=Zi(this.dtype,i),this.zys=Zi(this.dtype,i),this.zms=Zi(this.dtype,i));for(var o=this,a=o.zxs,s=o.zys,u=o.zms,l=0;l<i;l++){var c=r[l];a[l]=e.get(c),s[l]=t.get(c),u[l]=n.get(c)}this.index=r},t.prototype.build=function(t,n,r,i){e.prototype.build.call(this,t,n,r),this.buildXYM(t,n,i,this.zorder),this.computeExpansions()},t.prototype.buildSubset=function(t,n,r,i,o){this.buildXYM(n,r,o,t),e.prototype.build.call(this,Hi(this.zxs),Hi(this.zys),i);var a=this.zorder;Ni(this.zxs,a),Ni(this.zys,a),Ni(this.zms,a),Ni(t,a),this.computeExpansions()},t.prototype.computeExpansions=function(){for(var e=this,t=e.tree,n=e.N,r=e.zxs,i=e.zys,o=e.zms,a=this.outboundExpansions=Wi([t.length,3],this.dtype),s=a.values,u=t.length-1,l=n;l>0&&u>=0;u--){var c=t[u];if(null===c.childIndices){for(var f=0,d=0,h=0,p=c.endIdx;p>=c.beginIdx;p--){var g=o[p];d+=r[p]*g,h+=i[p]*g,f+=g,l--}for(var v=u;v>=0;)s[m=a.index(v,0)]+=f,s[m+1]+=d,s[m+2]+=h,c=t[v=c.parentIdx]}}for(u=t.length-1;u>=0;u--){var m;g=1/s[m=a.index(u,0)],s[m+1]*=g,s[m+2]*=g}},t.prototype.runOnPoint=function(e,t,n,r,i,o){void 0===o&&(o=.5),null!==this.outboundExpansions&&0!==this.outboundExpansions.size&&this.runOnPointInternal(e,t,n,r,new $i(this.aabb),i,o,-1)},t.prototype.runOnPoints=function(e,t,n,r){if(void 0===r&&(r=.5),null!==this.outboundExpansions&&0!==this.outboundExpansions.size)for(var i=new $i(this.aabb),o=[0,0],a=this,s=a.zxs,u=a.zys,l=a.zms,c=a.N,f=a.index,d=t.values,h=n.values,p=0;p<c;p++){i.reset(this.aabb),o[0]=0,o[1]=0,this.runOnPointInternal(e,s[p],u[p],l[p],i,o,r,p);var g=f[p];d[t.index(g)]+=o[0],h[n.index(g)]+=o[1]}},t.prototype.runOnPointInternal=function(e,t,n,r,i,o,a,s){for(var u=this,l=u.tree,c=u.zxs,f=u.zys,d=u.zms,h=this.outboundExpansions,p=s>=0?d[s]:0,g=0,v=0;g>=0;){var m=l[g],y=h.get(g,1),b=h.get(g,2),x=pi(t,n,y,b),w=m.beginIdx,A=m.endIdx;if(i.longestSide/x<a)e(t,n,r,y,b,h.get(g,0)-(eo(s,w,A)?p:0),o);else{if((v=qi(m,0))>=0){i.descend(v),g=m.childIndices[v];continue}for(;w<=A;)w!==s&&e(t,n,r,c[w],f[w],d[w],o),w++}g=Ji.nextDFS(l,i,g,4)}},t.prototype.traverse=function(){var t=this.outboundExpansions;return Ai(e.prototype.traverse.call(this),function(e){return e.mass=t.get(e.id,0),e.x=t.get(e.id,1),e.y=t.get(e.id,2),e})},t}(Ji),no=Object.freeze({BarnesHut:to});function ro(e,t,n,r,i,o){var a=function(e,t,n){var r,i,o,a,s,u,l,c,f=Math.abs(e.y-t.y),d=Math.abs(t.y-n.y);if(f<fi&&d<fi)return null;f<fi?i=(a=-(n.x-t.x)/(n.y-t.y))*((r=.5*(t.x+e.x))-(u=.5*(t.x+n.x)))+(c=.5*(t.y+n.y)):d<fi?i=(o=-(t.x-e.x)/(t.y-e.y))*((r=.5*(n.x+t.x))-(s=.5*(e.x+t.x)))+(l=.5*(e.y+t.y)):(r=((o=-(t.x-e.x)/(t.y-e.y))*(s=.5*(e.x+t.x))-(a=-(n.x-t.x)/(n.y-t.y))*(u=.5*(t.x+n.x))+(c=.5*(t.y+n.y))-(l=.5*(e.y+t.y)))/(o-a),i=f>d?o*(r-s)+l:a*(r-u)+c);var h=t.x-r,p=t.y-i;return{x:r,y:i,rSq:h*h+p*p}}(r<0?e[~r]:{x:t.get(r),y:n.get(r)},i<0?e[~i]:{x:t.get(i),y:n.get(i)},o<0?e[~o]:{x:t.get(o),y:n.get(o)});return null!==a&&(a.adx=r,a.bdx=i,a.cdx=o),a}function io(e){for(var t=e.length;t>0;)for(var n=e[--t],r=e[--t],i=t;i>0;){var o=e[--i],a=e[--i];if(r===a&&n===o||r===o&&n===a){e.splice(t,2),e.splice(i,2);break}}}function oo(e,t,n,r,i,o,a){void 0===o&&(o=0);for(var s=e.size,u=n.size,l=Wi([2,u+s],"f32"),c=0,f=0;f<s;f++,c++)l.set(e.get(f),0,c),l.set(t.get(f),1,c);for(var d=0;d<u;d++,c++)l.set(n.get(d),0,c),l.set(r.get(d),1,c);c=i.length;var h=ji(l,0),p=ao(h[0],h[1],i,o,a);if(p>=0)return p;for(;c<i.length;)i[c]>=s&&(i[c]=~(i[c]-s)),c++;return-1}function ao(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=Math.random);var o=n.length,a=-1;do{if((a=so(e,t,n))>=0){if(r--<=0)break;n.length=o,e.set(e.get(a)+i(),a),t.set(t.get(a)+i(),a)}}while(a>=0);return a}function so(e,t,n){var r=e.size;if(r<3)return-1;var i=new Int32Array(r);Oi(i),Array.prototype.sort.call(i,function(t,n){return e.get(n)-e.get(t)});for(var o=function(e,t){var n=Ui(e),r=n[0],i=n[1],o=Ui(t),a=o[0],s=i-r,u=o[1]-a,l=Math.max(s,u),c=r+.5*s,f=a+.5*u;return[{x:c-1e3*l,y:f-l,r:.1},{x:c,y:f+1e3*l,r:.1},{x:c+1e3*l,y:f-l,r:.1}]}(e,t),a=[ro(o,e,t,-1,-2,-3)],s=[],u=[],l=i.length;l--;){u.length=0;for(var c=i[l],f=a.length;f--;){var d=a[f],h=d.x,p=d.y,g=d.rSq,v=d.adx,m=d.bdx,y=d.cdx,b=e.get(c)-h;if(b>0&&b*b>g)s.push(a[f]),a.splice(f,1);else{var x=t.get(c)-p;b*b+x*x-g>fi||(u.push(v,m,m,y,y,v),a.splice(f,1))}}io(u);for(var w=u.length;w;){var A=ro(o,e,t,u[--w],u[--w],c);if(null===A)return c;a.push(A)}}for(l=a.length;l--;)s.push(a[l]);for(n.length=0,l=s.length;l--;)s[l].adx>=0&&s[l].bdx>=0&&s[l].cdx>=0&&n.push(s[l].adx,s[l].bdx,s[l].cdx);return 0===n.length?0:-1}var uo=Object.freeze({triangulateSteiner:oo,triangulate:ao});function lo(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}function co(e,t){var n=hi(e,t);return n>fi?{x:e/n,y:t/n}:{x:e,y:t}}function fo(e,t){return e.x*t.x+e.y*t.y}function ho(e,t,n){var r=t,i=t+1,o=t+2;n.get(e[r])>n.get(e[i])&&Li(e,r,i),n.get(e[i])>n.get(e[o])&&Li(e,i,o),n.get(e[r])>n.get(e[i])&&Li(e,r,i)}function po(e,t){var n=e[2*t],r=e[2*t+1];return n<r?[n,r]:[r,n]}function go(e,t){Array.prototype.sort.call(t,function(t,n){var r=po(e,t),i=r[0],o=r[1],a=po(e,n),s=a[0];return i!==s?i-s:o-a[1]});for(var n=0,r=0;r<t.length;){var i=po(e,t[r]),o=i[0],a=i[1];t[n]=t[r];for(var s=r+1;s<t.length;){var u=po(e,t[s]);if(o!==u[0]||a!==u[1])break;s++}r=s,n++}return n}var vo=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=Math.PI/2),this.padding=e,this.rotation=t}return e.prototype.apply=function(e,t,n,r){var i=Math.PI,o=t.size,a=new Int32Array(o);Oi(a),Array.prototype.sort.call(a,function(e,t){return r.get(t)-r.get(e)});var s=0,u=0,l=a[s];for(t.set(e.x,l),n.set(e.y,l),u+=r.get(l)+this.padding,s++;s<o;){var c=r.get(a[s])+.5*this.padding;if(s+this.sizeRing(a,s,r,u+=c,i)>=o){this.positionRing(e,t,n,r,a,s,2,0,i,u),this.positionRing(e,t,n,r,a,s,1,2*i,2*i,u,-1);break}var f=0;f+=this.positionRing(e,t,n,r,a,s,2,0,i,u),s+=f+=this.positionRing(e,t,n,r,a,s,1,i,2*i,u),u+=c}},e.prototype.sizeRing=function(e,t,n,r,i){void 0===i&&(i=2*Math.PI);for(var o=0;t<e.length;){var a=e[t++];if((i-=2*(n.get(a)+.5*this.padding)/r)<0)break;o++}return o},e.prototype.positionRing=function(e,t,n,r,i,o,a,s,u,l,c){void 0===c&&(c=1);for(var f=this.rotation,d=0;o<i.length;){var h=i[o];if(h>=0){var p=c*((r.get(h)+.5*this.padding)/l);if(s+2*p>u)break;t.set(e.x+Math.sin(s+p+f)*l,h),n.set(e.y+Math.cos(s+p+f)*l,h),i[o]=-1,s+=2*p,d++}o+=a}return d},e}(),mo=function(){function e(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),this.padding=e,this.maxPerturbations=t,this.rng=n}return e.prototype.build=function(e,t,n,r){var i=[],o=ao(t,n,i,this.maxPerturbations,this.rng);if(o>=0)return o;var a=this.buildSteinerPoints(i,t,n,r);if(a.size>0){var s=ji(a,1),u=s[0],l=s[1];if(i.length=0,(o=oo(t,n,u,l,i,this.maxPerturbations,this.rng))>=0)return o}for(var c=new Int32Array(2*i.length),f=0,d=0;d<c.length;){var h=i[f++],p=i[f++],g=i[f++];h<0&&(h=a.get(~h,2)),p<0&&(p=a.get(~p,2)),g<0&&(g=a.get(~g,2)),c[d++]=h,c[d++]=p,c[d++]=p,c[d++]=g,c[d++]=g,c[d++]=h}var v=new Int32Array(i.length);return Oi(v),v=v.subarray(0,go(c,v)),Array.prototype.sort.call(v,function(r,i){var o=c[2*r],a=c[2*r+1],s=c[2*i],u=c[2*i+1];return pi(.5*(t.get(o)+t.get(a)),.5*(n.get(o)+n.get(a)),e.x,e.y)-pi(.5*(t.get(s)+t.get(u)),.5*(n.get(s)+n.get(u)),e.x,e.y)}),this.constraints={pairs:c,triangles:i,steinerPoints:a,pairIndices:v},-1},e.prototype.buildSteinerPoints=function(e,t,n,r){for(var i=this.padding,o=e.length/3,a=[],s=0,u=0,l=0;u<o;u++,l+=3){ho(e,l,r);var c=e[l],f=e[l+1],d=e[l+2],h=t.get(c),p=n.get(c),g=t.get(f),v=n.get(f),m=t.get(d),y=n.get(d),b=pi(m,y,g,v),x=pi(m,y,h,p),w=pi(g,v,h,p),A=x*((x*x+w*w-b*b)/(2*x*w))/w,E=(1-A)*h+A*g,M=(1-A)*p+A*v,C=r.get(d);if(r.get(c)!==C&&pi(E,M,m,y)<=C+i){var k=Math.atan2(M-y,E-m);a.push(m+C*Math.cos(k),y+C*Math.sin(k),d),s++}}return Hi(a,[s,3],"f32")},e.prototype.solve=function(e,t,n,r,i,o){var a=this.constraints,s=a.pairs,u=a.pairIndices,l=this.padding,c=Math.max(.01*l,fi),f=t.size,d=new Float32Array(f),h=new Float32Array(f),p=0;for(i/=o;o-- >0;){p=0;for(var g=0;g<u.length;g++){var v=2*u[g],m=s[v],y=s[v+1],b=t.get(m)+d[m],x=n.get(m)+h[m],w=r.get(m),A=t.get(y)+d[y],E=n.get(y)+h[y],M=r.get(y),C=A-b,k=E-x,T=hi(C,k),_=w+M+l;if(T>c){var S=.5*(1+gi(fo(co(C,k),co(e.x-b,e.y-x)),-1,1)),I=0;T>_?(I=Math.min(i,_),C/=T,k/=T):(I=(T-_)/T,p++),k*=I,d[m]+=S*(C*=I),h[m]+=S*k,d[y]-=(1-S)*C,h[y]-=(1-S)*k}}}for(g=0;g<f;g++)t.set(t.get(g)+d[g],g),n.set(n.get(g)+h[g],g);return p},e}(),yo=Object.freeze({sortByRadius:ho,removeDuplicatePairs:go,InterleavingCircles:vo,CirclePackingSolver:mo});function bo(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)<e.r-t.r+fi}function xo(e,t){switch(t.length){case 0:return{x:0,y:0,r:0};case 1:return e[t[0]];case 2:return function(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,u=o-n,l=a-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+a+l/f*c)/2,r:(f+i+s)/2}}(e[t[0]],e[t[1]]);case 3:return function(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=2*(r-a),h=2*(i-s),p=2*(u-o),g=r*r+(i*i-o*o-a*a-s*s)+u*u,v=2*(r-l),m=2*(i-c),y=2*(f-o),b=r*r+(i*i-o*o-l*l-c*c)+f*f,x=v*h-d*m,w=(h*b-m*g)/x-r,A=(m*p-h*y)/x,E=(v*g-d*b)/x-i,M=(d*y-v*p)/x,C=A*A+M*M-1,k=2*(w*A+E*M+o),T=(-k-Math.sqrt(k*k-4*C*(w*w+E*E-o*o)))/(2*C);return{r:T,x:w+A*T+r,y:E+M*T+i}}(e[t[0]],e[t[1]],e[t[2]]);default:throw new Error("invalid number of circles")}}function wo(e){if(0===e.length)return null;for(var t=e.length,n={prev:null,i:0,R:[],c:null};;){var r=n.i,i=n.R,o=n.prev,a=n.c;if(r===t||3===i.length)o.c=xo(e,i),n=o;else if(null===a)n={R:i,prev:n,i:r+1,c:null};else if(bo(a,e[r])){if(null===o)return a;o.c=a,n=o}else n={prev:n,i:r+1,R:i.concat([r]),c:null}}}var Ao=Object.freeze({nbody:no,delaunay:uo,circlePacking:yo,radialExtents:wo,LinearQuadTree:Ji,get Rect(){return Di},circularOverlap:function(e,t){var n=pi(e.x,e.y,t.x,t.y);if(n>e.r+t.r+fi||0===e.r||0===t.r)return 0;if(n+e.r<t.r)return e.r*e.r*Math.PI;if(n+t.r<e.r)return t.r*t.r*Math.PI;var r=n*n,i=e.r*e.r,o=t.r*t.r,a=2*Math.acos((i+r-o)/(2*e.r*n)),s=2*Math.acos((o+r-i)/(2*t.r*n));return.5*s*o-.5*o*Math.sin(s)+(.5*a*i-.5*i*Math.sin(a))},lineIntersection:function(e,t,n,r){var i=lo(e,t,n),o=lo(e,t,r),a=lo(n,r,e),s=lo(n,r,t);if(0===i&&0===o&&0===a&&0===s){var u=Di.create(e.x,t.x,e.y,t.y),l=Di.create(n.x,r.x,n.y,r.y);if(Di.intersects(u,l))return 2}else if(i*o<=0&&a*s<=0)return 1;return 0},crossProduct:lo,lineAngle:function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},normalise:function(e,t){var n=pi(e.x,e.y,t.x,t.y);return n>fi?{x:(t.x-e.x)/n,y:(t.y-e.y)/n}:{x:0,y:0}},unit:co,dot:fo,pointExtents:function(e){for(var t={tl:{x:1/0,y:1/0},br:{x:-1/0,y:-1/0}},n=e.next();!n.done;)t.tl.x=Math.min(t.tl.x,n.value.x),t.tl.y=Math.min(t.tl.y,n.value.y),t.br.x=Math.max(t.br.x,n.value.x),t.br.y=Math.max(t.br.y,n.value.y),n=e.next();return t},circleExtents:function(e){for(var t={tl:{x:1/0,y:1/0},br:{x:-1/0,y:-1/0}},n=e.next();!n.done;)t.tl.x=Math.min(t.tl.x,n.value.x-n.value.r),t.tl.y=Math.min(t.tl.y,n.value.y-n.value.r),t.br.x=Math.max(t.br.x,n.value.x+n.value.r),t.br.y=Math.max(t.br.y,n.value.y+n.value.r),n=e.next();return t}}),Eo=function(){function e(e,t){this.buffer=e,this.defaultValue=t}return e.fromRange=function(t,n,r){return ci.ensureContiguous(t),e.fromSize(t.size,n,r)},e.fromSize=function(t,n,r){var i=new Array(t);if(void 0===r)Ii(i,n);else for(var o=0;o<t;o++)i[o]=r(o);return new e(i,n)},e.wrapArray=function(t,n){return new e(t,n)},e.prototype.keySpace=function(){return{begin:0,end:this.buffer.length-1,size:this.buffer.length}},e.prototype.get=function(e){return this.buffer[e]},e.prototype.set=function(e,t){this.buffer[e]=t},e}(),Mo=function(){function e(e,t,n){this.buffer=e,this.inverse=t,this.defaultValue=n}return e.fromValues=function(t){for(var n=[],r={},i=t.next(),o=0;!i.done;){var a=i.value;void 0===r[a]&&(r[a]=o,n.push(a),o++),i=t.next()}return new e(n,r,null)},e.fromKeyValuePairs=function(t){ci.ensureContiguous(t);for(var n=[],r={},i=t.next();!i.done;){var o=i.value,a=o[1];void 0===r[a]&&(r[a]=o[0],n.push(a)),i=t.next()}return new e(n,r,null)},e.prototype.get=function(e){return this.buffer[e]},e.prototype.set=function(e,t){this.buffer[e]=t},e.prototype.getUniqueInverse=function(e){return this.inverse[e]},e.prototype.getInverse=function(e){return wi(this.inverse[e])},e.prototype.keySpace=function(){return ci.fromSize(this.buffer.length)},e}(),Co=function(){function e(e,t){this.data=e,this.idAxis=t,this.data=e,this.sliceArgs=[e,"all","all"]}return e.fromShape=function(t,n,r,i){return void 0===r&&(r=0),new e(Wi(t,n,i),r)},e.prototype.keySpace=function(){return ci.fromSize(this.data.shape[this.idAxis])},e.prototype.get=function(e){var t=this.sliceArgs;return t[this.idAxis+1]=e,Yi.apply(null,t)},e.prototype.set=function(e,t){throw new Error("not impl")},e}();function ko(e){ci.ensureContiguous(e.vertexRange());for(var t=e.iterateAdjacentPairs(),n=new Int32Array(e.countVertices()),r=t.next();!r.done;){var i=r.value,o=i[1];n[i[0]]++,n[o]++,r=t.next()}return Eo.wrapArray(n,0)}var To=function(){function e(e,t,n){this.tourStart=e,this.tours=t,this.nTours=n,this.defaultValue=-1}return e.prototype.keySpace=function(){return ci.fromSize(this.tourStart.length)},e.prototype.iterateGroups=function(){for(var e=this.tourStart,t=[],n=0,r=this.nTours;r>0;)e[n]===n&&(t.push(n),r--),n++;return Ci(t)},e.prototype.iterateGroup=function(e){var t=this.tours,n={done:!1,value:e=this.tourStart[e]},r=!1;return{next:function(){return n.value=e,n.done=r,r||(t[e]>e?e=t[e]:r=!0),n}}},e.prototype.groupSize=function(e){e=this.tourStart[e];for(var t=1;e<(e=this.tours[e]);)t++;return t},e.prototype.countGroups=function(){return this.nTours},e.prototype.get=function(e){return this.tourStart[e]},e.prototype.set=function(){throw new Error("Readonly")},e.build=function(t){for(var n=t.length,r=new Int32Array(n),i=new Int32Array(n),o=0,a=0;a<n;a++){var s=_o(t,a,!1),u=void 0;s===a?(o++,u=a):u=i[s],t[a]=s,r[u]=a,i[s]=a}return new e(t,r,o)},e}();function _o(e,t,n){for(var r=t,i=0;r>=0&&e[r]!==r;)r=e[r],i++;if(n)for(var o=void 0;i>1;)o=t,t=e[t],e[o]=r,i--;return r}function So(e){ci.ensureContiguous(e.vertexRange());var t=e.countVertices(),n=new Int32Array(t);Oi(n,0);for(var r=e.iterateAdjacentPairs(!1),i=r.next();!i.done;){var o=i.value,a=o[1],s=_o(n,o[0],!0),u=_o(n,a,!0);s>u?n[s]=u:s<u&&(n[u]=s),i=r.next()}return To.build(n)}function Io(e){var t=e.countVertices(),n=new Int32Array(t);return To.build(n)}var Ro=function(){function e(){this.directedCategory="u",this.badIncidence=0,this.initialize(0,0)}return e.prototype.iterateEdges=function(){return Mi(this.edges)},e.prototype.iterateVertices=function(){return Mi(this.vertices)},e.prototype.countVertices=function(){return this.vertices.size},e.prototype.countEdges=function(){return this.edges.size},e.prototype.vertexRange=function(){return this.vertices},e.prototype.edgeRange=function(){return this.edges},e.prototype.source=function(e){return e>=this.edges.begin&&e<=this.edges.end?this.incidence[2*e]:-1},e.prototype.target=function(e){return e>=this.edges.begin&&e<=this.edges.end?this.incidence[2*e+1]:-1},e.prototype.containsEdge=function(e){return ci.isWithin(this.edges,e)},e.prototype.containsVertex=function(e){return ci.isWithin(this.vertices,e)},e.prototype.isValidAdjacency=function(e,t){return ci.isWithin(this.vertices,e)&&ci.isWithin(this.vertices,t)},e.prototype.iterateAdjacentPairs=function(e,t){return void 0===t&&(t=[-1,-1,-1]),0===this.countEdges()?xi():!e&&this.badIncidence>0?function(e,t,n,r){var i=t.begin,o=t.end,a={done:!1,value:r},s=0;return{size:t.size-n,next:function(){for(;i<=o;){var t=e[s++],n=e[s++];if(-1!==t&&-1!==n)return r[0]=t,r[1]=n,r[2]=i++,a;i++}return a.done=!0,a}}}(this.incidence,this.edgeRange(),this.badIncidence,t):function(e,t,n){var r=t.begin,i=t.end,o={done:!1,value:n},a=0;return{size:t.size,next:function(){return r<=i?(n[0]=e[a++],n[1]=e[a++],n[2]=r++):o.done=!0,o}}}(this.incidence,this.edgeRange(),t)},e.prototype.buildKeyed=function(e,t){var n=this;this.initialize(t,e.size);var r,i=this.incidence,o={value:[-1,void 0],done:!1},a=0,s=0,u=ci.fromSize(e.size);return u.next=function(){if((r=e.next()).done)o.done=!0;else{var t=r.value,u=t[0],l=t[1];n.isValidAdjacency(u,l)?(i[s++]=u,i[s++]=l):(n.badIncidence++,i[s++]=-1,i[s++]=-1),o.value[0]=a++,o.value[1]=r.value[2]}return o},u},e.prototype.build=function(e,t){this.initialize(t,e.size);for(var n=this.incidence,r=0,i=e.next();!i.done;){var o=i.value,a=o[0],s=o[1];this.isValidAdjacency(a,s)?(n[r++]=a,n[r++]=s):(this.badIncidence++,n[r++]=-1,n[r++]=-1),i=e.next()}},e.prototype.initialize=function(e,t){this.vertices=ci.fromSize(e),this.edges=ci.fromSize(t),this.incidence=Zi("i32",2*t,-1)},e}(),Lo=Object.freeze({StaticListGraph:Ro,StaticStringLabelMap:Mo,StaticPropertyMap:Eo,buildFromLabeledIterators:function(e,t,n){var r=Mo.fromValues(e),i=Ai(t,function(e){return[r.getUniqueInverse(e[0]),r.getUniqueInverse(e[1]),e[2]]}),o=n.buildKeyed(i,e.size),a=Mo.fromKeyValuePairs(o);return{vertexMap:r,edgeMap:a}},StaticNDArrayMap:Co,adjacencyMatrix:function(e){for(var t=e.vertexRange(),n=t.end-t.begin+1,r=Wi([n,n],"i32",0),i=e.iterateAdjacentPairs(),o=i.next();!o.done;){var a=o.value,s=a[0],u=a[1],l=r.get(s,u)+(s===u?2:1);r.set(l,s,u),r.set(l,u,s),o=i.next()}return r},degrees:ko,connectedComponents:So,all:Io}),Oo=function(){function e(e,t){this.g=e,this.rng=t}return e.prototype.run=function(e){for(var t=e["@@pos2d"].data,n=this.g.iterateVertices(),r=n.next();!r.done;){var i=t.get(r.value);i.x=this.rng(),i.y=this.rng(),r=n.next()}},e}();function No(e,t){void 0===t&&(t={});var n=void 0!==t.seed?li.createPRNG(t.seed,0,1):function(){return Math.random()};return new Oo(e,n)}var Po,Do={reorder:!1},Bo=function(){function e(e,t){void 0===t&&(t={}),this.g=e,this.opts=t,bi(t,Do)}return e.prototype.run=function(e){var t=this,n=e["@@pos2d"].data,r=e["@@radius"].data,i=e["@@group"],o=void 0!==i?i.data:Io(this.g);Ei(o.iterateGroups(),function(e){var i=t.getVertexGroupSummary(r,o.iterateGroup(e)),a=i.numVerts,s=i.avgRadius;t.runOn(o.iterateGroup(e),n,a,s)})},e.prototype.runOn=function(e,t,n,r){var i=2*Math.PI/n,o=n<2?0:3*r/Math.sin(i/2);if(this.opts.reorder){var a=this.opts.reorder,s=ki(e);!function(e,t){void 0===t&&(t=Math.random);for(var n=e.length;0!==n;)Li(e,--n,Math.round(n*t()))}(s,"object"==typeof a&&a.seed?li.createPRNGi32(a.seed):Math.random),e=Ci(s)}for(var u=0,l=e.next();!l.done;){var c=t.get(l.value);c.x=o*Math.sin(u),c.y=o*Math.cos(u),u+=i,l=e.next()}},e.prototype.getVertexGroupSummary=function(e,t){for(var n=0,r=0,i=t.next();!i.done;)++n,r+=e.get(i.value),i=t.next();return{numVerts:n,avgRadius:r/=n}},e}();function Vo(e,t){return new Bo(e,t)}!function(e){!function(e){e.name="@@pos2d",e.descriptor={name:e.name,itemType:"v"}}(e.Position2d||(e.Position2d={})),function(e){e.name="@@radius",e.descriptor={name:e.name,itemType:"v"}}(e.Radius||(e.Radius={})),function(e){e.name="@@degree",e.descriptor={name:e.name,itemType:"v"}}(e.Degree||(e.Degree={})),function(e){e.name="@@group",e.descriptor={name:e.name,itemType:"v"}}(e.Group||(e.Group={}))}(Po||(Po={}));var zo=function(){function e(){}return e.prototype.repulsion=function(){return this.linRepulsion()},e.prototype.attraction=function(e){return Fo},e.prototype.linRepulsion=function(){return{nodeNode:function(e){return function(t,n,r,i,o,a,s){return function(e,t,n,r,i,o,a,s){var u=i-t,l=o-n,c=u*u+l*l;if(c>fi){var f=e*r*a/c;s[0]-=u*f,s[1]-=l*f}}(e,t,n,r,i,o,a,s)}}}},e}();function Fo(e,t,n,r,i,o,a){var s=n-e,u=r-t,l=hi(s,u),c=l-o;if(l>.001){var f=c/l;f>.01?f=Math.pow(f,3)*i*Math.sqrt(.5*c):f>0&&(f=0),a[0]+=s*f,a[1]+=u*f}return l}var Go={maxIterations:125,speed:void 0,moment1Beta:function(e){return Ho(.84,25,e)},moment2Beta:function(e){return Ho(.98,30,e)}};function Ho(e,t,n){return n<t?e*Math.sin(n*(Math.PI/(2*t))):e}function Wo(e,t,n,r,i,o){return void 0===o&&(o=12),mi(e,t,.5*(r-n),o/(r-n),1,1,i-n)}var Zo=function(){function e(e,t){void 0===t&&(t={}),this.graph=e,this.opts=t,this.numIterations=0,this.groups=[];var n=e.countVertices(),r=e.countEdges();bi(t,Go),this.graph=e,this.forceModels=new zo,this.vertexData=function(e){return{mass:Wi([e],"f32",1),displacement:Wi([2,e],"f32"),moment:Wi([2,e],"f32"),moment2:Wi([2,e],"f32")}}(n),this.edgeData=function(e){return{targetLength:Wi([e],"f32",1),maxTargetLength:Wi([e],"f32",1),mass:Wi([e],"f32",1)}}(r)}return e.prototype.run=function(e){var t=e["@@pos2d"].data,n=e["@@radius"].data,r=e["@@degree"]?e["@@degree"].data:ko(this.graph),i=e["@@group"]?e["@@group"].data:Io(this.graph);0===this.numIterations&&this.initialize(n,r,i);var o=this.setupNewIteration(t),a=this.forceModels.repulsion(),s=this.forceModels.attraction(1);this.calculateAttractionForces(s,o),this.calculateRepulsionForces(a),this.updateGlobalSpeed(),this.updatePositions(r,t),this.numIterations++},e.prototype.isComplete=function(){return this.numIterations>=this.opts.maxIterations},e.prototype.buildGroupStates=function(e){var t=this.graph.countVertices(),n=this.groups,r=new Int32Array(t),i=0,o=0;Ei(e.iterateGroups(),function(t){var a=e.iterateGroup(t),s=a.next();for(i=o;!s.done;)r[o++]=s.value,s=a.next();o-i>1&&n.push({id:t,indices:r.subarray(i,o),nbodyModel:new to("f32",void 0,16),repulsionScaling:0,schedule:null,avgRadius:0,degNorm:0})})},e.prototype.initialize=function(e,t,n){this.buildGroupStates(n);for(var r=this.graph,i=r.countVertices(),o=this.vertexData.mass,a=this.edgeData.mass,s=this.edgeData.targetLength,u=this.edgeData.maxTargetLength,l=new Float32Array(i),c=new Float32Array(i),f=new Int32Array(i),d=0;d<this.groups.length;d++){for(var h=this.groups[d],p=h.indices,g=p.length,v=0,m=0,y=0,b=0,x=0,w=0,A=0;A<g;A++){var E=p[A],M=e.get(E);w+=Math.sqrt(M),x+=M*M,b+=Math.log(M);var C=t.get(E);m+=Math.sqrt(C),v+=C}var k=v/2,T=k/g,_=Math.exp(b/g);for(w/=g,x/=g,m=k>0?m/k:1,f[h.id]=v,c[h.id]=_,A=0;A<g;A++)M=e.get(E=p[A]),C=t.get(E),o.set(M*M/x+Math.sqrt(C)/m,E),y+=Math.pow(C-T,2);y=y>0?y/g:1,h.repulsionScaling=0===k?1:.1*Math.pow(_,2)*w*Math.min(y,100)/Math.log(g+1),h.degNorm=m,h.avgRadius=_,h.schedule=new jo(this.opts.maxIterations,g,k,this.opts.speed)}Ei(r.iterateAdjacentPairs(),function(r){var i=r[0],o=r[1],f=r[2],d=n.get(i),h=t.get(i),p=t.get(o),g=e.get(i),v=e.get(o),m=Math.sqrt(Math.min(h,p)),y=g+v+2*Math.min(g,v);l[d]+=m,a.set(m,f),s.set(y,f),u.set(y+12*c[d]*Math.sqrt((h+p)/2),f)}),Ei(r.iterateAdjacentPairs(),function(e){var t=e[2],r=n.get(e[0]),i=f[r]/2,o=a.get(t)/(l[r]/i);a.set(o,t)})},e.prototype.setupNewIteration=function(e){var t=this.vertexData,n=this.graph.countVertices();t.displacement=Wi([2,n],"f32");var r=Wi([2,n],"f32"),i=ji(r),o=i[0],a=i[1];Ei(this.graph.iterateVertices(),function(t){var n=e.get(t);o.set(n.x,t),a.set(n.y,t)});for(var s=this.groups,u=0;u<s.length;u++){var l=s[u];l.nbodyModel.buildSubset(l.indices,o,a,void 0,t.mass)}return r},e.prototype.calculateAttractionForces=function(e,t){for(var n=this.graph,r=this.edgeData.mass,i=this.edgeData.targetLength,o=this.edgeData.maxTargetLength,a=this.vertexData.displacement,s=a.values,u=[0,0],l=[0,0,0],c=Wo(0,1,0,.5*this.opts.maxIterations,this.numIterations),f=n.iterateAdjacentPairs(!1,l);!f.next().done;){var d=l[0],h=l[1],p=l[2];u[0]=0,u[1]=0,e(t.get(0,d),t.get(1,d),t.get(0,h),t.get(1,h),r.get(p),c*i.get(p),u)>o.get(p)&&r.set(1.04*r.get(p),p),s[a.index(0,d)]+=u[0],s[a.index(1,d)]+=u[1],s[a.index(0,h)]-=u[0],s[a.index(1,h)]-=u[1]}},e.prototype.calculateRepulsionForces=function(e){for(var t=ji(this.vertexData.displacement),n=t[0],r=t[1],i=this.groups,o=0;o<i.length;o++){var a=i[o];a.nbodyModel.runOnPoints(e.nodeNode(a.repulsionScaling),n,r,a.schedule.theta)}},e.prototype.updateGlobalSpeed=function(){for(var e=ji(this.vertexData.displacement),t=e[0],n=e[1],r=ji(this.vertexData.moment),i=r[0],o=r[1],a=ji(this.vertexData.moment2),s=a[0],u=a[1],l=this.groups,c=this.opts.moment1Beta(this.numIterations),f=this.opts.moment2Beta(this.numIterations),d=0;d<l.length;d++){for(var h=l[d],p=h.indices,g=p.length,v=0;v<g;v++){var m=p[v],y=t.get(m),b=n.get(m);i.set(vi(i.get(m),y,c),m),o.set(vi(o.get(m),b,c),m),s.set(vi(s.get(m),y*y,f),m),u.set(vi(u.get(m),b*b,f),m)}h.schedule.update()}},e.prototype.updatePositions=function(e,t){for(var n=this.groups,r=this.vertexData,i=ji(r.moment),o=i[0],a=i[1],s=ji(r.moment2),u=s[0],l=s[1],c=0;c<n.length;c++)for(var f=this.groups[c],d=f.indices,h=f.schedule.speed*(1/f.degNorm)*f.avgRadius,p=0;p<d.length;p++){var g=d[p],v=h*Math.sqrt(1+e.get(g)),m=Math.sqrt(u.get(g)),y=Math.sqrt(l.get(g)),b=o.get(g),x=a.get(g),w=t.get(g);w.x+=v*(b/(m+fi)),w.y+=v*(x/(y+fi))}},e}();function Yo(e,t){return new Zo(e,t)}var jo=function(){function e(e,t,n,r){this.maxIterations=e,this.iterations=0,this.progress=0,this.coolingPoint=-1;var i=n/(t*(t-1)/2),o=(1+2.5*Math.log(t))*(.03+.5/Math.pow(t,i));this.targetSpeed=void 0===r?o:r,this.warmup=25}return Object.defineProperty(e.prototype,"theta",{get:function(){return Wo(1.8,1,0,1,this.progress)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){var e=this.progress,t=this.targetSpeed,n=.1*t,r=0;return this.coolingPoint<0?(r=Wo(n,t,0,this.warmup,this.iterations),e>.75&&(this.coolingPoint=e)):r=mi(t,n,.5,10,1,1,(e-this.coolingPoint)/(1-this.coolingPoint)),r},enumerable:!0,configurable:!0}),e.prototype.update=function(){this.progress=++this.iterations/this.maxIterations},e}(),Uo=Object.freeze({defaultOpts:Go,create:Yo}),Xo={iterations:5},qo=function(){function e(e,t){void 0===t&&(t={}),this.graph=e,this.opts=t,this.numIterations=0,bi(t,Xo),this.relaxationFactor=Math.min(.9,e.countVertices()/e.countEdges())}return e.prototype.run=function(e){for(var t=e["@@pos2d"].data,n=e["@@radius"].data,r=e["@@degree"].data,i=this.graph.iterateAdjacentPairs(),o=i.next();!o.done;)this.relaxEdge(o.value[0],o.value[1],n,r,t),o=i.next();this.numIterations++},e.prototype.isComplete=function(){return this.numIterations>=this.opts.iterations},e.prototype.relaxEdge=function(e,t,n,r,i){if(e!==t){var o=i.get(e),a=i.get(t),s=r.get(e),u=r.get(t),l=2.5*(n.get(e)+n.get(t)),c=a.x-o.x,f=a.y-o.y,d=hi(c,f);if(!(d<fi)){var h=this.relaxationFactor*(d-l),p=h*(u/(s+u)),g=h-p;o.x+=c/d*p,o.y+=f/d*p,a.x-=c/d*g,a.y-=f/d*g}}},e}();function Qo(e,t){return new qo(e,t)}var Ko=Object.freeze({defaultOpts:Xo,create:Qo}),Jo=function(){function e(e){this.layout=e,this.iterations=0}return e.prototype.isComplete=function(){return this.iterations>0},e.prototype.run=function(e){return this.iterations++,this.layout.run(e)},e}(),$o=function(){function e(e){this.layouts=e,this.outputs=[],this.index=0,this.outputs=new Array(e.length)}return e.prototype.isComplete=function(){return this.index>=this.layouts.length},e.prototype.run=function(e){for(;!this.isComplete();){var t=this.layouts[this.index][0];if(!t.isComplete()){this.outputs[this.index]=t.run(e);break}this.index++}return this.outputs},e.prototype.getPhase=function(e){for(var t=[],n=0;n<this.layouts.length;n++)this.layouts[n][1]===e&&t.push(this.layouts[n][0]);return t},e}(),ea={initialSpeed:1,speedDecay:.05,maxIterations:50,center:{x:0,y:0},padding:{proportion:0,min:0,max:0}},ta=function(){function e(e){void 0===e&&(e={}),this.opts=e,this.numIterations=0,this.groupState=[],bi(e,ea),this.speed=this.opts.initialSpeed}return e.prototype.isComplete=function(){return this.speed<=fi||this.numIterations>=this.opts.maxIterations},e.prototype.run=function(e){if(e["@@group"]){var t=e["@@pos2d"].data,n=e["@@group"].data;0===this.numIterations&&(this.speed=this.initialize(t,e["@@radius"].data,n)),this.runSolver(),this.offsetGroups(t,n),this.numIterations++,this.speed*=1-this.opts.speedDecay}else this.speed=0},e.prototype.runSolver=function(){var e=this,t=e.speed,n=e.opts,r=e.solver,i=ji(e.xyr),o=i[0],a=i[1],s=i[2];if(!(r.build(n.center,o,a,s)<0))throw new Error("packing fail");r.solve(n.center,o,a,s,t,5)},e.prototype.initialize=function(e,t,n){var r=n.countGroups(),i=this.groupState,o=this.opts,a=o.padding,s=o.center,u=o.initialSpeed,l=this.xyr=Wi([3,r],"f32"),c=0,f=0,d=0;Ei(n.iterateGroups(),function(r){for(var o=[],s=n.iterateGroup(r),u=s.next();!u.done;){var h=u.value,p=e.get(h);o.push({x:p.x,y:p.y,r:t.get(h)}),u=s.next()}var g=wo(o);g.r+=gi(g.r*a.proportion,a.min,a.max),g.id=r,i.push(g),l.set(g.x,0,c),l.set(g.y,1,c),l.set(g.r,2,c),f+=g.r,d=Math.max(d,g.r),c++});var h=li.createPRNG(37,-.1*d,.1*d);this.solver=new mo(0,1,h);var p=ji(l),g=p[0],v=p[1],m=p[2];return new vo(0).apply(s,g,v,m),r>2?u*((f-d)/(r-1)):0},e.prototype.offsetGroups=function(e,t){for(var n=this.groupState,r=this.xyr,i=0;i<n.length;i++){for(var o=n[i],a=r.get(0,i)-o.x,s=r.get(1,i)-o.y,u=t.iterateGroup(o.id),l=u.next();!l.done;){var c=e.get(l.value);c.x+=a,c.y+=s,l=u.next()}o.x+=a,o.y+=s}},e}();function na(e,t){return new ta(t)}var ra={initialization:"random",initializationOptions:{iterations:5},packing:"circle",packingOptions:{}},ia=function(e){function t(t,n){var r,i=e.call(this,n)||this,o=Po.Group,a=Po.Degree;return i.defaultProperties=((r={})[o.name]={prop:o.descriptor,data:So(t)},r[a.name]={prop:a.descriptor,data:ko(t)},r),i}return yi(t,e),t.prototype.run=function(t){return bi(t,this.defaultProperties),e.prototype.run.call(this,t)},Object.defineProperty(t.prototype,"fd",{get:function(){return this.getPhase(1)[0]},enumerable:!0,configurable:!0}),t}($o);function oa(e,t){bi(t,ra,!0);var n=[];if("none"!==t.initialization){var r=t.initializationOptions;if("random"===t.initialization)n.push([new Jo(No(e,r)),0]);else{if("link-relaxation"!==t.initialization)throw new Error('Unknown initialization "'+t.initialization+'"');n.push([new Jo(Vo(e,r)),0]),n.push([Qo(e,r),0])}}return n.push([Yo(e,t),1]),"circle"===t.packing&&n.push([na(0,t.packingOptions),2]),new ia(e,n)}var aa,sa=Object.freeze({LayoutImpl:ia,create:oa}),ua=function(){function e(e,t,n){void 0===t&&(t=0),this.layout=e,this.interval=t,this.batchBudget=n}return e.prototype.start=function(e,t){this.input=e,this.onComplete=t,this.nextStep()},e.prototype.nextStep=function(){var e=this,t=this.work();this.layout.isComplete()?this.onComplete(void 0,t):setTimeout(function(){return e.nextStep()},this.interval)},e.prototype.work=function(){var e;if(void 0===this.batchBudget)e=this.layout.run(this.input);else{var t=Date.now();e=this.layout.run(this.input),t=Math.max(1,Date.now()-t);for(var n=Math.floor((this.batchBudget-t)/t);n>0&&!this.layout.isComplete();)e=this.layout.run(this.input),n--}return e},e}();!function(e){e.forceDirected="forcedirected",e.random="random",e.circular="circular",e.linkRelaxation="linkRelaxation",e.organic="organic"}(aa||(aa={}));var la=Object.freeze({get names(){return aa},createLayout:function(e,t,n){switch(e){case aa.organic:return oa(t,n);case aa.forceDirected:return Yo(t,n);case aa.random:return new Jo(No(t,n));case aa.circular:return new Jo(Vo(t,n));case aa.linkRelaxation:return Qo(t,n);default:throw new Error("unknown layout")}},get KnownProperties(){return Po},forceDirected:Uo,linkRelaxation:Ko,organic:sa,SetTimeoutRunner:ua,SyncToAsyncLayout:Jo,PhasedLayout:$o});function ca(e){var n={},r={},i={},o=e,s=null;n.clearCache=function(){s=null};var u=n.clearCache;function l(e,n,r){var i=n&&n.all,o="toplevel"!==n.combos,a="underlying"!==n.combos;t(e,function(e){!i&&e.hi||!o&&e.parentId||!a&&e._combo||r(e)})}function f(e,t){l(i,e,t)}function d(e,t){l(r,e,t)}n.privateSetProperties=function(e,t){r=e,i=t,u()};var g=function(e,t,n,r){var i=function(){var t=[];return d(e,function(e){t.push(e)}),t}(),a=i.length,s=-1,u=0,l=Date.now(),f=l,h=function(){++s>=a?(p(1),r()):n(i[s],g)},p=function(e){o&&o.trigger("progress",t,e)},g=function(){l=Date.now(),(u++>500||l-f>700)&&(u=0,f=Date.now(),1)?(p(s/a),c(h,0)):h()};p(0),g()};n.findAdjacency=function(e,t,n){var r=b(e);if(t===n)return r.selfAdjacency[t];var i=r.adjacency;return i[t]&&i[t][n]},n.connections=function(e){var t=b(e);return e.self?t.selfConnections:t.connections},n.eigenCentrality=function(e){var n,r,i=k(e,{all:!1,value:void 0});i.combos="toplevel",i.direction="any",G(i),V(i);var o={},a=v(i);function s(e,t){o[t]=e*a[n].nodes.length}for(n=0;n<a.length;n++){var u={};for(r=0;r<a[n].nodes.length;r++)u[a[n].nodes[r]]=!0;var l=c(u);t(l,s)}return o;function c(e){var t,n,r={},o=[],a=[],s=[],u=0,l=[],c=0;if(d(i,function(t){var n=t.id;e[n]&&(o.push(n),r[n]=o.length-1,a.push([]),s.push({}))}),Math.max(100,5*Math.sqrt(o.length)),f(i,function(t){if(e[t.id1]&&e[t.id2]){var n=r[t.id1],o=r[t.id2];s[n][o]||(a[n].push(o),a[o].push(n),s[o][n]=0,s[n][o]=0);var l=function(e,t){var n=1;return i.value&&e.d&&(n=Number(e.d[i.value])),n}(t);s[n][o]+=l,s[o][n]+=l,u+=l,c++}}),0===o.length)return{};if(1===o.length)return(l={})[o[0]]=1,l;if(2===o.length)return(l={})[o[0]]=.5,l[o[1]]=.5,l;for(u/=c,n=Math.max(100,5*Math.sqrt(o.length)),t=0;t<o.length;t++)l.push(Math.random());for(t=0;t<n;t++)l=p(l),t%10==0&&g();g();var h={};for(t=0;t<o.length;t++)h[o[t]]=l[t];return h;function p(e){var t,n,r=[];for(t=0;t<o.length;t++){var i=0;for(n=0;n<a[t].length;n++)i+=s[t][a[t][n]]*e[a[t][n]];r.push(i+=u*e[t])}return r}function g(){var e,t=1/function(e){var t,n=0;for(t=0;t<e.length;t++)n+=Math.abs(e[t]);return n}(l);for(e=0;e<o.length;e++)l[e]*=t}}},n.pageRank=function(e){var t,n=k(e,{all:!1,value:void 0,directed:!0});n.combos="toplevel",G(n),F(n);var r,i={},o=[],a=[],s=[],u=[],l=[],c=.85;for(d(n,function(e){o.push(e.id),i[e.id]=o.length-1,a.push([]),s.push({}),u.push(0)}),r=Math.max(100,5*Math.sqrt(o.length)),f(n,function(e){var t=i[e.id1],r=i[e.id2],o=function(e,t){var n=1;return t.value&&e.d&&(n=Number(e.d[t.value])),n}(e,n);n.directed&&!e.a2&&(e.a1||e.a2)||(s[r][t]||(s[r][t]=0,a[r].push(t)),s[r][t]+=o,u[t]+=o),n.directed&&!e.a1&&(e.a1||e.a2)||(s[t][r]||(s[t][r]=0,a[t].push(r)),s[t][r]+=o,u[r]+=o)}),t=0;t<o.length;t++)l.push(Math.random());var h=1/v(l);for(t=0;t<o.length;t++)l[t]*=h;for(t=0;t<r;t++)l=g(l);for(h=1/v(l),t=0;t<o.length;t++)l[t]*=h;var p={};for(t=0;t<o.length;t++)p[o[t]]=l[t];return p;function g(e){var t,n,r=[],i=0,f=0;for(t=0;t<o.length;t++)i+=e[t];for(t=0;t<o.length;t++){var d=0;for(n=0;n<a[t].length;n++){var h=a[t][n];d+=s[t][h]*e[h]/u[h]}0===u[t]&&(f+=c*e[t]),d*=c,r.push(d+=(1-c)*i/o.length)}for(f/=o.length,t=0;t<l.length;t++)r[t]+=f;return r}function v(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t];return n}},n.neighbours=function(e,n){var o=C(e),a={},s={},u=B(o),l=k(n,{all:!1,direction:"any",hops:1});if(l.hops<1)throw new Error("neighbours error: hops must be a positive number");G(l);var c=0,f={},d={},h=u,p=b(l),g=p.adjacency,v=p.selfAdjacency;function m(e,t,n){!d[t]&&M(n,e,t,l)&&(a[t]=1,d[t]=1,n!==e&&(s[e]=1,e in h&&(s[n]=1),e in u||(c++,f[e]=1)))}for(t(u,function(e,t){var n=R(t);if(!r[n]&&!i[n])throw new Error("neighbours error: ids must be present in the graph");c++});l.hops--&&c;)c=0,t(u,function(e,n){if(r[n]){g[n]&&t(g[n],function(e,t){for(var r=0;r<e.length;r++)m(t,R(e[r]),n)});var o=v[n];if(o)for(var a=0;a<o.length;a++)m(n,o[a],n)}else if(i[n]){var h=i[n];!d[h.id2]&&M(h.id2,h.id1,n,l)&&(s[h.id2]=1,d[h.id2]=1,d[n]=1,h.id2 in u||(c++,f[h.id2]=1)),!d[h.id1]&&M(h.id1,h.id2,n,l)&&(s[h.id1]=1,d[h.id1]=1,d[n]=1,h.id1 in u||(c++,f[h.id1]=1))}}),u=f,f={};return{nodes:Object.keys(s),links:Object.keys(a)}},n.privateNeighbourLinks=function(e){var n=b({all:!0,combos:"all"}),r=n.adjacency,i=n.selfAdjacency,o={},a=[];return e.forEach(function(e){t(r[e],function(e){e.forEach(function(e){o[e]||(a.push(e),o[e]=!0)})});var n=i[e];if(n)for(var s=0;s<n.length;s++)a.push(n[s])}),a},n.privateGetLinkIdsBetween=function(e,t){var n=b({all:!0,combos:"all"}),r=n.adjacency,i=n.selfAdjacency,o=[];return r[e]&&(o=r[e][t]||[]),e===t&&i[e]&&(o=o.concat(i[e])),o},n.clusters=function(e){var t,n=k(e,{all:!1,factor:5,consistent:!0});n.combos="toplevel",G(n);var r,i,o=[],a=[],s=[],u=[],l={},c=0,h=[],g=[],v=[],m=[],y=[];if(d(n,function(e){u.push(e.id),a.push([]),s.push([]),l[e.id]=u.length-1,h.push([u.length-1]),g.push(u.length-1),y.push(u.length-1),o.push(0),v.push(0)}),f(n,function(e){var t=function(e,t){var n=1;return t.value&&e.d&&(n=+e.d[t.value]),n}(e,n);c+=t;var r=l[e.id1],i=l[e.id2];s[r][i]||(s[r][i]=0,s[i][r]=0),s[r][i]+=t,s[i][r]+=t,o[r]+=t,o[i]+=t,v[r]+=t,v[i]+=t,a[r].push(i),a[i].push(r)}),r=Math.max(1e4,50*u.length),0===u.length)return[];0===c&&(r=0);var b=X();for(b.setSeed(n.consistent?900736044081:null),i=p(i=+n.factor)?i:5,i=Math.max(0,i),i=(i=Math.min(10,i))*i*i/125,t=0;t<r;t++){b.next()>.95&&C(y[Math.floor(b.next()*y.length)],y[Math.floor(b.next()*y.length)]),t<.5*r&&b.next()>.98&&_(y[Math.floor(b.next()*y.length)]);var x=Math.floor(u.length*b.next()),w=a[x][Math.floor(b.next()*a[x].length)],A=g[w],E=g[x];A!==E&&M(A,E,x)>=0&&T(x,A)}function M(e,t,n){var r,u=o[n],l=(v[t]-v[e]-u)*u*i;for(l/=2*c,r=0;r<a[n].length;r++){var f=a[n][r];g[f]===t?l-=s[n][f]:g[f]===e&&(l+=s[n][f])}return l/c}function C(e,t){var n,r;if(t!==e&&0!==h[e].length&&0!==h[t].length){var o=0;for(o-=i*v[e]*v[t]/c,n=0;n<h[e].length;n++){var u=h[e][n];for(r=0;r<a[u].length;r++)g[a[u][r]]===t&&(o+=s[u][a[u][r]])}if((o/=c)>0){var l=h[e].length;for(n=0;n<l;n++)T(h[e][0],t)}}}function T(e,t){var n,r=g[e];g[e]=t;var i=[];for(n=0;n<h[r].length;n++)h[r][n]!==e&&i.push(h[r][n]);0===h[t].length&&(y.push(t),m.splice(m.indexOf(t),1)),h[r]=i,h[t].push(e),v[t]+=o[e],v[r]-=o[e],0===h[r].length&&(m.push(r),y.splice(y.indexOf(r),1))}function _(e){var t,n=h[e].length;if(1!==n&&m.length){var r=[];for(t=0;t<n;t++)r.push(h[e][t]);for(t=0;t<n&&m.length;t++)T(r[t],m[0])}}return function(){var e,t,n=[];for(e=0;e<y.length;e++){var r=[];for(t=0;t<h[y[e]].length;t++)r.push(u[h[y[e]][t]]);n.push(r)}return n}()},n.components=function(e){var t=_i,n=k(e,{all:!1});G(n);var r=function(e,t){var n=e.edges,r=[];return Object.keys(e.selfAdjacency).forEach(function(t){var n=e.selfAdjacency[t];r.push({id:n[0],id1:t,id2:t,ids:n})}),r.length>0&&(n=n.concat(r)),fa(e.vertices,n)}(b(n)),i=Lo.connectedComponents(r.staticGraph),o={},a=r.vertexMap;t.forEach(i.iterateGroups(),function(e){o[e]={nodes:t.toArray(t.map(i.iterateGroup(e),function(e){return a.get(e)})),links:[]}});for(var s=r.edgeList,u=0;u<s.length;u++)for(var l=s[u],c=o[i.get(a.getUniqueInverse(l.id1))],f=0;f<l.ids.length;f++)c.links.push(l.ids[f]);return P(o)};var v=n.components;function m(e,t,n){e.edges.push({id:t.id,id1:t.id1,id2:t.id2,ids:n}),e.connections.push(n)}function y(e){var n={connections:[],adjacency:{},vertices:{},edges:[]};d(e,function(e){n.vertices[e.id]={x:e.x,y:e.y},n.adjacency[e.id]={}});var r=[],o={};f(e,function(e){e.id1===e.id2?(o[e.id1]=o[e.id1]||[],o[e.id1].push(e.id)):function(e,t,n,r,i){e[n]||(e[n]={}),e[r]||(e[r]={}),e[n][r]||(e[r][n]=[],e[n][r]=e[r][n],t.push(i)),e[n][r].push(i)}(n.adjacency,r,e.id1,e.id2,e.id)});for(var a=r.length,s=0;s<a;s++){var u=i[r[s]];m(n,u,n.adjacency[u.id1][u.id2])}if(D(o)){var l=n.connections.slice();t(o,function(e){l.push(e)}),n.selfConnections=l}else n.selfConnections=n.connections;return n.selfAdjacency=o,n}function b(e){var t=k(e,{all:!1,combos:"toplevel"}),n=(t.all?"all":"visible")+"-"+t.combos;return s||(s={}),s[n]||(s[n]=y(t)),s[n]}n.internalMarkLinks=function(e){var n=b({combos:"all"}),r=n.adjacency,i=n.selfAdjacency,o={};e.forEach(function(e,n){var a=r[n];a&&t(a,function(e){for(var t=0;t<e.length;t++)o[e[t]]=!0});var s=i[n];if(s)for(var u=0;u<s.length;u++)o[s[u]]=!0}),t(o,function(t,n){var r=e.get(n);r&&2===r||e.set(n,1)})},n.distances=function(e,n){if(!r[e])throw new Error("distances error: id(s) must be present in the graph");var i=n||{};F(i),G(i);var o=L(e,i),a={};return t(o.distance,function(e,t){p(e)&&(a[t]=e)}),a};var x=n.distances,A=function(e,t,n){var r,i=b(n).adjacency[e][t],o=1/0,a=_(n);if(i)for(var s=0;s<i.length;s++){var u=a(e,t,i[s],n);p(u)&&(u<o&&(o=u,(r=[]).push(i[s])),u===o&&o!==1/0&&r.push(i[s]))}return{value:o,links:r}},E=function(e,t){return i[e].a2&&i[e].id2===t||i[e].a1&&i[e].id1===t},M=function(e,t,n,r){return"any"===r.direction||"from"===r.direction&&E(n,t)||"to"===r.direction&&E(n,e)},T=function(e,t,n,r){var o=NaN;return M(e,t,n,r)&&(r.value?i[n].d&&(o=+i[n].d[r.value]):o=1),o},_=function(e){return H(e)?I:T},I=function(e,t,n,r){var i=T(e,t,n,r);return h(i)?i:1/i},L=function(e,n){var r={},i={},o=[],a=b(n).adjacency;function s(){for(var e,t=1/0,n=0;n<o.length;n++){var i=r[o[n]];i<=t&&(e=n,t=i)}return e}function u(e,t,n){i[e]||(i[e]=[]),i[e].push({id:t,links:n})}for(d(n,function(e){var t=e.id;r[t]=1/0,i[t]=void 0,o.push(t)}),r[e]=0;o.length>0;){var l=s(),c=o[l];if(r[c]===1/0)break;o.splice(l,1),t(a[c],function(e,t){var o=A(c,t,n),a=r[c]+o.value;a<r[t]?(r[t]=a,i[t]=[{id:c,links:o.links}]):a===r[t]&&u(t,c,o.links)})}return{distance:r,previous:i}};function O(e){if(e.normalization=e.normalization||"any",!/^(chart|component|unnormalized)$/.test(e.normalization))throw new TypeError("opts normalization property should be either 'component', 'chart' or 'unnormalized'")}function V(e){return f(e,function(t){if(T(t.id1,t.id2,t.id,e)<=0)throw new Error("Link Weight must be Positive")}),{direction:e.direction,value:e.value,weights:H(e)}}function z(e){return/^(component|chart)$/.test(e.normalization)?e.normalization:"unnormalized"}function F(e){return function(e){if(e.direction=e.direction||"any",!/^(any|from|to)$/.test(e.direction))throw new TypeError("opts direction property should be either 'from', 'to' or 'any'")}(e)||V(e)}function G(e){e.all=!!e.all}function H(e){return!!e.weights}n.shortestPaths=function(e,t,n){if("string"!=typeof e||"string"!=typeof t)throw new Error("shortestPaths error: ids must be strings");if(!r[e]||!r[t])throw new Error("shortestPaths error: ids must be present in the graph");var i=k(n,{all:!1});F(i),G(i);var o=L(e,i),a=o.previous;if(o.distance[t]===1/0)return{onePath:[],one:[],items:[],distance:1/0};for(var s=[],u=[],l=t;a[l];)s.unshift(l),u.unshift(l),u.unshift(a[l][0].links[0]),l=a[l][0].id;function c(e){for(var t=[],n=0;n<e.length;n++)a[e[n].id]&&(t=t.concat(a[e[n].id]));return t}s.unshift(l),u.unshift(l);var f={};f[t]=1;var d=[];d.push({id:t});for(var h=c(d);h.length>0;){for(var p=0;p<h.length;p++){f[h[p].id]=1;for(var g=0;g<h[p].links.length;g++)f[h[p].links[g]]=1}h=c(h)}return{onePath:u,one:s,items:Object.keys(f),distance:o.distance[t]}},n.degrees=function(e){var n=k(e,{multi:!0,all:!1});n.combos="toplevel",F(n),G(n);var r=b(n).adjacency,i={};return d(n,function(e){var o=e.id;i[o]=0,t(r[o],function(e,t){for(var r=0;r<e.length;r++){var a=T(o,t,e[r],n);if(p(a)&&(i[o]+=a,!n.multi))break}})}),i};var W=n.degrees;return n.betweenness=function(e,n){function r(e,t){return W[e]-W[t]}function i(e){return e.sort(r),e.shift()}function o(e,t){e.sort(r),N(e,t)||e.push(t)}function s(e,t){var n=A(e,t,x).value;return p(n)?n:c()||p(n)?1/0:1}function u(e){return e.length>0}function l(e,t,n){Array.isArray(n)&&u(n)&&e[t]?e[t].length=0:e[t]=a(n)}function c(){return!!f.directed}var f=k(e,{value:void 0,directed:!1,normalization:"component",endpoints:!1,weights:!1,all:!1});f.combos="toplevel",O(f),G(f);var h=!S(f.value)||c()?"dijkstra":"regular",m=f.endpoints?"endpoints":"regular",y=z(f),x={direction:c()?"from":"any",value:f.value,weights:H(f),all:f.all};F(f);var E,M,C,T,_,I,R={},L=[],P=[],D={},B={},V={},W={},Z=0,Y=[{dict:B,value:0},{dict:W,value:1/0},{dict:D,value:[]},{dict:V,value:0}],j=b(f).adjacency,U={regular:function(e){for(B[e]=1,W[e]=0,L.push(e);u(L);)E=L.shift(),P.push(E),t(j[E],function(e,t){p(W[t])||(W[t]=W[E]+1,L.push(t)),W[t]===W[E]+1&&(B[t]+=B[E],D[t].push(E))})},dijkstra:function(e){for(B[e]=1,W[e]=0,L.push(e);u(L);)E=i(L),P.push(E),t(j[E],function(e,t){W[t]>W[E]+s(E,t)&&(W[t]=W[E]+s(E,t),o(L,t),B[t]=0,D[t]=[]),W[t]===W[E]+s(E,t)&&(B[t]+=B[E],D[t].push(E))})}},X={regular:function(e){for(;u(P);){for(M=P.pop(),_=(1+V[M])/B[M],T=0;T<D[M].length;T++)V[E=D[M][T]]+=B[E]*_;M!==e&&(R[M]+=V[M])}},endpoints:function(e){for(R[e]+=P.length-1;u(P);){for(M=P.pop(),_=(1+V[M])/B[M],T=0;T<D[M].length;T++)V[E=D[M][T]]+=B[E]*_;M!==e&&(R[M]+=V[M]+1)}}},q={chart:function(){Z>2&&(C=1/((Z-1)*(Z-2)),t(R,function(e,t){R[t]*=C}))},component:function(){I=function(){var e,t,n,r=v(f),i={};for(e=0;e<r.length;e++)for(n=r[e],t=0;t<n.nodes.length;t++)i[n.nodes[t]]=n.nodes.length;return i}(),t(R,function(e,t){I[t]>2&&(R[t]*=C=1/((I[t]-1)*(I[t]-2)))})},unnormalized:function(){c()||(C=.5,t(R,function(e,t){R[t]*=C}))}},Q=U[h]||U.regular,K=X[m]||X.regular,J=q[y]||q.chart;d(f,function(){Z++}),function(e,t,n){d(f,function(e){l(t,e.id,0)})}(0,R),g(f,"betweenness",function(e,t){L.length=0,P.length=0,d(f,function(e){for(var t=0;t<Y.length;t++)l(Y[t].dict,e.id,Y[t].value)}),Q(e.id),K(e.id),t()},function(){J(),w(n,R)})},n.closeness=function(e,n){var r=k(e,{direction:"any",value:void 0,normalization:"component",mode:"auto",weights:!1,all:!1});r.combos="toplevel";var o=b(r).adjacency;function a(e,n){var r=0;return t(n,function(e){r+=p(e)?1:0}),r}function s(e){return 0===Object.keys(e).length}function u(e){return!S(e)}function l(e){return!i[e].a1&&!i[e].a2}function c(){return"any"!==r.direction}var f=F(r);O(r),G(r),f.all=r.all;var h,m,y,A,E,M,C=!S(r.value)||c()?"dijkstra":"regular",T={},_=(function(){if(r.mode=r.mode||"auto",!r.mode.match(/^(connected|disconnected|auto)$/))throw new TypeError("Option mode property should be either 'connected', 'disconnected' or 'auto'")}(),"auto"===r.mode?function(){var e="disconnected",t=v(r);if(1===t.length&&(e="connected",c()))for(var n=0;n<t[0].links.length;n++)if(l(t[0].links[n]))return"disconnected";return e}():r.mode),I={regular:function(e){return function(e){var n={},r=0,i={},a={};for(a[e]=1;!s(a);)i=a,a={},t(i,function(e,i){u(n[i])||(n[i]=r,t(o[i],function(e,t){a[t]=1}))}),r+=1;return n}(e)},dijkstra:function(e,t){return x(e,t)}};m=I[C]||I.regular,y={connected:function(e,n){var r=0;return t(n,function(e){r+=p(e)?e:0}),r?1/r:0},disconnected:function(e,n){var r=0;return t(n,function(t,n){r+=e!==n?1/t:0}),r}}[_],M=function(e){var t=0;return d(r,function(){t++}),t}(),T={},g(r,"closeness",function(e,t){A=m(e.id,f),h=a(0,A),T[e.id]=y(e.id,A),M>1&&(E=z(r).match(/chart/)?Math.pow(h-1,2)/(M-1):z(r).match(/component/)?h-1:1,T[e.id]*=E),t()},function(){w(n,T)})},n.kCores=function(e){var n=k(e,{all:!1});n.combos="toplevel",G(n);var r=b(n).adjacency,i=function(){var e,i,o,a,s,u,l,c,f,h,p,g={},v={},m=[],y=[];for(i=0,g=W({multi:!1,all:n.all,combos:"toplevel"}),t(g,function(e){i=Math.max(i,e)}),p=Object.keys(g).length,e=0;e<i+1;e++)y[e]=0;for(d(n,function(e){y[g[e.id]]++}),s=1,e=0;e<i+1;e++)u=y[e],y[e]=s,s+=u;for(d(n,function(e){var t=e.id;v[t]=y[g[t]],m[v[t]]=t,y[g[t]]++}),e=i;e>1;e--)y[e]=y[e-1];for(y[0]=1,a=0;a<p;a++)t(r[o=m[a]],function(e,t){g[t]>g[o]&&(f=v[t],t!==(l=m[h=y[c=g[t]]])&&(v[t]=h,m[f]=l,v[l]=f,m[h]=t),y[c]++,g[t]--)});return g}();return{maximumK:function(e){var n=0;return t(i,function(e){n=Math.max(n,e)}),n}(),values:i}},n}function fa(e,t){var n=_i.fromArray;Array.isArray(e)||(e=Object.keys(e)),Array.isArray(t)||(t=values(t));var r=e.length>0&&"string"==typeof e[0]?n(e):n(e,function(e){return e.id}),i=n(t,t.length>0&&"string"==typeof t[0].id?function(e){return[e.id1,e.id2,e.id]}:function(e,t){return[e.id1,e.id2,t.toString()]}),o=new Lo.StaticListGraph,a=Lo.buildFromLabeledIterators(r,i,o);return new function(e,t,n,r,i){this.nodeList=e,this.edgeList=t,this.staticGraph=n,this.vertexMap=r,this.edgeMap=i}(e,t,o,a.vertexMap,a.edgeMap)}function da(){var e=W,n=oi,r=ai,i=3;function o(e){return!isNaN(e.w)&&!isNaN(e.h)}var a=function(t,n,i,a){var s,l,f,h,p,g,v=t.e||1,m=o(t),y=m&&"circle"===t.sh,b=!1;if(t.du)return{radius:10,baseRadius:10,borderSize:10,width:10,height:10};if(h=c(t),t._combo&&(b="boolean"==typeof a?a:t._combo.open),b)g=p=t.oc.w,s=(f=t.oc.w/2)+(h=t.oc&&"bw"in t.oc?t.oc.bw:ln.bw);else if(m)if(v=1,y){var x=Math.min(t.w,t.h);g=p=x+2*h,s=(f=x/2)+h}else f=e(t.w,t.h)/2,s=e(p=t.w+2*h,g=t.h+2*h)/2;else g=p=2*(f=r*v)+2*(h*=v),s="box"===t.sh?e(p,g)/2:f+h;if(i.include&&t.t&&t.t.length>0){var w=u(t,n,{radius:s,height:g,width:p,e:v},i);l=Math.max(w.legacyDistToCorner,s),s=Math.max(w.distanceToCorner,s),p=Math.max(w.width,p),w.centred?g=Math.max(w.height,g):g+=w.height}else{var A=0;t.t&&(A=(d(t,i.maxLength).length+1)*((t.fs||vt)*v)),l=s+A/2}return{legacyRadius:Math.round(l),radius:Math.round(s),baseRadius:Math.round(f),borderSize:Math.round(h),width:Math.round(p),height:Math.round(g)}};function s(e,t){return!t&&("boolean"==typeof e.tc?e.tc:!e.w&&!e.u&&!e.fi)}function u(t,n,r,o){var a=0,u=(i+(t.fs||vt))*r.e,l=f(t,n,r.e,r.radius,o.maxLength),c=l.width,d=l.height,h=s(t,r.isOpenCombo),p=o.padExtents?u:0,g=e(c/2,r.height/2+d/2);if(o.partial){var v=Math.max(1,c/(4*r.radius))*u,m=r.radius+v;h?(c/2<=r.radius+u&&(m=c/2),a=e(m,d/2)):a=Math.max(m,(r.height+d)/2)}else a=e(c/2,h?d/2:r.height/2+d);return{centred:h,width:c+p,height:d,distanceToCorner:a,legacyDistToCorner:g}}var l=function(e,t){var n=0;if(e.t){var r=e.fs||vt,a=o(e)?1:e.e||1;(function(e){return s(e,e._combo&&e._combo.open)})(e)||(n=(r+i)*a*d(e,t).length/2)}return Math.round(n)};function c(e){var t=0;return e.b&&(t=p(e.bw)?e.bw:n),!e.donut||e._combo&&e._combo.open||(t=e.donut.w+2*e.donut.bw),t}function f(e,t,n,r,o){var a=0,s=0;if(e.t){var u=(e.fs||vt)*n,l=i*n,c=d(e,o);a=function(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e[n]);return t}(function(e,t,n,r,i){for(var o=[],a=0;a<e.length;a++)o[a]=Kt(t,e[a],n,r,i||"sans-serif").width;return o}(c,t,u,e.fb,e.ff)),s=(u+l)*c.length,e.u||e.fi||e.c||e.bc||e.w&&e.h||(a=Math.max(a/10,r))}return{width:a,height:s}}function d(e,t){if(e.t){var n=e.t;return void 0!==t&&n.length>t&&(n=n.substring(0,Math.max(0,t-3)),n+="..."),n.split(/\r\n|\r|\n/)}return[""]}var h=function(e){var n,r,i,o,a=0;return t(e,function(e){n=T(n)?Math.min(n,e.x-e.size):e.x-e.size,r=T(r)?Math.min(r,e.y-e.size):e.y-e.size,i=T(i)?Math.max(i,e.x+e.size):e.x+e.size,o=T(o)?Math.max(o,e.y+e.size):e.y+e.size,a++}),{x1:n,y1:r,x2:i,y2:o,c:a}};return{labelOffset:l,nodeSize:a,radialExtentsFromPoint:function(n,r,i,s,u,c){if(!r||isNaN(r.x)||isNaN(r.y))return 1/0;var f=Math.max(0,0|s),d=0;return t(n,function(t){if(void 0!==t.x){var n=t.x-r.x,s=t.y-r.y;if(o(t)){s+=void 0!==t.labelOffset?t.labelOffset:l(t,c);var f=Math.abs(n)+t.w/2,h=Math.abs(s)+t.h/2,p=e(f,h);d=Math.max(d,p)}else{var g,v=0;void 0!==t.size?g=t.size:void 0!==t.r?(g=t.r,v=t.labelOffset):(g=a(t,i,{include:u,maxLength:c}).radius,v=l(t,c));var m=e(n,s+v);d=Math.max(d,m+g)}}}),Math.round(d+f)},radialExtents:function(e,n,r,i,o){var s=[],u=void 0===r?0:r;return t(e,function(e){var t=void 0!==e.r?e.r:a(e,n,{include:i,maxLength:o}).radius;if(t+=u,!isFinite(e.x)||!isFinite(e.y)||!isFinite(t))throw new Error("Inputs must be finite");s.push({x:e.x,y:e.y,r:t})}),Ao.radialExtents(s)},getBounds:h,findComponents:function(e,t){var n=_i,r=fa(e,t),i=Lo.connectedComponents(r.staticGraph),o={},a=r.vertexMap;n.forEach(i.iterateGroups(),function(t,r){var s={};n.forEach(i.iterateGroup(t),function(t){t=a.get(t);var n=e[t];s[t]=n,n.c=r}),o[t]={verts:s,edges:[],extents:h(s),c:r}});for(var s=0;s<t.length;s++){var u=t[s],l=o[i.get(a.getUniqueInverse(u.id1))];l.edges.push(u),u.c=l.c}return P(o)}}}function ha(){var e=-Math.PI/12,t=Math.sin(e),n=Math.cos(e),r=function(e,t){if(e.r===t.r){if(e.t){if(!t.t)return-1;if(e.t<t.t)return-1;if(e.t>t.t)return 1}else if(t.t)return 1;return e.id===t.id?0:e.id<t.id?-1:1}return e.r<t.r?1:-1};return{compareCircles:r,concentricLayout:function(i,o){var a,s=i;if(!s||0===s.length)return s;var u=k(o,{padding:8,radialPadding:0}),l=u.padding,c=0;s.sort(r),s=s.map(function(e){return{id:e.id,r:e.r+l,x:e.x,y:e.y,labelOffset:e.labelOffset,w:e.w,h:e.h}});var f=[],d=0,h=s[c++];if(1===s.length)g();else if(2===s.length)v();else if(3===s.length)m();else if(4===s.length)!function(){var e=h,n=s[c++],r=s[c++],i=s[c++];n.r===r.r&&r.r===i.r&&(n=s[2],r=s[1]);var o=e.r+r.r,a=e.r,u=Math.sqrt(o*o-a*a),l=e.r-n.r,f=t*u;e.x=-n.r,e.y=-e.labelOffset-f,n.x=e.r,n.y=-n.labelOffset+f,r.x=l+f,r.y=-u-r.labelOffset,i.x=l-f,i.y=u-i.labelOffset}();else if(s.length>4){var p=s[0].r;for(s[2].r/p>.5&&s.length>10?m():s[1].r/p>.5&&s.length>10?v():g(),a=Math.abs(s[0].y-s[0].r)+u.radialPadding,h=s[c++];h;)b();f.forEach(function(t){var n=2*Math.PI/(t.circumference-t.spaceLeft),r=0,i=n*t.items[0].r;4===t.items.length&&(i-=e);var o=Math.PI/2;t.items.forEach(function(e){var a=r+n*e.r;e.x=t.radius*Math.cos(a-o-i),e.y=t.radius*Math.sin(a-o-i)-e.labelOffset,r+=n*y(e)})}),function(){var e=s[0],t=s[0];s.forEach(function(n){n.y<e.y?e=n:n.y>e.y&&(t=n)});var n=(Math.abs(e.y-e.r)-(Math.sqrt(t.x*t.x+t.y*t.y)+t.r))/4;s.forEach(function(e){e.y+=n})}()}function g(){s[0].x=0,s[0].y=-s[0].labelOffset}function v(){var e=h,t=s[c++];e.x=0,e.y=-t.r-e.labelOffset,t.x=0,t.y=e.r-t.labelOffset}function m(){var e=h,r=s[c++],i=s[c++],o=(2*e.r+l)/Math.sqrt(3),a=(e.r-r.r)/2,u=1.25*Math.PI;e.x=o*t,e.y=-o*n+a,r.x=o*n,r.y=-o*t-r.labelOffset+a,i.x=o*Math.sin(u),i.y=-o*Math.cos(u)-i.labelOffset+a}function y(e){return 2*e.r+l}function b(){d+=h.r+a+u.radialPadding,a=h.r;var e=2*Math.PI*d,t=e-y(h),n={items:[],radius:d,spaceLeft:0,circumference:e};for(f.push(n);h&&t>0;)n.items.push(h),(h=s[c++])&&(t-=y(h));if(h&&(t+=y(h)),n.spaceLeft=t,h&&s.length-c<5){for(var r=0;h;)r+=y(h),n.items.push(h),h=s[c++];n.radius=(e-t+r)/(2*Math.PI),n.circumference=2*Math.PI*n.radius,n.spaceLeft=0}}return s}}}var pa=la.names;function ga(e){var n=da(),r={},i=Math.pow(10,-3.8),o=27,s=1.35,u=Math.pow(o,s);function l(e,t,n,r,i,o,a,s,u,l){var c=i[a];if(!(c in n)){if(!(c in r))throw new Error("link has end which is not in nodes list");var d=r[c];if(d.hi)throw new Error("link has end which is hidden");n[c]=f(0,t,d,c,s,u,l)}return c}function f(t,r,i,o,a,s,u){var l={include:s};if(s){var c=e.options().truncateLabels;l.maxLength=c?c.maxLength:void 0}var f=n.nodeSize(i,r,l);return{id:o,x:i.x,y:i.y,size:u?f.legacyRadius:f.radius,fixed:!!a&&o in a,lc:0,d:i.d,w:f.width,h:f.height,labeloff:n.labelOffset(i)}}function d(e,t){return e.fixed&&!t.fixed?-1:t.fixed&&!e.fixed?1:0}function h(e,n,r,i,o,a,s,u,c){for(var d=o().connections({all:!1,combos:c}),h={},p=[],g=0;g<d.length;g++){var v=d[g][0],m=i[v],y=l(0,n,h,r,m,0,"id1",a,s,u),b=l(0,n,h,r,m,0,"id2",a,s,u);if(null!==y&&null!==b){var x,w=[{id:v,sign:1,off:m.off}],A=m.w||1;for(x=1;x<d[g].length;x++)m=i[v=d[g][x]],w.push({id:v,sign:m.id1===y?1:-1,off:m.off}),A=Math.max(A,m.w||1);p.push({id1:y,id2:b,id:v,arrowSize:e.arrowLength(A,1),links:w,numLinks:w.length}),h[y].lc+=1,h[b].lc+=1}}t(r,function(e,t){if(!e.hi&&(c||!e.parentId)&&!h[t]){var r=f(0,n,e,t,a,s,u);h[t]=r}});var E=Object.keys(h).length;return{v:h,e:p,vcount:E}}r.extractStructure=function(e,t,r,i,o,a,s,u){var l=P(pa).indexOf(s)>=0,c="lens"!==s&&!l,f="radial"!==s&&!l,d=null;if(a){d={};for(var p=0;p<a.length;p++)d[a[p]]=1}var g=h(e,t,r,i,o,d,f,c,u);return g.extents=n.getBounds(g.v),g};var g="_dummy",v=RegExp("^"+g);function m(e){return v.test(e.id)}function y(e,n,r,i,o,a,s){var u,l,c,f={},d={},h={},v=[],m={},y={},b=i(),x=s;for(u=0;u<o.length;u++){h[u]={},m[u]=[];var w=[],A=1/0;if(t(o[u].verts,function(e,t){if(e.d&&p(e.d[r]))h[u][c=e.d[r]]||(h[u][c]=[],m[u].push(c)),h[u][c].push(t),y[t]=c,c<A?(A=c,w=[t]):c===A&&w.push(t);else if(a)throw new Error("Sequential Layout: Node is missing valid level data.")}),0===w.length){var E=Object.keys(o[u].verts)[0];w.push(E),y[E]=0,h[u][0]=[E],m[u].push(0)}m[u].sort(function(e,t){return e-t});var M=[];for(l=0;l<m[u].length;l++){var C=m[u][l];M=[];var k,T,_=b.neighbours(h[u][C]),I=((m[u][l+1]||C+1)+C)/2;for(T=0;T<_.nodes.length;T++)S(y[k=_.nodes[T]])&&(M.push(k),y[k]=I);M.length&&(m[u].splice(l+1,0,I),h[u][I]=M)}if(!a)for(l=0;l<w.length;l++)f[w[l]]=1,e[w[l]].level=0;d[u]=w}if(a){for(u=0;u<o.length;u++)for(l=0;l<m[u].length;l++)-1===v.indexOf(m[u][l])&&v.push(m[u][l]);for(v.sort(function(e,t){return e-t}),u=0;u<o.length;u++)for(l=0;l<v.length;l++)h[u][v[l]]=l;x=x||[]}else for(u=0;u<o.length;u++)for(l=0;l<m[u].length;l++)h[u][m[u][l]]=l;var L,O,N,P,D,B,V,z,F=0,G={};function H(t){var n=t.origId||t.id,r={id:g+n+"-"+F++,level:t.level-1,origId:n,x:0,y:0,c:t.c,size:10,fixed:!1,lc:t.lc,du:!0,w:20,h:20,labeloff:0};return e[r.id]=r,o[t.c].verts[r.id]=r,G[r.id]=1,r}function W(e,t,r){var i={id:g+t.id+"-"+r.id,id1:t.id,id2:r.id,c:e.c,numLinks:e.numLinks};return"level"in t&&"level"in r&&(i.level=Math.max(t.level,r.level)),n.push(i),o[e.c].edges.push(i),i}function Z(e,t,n){var r=H(e),i=n.id1===t.id;W(n,i?r:e,i?e:r),r.level===t.level+1?W(n,i?t:r,i?r:t):Z(r,t,n)}function Y(e,t,n){if(e.level>0){var r=H(e);W(n,e,r),W(n,r,t)}if(e.level<v.length-1){var i=H(e);i.level+=2,W(n,e,i),W(n,i,t)}}for(var j=0,U=n.length;j<U;j++){O=R((L=n[j]).id1),N=R(L.id2),D=e[N],(P=e[O]).level=h[P.c][y[O]],D.level=h[D.c][y[N]];var X=P.level,q=D.level;p(X)&&p(q)&&(L.level=Math.max(X,q),X<q?(G[D.id]=1,z=P,V=D):q<X&&(G[P.id]=1,z=D,V=P)),(B=Math.abs(X-q))>1?Z(V,z,L):a&&0===B&&(Y(P,D,L),x.push(L))}if(a)for(u=0;u<o.length;u++){var Q=d[u][0];1!==d[u].length||e[Q].level||(e[Q].level=h[u][y[Q]])}else t(e,function(t,n){if(!G[n]&&!f[n]){for(var r,i=d[e[n].c],o=1/0,a=0;a<i.length;a++){var s=b.shortestPaths(n,i[a]);s.distance<o&&(r=s,o=s.distance)}for(var u=0;u<r.one.length;u++){var l=e[r.one[u]];if(l&&"level"in l&&l.level<t.level){var c=W(t,t,l);t.level-l.level>1&&Z(t,l,c);break}}}});return n}var b=X();function x(e,t){for(var n=[],r=C(e),i=0;i<r.length;i++)t[r[i]]&&n.push(r[i]);return n}function w(e){var t=Number(e);return t=p(t)?t:5,t=Math.max(0,t),Math.min(10,t)}function A(e){return 10*(5-w(e))}function E(e){var n=0,r=0;return t(e,function(e){"level"in e&&!m(e.id)&&(n+=e.size,r+=1)}),n/r}function M(e){var n=0;return t(e,function(e){n=Math.max(n,e.length)}),n}function I(e,n){for(var r=[],i=M(e),o=0;o<i;o++){var a=0,s=0,u=0,l=0;t(e,function(e){if(e[o]){for(var t=e[o].vertices,r=0;r<t.length;r++){var i=n[t[r]].size;s+=i,a=Math.max(a,i)}u+=t.length}});var c=r[o-1];c&&a<c.max+c.yOffset&&(l=(c.max+c.yOffset)/2),r[o]={max:a,average:s/u,sum:s,yOffset:l}}return r}function L(e,r,i,o,s){var u=k(o,{top:[],orientation:"down",spacing:"auto"}),l=u.level,c=50+A(u.tightness),f=u.orientation.match(/down|up/)?"w":"h",d=u.orientation.match(/down|up/)?"h":"w",h=r.v,p=r.e,g=n.findComponents(h,p,i),v=[];if(!l)throw new Error("Sequential Layout: LayoutOptions is missing valid level property.");p=y(h,p,l,i,g,!0,v);var b,x,w=function(e,n){var r={};function i(e,t,n,i){r[e]=r[e]||[],r[e][t]=r[e][t]||{vertices:[],edges:[]};for(var o=0;o<t;o++)r[e][o]=r[e][o]||{vertices:[],edges:[]};r[e][t][n]=r[e][t][n]||[],r[e][t][n].push(i)}t(e,function(e,t){"level"in e&&i(e.c,e.level,"vertices",t)});for(var o=0;o<n.length;o++)"level"in n[o]&&1===Math.abs(e[n[o].id1].level-e[n[o].id2].level)&&i(n[o].c,n[o].level,"edges",n[o]);return r}(h,p);function E(e,t,n,r){var i,o,a,s,u,l,c=!0,f=-1;for(i=0;i<n.length;i++){var d=n[i];if(!r&&h[d].barycenter===1/0){c=!1;break}var p=0,g=0;for(o=0;o<t.length;o++)s=-1,d===t[o].id1?s=t[o].id2:d===t[o].id2&&(s=t[o].id1),-1!==s&&(h[s].barycenter===1/0?c=!1:(g++,-1!==(u=e.indexOf(s))&&(p+=u)));if(h[d].prevPos=i,l=!0,g>0?h[d].barycenter=p/g:h[d].barycenter===1/0?c=!1:0===i?h[d].barycenter=0:l=!1,l){if(f+1<i){var v=n[f],m=Math.min(h[d].barycenter,h[v].barycenter),y=Math.abs(h[d].barycenter-h[v].barycenter)/(i-f);for(a=1;a<i-f;a++)h[n[f+a]].barycenter=m+y*a}f=i}}return n.sort(function(e,t){return h[e].barycenter===h[t].barycenter?h[e].prevPos-h[t].prevPos:h[e].barycenter-h[t].barycenter}),c}function C(e,t){var n,r;return t<1||e.length<=t?0:(n=e[t].edges,(r=[e[t-1].vertices,e[t].vertices]).sort(function(e,t){return e.length-t.length}),S(n,r[1],r[0]))}function S(e,t,n){var r,i,o,a,s;if(e.length<2)return 0;for(function(e,t,n){e.sort(function(e,r){var i=Math.max(t.indexOf(e.id1),t.indexOf(e.id2)),o=Math.max(n.indexOf(e.id1),n.indexOf(e.id2)),a=Math.max(t.indexOf(r.id1),t.indexOf(r.id2)),s=Math.max(n.indexOf(r.id1),n.indexOf(r.id2));return i<a||i===a&&o<s?-1:1})}(e,t,n),r=e.map(function(e){var t=n.indexOf(e.id1);return-1===t&&(t=n.indexOf(e.id2)),{index:t,multiplier:-1===t?0:e.numLinks}}),i=1;i<r.length;)i*=2;o=new Array(2*i-1);for(var u=0;u<o.length;u++)o[u]=0;i-=1,a=0;for(var l=0;l<r.length;l++)for(o[s=r[l].index+i]+=r[l].multiplier;s>0;)s%2&&(a+=o[s+1]*r[l].multiplier),o[s=Math.floor((s-1)/2)]+=r[l].multiplier;return a}function R(e,t,n,r){var i,o=a(t),s=[];return o.forEach(function(t){s.push(t.id1===e?t.id2:t.id1)}),r.forEach(function(e){o.push(e),-1===s.indexOf(i=e.id1===n?e.id2:e.id1)&&s.push(i)}),{verts:s,edges:o,common:t.length===r.length&&t===o.length}}function L(e,t){return R(e,h[e].childEdges||[],t,h[t].childEdges||[])}function O(e,t){return R(e,h[e].parentEdges||[],t,h[t].parentEdges||[])}function P(e,t){var n,r,i,o,a,s,u=1,l=e[t].vertices,c=0,f=[],d=[];t>0&&(f=e[t-1].vertices),t<e.length-1&&(d=e[t+1].vertices);var p=0;for(n=0;n<l.length-1;n+=u)if(a=0,s=0,t>0?(i=O(l[n],l[n+1])).common||(i.verts.sort(function(e,t){return f.indexOf(e)-f.indexOf(t)}),i.verts.length>1&&(a+=S(i.edges,i.verts,[l[n],l[n+1]]),s+=S(i.edges,i.verts,[l[n+1],l[n]]))):i={common:!0},t<e.length-1?(o=L(l[n],l[n+1])).common||(o.verts.sort(function(e,t){return d.indexOf(e)-d.indexOf(t)}),o.verts.length>1&&(a+=S(o.edges,o.verts,[l[n],l[n+1]]),s+=S(o.edges,o.verts,[l[n+1],l[n]]))):o={common:!0},i.common&&o.common&&(h[l[n+1]].swapBlockStart=h[l[n]].swapBlockStart||n),s<a){var g=h[l[n]].swapBlockStart||n;r=l[g],l[g]=l[n+1],l[n+1]=r,h[l[g]].swapBlockStart=g,h[l[n+1]].swapBlockStart=g+1,c+=a-s,1===u&&(p=Math.max(p,n),u=-1),0===(n=g)&&(n=p,u=1)}else-1===u&&(n=p,u=1);return c}function B(e,t,n){return e[n]&&e[n].edges?e[n].edges.filter(function(e){return e.id1===t||e.id2===t}):[]}function z(e,t,n,r){var i,o,a=t,s=t.filter(function(e){return m({id:e})});if(s.length>0&&(a=s),o=a.length,e.root=e,e.align=e,o>0){var u=[Math.floor((o+1)/2)-1,Math.ceil((o+1)/2)-1];for(i=0;i<2;i++){var l=h[a[n?u[i]:u[1-i]]],c=l.orderPos;if(n&&r<c||!n&&r>c)return l.align=e,e.root=l.root,e.align=e.root,c}}return r}function F(e,t,n){var r,i,o,a,s,u,l="l"===t[1];if(void 0===e[t]){r=e,e[t]=0;do{var d=-1;l&&r.orderPos>0?d=r.orderPos-1:!l&&r.orderPos<n[r.level].vertices.length-1&&(d=r.orderPos+1),-1!==d&&(F(o=(i=h[n[r.level].vertices[d]]).root,t,n),e.sink.id===e.id&&(e.sink=o.sink),a=r[f],s=i[f],"h"===f&&(l?(s+=2*i.labeloff,a-=2*r.labeloff):(s-=2*i.labeloff,a+=2*r.labeloff)),u=(a+s)/2+c,e.sink.id!==o.sink.id?o.sink.shiftData.push({vert:e.sink,dist:e[t]-o[t]-u}):e[t]=Math.max(e[t],o[t]+u)),r=r.align}while(r.id!==e.id)}}function H(e,t){if(e[t]=e.root[t],e.root.id===e.id){var n=e.root.sink.shift;if(!n){var r=e.root.sink.shiftData;n=1/0;for(var i=0;i<r.length;i++){var o=r[i].dist;r[i].vert.shift<1/0&&(o+=r[i].vert.shift),n=Math.min(n,o)}e.root.sink.shift=n}n<1/0&&(e[t]+=n)}}function W(e,t){var n,r,i,o,a=[],s=1/0,u=-1/0,l="l"===t[1],c="u"===t[0],f=c?0:e.length-1,d=c?1:-1,p=function(t){return c?t<e.length:t>=0},g=function(e){return l?0:e.length-1},v=l?1:-1,m=function(e,t){return l?e<t.length:e>=0};for(n=f;p(n);n+=d){var y=-1;for(l||n===f||(y=e[n-d].vertices.length),r=g(i=e[n].vertices);m(r,i);r+=v){o=h[i[r]];var b=c?o.parents:o.children;_(o,t)&&(o[t]=void 0),y=z(o,b,l,y),a.push(o),o.sink=o,o.shiftData=[],o.shift=void 0}}for(r=0;r<a.length;r++)(o=a[r]).root.id===o.id&&F(o,t,e);for(r=0;r<a.length;r++)H(o=a[r],t),s=Math.min(s,o[t]),u=Math.max(u,o[t]);return l?{max:u,min:s}:(function(e,t){for(var n=0;n<e.length;n++)for(var r=e[n].vertices,i=0;i<r.length;i++)h[r[i]][t]*=-1}(e,t),{max:-s,min:-u})}!function(){var e,n;t(w,function(t){for(e=0;e<t.length;e++){var r=t[e].vertices;for(n=0;n<r.length;n++){var i=r[n];h[i].barycenter=1/0,h[i].childEdges=B(t,i,e+1),h[i].parentEdges=B(t,i,e)}}})}(),function(){var e,n,r,i,o,s,u,l,c=!0;t(w,function(t,f){for(l=0,s=void 0,u=t.length,e=0;e<t.length;e++)if(t[e].vertices.length>0){u=e;break}if(u!==t.length-1){t[u].vertices.sort(function(e,t){return h[t].childEdges.length-h[e].childEdges.length}),h[t[u].vertices[0]].barycenter=0,o=1/0;do{for(n=o,i?(o=0,s=a(t)):o=1/0,e=u;e<t.length-1;e++)r=E(t[e].vertices,t[e+1].edges,t[e+1].vertices,!0),c&&(E(t[e+1].vertices,t[e+1].edges,t[e].vertices,!1),r=E(t[e].vertices,t[e+1].edges,t[e+1].vertices,!1));for(i=r,e=t.length-1;e>u;e--)r=E(t[e].vertices,t[e].edges,t[e-1].vertices,e<l+2),c?(E(t[e-1].vertices,t[e].edges,t[e].vertices,!1),r=E(t[e].vertices,t[e].edges,t[e-1].vertices,!1)):o+=C(t,e),r||(i=!1);c=!i}while(l++<100&&(o===1/0||o<n));s&&(w[f]=s),o>0&&p.length<1e4&&function(e){var t,n;do{for(n=0,t=0;t<e.length;t++)n+=P(e,t)}while(n>0)}(w[f])}})}(),function(){var e,n;t(w,function(t){for(e=0;e<t.length;e++){var r=t[e].vertices;for(n=0;n<r.length;n++){var i=r[n];h[i].orderPos=n,h[i].children=N(w,h,i),h[i].parents=D(w,h,i)}}})}();var Z=u.ratio;"right"!==u.orientation&&"left"!==u.orientation||(Z=1/Z);var Y=[];if("equal"===u.spacing||"stretched"===u.spacing)for(var j=0;j<g.length;j++)Y[j]=g[j].verts;else{var X=[],q=[];Y[0]={},t(w,function(e,t){for(b=0;b<e.length;b++){if(X[b]||(X[b]={vertices:[],edges:[]}),q[b]){x=e[b].vertices;for(var n=0;n<x.length;n++)h[x[n]].orderPos+=q[b]}X[b].vertices=X[b].vertices.concat(e[b].vertices),X[b].edges=X[b].edges.concat(e[b].edges),q[b]=X[b].vertices.length}Y[0]=G(Y[0],g[t].verts)}),(w={})[0]=X}var Q=0;t(w,function(e,r){"equal"===u.spacing?function(e){var t,n;for(t=0;t<e.length;t++){var r=0,i=e[t].vertices;for(n=0;n<i.length;n++){var o=h[i[n]];if(!m(o)){var a=o[f]/2,s="h"===f?o.labeloff:0;o.x=r+=a-s,r+=a+s+c}}var u=(r-c)/2;for(n=0;n<i.length;n++)h[i[n]].x-=u}}(e):"stretched"===u.spacing?function(e){var t,n,r,i,o=[],a=[],s=0;for(t=0;t<e.length;t++){for(r=e[t].vertices,o[t]=0,a[t]=0,n=0;n<r.length;n++)m(i=h[r[n]])||(o[t]+=i[f],a[t]++);s=Math.max(s,o[t]+c*(a[t]-1))}for(t=0;t<e.length;t++)if(r=e[t].vertices,a[t]>1){var u=(s-o[t])/(a[t]-1),l=0;for(n=0;n<r.length;n++)if(!m(i=h[r[n]])){var d=i[f]/2,p="h"===f?i.labeloff:0;i.x=l+=d-p,l+=d+p+u}}else for(n=0;n<r.length;n++)m(i=h[r[n]])||(i.x=s/2)}(e):function(e){var t=W(e,"ul"),n=W(e,"ur"),r=W(e,"dl"),i=W(e,"dr"),o=[t,n,r,i].sort(function(e,t){return e.max-e.min-(t.max-t.min)});function a(e,t){return e-t}for(var s=0;s<e.length;s++)for(var u=e[s].vertices,l=0;l<u.length;l++){var c=h[u[l]],f=[c.ul-t.min+o[0].min,c.ur-n.max+o[0].max,c.dl-r.min+o[0].min,c.dr-i.max+o[0].max].sort(a);c.x=(f[1]+f[2])/2}}(e);var i=n.getBounds(Y[r]);Q-=i.x1,t(Y[r],function(e,t){h[t].x+=Q}),Q+=i.x2+c});var K=function(e){var t,n,r,i,o={};function a(e,t){return Number(e)-Number(t)}for(i="equal"===u.spacing||"stretched"===u.spacing?function(e){return e.c}:function(){return 0},t=0;t<v.length;t++){var s=v[t];s.links.sort(function(e,t){return(T(e.off)?e.off*e.sign:1/0)-(T(t.off)?t.off*t.sign:1/0)});var l=0,f=0,g=0,y=!0,b=w[i(s)][s.level].vertices,x=b.indexOf(s.id1),A=b.indexOf(s.id2),E=[x,A].sort(a);for(n=E[0]+1;n<E[1];n++){var M=h[b[n]];for(m(M)||(y=!1),r=0;r<M.parentEdges.length;r++)l+=M.parentEdges[r].numLinks;for(r=0;r<M.childEdges.length;r++)f+=M.childEdges[r].numLinks;g=Math.max(g,(M[d]||M.size)/2)}if(!y){f===l&&(l=h[b[E[0]]].parentEdges.length+h[b[E[1]]].parentEdges.length,f=h[b[E[0]]].childEdges.length+h[b[E[1]]].childEdges.length);var C=x<A?1:-1;f<l&&(C*=-1),u.orientation.match(/right|up/)&&(C*=-1);var k=g+20,_=40,S=e/2;for(k+=Math.abs(h[s.id1].x-h[s.id2].x)/c,(k=Math.min(k,S))+(s.links.length-1)*_>S&&(_=Math.max(10,(S-k)/(p.links.length-1))),n=0;n<s.links.length;n++){var I=s.links[n];o[I.id]={off:C*I.sign*(k+n*_)}}}}return o}(function(e){var n,r,i,o=1/0,a=-1/0,s=function(){var e,t,n=0,r=I(w,h),i=[];for(e=0;e<p.length;e++){var o=p[e].level;i[o]=Math.max(i[o]||0,2*p[e].arrowSize)}for(t=0;t<r.length;t++){var a=0;r[t+1]&&(a=r[t+1].max),n=Math.max(n,r[t].max+a+c+(i[t]||0))}return n}(),u=M(w);for(n=0;n<g.length;n++)t(g[n].verts,function(e){o=Math.min(o,e.x),a=Math.max(a,e.x)});return r=(a-o)/(e*u),r=Math.max(r,s),t(w,function(e){i=0;for(var t=0;t<e.length;t++){for(var n=e[t].vertices,o=0;o<n.length;o++)h[n[o]].y=i;i+=r}}),r}(Z));if(u.orientation.match(/up|right|left/)){var J=V(u.orientation);t(w,function(e){for(b=0;b<e.length;b++){x=e[b].vertices;for(var t=0;t<x.length;t++)J(h[x[t]])}})}U(e,h,K,r.extents,[],u,s)}function O(e,r,i,o,a,s){var u=k(o,{top:[],orientation:"down",stable:!0,flatten:!1}),l=u.level,c=s?1:A(u.tightness),f=u.top,d=u.tidy,h=!s&&u.flatten,p=r.v,g=r.e,v=r.extents,m=n.findComponents(p,g,i);l?g=y(p,g,l,i,m,!1):(f=x(f,p),function(e,n,r,i){for(var o,a,s=i(),u=0;u<r.length;u++){var l=s.distances(r[u]);t(l,function(t,n){"level"in e[n]||(e[n].level=1/0),e[n].level=Math.min(e[n].level,t)})}for(var c=0;c<n.length;c++)a=e[n[c].id2],"level"in(o=e[n[c].id1])&&"level"in a&&(n[c].level=Math.max(o.level,a.level))}(p,g,f,i));var b=function(e,n){var r={};function i(e,t,n,i){r[e]=r[e]||[],r[e][t]=r[e][t]||{},r[e][t][n]=r[e][t][n]||[],r[e][t][n].push(i)}t(p,function(e,t){"level"in e&&i(e.c,e.level,"vertices",t)});for(var o=0;o<n.length;o++)"level"in n[o]&&i(n[o].c,n[o].level,"edges",n[o]);return r}(0,g),w=E(p),M=I(b,p);function C(e){for(var t=0,n=0;n<e.length;n++){var r=p[e[n]].subChildrenCount;t+=0===r?1:r}return t}var T=2*w+24+c;function _(e,t){return e/(2*Math.tan(t/2))}function S(e){for(var t=1/0,n=-1/0,r=0;r<e.length;r++){var i=e[r].x;t=Math.min(t,i),n=Math.max(n,i)}return n-t}!function(){var e,n;t(b,function(t){for(var r=t.length-1;r>=0;r--)for(var i=t[r].vertices,o=[],a=0;a<i.length;a++){var s=N(b,p,n=i[a]);if(p[n].children=[],p[n].subChildrenCount=0,0!==s.length){var u=[];for(e=0;e<s.length;e++)o.indexOf(s[e])<0&&u.push(s[e]);if(u.length>0)for(p[n].children=u,p[n].subChildrenCount=C(u),e=0;e<u.length;e++)o.push(u[e]),p[u[e]].parent=n}}})}();var R={},L={};t(b,function(e,t){var n=Number(t);R[n]=ne(m[n].verts),L[n]={children:b[t][0].vertices,subChildrenCount:C(b[t][0].vertices)}}),t(b,function(e,t){!function e(t,n,r){r||(t.x=n);var i=n-t.subChildrenCount*(T/2),o=t.children;if(o)for(var a=0;a<o.length;a++){var s=p[o[a]],u=s.subChildrenCount;0===u&&(u=1);var l=i+u*T;e(s,(l+i)/2,!1),i=l}}(L[t],R[t].x,!0),function(e,t,n){for(var r=t.miny,i=Math.PI*(2/3),o=0,a=0;a<b[e].length;a++){var s=b[e][a].vertices,u=M[a].average,l=2*((w<u?u:w)+12)+M[a].yOffset;r+=o;for(var c=0;c<s.length;c++){var f=p[s[c]];if(f.y=r,!n){var d=f.children;if(d&&d.length>1){var h=_(S(d.map(function(e){return p[e]})),i);l=Math.max(l,h)}}}o=l}}(t,R[t],h)}),t(b,function(e,t){s||function(e,t){for(var n=V(u.orientation),r=0;r<b[e].length;r++)for(var i=b[e][r].vertices,o=0;o<i.length;o++)n(p[i[o]])}(t)}),s&&s(p,b,m,R,w,u.tightness);var O=[];d?j(e,p,m,0,0,v,O,u,a):U(e,p,{},v,O,u,a)}function N(e,t,n){var r,i,o,a,s=e[t[n].c][t[n].level+1],u={},l=[];if(s){for(o=0;o<s.edges.length;o++){var c=s.edges[o];i=c.id2+"",(r=c.id1+"")===n&&(u[i]=1),i===n&&(u[r]=1)}var f=s.vertices;for(a=0;a<f.length;a++)u[r=f[a]+""]&&l.push(r)}return l}function D(e,t,n){var r=[],i=t[n].level;if(i>0){var o,a,s,u=t[n].c,l=e[u][i],c={};if(l&&l.edges){for(a=0;a<l.edges.length;a++){var f=l.edges[a];f.id1===n?c[f.id2]=1:f.id2===n&&(c[f.id1]=1)}var d=e[u][i-1];if(d&&d.vertices)for(s=0;s<d.vertices.length;s++)c[o=d.vertices[s]]&&r.push(o)}}return r}function V(e){var t={up:function(e){e.y=-e.y,e.x=e.x},down:function(){},right:function(e){var t=e.y;e.y=e.x,e.x=t},left:function(e){var t=e.y;e.y=e.x,e.x=-t}};return t[e]||t.down}function F(e,n,r,i,o,a){function s(e,t){return(e.r+t.r)/(e.a-t.a)}function u(e,t,n,r){if(r&&1===e.length)return 0;var i=t,o=i;for(l=1;l<e.length;l++)o=Math.max(s(d[e[l]],d[e[l-1]]),o);return function(e,t,n){var r=o-i>0?o+n:o+n/2;return r>0?r:o}(0,0,n)}var l,c,f,d,h=A(a);t(n,function(t,n){var a=ne(r[Number(n)].verts),s=0,p=s,g=4*o,v=g,m=2*o+24;for(c=0;c<t.length;c++){var y,b=t[c].vertices;for(d=[],l=0;l<b.length;l++){var x=(y=e[f=b[l]+""]).x-a.minx;if((x*=2*Math.PI/(a.maxx-a.minx+m))<0||x>2*Math.PI)throw new Error("[Radial] Theta angle should be in the range [0; 2*PI]");d[f]={a:x,r:y.size}}for(p=s,0===c?b.length>1&&(s+=g/2):s+=g,(s=u(b,s,h,c<1))-p>v&&(v=s-p+1,g=Math.max(g,v/2),0===c&&b.length<3&&(s/=2)),l=0;l<b.length;l++)(y=e[b[l]+""]).x=i[Number(n)].x+s*Math.cos(d[y.id].a),y.y=i[Number(n)].y+s*Math.sin(d[y.id].a)}})}function H(e,t){var n=e.extents.c,r=Math.max(e.extents.x2-e.extents.x1,e.extents.y2-e.extents.y1),i=120*Math.sqrt(n),o=Math.max(r,i)/2,a=0;n>1&&(a=Math.min(Math.pow(n,2.5),100));var s=a*n*Math.log(n),u=1/function(e){var t=w(e.tightness);return Math.pow(2,.4*(t-5))}(t);return{repulsionFactor:40*Math.max(1,Math.pow(u,2)),coeff:1,naturalDistance:20*u,iterations:a,chunk:20,temperature:o,temp:o,estTime:s}}function Z(e,t,r,i,o){var a=t.v,s=t.vcount,u=n.findComponents(a,t.e,r),l=t.extents,f=i.fixed||[],d=i.tidy;te(a);var h=d?s/(s+u.length):1;e.trigger("progress","layout",0);for(var p,g=[],v=0,m=Date.now(),y=0;y<u.length;y++){var b=H(u[y],i);v+=b.estTime,g.push(b)}for(var x=0,w=0;w<u.length;w++){g[w].start=x;var A=x+g[w].estTime/v*(h-0);g[w].stop=A,x=A}var E=0;function M(){d?j(e,a,u,0,0,l,f,i,o):U(e,a,{},l,f,i,o)}u.length>0?function t(n){var r=n,i=u[r],o=g[r];!function(e,t,n,r,i,o){var a={i:0,temperature:n.temperature};!function s(){J(a,t,n),a.i>=n.iterations?o():(e.trigger("progress","layout",r+a.i/n.iterations*(i-r)),c(s,0))}()}(e,i,o,o.start,o.stop,function(){ee(i.verts),E++,++r<u.length?(p=Date.now())-m>16||E>1e3?(m=p,E=0,c(function(){t(r)},0)):t(r):M()})}(0):U(e,a,{},l,f,i,o)}function Y(e){return P(e).some(function(e){return e.fixed})}function j(e,n,r,i,o,a,s,u,l){for(var c={},f=[],d={},h=1/0,p=1/0,g=0;g<r.length;g++){var v=re(r[g].verts);c[g]=v;var m=s.length>0&&Y(r[g].verts);f.push({x:v.x,y:v.y,width:v.width,height:v.height,id:g,fixed:m}),d[g]={x:v.x,y:v.y},h=Math.min(h,d[g].x),p=Math.min(p,d[g].y)}var y=k(u,{strategy:"rect",ratio:4/3});he(f,{strategy:y.strategy,step:30,max:2,sort:!1,ratio:y.ratio,tightness:y.tightness},function(r){h="rect"===y.strategy?h:0,p="rect"===y.strategy?p:0;for(var i={},o=0;o<r.length;o++)i[r[o].id]=r[o],i[r[o].id].x+=h,i[r[o].id].y+=p;t(n,function(e){var t=i[e.c].y-d[e.c].y;e.x+=i[e.c].x-d[e.c].x,e.y+=t}),U(e,n,{},a,s,y,l)})}function U(e,t,r,i,o,a,s){var u=n.getBounds(t);if(0===o.length&&(u=$(t,i,u)),p(u.x1)||(u=null),!s)return{vertices:t,updatedEdges:r,extents:u};c(function(){e.trigger("progress","layout",1),s({vertices:t,updatedEdges:r,extents:u},a)})}function q(e,t,n){Q(e[t.id1],e[t.id2],n)}function Q(e,t,n){var r,i,o;if(!e.fixed||!t.fixed){var a=2*b.next()*Math.PI;o=1.3*ie(e,t,n)/2,e.fixed||t.fixed?(r=e.fixed?e.x:t.x,i=e.fixed?e.y:t.y,o*=2):(r=(e.x+t.x)/2,i=(e.y+t.y)/2),e.fixed||(e.x=r+o*Math.cos(a),e.y=i+o*Math.sin(a),a+=Math.PI),t.fixed||(t.x=r+o*Math.cos(a),t.y=i+o*Math.sin(a))}}function K(e,t,r,i){var o={temperature:10,i:0},a={verts:t.v,edges:t.e},s=H(t,r);s.chunk=5,s.iterations=5,o.temperature=Math.pow(s.temperature,.72),J(o,a,s);var u=n.getBounds(a.verts);p(u.x1)||(u=null),e.trigger("progress","layout",1),i({vertices:a.verts,extents:u},r,!1)}function J(e,n,r){for(var i=Math.min(e.i+r.chunk,r.iterations);e.i<i;){var o=n.verts,a=n.edges,s=0;if(t(o,function(e){e.dx=0,e.dy=0,s++}),te(o,2),1===s)return void(e.i=i);if(2===s){if(a[0])q(o,a[0],r.naturalDistance);else{var u=P(o);Q(u[0],u[1],r.naturalDistance)}return void(e.i=i)}se(o,r.repulsionFactor);for(var l=0;l<a.length;l++)oe(a[l],o,r.naturalDistance,r.coeff);var c=e.temperature*(1-e.i/r.iterations);t(o,function(e){ae(e,c)}),e.i++}}function $(e,n,r){var i=(r.x1+r.x2)/2-(n.x1+n.x2)/2,o=(r.y1+r.y2)/2-(n.y1+n.y2)/2;return t(e,function(e){e.x-=i,e.y-=o}),{x1:r.x1-i,y1:r.y1-o,x2:r.x2-i,y2:r.y2-o}}function ee(e){var n,r,i=0,o=0,a=0,s=!1,u=0,l=0;if(t(e,function(e){i+=e.x,o+=e.y,a+=1,s=s||e.fixed}),!(a<3||s)){i/=a,o/=a,t(e,function(e){(n=Math.sqrt((e.x-i)*(e.x-i)+(e.y-o)*(e.y-o)))>l&&(l=n,u=Math.atan2(e.y-o,e.x-i))}),u=-u;var c=Math.sin(u),f=Math.cos(u);t(e,function(e){r=o+(e.x-i)*c+(e.y-o)*f,e.x=i+(e.x-i)*f-(e.y-o)*c,e.y=r})}}function te(e,n){var r=n||30;t(e,function(e){e.fixed||(e.x+=r*(b.next()-.5),e.y+=r*(b.next()-.5))})}function ne(e){var n=0,r=0,i=0,o=1/0,a=1/0,s=-1/0,u=-1/0;t(e,function(e){n+=1,r+=e.x,i+=e.y,a=Math.min(a,e.x),o=Math.min(o,e.y),s=Math.max(s,e.x),u=Math.max(u,e.y)}),r/=n,i/=n;var l=0,c=!1;return t(e,function(e){var t=e.x-r,n=e.y-i,o=Math.sqrt(t*t+n*n);l=Math.max(o+1.5*e.size,l),c=c||e.fixed}),{x:r,y:i,sum:n,size:l,fixed:c,miny:o,minx:a,maxy:u,maxx:s}}function re(e,n){var r=S(n)?{}:n,i=1/0,o=1/0,a=-1/0,s=-1/0;return t(e,function(e,t){t in r||(o=Math.min(o,e.x-e.size),i=Math.min(i,e.y-e.size),a=Math.max(a,e.x+e.size),s=Math.max(s,e.y+e.size))}),{x:o-=20,y:i-=20,width:(a+=20)-o,height:(s+=20)-i}}function ie(e,t,n){return e.size+t.size+n*(1+((e.lc?e.lc:1)+(t.lc?t.lc:1))/6)}function oe(e,t,n,r){var i=t[e.id1],o=t[e.id2],a=i.x-o.x,s=i.y-o.y,u=ie(i,o,n),l=W(a,s);if(l>.02){var c=r*((l-u)/l),f=a*c,d=s*c;i.dx-=f,i.dy-=d,o.dx+=f,o.dy+=d}}function ae(e,t){if(!e.fixed){var n=W(e.dx,e.dy),r=e.dx/n*Math.min(n,t),i=e.dy/n*Math.min(n,t);e.x+=r,e.y+=i}}function se(e,n){var r,a,l,c,f=ne(e),d=(a=f.maxx)-(r=f.minx),h=(c=f.maxy)-(l=f.miny);function p(e,t,n,r){return{leaf:!0,nodes:{},point:null,x1:e,y1:t,x2:n,y2:r}}function g(e,t){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=.5*(n+i),s=.5*(r+o),u=t.x>=a,l=t.y>=s,c=(l?2:0)+(u?1:0);e.leaf=!1,u?n=a:i=a,l?r=s:o=s,e.nodes[c]||(e.nodes[c]=p(n,r,i,o)),v(e.nodes[c],t)}function v(e,t){if(e.leaf){var n=e.point;if(n)return Math.abs(n.x-t.x)+Math.abs(n.y-t.y)<.01?void g(e,t):(e.point=null,g(e,n),void g(e,t));e.point=t}else g(e,t)}d>h?c=l+d:a=r+h;var m,y=.5;function b(e){if(e.point!==m){var t=e.cx-m.x,n=e.cy-m.y,r=1/W(t,n);if((e.x2-e.x1)*r<y)return w(m,0,e.charge,r,t,n),!0;e.point&&w(m,0,e.pointCharge,r,t,n)}return!e.charge}var x=1e5;function w(e,t,n,r,i,o){E(e,n,i,o,Math.min(r,x))}function A(e){return o*Math.pow(e.size,s)/u*(1+(e.lc?e.lc:1)/3)}function E(e,t,r,o,a){if(!(a<i)){var s=n*A(e)*t*a*a*a;e.dx-=r*s,e.dy-=o*s}}var M=p(r,l,a,c);return t(e,function(e){v(M,e)}),function e(t){var n=0,r=0;if(t.charge=0,t.size=0,!t.leaf)for(var i=t.nodes,o=0;o<4;o++){var a=i[o];a&&(e(a),t.charge+=a.charge,t.size+=a.size,n+=a.charge*a.cx,r+=a.charge*a.cy)}if(t.point){var s=A(t.point);t.pointCharge=s,t.charge+=s,t.size+=t.point.size,n+=s*t.point.x,r+=s*t.point.y}t.cx=t.charge?n/t.charge:0,t.cy=t.charge?r/t.charge:0}(M),t(e,function(e){m=e,function e(t,n){if(!t(n))for(var r=n.nodes,i=0;i<4;i++)r[i]&&e(t,r[i])}(b,M)}),M}function ue(e,t,n,r,i,o){e[t]=r?n[t]:{x:i,y:o}}function le(r,i){var o,a={},s=[],u=0;t(r.rev,function(o,l){for(var c={x:0,y:0,size:0},f=o.length,d=0;d<f;d++){var h=i[o[d]];c.x+=h.x,c.y+=h.y,c.size+=h.size}c.x/=f,c.y/=f;var p=document.createElement("canvas").getContext("2d"),g=ha(),v=P(i).filter(function(e){return r.rev[l].indexOf(e.id)>-1}).map(function(t){return t.r=n.nodeSize(e.privateGetItem(t.id),p,{include:!1}).radius,t.rwt=n.nodeSize(e.privateGetItem(t.id),p,{include:!0}).radius,t.labelOffset=0,t}),m=0,y=0;v.forEach(function(e){m+=e.r,y+=e.rwt});var b={positions:z(v=g.concentricLayout(v,{padding:Math.max(8,(y-m)/v.length*.5)}))},x=n.radialExtentsFromPoint(v,{x:0,y:0},p,0);a[l]={x:c.x,y:c.y,size:x,fixed:!1,jit:b,lc:0},u++;for(var w={},A=r.index[o[0]],E=0;E<A.length;E++)w[r.ids[A[E]]]=1;t(w,function(e,t){l<t&&s.push({id1:l,id2:t})})});for(var l=0;l<s.length;l++)o=s[l].id2+"",a[s[l].id1+""].lc++,a[o].lc++;return t(i,function(e,t){r.ids[t]||(a[t]={x:e.x,y:e.y,size:e.size,lc:0,fixed:e.fixed,jit:{radius:e.size,position:{x:0,y:0}}},u++)}),{v:a,e:s,vcount:u,extents:n.getBounds(a)}}function ce(e,t,n){e[n]||(e[n]=[]),e[n].push(t)}function fe(e,t){ce(e,t.id1,t.id2),ce(e,t.id2,t.id1)}function de(e,t,n,r,i,o){var a=r;if(0===a)return i[t[0]]={x:0,y:0},{radius:n,index:-1};var s=n,u=Math.sqrt((a+1)*n/(Math.PI*s))*s,l=Math.floor(2*Math.PI*u/n);l=Math.min(l,a+1);var c=2*Math.PI/l,f=0;switch(l){case 2:f=Math.PI/2,u*=.75;break;case 3:f=Math.PI/3,u*=.85;break;case 4:f=0,u*=.85;break;case 5:f=0,u*=.9;break;default:f=0}u*=o;for(var d=0;d<l;)i[t[a-d]]={x:u*Math.cos(f),y:u*Math.sin(f)},f+=c,d++;return{radius:u,index:a-=l}}function he(e,t,n){function r(e,t,n,r,i,o){var a=function(e,t,n){return(e-r)/(t-r)}(t,n);return function(e,t,n){return(t-e)*n+e}(o,i,a=Math.pow(a,e))}function i(e,t){if(t.length<1)return!1;function n(t){return e.y<t.y+t.height&&e.y+e.height>t.y}function r(t){return e.x<t.x+t.width&&e.x+e.width>t.x}var i,o;for(i=0;i<t.length;i++)if(r(o=t[i])&&n(o))return!0;return!1}var o,a,s,u={spiral:function(e){var t=r(.6,e,100,0,h,1),n=r(1,e,600,0,.3,.5)*e;return{x:Math.cos(n)*t,y:Math.sin(n)*t}},rect:function(e){return pe(e,t,n)}},l=0,c=[],f=u[t.strategy]||u.rect,h=0;for(o=0;o<e.length;o++)h+=(a=e[o]).width;if(h/=2*e.length,"rect"===t.strategy)return f(e);for(e.sort(d),o=0;o<e.length;o++){for((a=e[o]).x=a.fixed?a.x:0,a.y=a.fixed?a.y:0;i(a,c)&&!a.fixed;)s=f(l,a),a.x=s.x,a.y=s.y,l++;c.push(a)}return n(c)}function pe(e,t,n){function r(e){return!u||e.ratio()>=i.ratio-.2&&e.ratio()<=i.ratio}var i=k(t,{ratio:4/3,max:10,sort:!0,step:10,tightness:5});i.sort&&e.sort(function(e,t){return d(e,t)||t.height-e.height}),function(e){for(var t=A(i.tightness),n=0;n<e.length;n++)e[n].width+=t,e[n].height+=t}(e);var o,s=function(e){for(var t=a(e),n=0;n<t.length;n++){var r=t[n].width%i.step,o=t[n].height%i.step;0!==r&&(t[n].width+=i.step-r),0!==o&&(t[n].height+=i.step-o)}return t}(e),u=!0;if(0!==e.length){var l={area:function(){for(var t=0,n=0;n<e.length;n++)t+=e[n].width*e[n].height;return t},maxWidth:function(e){for(var t=0,n=0;n<e.length;n++)t<e[n].width&&(t=e[n].width);return t}(s),maxHeight:s[0].height},f=function(e){var t=1.03*Math.sqrt(1.1*e.area()/i.ratio),n=t*i.ratio;return n<e.maxWidth+10&&(n=e.maxWidth+10),{width:n,height:t,lowestFreeHeightDeficit:0,ratio:function(){return f.width/f.height}}}(l),h=0;!function(e,t,n){var a=!e();!function t(){return a||(a=function(){var e=function(e,t){var n,r=ge();t.canvas||(t.canvas=function(){var e=ve(),t=me;function n(e,t){return t-(o.height-e)}function r(t,n,r){r.leftOverW>0&&(o.cells+=e.rows(),e.insertCol(t+(r.nRequiredCellsH-1),r.leftOverW)),r.leftOverH>0&&(o.cells+=e.cols(),e.insertRow(n+(r.nRequiredCellsV-1),r.leftOverH));for(var i=t+(r.nRequiredCellsH-1);i>=t;i--)for(var a=n+(r.nRequiredCellsV-1);a>=n;a--)e.setItem(i,a,!0)}function i(t,n,r,i){i.nRequiredCellsH=0,i.nRequiredCellsV=0,i.leftOverW=0,i.leftOverH=0;for(var o,a=0,s=0,u=n;s<r.height;){for(o=t,a=0;a<r.width;){if(e.item(o,u))return!1;a+=e.colWidth(o),o++}s+=e.rowHeight(u),u++}return i.nRequiredCellsH=o-t,i.nRequiredCellsV=u-n,i.leftOverW=a-r.width,i.leftOverH=s-r.height,!0}var o={matrix:e,cells:0,addAttempts:0,addRect:function(a,s){var u={offsetX:0,offsetY:0,width:a,height:s,placed:!1},l=0,c=0,f=0,d=0,h={};for(o.addAttempts++;;){for(h={};c<e.rows()&&e.item(l,c);)d+=e.rowHeight(c),c++;if(c<e.rows()&&n(d,u.height)<=0){if(i(l,c,u,h)){r(l,c,h),u.offsetX=f,u.offsetY=d,u.placed=!0;break}d+=e.rowHeight(c),c++}var p=n(d,u.height);if(p>0&&(d=0,c=0,f+=e.colWidth(l),l++,o.lfhDeficitSinceLastRedim()>p&&(t=p)),o.width-f<u.width){u.placed=!1;break}}return{offsetX:u.offsetX,offsetY:u.offsetY,lfhd:t,placed:u.placed}},lfhDeficitSinceLastRedim:function(){return t},setDimensions:function(t,n){return o.width=t,o.height=n,o.area=o.width*o.height,e.init(t,n,!1),o}};return o}());for(var i=t.canvas.setDimensions(t.width,t.height),o=0,a=0,s=0;s<e.length;s++){var u=e[s];if(!(n=i.addRect(u.width,u.height)).placed){r.width=0,r.height=0,r.comps.length=0,r.lowestHeightFlushedRightItem=0;break}u.x=n.offsetX,u.y=n.offsetY,r.comps.push(u),u.y+u.height>r.height&&(r.height=u.y+u.height),u.x+u.width>r.width&&(r.width=u.x+u.width);var l=u.width+u.x;(l>a||l===a&&u.height>o)&&(r.lowestHeightFlushedRightItem=n.lfhd,o=u.height,a=l)}return t.lowestFreeHeightDeficit=i.lfhDeficitSinceLastRedim(),r}(s,f);if(0===e.comps.length)f.width*=1.03,f.height*=1.03;else{if(h++,(!o||r(e))&&((o=e).efficiency=l.area()/e.area(),r(e)))return!0;if(h>=i.max)return!0}return!1}())||(a=!e()),a?n():c(t,0)}()}(function(){return f.width>=l.maxWidth},0,function(){return n(o.comps)})}else o=ge(),n(o.comps)}function ge(){var e={width:0,height:0,area:function(){return e.width*e.height},comps:[],lowestHeightFlushedRightItem:0,ratio:function(){return 0===e.width?1/0:e.width/e.height}};return e}function ve(){var e=[],t=[],n=[],r=0,i=0,o={init:function(a,s,u){if(a<=0)throw new Error("[Matrix] Column size cannot be 0 or similar");if(s<=0)throw new Error("[Matrix] Row size cannot be 0 or similar");return r=1,i=1,(e.length>0||t.length>0)&&(e.length=0,t.length=0,n.length=0),e.push({index:0,size:a}),t.push({index:0,size:s}),n[0]=[],n[0][0]=u,o},cols:function(){return i},rows:function(){return r},item:function(r,i){return n[e[r].index][t[i].index]},setItem:function(r,i,o){n[e[r].index][t[i].index]=o},insertRow:function(e,a){for(var s=t[e].index,u=0;u<i;u++)n[u][r]=n[u][s];return e<r-1&&t.splice(e+1,0,{index:r,size:a}),t[e+1]={index:r,size:a},t[e].size-=a,r++,o},insertCol:function(t,r){return n[i]=a(n[e[t].index]),t<i-1&&e.splice(t+1,0,{index:i,size:r}),e[t+1]={index:i,size:r},e[t].size-=r,i++,o},colWidth:function(t){return e[t].size},rowHeight:function(e){return t[e].size},inspect:function(){var n,a,s,u="\n     ",l=0,c=0;for(l=0;l<i;l++)n=Math.floor(e[l].size/100)%10==0?" ":""+Math.floor(e[l].size/100)%10,a=Math.floor(e[l].size/10)%10==0&&" "===n?" ":""+Math.floor(e[l].size/10)%10,s=Math.floor(e[l].size)%10==0&&" "===n&&" "===a?" ":""+Math.floor(e[l].size)%10,u+=e[l].size>999?" "+e[l].size+" ":" "+n+a+s+" ";for(u+="\n",l=0;l<r;l++){for(n=Math.floor(t[l].size/100)%10==0?" ":""+Math.floor(t[l].size/100)%10,a=Math.floor(t[l].size/10)%10==0&&" "===n?" ":""+Math.floor(t[l].size/10)%10,s=Math.floor(t[l].size)%10==0&&" "===n&&" "===a?" ":""+Math.floor(t[l].size)%10,u+=t[l].size>999?" "+t[l].size+": ":" "+n+a+s+": ",c=0;c<i;c++)u+=o.item(c,l)?"  X  ":"  .  ";u+="\n"}return u}};return o}r.layout=function(e,n,r,i,o,a){n.trigger("prechange","layout");var s="^(standard|hierarchy|lens|sequential|radial|structural|tweak|"+P(pa).join("|")+")$";if(!new RegExp(s).test(e))throw new Error("The layout name is not valid.");var u=B(["standard","structural"]);if(b.setSeed(null),u[e]||o.consistent){var l=C(o.fixed||[]),c=B(o.fixed),f=0,d=0;l.length&&(t(c,function(e,t){t in r.v&&(f+=r.v[t].x,d+=r.v[t].y)}),f/=l.length,d/=l.length),t(r.v,function(e,t){c[r.v[t].id]||(r.v[t].x=f,r.v[t].y=d)})}switch(o.consistent&&b.setSeed(900736044081),e){case"standard":Z(n,r,i,o,a);break;case"hierarchy":O(n,r,i,o,a);break;case"lens":return function(e){var n,r,i,o,a,s,u,l,c,f,d,h,p=da(),g={},v=3,m=.5,y=ai,b=[],x=[],w=[],A=[],E=[],M=[];function C(e,t){return Math.sqrt(e*e+t*t)}function k(){var e=[];t(d,function(t,n){e.push({id:n,x:E[i[n]],y:M[i[n]]})});var n=function(e,t){var n;function r(e,t,n,r,i){return{isLeaf:!0,children:[],points:[],x1:e,y1:t,x2:n,y2:r,depth:i}}function i(e){return e.depth>=t}function o(e,t){var n,i,o,a,s=.5*(e.x1+e.x2),u=.5*(e.y1+e.y2);0===t||1===t?(o=e.y1,a=u):(o=u,a=e.y2),0===t||2===t?(n=e.x1,i=s):(n=s,i=e.x2),e.isLeaf=!1,e.children[t]=r(n,o,i,a,e.depth+1)}var a=[],s=[];for(n=0;n<e.length;n++)a.push(e[n].x),s.push(e[n].y);var u=Math.min.apply(0,a),l=Math.max.apply(0,a),c=Math.min.apply(0,s),f=Math.max.apply(0,s),d=l-u,h=f-c;d>h?f=c+d:l=u+h;var p=r(u,c,l,f,0);for(p.addPoint=function(e){!function e(t,n){if(n.x<t.x1||n.y<t.y1||n.x>t.x2||n.y>t.y2)throw Error("[Layout] Error: the point is out of range.");if(i(t))t.points.push(n);else{t.points.push(n);var r,a=.5*(t.x1+t.x2),s=.5*(t.y1+t.y2);n.x<a&&n.y<s&&(r=0),n.x>=a&&n.y<s&&(r=1),n.x<a&&n.y>=s&&(r=2),n.x>=a&&n.y>=s&&(r=3),t.children[r]||o(t,r),e(t.children[r],n)}}(p,e)},p.visit=function(e){!function e(t,n){n(t);for(var r=0;r<4;r++)t.children[r]&&e(t.children[r],n)}(p,e)},n=0;n<e.length;n++)p.addPoint(e[n]);return p}(e,v);function r(e){var t=0,r=0;n.visit(function(n){if(n.isLeaf){var i,o=e.x-.5*(n.x1+n.x2),a=e.y-.5*(n.y1+n.y2),s=C(o,a),u=n.points,l=u.length;if((n.x2-n.x1)/s>m){for(i=0;i<l;i++)if(e.id!==u[i].id){var c=e.x-u[i].x,f=e.y-u[i].y,d=Math.max(.001,C(c,f));t+=c/d,r+=f/d}}else t+=l*o/s,r+=l*a/s}}),b.push(t),x.push(r)}b.length=0,x.length=0;for(var o=0;o<e.length;o++)r(e[o]);O(b,x)}function T(e,t,n){for(var r=t,i=R(e,I(L(t,n),-1)),o=i.slice(),s=S(i,i),u=0;u<20&&s/a>.01;u++){var l=L(o,n),c=s/S(l,o);r=R(r,I(o,c));var f=R(i,I(l,-c));i=f;var d=S(f,f),h=d/s;s=d,o=R(f,I(o,h))}return r}function _(){var e;for(e=0;e<a;e++){w[e]=[],A[e]={},A[e][e]=!0;for(var t=0;t<a;t++)w[e][t]=0}for(e=0;e<o.length;e++){var n=o[e],r=i[n.id1],s=i[n.id2];A[r][s]=!0,A[s][r]=!0,w[r][s]-=1,w[s][r]-=1,w[r][r]+=1,w[s][s]+=1}}function S(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function I(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r]*t);return n}function R(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r]+t[r]);return n}function L(e,n){var r,i=[],o=0;for(r=0;r<a;r++)o=0,t(A[r],function(t,n){o+=w[r][n]*e[n]}),i.push(o);for(i=I(i,n),o=0,r=0;r<a;r++)o+=e[r];var s=[];for(r=0;r<a;r++)s.push(a*e[r]-o);return R(i,s)}function O(e,t){var n,r=0,i=0;for(n=0;n<e.length;n++)r+=e[n],i+=t[n];for(r/=e.length,i/=e.length,n=0;n<e.length;n++)e[n]-=r,t[n]-=i}function N(e,t,n){for(var r=0;r<t;r++)e.trigger("progress","layout",f+=1/(u+l+1)),k(),E=T(b,E,n),M=T(x,M,n),O(E,M)}function P(t,f){var p,g;h=Object.keys(d),i={},E.length=0,M.length=0,w.length=0,A.length=0;var v=0,m=e(t.tightness);for(m=2-2*m/10+1,g=0;g<h.length;g++)p=h[g],v+=Math.max(1,d[p].size),i[p]=g;for(c=42*Math.sqrt(a)*m,c*=1+.02*(v/a-y),o.length/a<1&&(c*=.65+o.length/a*.35),g=0;g<h.length;g++)E.push(c*f.next()),M.push(c*f.next());r=a/50,n=a*Math.min(Math.sqrt(s),10),u=Math.min(8,4+2*s),l=16-u}function D(e){e.forEach(function(e){var t=E[i[e]],n=M[i[e]];!function(e,t,n){var r=e,i=r*Math.cos(t),o=r*Math.sin(t);d[n].x=c*i,d[n].y=c*o}(C(t,n),Math.atan2(t,n)||0,e)})}return g.lens=function(e,t,i,c,g,v){e.trigger("progress","layout",f=0),a=t.vcount;for(var m=p.findComponents(d=t.v,o=t.e),y=m.length,b=a/y,x=0,w=0;w<y;w++)x=Math.max(x,Object.keys(m[w].verts).length);return s=Math.max(x/2,b)/2,a>1&&(P(i,g),_(),N(e,u,n),N(e,l,r),D(h)),c(e,d,{},t.extents,[],i,v)},g}(w).lens(n,r,o,U,b,a);case"sequential":L(n,r,i,o,a);break;case pa.organic:(function(e){function t(t,r,i,o,a,s){o.trigger("progress","layout",0);var u=la.createLayout(t,n.staticGraph,r.libgOpts);new la.SetTimeoutRunner(u,0,100).start(i,function(t){if(t)throw new Error(t);o.trigger("progress","layout",1),a(o,e.v,{},e.extents,{length:1},r,s)})}var n=fa(P(e.v),e.e);return{organic:function(e,r,i,o){var a=function(e){var t=la.KnownProperties,n=e.vertexMap,r=Lo.StaticPropertyMap.fromRange(n.keySpace(),null),i=Lo.StaticPropertyMap.fromRange(n.keySpace(),0);e.nodeList.forEach(function(e){var t=n.getUniqueInverse(e.id);r.set(t,e),i.set(t,Math.max(e.size,.5))});var o={};return o[t.Position2d.name]={prop:t.Position2d.descriptor,data:r},o[t.Radius.name]={prop:t.Radius.descriptor,data:i},o}(n);r.libgOpts={initializationOptions:{seed:r.consistent?7:void 0},packingOptions:{padding:{proportion:.2,min:25,max:200}}},t(pa.organic,r,a,e,i,o)}}})(r).organic(n,o,U,a);break;case"structural":!function(e,n,r,i,o){w(i.tightness);var a=function(e){var n,r={},i={};return t(e,function(e,t){e.sort(),n="";for(var o=0;o<e.length;o++)n+=e[o];r[n]||(r[n]=[]),r[n].push(t),i[t]=n}),{rev:r,ids:i,index:e}}(function(e){for(var t={},n=0;n<e.length;n++)fe(t,e[n]);return t}(n.e));Z(e,le(a,n.v),r,i,function(e,r,i){var s={};t(e.vertices,function(e,t){if(a.rev[t])for(var r=e.fixed,i=0;i<a.rev[t].length;i++){var o=a.rev[t][i],u=e.x,l=e.y;e.jit.positions&&(u+=e.jit.positions[o].x,l+=e.jit.positions[o].y),ue(s,o,n.v,r,u,l)}else ue(s,t,n.v,n.v[t].fixed,e.x,e.y)}),o({vertices:s,extents:e.extents},r,i)})}(n,r,i,o,a);break;case"radial":O(n,r,i,o,a,F);break;case"tweak":K(n,r,o,a)}},r.arrange=function(e,r,i,o,a,s,u,l){function c(e,t,n,r,i){var o;for(o=0;o<e.length;o++)if(e[o].id===t){e[o].x=n-e[o].width/2,e[o].y=r-e[o].height/2;break}return i(e)}var f,d,h,p={tidy:function(e,t,n){return pe(e,{step:30,max:2,sort:!1,ratio:t.ratio},n)},average:function(e,t,n){return c(e,t.specialId,t.centre.x,t.centre.y,n)},absolute:function(e,t,n){return c(e,t.specialId,t.absolute.x,t.absolute.y,n)}},g={grid:function(e,t,n,r){var i=2*n+24+r,o=0,a=0,s=Math.floor(Math.sqrt(e.length)),u=Math.ceil(e.length/s),l={};for(f=0;f<s;f++){for(d=0;d<u;d++){var c=u*f+d;e[c]&&(l[e[c]]={x:o,y:a}),o+=i}o=0,a+=i}return l},circle:function(e,t,n,r){return function(e,t,n,r){var i,o=0,a={};for(i=0;i<t.length;i++)o+=e[t[i]].size;if(1===t.length)a[t[0]]={x:0,y:0};else{var s=Math.PI/4;2===t.length&&(s=Math.PI/2),4===t.length&&(s=0),t.length<4&&(o*=1.5);var u=2*Math.PI/t.length,l=r*o/4;for(i=0;i<t.length;i++)a[t[i]]={x:l*Math.cos(s),y:l*Math.sin(s)},s+=u}return{positions:a,radius:o}}(t,e,0,1.25-(5-r)/50).positions},radial:function(e,t,n,r){return function(e,t,n,r){var i,o,a={},s=0,u=t.length-1;do{i=de(0,t,n,u,a,r),s=Math.max(i.radius,s),u=i.index}while(u>=0);switch(t.length){case 4:o=2;break;case 3:o=2.5;break;case 2:o=3;break;case 1:o=1;break;default:o=2}return{positions:a,radius:s*o}}(0,e,n,1.25-(5-r)/50).positions}},v="#arranged#";function m(e,n,r){var i,o;t(e,function(e){e.arranged?(i=r[v].x-n[v].x,o=r[v].y-n[v].y):(i=r[e.c].x-n[e.c].x,o=r[e.c].y-n[e.c].y),e.x+=i,e.y+=o})}var y=k(u,{tightness:5,position:"average",x:0,y:0});r.trigger("prechange","arrange");var b=o.v,x=A(y.tightness),w=p[y.position]||p.average,E=g[e]||g.grid,M={x:Number(y.x)||0,y:Number(y.y)||0},T={x:0,y:0},_=C(i);if((_=function(e,t){var n,r=[];for(n=0;n<t.length;n++)e[t[n]]&&r.push(t[n]);return r}(b,_)).length){for(h=0,f=0;f<_.length;f++)h+=b[_[f]].size,T.x+=b[_[f]].x,T.y+=b[_[f]].y;h/=_.length,T.x/=_.length,T.y/=_.length;var S=E(_,b,h,x),I={};t(S,function(e,t){b[t].x=e.x,b[t].y=e.y,I[t]=b[t],I[t].arranged=1}),function(e,t,n,r,i){var o={},a=[],s={};for(f=0;f<e.length;f++)s=re(e[f].verts,t),isFinite(s.width)&&(a.push({x:s.x,y:s.y,width:s.width,height:s.height,id:f}),o[f]={x:s.x,y:s.y});s=re(t),a.push({x:s.x,y:s.y,width:s.width,height:s.height,id:v}),o[v]={x:s.x,y:s.y},w(a,{ratio:y.ratio,centre:n,absolute:r,specialId:v},function(e){return i({packed:e,original:o})})}(n.findComponents(b,o.e,a),I,T,M,function(e){for(var t=e.packed,n=e.original,i={},a=0;a<t.length;a++)i[t[a].id]=t[a];m(b,n,i),U(r,b,{},o.extents,[],y,l)})}else l()};var me=16e6;return r}var va={"Arrow-ne.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAARVBMVEUAAAAAruoAruoAruoArukArOsAre8AruoArusAr+0Ap+IArusAruoAruoAr+oAruoAr+oArusArusAreoAruoAruoArurGDVJ2AAAAFnRSTlMA7PlILTQSzUApCPry5LWHbmZYV56dONEurAAAAHFJREFUKM+90DkOgDAMRFGzZQOyQu5/VCRiVwzp4LdPsqyhj3MpG6vedBprreOu/RFiNg6pZKijhToaqaOBgK6MJ8BlY/TAhsppbNt9eYc2zG0NbPyzwtbUQmM1yEQLMtGETHIPA81sMKXFsLJhtfRjF/wgC8yO94CNAAAAAElFTkSuQmCC","Arrow-nw.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAPFBMVEUAAAAAruoAresArusAruoAqvEArusAresArusAp+IArekAruoAr+oAruoAr+oAruoAruoAr+oAresArurF+043AAAAE3RSTlMA7jL5SBJYQSwI8+TOzLWeh29nYHqaQgAAAHNJREFUKM+9z8kKwDAIRdHXIVOnDP7/v7Yk2QRU6KK9Sw+I4peMd7aEYRSczSle574Q0bJiyFGPMVjFkBVDUgxRMVwdt5nBk3oTo3vdufHafp8nTk2/hVXfjFdXTVBbTdDymKgBUBRv1St6GIgqG+ANPuwGG+MKJZ7NkmMAAAAASUVORK5CYII=","Arrow-se.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAP1BMVEUAAAAAr+oAruoAruoAruoAruoAsOkAr+sAreoAr+sAruoAp+IAr+sAruoAruoAruoAruoAruoAreoA//8Arur2XPH+AAAAFHRSTlMAL/nsSOsSaldAKgjx48/MtJ2GARaOxv8AAAB2SURBVCjPvcs5EoQwEENRYYxXGDbd/6yzdYCrmiaCH+qVcGehGPYaunMjT7UMNLS71r7RaqiPx2/fqHcJiooxQ1ExFmj6Nwao+jO3Q9Pxa5wARaUZio6Ci4LeCa6GcTOM0TAmw5gVc9O8rFtMuTZWP0sJOx7oDS3DCuS8EfUUAAAAAElFTkSuQmCC","Arrow-sw.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAQlBMVEUAAAAArusAruoArukAruoAruoArusAsvEAruoArusArusAr+0AruoAruoAr+oAruoAruoAr+oArusAn98As+YAruriSELzAAAAFXRSTlMA+Ugt7usyEc1XQCny5LWeh25mCArMFThRAAAAc0lEQVQoz73JSQ6EMAwEQAdmyMYO/f+vIpClFiLxDepa8qXW16/7BV8/gPs8/LNxrajNOFmb+kl0ujxK0OVRhi6PPM7l3blreTcDzu2LJwGKR6Nez6NJ0zWFnGHsAmMjjE0wdk9xmacxDI5b4HOK6ybvOgBebguIlLvi1QAAAABJRU5ErkJggg==","Arrow.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAABACAMAAAB4KUSAAAAAflBMVEUAAACVlZWRkpWSkpaQkpWRk5WQkpWSkpWQkpaPj4////9wcHCRkpX9/f3S09TU1NWztLaSkpKGhoaPj492dnb39/empqahoaGJiYmDg4NycnLt7e3j4+Pc3NzExMS6urqysrOXl5eLi4t8fHz7+/vx8fHg4OCrq6vo6OjGxsZuZdNVAAAACnRSTlMAGLS4bEXLqI8QHTDIvAAAAPxJREFUSMft1rlSw0AQhGEZMMe21rJ1opV1IWzD+78gVaNIimaagnKgP9vgizqYjbb+ptdHbfuF28X61vCQaCrj5zX0TtMhfrgv6Fl49CSsBxaiY2FIKJgC+ZmEmBoSIi1IiNOnGb5DqjwJMbAQHQtDwkGZ0wI/MCdzUlDmpKDMSUGZUw0zLBpYiI6FIaGgzKmDJ8zlwFRVVVneem+AUri4OT0Ms+ytcGozgam3wbRxHaTWBMfCuSIXWBrgeJNXKTAv9PDqpBbSt/nM+VpgZoauh/Rlhhdx49kM3Yi6b5hTfm39nX8e/gcOR03xCr7F6l6iRfsnbbtoa+u3/QB6AlluQsKWJgAAAABJRU5ErkJggg==","Hand.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAABACAMAAAB4KUSAAAAArlBMVEUAAACVlZWRkpWSkpaQkpWRk5WQkpWSkpWQkpaPj4////+RkpVwcHD9/f3S09TU1NWztLbKysqzs7Px8fHv7+/u7u7p6emWlpZzc3PS0tKDg4P5+fnCwsKioqJ3d3f19fXm5ubc3NzY2Ni5ubm2trapqambm5uRkZGLi4v8/Pzz8/Pr6+vi4uLGxsa8vLyvr6+Ojo6AgIB4eHh0dHTo6Oiurq6lpqd9fX2Hh4d7e3sYjczTAAAACnRSTlMAGLS4bEXLqI8QHTDIvAAAAWNJREFUSMft1dduwjAYhmE66HA+QzMgk+zF3tDe/43VQqlQzIGdVEgc5JV+Owd5pESy5F7Xffp4ka1fc0+KfDwcDGU6KW88pESmgfLcQdbhmB8PLaBtAbDshtDwEh+lVsJPPKMBtHcAHJe4DoCdLQ3HezimNWFPE8t0sB/LwgzKlAwvcEimCjJZaGLJ1nU1SxSBJFSgslWrRgVQhC0h/HELWC7CDcwWMCJkAYs2h+wrR8DdYLhKhkVzSBMLrOZQBUqzgn8TGxJwi5SS+AJriWAAuGxLG0Md0NlGi6aQOjhd3rM5OBdAYle/Rzm4gC84chn8OblNxUYA3W9sprdwjUwASbiHdgtNeCJIPCDmHf1BJIQ0x3nGQR0IhJDMtshpHcZwiBiSCPDqcIVcBpIU1nJkXIvOWElBOgHXNhDBSqa7mjPn0rcVnenX3Ee/kR8Xal8yKRz8VKR779Xqv8r21Ovq+m+/Ii1ihjYVGpMAAAAASUVORK5CYII=","Nav-Control-Head.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABoCAMAAAAqwkWTAAABDlBMVEUAAACRkpWWlpqRk5WRkpWRkpWRkpWRkpWRkpWOjpSRkpWRkpWRkZORkpWRkpWRkpWRk5WRkZeRkpWRkpWSkpWRkpWRkZaRkZaRkpWRkpWRkpWQkZWRkpWRkpSRkpX///8ArurQ0dORkpX8/v8Jsev7+/y/6/rY2NqfoKLq6usiue3f4OHg9f1TyfH4/f7Hx8nT1NWurrHp+f2UlZfw8fFNxvHz8/T29vfm5ufi4+S8vb6qq62Wl5qW3vfu7u+3t7nl9/2s5fiT3faJ2vVizfIpu+2am57y+/4RtOzE7fpr0fPc3N2xsbSnqKqD2PUZt+y36fmN2/bCwsSkpad+1vRGxfCk4/hy0/Q8we/Kysxfm/hGAAAAH3RSTlMA+QdRsCLmzbkMj+wZ8dWdeBRpWklCNCzcwXI8h35gX/9DngAABnpJREFUaN61mmlD2kAQhjfcyOl91oE3pAnFChTKXdFK8a7Wq/r//0g1tZiwTDZYeb7y4WF2J7Ozk4gpCC9tZGLr0bVEKrIWXQ/NbW/Oi/cmsLwV1SCTCC2svp9lfiFmS6xqJ3/WLu41mvViq2Q+9i96eCKSWQq8RyzBkAbUuuW2QTINs2M9u+ZW/jeYDwmg1y8ZxFPPdwFEg/+j2dKAqmmQir2yBaQX37iC8WdNv0i+0M0bYO1NUQUjqHXq5J9SFwiFp9WEQ0Cf0fAqC9qH6dZvUYNVoqkxyjVEpwgqkAHKbArsnpzs8mnRRSroe9miGLaJ4+Ayl7u84rOiDMz5W77NFKpN4viVs/nssVNDxOJCzZKGa93TY/ONNzUuEFWX220NeVJ4bL4Ti1HFmiolFlAzlR61qY+ItymIWkntUZv0DtaSgmdZwxmxHL461KY+onxGrKRQ8e1R71MswBXrCMpKj3/TBeYYUQh9X55CwZepMcTkGrEBy/Dj+bS/88mXqYRUeNIGaTX+7Ll3eoicpgPeVEZU3qZA2uNB/XLs8rhMx0d86nWRlURZVInlwO1xm66IZa+mjS9e2Gvh6N7tcZsOiKeMkJRx18SzU3B63KbCPvEY1ljmLdsZx3M78kimQ+/THWuufIih4t3kfH9Kh8HRWIp8fkqFb+RNF4vO1JYCklU7E7LraEdXNixIu3YoT7PiwrFLqxgaNCvOEB2J5lCmmaFbWPlXFBKo0+woj6p4EF2aIXUkAlIqzITuSzrEtVqTZkn+pQ4tTSqn+v4uvYGjLyTTQILLOf3Xca7we5LKqBdbreKeMbkk3j2VqY8kYcG+UUfRGvd8zj1zJ/n3zvIvmEWDO7XkotTBxnNLgp4ueSYeAA0z76BSHC8/A65bNhGyk7vKeHKn5KSYH6M0ZvrE9eVNpOyj9ZrxuEWlvMTYNfpHjjMNkRQigwrjyTn3tZWfwJkrpt85ztTFshDraDOegWuYMJGWK7c/caYOFoRIoDHZ83XXebvPT6bpSm/O9Ig5EUeP88iJIFMiP6YzhEQYltpDZp7D8GNqY12swlJ7mnmWIvkwFREVm7gYPXCMx145fu140/2okcSaWB49rwesh1q8yCTG5Gz5GoiIIM7pL19ZD5V4UYU8TN9HpUFzHBIPTDftWyRvwc+RKCE2R+f46WvI46W+PcXS0c+c9I/riIgV3IyqvGxS79GZh+fuNevSzufoY4Ez1XlRi/f8+DL6o4iKJIakNOm8qOHDQyXEhNBgqE0lNhd0Hx6qICNEGkVSmppsYfDjoWtkhQjBpMmmE3VIpiugQ8ZD5wgKsYUyTTZdOi4qhqneoROnR26DttEnxnToXLyKcuHuOI8BBIRdvhnTwNUDVRQeumQ81P57c0mgzphuyYZZvUqD3Dy4PPJ9IoQKTTQVdsb7R9OhaenSNILxUBVL9tBRnjWdXD57DuSOvN42bUtp1BRLbdCD5DFqmj26C2OoS8364eB2h5sdGDoxnJye3ss/lv5dLtNo0yzpIPtvftahGWL0kBQ2SfQMmh0mYq9zE5Nmx/nr7GRxlrflOlKjcXEgMsN06GDLOb+v0oxo1LR5IRwhFWk2XGPOPSE+J092bgeH0njr6vT0QBVQT0s6RfEISuTBQeH5fDohJ7sDu9PxHhP0x6fsQc+J3U5BPt13Xzrb316eNiJx4SaGsmLSaZskT66w6zlSXRTymHiPOAavHYvLY7PvNdiKCYksbgz+hYHT5PYc66ynBS0sZGJ8bT26dJlsj/rlRNPCtphAMsKXvBNnv+fyfGYD0s+RYd6HoVckCbnfu5I8zAaluXdiWQzrapON2lNBalVwZGA1edNUnjNoy4InhAuDN03hadcQFB4E1nGhjkntKfWwIDyJr8NS7ZPaYwIbQkEghKEi95SePLRFoSaDnsmb1B6jA21J+OED0DFYk8pTvEFkRfhjOYGbPc5k390HrKdSQ2xe+CW5jhr3LciX04ev7Lm6VwWyYho+MF+3KL9tWdsU0xGOAedTdSy6yX2to/4CCect39HkLSAWFm8hvhEBuqZBahqPQ2B9SbyVwEIE6HXauncwlSqAmGJzVKrFGACrY9aZjWk9VmtAKrMi/ptkNo1nWb/sfvPRbFeuqz0AWigYEO9DeCGUgM3Quqie96vdG6sHm/RcMC7eldXtrVBawyupaCYbTIrZEEiGV5aDi0ubq+F5MRV/AMrHP3wtA6vJAAAAAElFTkSuQmCC","Nav-Control-Short-Zoom.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAACACAMAAACMX59YAAABU1BMVEUAAACOjpiRkpWRkpWSkpWRkpWRkpWQkJWRkpWRkpWRkpWRkpWRkpWRkpWQkpWRk5SRkZWQkZWRk5WTk5WOjo6RkpWRkpWRkpWRkpWRkpWRkpWQkJWRkpaRkZaRkpWRkpWRkpWRkpWRkpWRk5WRkpWRkpWRkpWRkZWOjpSSk5aRkpWRkpWRk5WRkpWRk5WRkpWRkZWRkZWQkpT///+RkpUAruoiue2Q3Pas5fjFxceVlpj6+vqkpacRs+yhoqT9/v78/Pzx8fLk5OWur7Gen6H8/f7q6+u+v8D39/je3+DW19jOzs+7vL6nqKqcnaCXmJvR0dLIycq4ubu2triwsbOrq66am51+1vVo0PPo6OnCw8Wys7XS8fux5/nt7e4qvO4LsuvLzM3w+/7o+P3Y8/zH7vu56fma3/f09PROx/Ezv+4Zt+wEsOvg4OHa29yX3vY9we9ZHrf1AAAAM3RSTlMABfp2HfA8IWdV6+Cij09JQjArGArm2dLFYFo0JRP057CpmG7Xy5WADvb2vLZ8cKeJgoGIgHZSAAADoElEQVRo3u2Y2VfaQBSHQyCCCIgiitRq1bZ23+anLSFlF1BZBBG3Vu2+L///U0NJThNT7kx8as/J9wTk3C+ZO3NnbpD+aXyBYDDou2xwLHpjETry3Ep6xnX41bUl6LRyuQp0lGjA3d39i4DWKWWZTvZoZx+QH7l4ikAKKB8xC6ddYHZaNH5qCZUtdoEjDbcnBeMV9OrMQbYBWcgQDGNvk/2NDG6PCeTvBk6MeAc1TFzlCh4jl7XEvH5t+ZIvI8KdgDsoWUIOvq4fWr4WVVzhCKLYswS8WNd5b0vDNTp+RkGV/eHZQPDU8kNdRZAUpLHPKAHr4j4piGCXFmwhRQomUKUFWVWmauIW1DwtYBqmCME0NDbk6dmGzpeB4Png09mBYT5BjBCMYd+8tQPjQRqYFxEcOgWfRARTaLLffHAKDoZX9jBOCBLoG6v+4MtznfNB5Png08ahUWFNkBWp4CM9C/k2yIK8h21acIRZicKPLi3IYIWuZqh1SrBZQVwiuYcOJdg2RkCthPbHC/vBS0sl5DAvcbhm21EO9QVk2SGPMcc9KYOKraLfvrXVsnxF4jIOYyodlFT4JQH8MJ/BzpaKm5IkaGhk2QUKGZjxfNKLaG3bT5fvOch+SZjpFJDrnDKD4o4GzI5JbpifA9DqHWcyxycVABMPXHc68UgSBuFrMSKcIBDz64wvSP8zMwtXpgKXbRSvhpYnMGwUb066l0wvywDUSlNrQSe8dstVeCIC4GS7mGc6hepgISmrLp5iMgz1uGirxB6QEu5WQ0Cv6CjGCpKCreYq8Io5qZcRpk5m/o5S2MOSwCiCinl/p6GMu3zBXXTZKOoVhPgD6NfZSL5D4fWqc9hlBGWs8Q6WVoESlLBEr6cVZBhJDnFun0fSQZQ+nft5WlDCDbIIUGY0Wdyhq6DGhrz7uWHjs3lI95GgDiUzh2/O1y/ywszigojg/bqDHyKCVXMIb746BO+GV1rkEGLosSEvP2/YOPtgJlH2kd12hdFUcZ186VNQpAU7iHBapF1asI80p5qbjKKIxRlS4EviGyVoYEWieQBtk0ihKgc5At8sOmwUhSai/MYCKLHRb98CJ9wTtKujptBsNGkeov23ROYzwLgkgi8CZAqOCSxDTkuC3Jehbdn3kZ02ki4avbHrgPbq1Ex+qdYGlhOSC3yrSQD9cqNW6zZVAKm4+7/ClsMwuB4lsk+xMBkKhebjCcnDw8PDw8PDw8PDw+My/AIFurvICRtjawAAAABJRU5ErkJggg==","Nav-Control-Zoom.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAEgCAMAAAAzNIUCAAABQVBMVEUAAACQkpWRkZaTk5aRkpWRkpWSkpWRkpWQkJWRkpWRkpWTk5WRkpWRkpWIiJmQkJaSkpaRkpWQkpSRkpWRkpWRkpWSkpSRkpWRkpWRkpWRkpWSkpaRk5WRkZGRkpWRkpWRk5WQkZWRk5WRk5aRk5SRkZX///+RkpWxsrTHx8kArurQ0dP9/f4iue36+vr29/fY2drd3t/4+Pjx8fLo6OmUlZj8/PyQ3Pbl5ues5fj09PSrrK7r6+zi4+Tb3N3U1NbNzc+cnZ8Rs+y3t7mgoaTu7u/k5OXa29zW1tjCw8S7vL6lpajf4OHS09WZmpyXmJvv7/Ds7e3KyszExcawsLOjpKaB1/WoqKuen6EqvO6/wMLX8vxoz/NPyPEKsuvw+/626Pl31PRq0PMZt+zO7/uj4veb3/eX3vaP2/aO2/ZkzvKuoX/yAAAAJnRSTlMAmGYM/fBd+iHZdRX26QUvt6KIgFVMHODIj0M8KgfFr2w00Kc6nNlHBgsAAAT9SURBVHja7ZxpV9pAFIbTyiII7mvVql3mRTMGAsRSwYWCoqC4r612X///D+hwIKfR6A04nlNp5/kky33IZO5cvORMtAdNd6eg+67BQ2OjEQiCzx4FOloO7xqIQpAvFk8h8I91tvbp4QhQ2c8YTGCkV7NAsL+Foxh+ChymmYO1AhDqaTa+J4pTk10jU0HkSXPxM34cxpkLo4zgUDPxnVEUOLuJA0ReeMdPjiLG2c2cY6TLUzCAI8MR8/694wE/RJ/nBESw7gg5vpz75Hi4a/lmPARjKDgC3s4JPjiemMUUHd/hR4794XVN8MrxRNzy0SkZQJZRAlbAACnog04LtvCUFIwgRwsMKzhJnQKfxWkBOwK1JCZwxOq8OpsXfK4J3swLzo4b5hiofH6BrP3RLhoHUkaAEIzbgnduwYUteEwtZFTqb/vmFhzb8zhIFTJUG1n/8fMbwWUt8rL21/y7hforJxjXCPxYpGeB74BckL1I0II0QhpFGAVaMItHdDnyWXFKwE/hURh7sU8JEvYIiEzYcZzGL9fqgVEUaeTBlH0W7IS6cKyOTTzr9izKfujOmvTW8cBEcEbzZNCHBLuRjIWw1gRhQL8p3rQcU0gbfCgnr4cvHMAZTxOIIL/CmZPlIoJhrWkmRoHi/p4dnVqtAKFxrRUCfgD5w82Dg83YKQTPJ7XWeIRKHg2qsRNRRloWzLKUuSoo7YpKeDeBjRLICbghJ0it6ImkhICv6Lq+JSEwdEFCZggJIcjICIyl5TRv8zxQAiV4EAJ7McktZ+mCIl3SpIuqZFlv9zxQAiW4H0EqF5cSrIvlnJIQLOiCZVlB6S8OQbCWXmz3PFACJVA90wPpmZJmYl31TEqgBKpnEgK+LQSmzBDWtvUNuZ5pIc7bPA+UQAnuqWfak+uZMu3fMy0JwZqMgKueSQn+EYFsyyO+nUuG7HJelxDEZQsK3xCCtMw5iJuJjGp5lEAJ7qXlMXMyAl5refZkC4op2zMtyZyDnOi5DNXyKIES3INgcc1gkv3CdlxCkNQFW7ICU2YIpuxlIr6Xjrd7HiiBEtyPgMsJdld0c0GmZ6r9pppp856ptKEuEymBEtyHwFg39/73nimty14mSi6qnkkJlOCf6JmkKxJbFoJdGQHPravLRH9fwJN3T+WD5c1sHoBVjO1nWxf0YQeCnWrVQo2+yZbCO/p9wMnsUrw2ilTpPA+MDLYQ3xMCCs4ts7x0BDzvaDZ+KIJKhl2F6zt4Ntxc/GAQZYO52K1gpCnDk2B9Bl0kswg1MYrhKDbZzSQrmPIW9CLGbmOxioDnABx7NN1sIOo1iKdYZQQnmKbjZ1A1KIGJEVowhnNGwU8xTgpCSDOSTfRT8V3Y4bTAY9f4E2QZTRx+SvAY5cZYj8/mr3D2s2GokvuVw3YW/phz8bX+ShGdpOCg/rYLt+CXvW99ghBM27N47BZ8r7+SxzC1ku2FwD/NX+NjfXoWLN8kVYpQZDQ5esdztx+LtEBHn8diXqEFh3jseQMEihSCXV63YMjQS+G5RjNAHkLK8vV4CDqi2HbFue9jQaaClbtNsI9ol+bJS+R3b6uIviHNm+5e5HM3pwDCzX2z9sJyZ0OyDN+A1hzdL4Hs1dLGN/KIBLSmCUSBWMn4s+n7CBid0Fqga8wPWCfl/dXV2UIRQKjlf1E6pkeDaOCfIs4+5Xgx3d/fPxCY0BQ0vwHPu0gIqkZhFgAAAABJRU5ErkJggg==","Slider.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAYBAMAAAB+X3LOAAAAIVBMVEUAAACRk5aRkZSSk5OWlpaSkpL5+v+RkpW7vMC1tbmhoqXGrO6IAAAABnRSTlMAaFgoEQ5LYgUfAAAANElEQVQoz2PADpgFMYADAwNjOQYwAIl2oAGwaEUaGlg+3EXLZ6KBcgNcYcashAECGAYDAADj/n4pps+kzwAAAABJRU5ErkJggg==","TBFit.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAWlBMVEUAAAB4eHh4eHh4eHh2dnZ9fX14eHh4eHh4eHh4eHh4eHh4eHhwcHB4eHhwcHB4eHh4eHhycnJ4eHh3d3dxcXF4eHh3d3d3d3d3d3dubm5xcXF5eXl4eHhxcXE+JRc1AAAAHHRSTlMA9qd7GAewklkjEvLn28fArJqNbWZkUi9QOjlR6dZl8gAAAVBJREFUSMfFVtuWgyAMXC4V1LZar90t/P9vbozIulVq56l58sBMyCSQ+PURO422Vaq14+kddGFr4YKJ2hYH8FwGdOTI/JV3M6MulWwaWV1mikmeMpTTftbrZUH32XRgOezjFbsL6MgxE0XtpUbSRpbvyMpoQ24TNuFV+mi5syjuKXF3sXE2kBPCp+xB2/+UF2V0kYyqXGfXkN7XFSXlZpUIEpAsaIS4P4ic6AdmVpkqhBM6VOP2DLyFCmgCLSpsVKCv/pngrzqqsGGtdq7nj5+z3xL8+Zs/eufqEAaVhb103u8QyDo+nTIzhzfSfebwfYrgWQjd9nGRUHH4aQILqRYRLSWMw08bC6Hkt0vZm84fWtc4p2ACHBIsGk4rXDj0asCXD77e6ANCnihD0CYAtxm0kQGt8hFbJd6M8XZ/PFAcmUJHFjoUwbELDnbw1+ET9gtaEjv2MjNk4gAAAABJRU5ErkJggg==","TBNext.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAWlBMVEUAAAB4eHh4eHh1dXV4eHh5eXl3d3d4eHh0dHR4eHh7e3t0dHR4eHh4eHhxcXF4eHhxcXF4eHhycnJvb294eHh3d3dwcHB3d3d1dXV4eHh3d3d5eXl4eHhxcXGK2btVAAAAHHRSTlMA9pEkpgZ7sGxZGBOq8u/b2sC8lWRSRC8PfFBRuUo9rwAAAWBJREFUSMfFVll2gzAMxAvGZklKA4Ek9v2vWVEQslna6vUj8zXBM44lC4nsLcgHZ42xbsj/oh5dLfwCUbvxF7lCNXnUD/JKzqprq6XU7XW2yOpM3zfTetGV+KDsiukPm/5Y//jeDtXokZPFHKVGw0KhDsIqYEHvE6Zpoy3M5Dh4KJ7ZCZ5it1kPm5B+hxcsJ5FXzbqFzRA2TUgTZ1dCvAsN94wYASKXUSIgAIWyS8pI4ulnHdlD+KhihpBRpkbhRUmG8JkToxsEEVaiowhABrgRS6JwdKIuMQQbMUTnfT2zXHhfpoZwJ7aeCTIzn3CAes42houK2AKo9gFDaLcGSFDEZrQYhKWEkQESRGwtT4t1J/eGcCO23oRhG9hHYgfNTiv74rilwS4+dnlzXyDmKyoUtwmw2wy3kTFa5YtaZdqMH+dzQPPb/R7meKB4gOGOrH8PRYLS27GrFXOwMz8d3oEvPJs941PvdQ4AAAAASUVORK5CYII=","TBPause.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAS1BMVEUAAAB4eHh4eHh4eHh4eHh4eHh4eHh3d3d4eHh7e3t5eXmBgYF4eHh4eHh4eHh3d3d4eHh3d3d5eXl1dXV4eHh4eHh4eHhxcXF4eHj1iuhDAAAAF3RSTlMA+ad78rBZUSMYkgjArI1tZC8UD9valLlU9lYAAAEtSURBVEjHxJXbkoQgDERJuCiOd9fd/v8v3R01W9SMgnmaPFnQB+gQovlIPKYwWDuE6XFHvYSOcITrwlKQ10xAGsR1Rj43u3xtue+5XXekma/0lXvO+zHKQBw9AXDVud5uy4lamG1Te5YaBuDrE1seAL8n7Km311vzyaCrcubsyxCAF312ev5f4mcLk37LAdLsNoA3OcB4oEkSQaA6B4hEggW/Bsx3kqnlj44lIBJIKjGIgytAXITjswPGMjAC3VEUBMQyEAG3F8gErKYMmC9gEgvtHaAVEwPAdwAGBrn2/g7QA1YNqI+kNq1Oq/ritKWhLj51eWsfkPqJapuAus3oG5m+Veqbsb7dl38ovxODVyiUV1mISlEEUimKwCpFCqtdzIqdBbliJ7npQH8AADUuN1z9SxsaAAAAAElFTkSuQmCC","TBPlay.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAYFBMVEUAAAB4eHh4eHh4eHh6enp4eHh4eHh4eHiBgYF4eHh0dHR4eHh4eHh4eHh3d3d4eHh3d3d4eHh3d3dxcXFxcXFxcXFxcXFxcXFwcHBwcHBwcHBycnJzc3N0dHRxcXF4eHhzyzi7AAAAHnRSTlMA9ad7F69ZIwiPEJPbwG1kUlAv7+HQu6OMdFxGMR+YuEezAAABRUlEQVRIx8VW2baDIAyUXaQu9e6b/v9f3rGWggJtc/rQPHlgBpghJFZPiXrUnRCdHut70I1WbD4HU7q5ATfcoz2Hmytw6VbUoeXW8vawUqws4Qd2OkZ/AchenYaGPF4sc07uN10oImcNx4QyGVkKEzw1bMGL8tY8M8iOJXFHliw2YBHgiwxMb5TLsMT7b+FULLbDQe/5c5o+/jIMKLeREeAbT0B8pgkByGxih1wVEaaXr8RGFznVsOiA0xqv3/u0AchvrIMCEHy8/SQqdPjsEwJia1h/WbaGpzJH2Bom4cyqbEQ+VznCzjBk++gltCVCbFjrRXQwrEwIhsH8zl+7LROCYRbpQyaQj0QWTbaVfHHU1CAnHzm9qQ+I9kQBoRYBepmhFzJ6qaQXY3q5v91QZoR4uGV5gCU1RXrbTRs71w3x1+EZ8Q9bFUNUrCre7AAAAABJRU5ErkJggg==","TBPlayExtend.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAYFBMVEUAAAB4eHh4eHh4eHh6enp4eHh4eHh3d3d4eHh8fHx1dXVycnJ4eHh5eXl4eHh4eHh4eHh4eHh4eHh4eHh4eHhxcXFxcXFycnJvb292dnZ4eHhvb29vb29ycnJxcXF4eHh7Kc98AAAAHnRSTlMA9qd7F7CSUSMHbRD1WPLbwKyNZFrv2ryVMC8nRUR/XsosAAABT0lEQVRIx8VWV3bEIAxcinsvKXayzP1vGROw2WQBW1+rLz+YwdJISNxeYsXSlEKUzVJcQVfzwGCtHubqBJ5zhj/GeB6By9Sgup6PI+87Q0llCJ+1ej+ZDoCcEgagzfx44TtOppoifNJwAEnuCSsBwJ8F03gR/jX3LNZZMLj66bAMgAcf3JZtwJ/SOdA+ypECifdo9W0/EiB9EAJgud7e7B/h7euAwEnINd1PUO/V7oRTqmJgMkRQH4UJcwPtlTjrCIIE9XlEMdvVAZgiBGWkmoDBFgUDZIxgpJJAbbxbgO4WI1ipOmD9XWyAPkqwUvVAY7J5CKb8ZqXiQLmnfYwSrFQjIMgEskvkoMmyXkzc3SWOXhr04qOXN/0CnV9RBzlvAndPEyC0GXIjo7dKejOmt/vzgYLNBHVkUYciceyeD/baDfamuvR0WM3TYS1ur7AfgEVDcxHQFLwAAAAASUVORK5CYII=","TBPrev.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAXVBMVEUAAAB4eHh4eHh4eHiBgYF3d3d4eHh4eHh3d3d4eHh6enpvb294eHhxcXF4eHhxcXF4eHh4eHhvb293d3dxcXF4eHhycnJ3d3dzc3N6enp4eHhycnJxcXF4eHhxcXFnXdd7AAAAHXRSTlMA9qeRCHuwWVEjFhDy79vZwKyVbWtkRC8mGXy8u51RKiIAAAFZSURBVEjHxVbbVoQwDLQt5S6CiMjq9P8/07JQkh6KGl92nmbptKczGxKeHoJsLkZrx2LO/qJuikFhhxqK5hd5pRUiKF39IK/Npup6bYzuu22Lqa/0Zbuu59MSHixTrgC0ZVp/Sx1Xm3WLTUWj/UJeJWzlfkGfA9P8oBh23ZF4qMpLc+p0WAkgrU8v1218xBuxI5CWx2G8X/bz3Z2Yd25YEN4Ay+fj2REjCUiio+3Ni3PE2CX0oVBQdMHs0zlH7LDpRaESi8jBq/PgjFwUOx2AiWJxKxgLmIBhv4MCForlDsYCFkBtBTIDHQvoDsYOdMAcLPQU0AbGDvTBxAhoCmgDsag8x1B3JgQUQCwqB/uvDfxKX0FGLL6S3LQ8VvkfJy8NefFReVNUxKLylr5AgleUJOImIG8z8kYmb5XUjG/Xc0DL2/0ZNj1Q4GGlI0s6FIVjVzjYhZ8Oj8A3c5hAJhDkPcoAAAAASUVORK5CYII=","TBZoomIn.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAACWUlEQVRYw+VYwU7CQBAtN2960BA8gnf8FMSDiEfxiDEx7CyLB3+ARMBfgJoICX4Bfod8BSZyKAccZltoS9ttS0tM7CZNWbpvdmffvJ2ppv2T6/mgcQ4Vdg8CBN4rjfPng4SgH47YDYxgDktX+4EhVOFwJ3B+xt7A2IK2N4O98bNY4M0T6MLCBvUFEzaANrTxPsFfNiO80zyJCM/KMDOHz2HMbkXO/YbI8RqM166bsXJ49Aw8WXODrsgGvSqyvGc5kbW0TCi+oAsk/JjnQ+1UHlciR/TV3MpY8CHnY41qWSYUo8wXf1gpKilYCYkrJxaw2Etz9qVYpL4wR5f9ifkdPIeHpWx+/5vkmPmQFnlPW+vvRZUB5B9tN+94Ri2FlRHEHKUBrVEglIVHdKMorGz3AnVJaQD98Ep+0LckjcJlHhxWYQyILEW34ZJBVEzpf21XA+jsD8KqOhc2Iv7cJmKgRgaGDnmQorUtaXEMiJwMVpts4GlFgqw8fEIZQH9MCa+46ahQxyQpA/yTGHm12eJ72oGBF1jY5liBThOubzoEdbQTM9AmPLE/A+m7KO1NTp2myQYaO90KtNSlYg9il7pcp37gJHxkGo3C/g99SltmqaYtlFOnmXjtljoivDp1JC/2zTT2KUryu074+8pRKBv9aOk7MidC+u5Mxg3eUxUgyHur0BIR1mwvofgHr3mVUHCHohCrhDJJyzuOInCKKq+vikDQ8WlqLwLh5fE4ZhmLkIoyFnTPqA1/wSGW20NJQVch/s6vdyzEHdwq8iuorz4lQB2fiol9Svjz1y+we1CD3hl6FwAAAABJRU5ErkJggg==","TBZoomOut.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAACSklEQVRYw+VYwU7CQBCFGzc9SAgehTt+CuJB1CN4hJgYdpaFgz9AIuIv1JoICXwBfod8BSZwKAccpi20FGi33RITt0nTbrpvdmffvJ1pIvFP2nOqcQllVgcBAu/lxuVzShH04ym7hwHMYbl1zaAPd3ASCZzn2QcYHmjnZbAPng8F3kzDKywcUN8wZu/QgQ7ex/jmMMK7zbQkPCvB1Bo+hyGriOz2FyLLqzBcu27KSsHRk9C25wavInPoU5HhPduJrJVIBuILusCEH/KLQDt1gSsxR2j+3Era8AHnY49q2SZ8RlkfzlhRlhSsiMQ1J3ZgsdfW7IuhSH1ljS7tJ+aP7xwONosc0z2kRd7T1kr43ss/2m7e3Rm1FFZGMObsa40coSx2RDeKwsp2L6p2wRv5QfdIGoXL/HBYBWkiQ9FtbMkgKqbpfwWNjwjrzr2wAfGnosRAlQz0XfJgipZX0kI5KWsGq0M28LQiQVZ1/sGE8AqbjjJ1jFUZ4F/EyJvNFtdpB95dvFrKXa4V6DTh2qZDUEdHmYEO4YnjGYjfRXFvcuw0VRto7NwTaLFLxRHELna5jv3AUXxkGo3c8Q99SlumsaYtlFPHmXhFSx0RfhZk/UnQrDS2LZP8rhN+zXcUyoYml74jcyTSd3cybvCeXwGCvLcLLSGxZmcJxUe8uquEggcUhVAllEVa3nUVgRNUeX1VBIKOTxNnEQgvT2chy1iE9CljQd8ZtRLBc4Lldt+k4FYh/slvIxbiLm4V+A3UVr8SoIZPBWW/Ev58+wWZNt3EgwcumAAAAABJRU5ErkJggg==","openhand.png":"data:image/png;base64,AAACAAEAICACAAgACAAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAA//AAAd/wAAGf+AAAH9gAADbYAAA2yAAAZsAAAGbAAAAGAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//4AB//8AAf//AAD//5AA///gAP//4AD//8AF///AB///5A////5///8="},ma={w:1,x:1,y:1,fs:1,bw:1,b1:1,b2:1};function ya(e,n,r,i,o){var s,u,l,c,f,d,h=new Map,g=new Map,v=new Map,m=new Map,y={},b={},x={},w=null,A=2,E=new Map,M=!1,_=!1,S=null,I=ga(e);y.setDirty=function(e){E.delete(e),E.set(e,A)};var L=y.setDirty;function O(){W(),s=null,l=null}var N=pn({numbers:{x:1,y:1,w:1,h:1,e:1,fs:1,off:1,b1:1,b2:1,bw:1},numOrString:{p:1},negatives:{x:1,y:1,off:1,lat:1,lng:1},strings:{t:1,u:1,id:1,id1:1,id2:1,ff:1,sh:1,ls:1,bs:1},stringValues:{ls:{solid:!0,dashed:!0,dotted:!0},bs:{solid:!0,dashed:!0}},colours:{c:1,c2:1,b:1,fc:1,fbc:1},booleans:{hi:1,bg:1,ci:1,du:1,fb:1,a1:1,a2:1,re:1,tc:1,a:1},reserved:{gh:1},mapPos:{pos:1},halos:["ha0","ha1","ha2","ha3","ha4","ha5","ha6","ha7","ha8","ha9"]},L,O,function(e){t(x,function(t){Q(t,e)}),t(b,function(t){Q(t,e)})});y.graph=function(){return S||(S=ca(n)).privateSetProperties(b,x),S};var B=y.graph;function F(e,t){var n,r=1===e?t.id1:t.id2;return{x:(n=h.has(t.id)?oe(r):b[r]).x,y:n.y}}y.setAllDirty=function(){M=!0,n.privateTrigger("redraw",{all:!0})};var W=y.setAllDirty,Z=function(e,t){var n=E.get(e);(!n||t&&1===n)&&(t&&E.delete(e),E.set(e,1))};y.moveAllNodesBy=function(e,t,n){j(e,function(e){e.x+=t,e.y+=n,Z(e.id)})},y.moveNode=function(e,t,n){var r=b[e];if(r){var i=t-r.x,o=n-r.y;r._combo?j([e],function(e){e.x+=i,e.y+=o,Z(e.id)}):(r.x+=i,r.y+=o,Z(r.id))}};var Y=y.moveNode;function j(e,t){for(var n={},r=e.slice(0);r.length>0;){var i=r.shift(),o=b[i];if(o&&!n[i]&&(n[i]=!0,t(o),o._combo))for(var a=o._combo.nodeIds,s=0,u=a.length;s<u;s++)n[a[s]]||r.push(a[s])}}function U(){w=null}function X(e){Object.keys(e).forEach(function(t){w.push(e[t])})}y.setLinkOffset=function(e,t){var n=x[e];n&&(n.off=t,L(e))},y.ensureObject=N.ensureObject,y.ensureTypesInArray=N.ensureTypesInArray,y.load=function(e){if(e){b={},x={},Me(!0),Ye(),N.typeCheck(e,x);var t=N.filterNodesAndLinks(e.items,b,x,{selfLinks:f});x=t.links,b=t.nodes,y.reveal(e.reveal,!1),N.ensureHiddenItemConsistency(b,x),S=null,U(),function(){for(var e=Ie(),t={},n=0;n<e.length;n++){var r=!1,i=e[n];if(i.length>1){for(var o=0;o<i.length;o++){var a=x[i[o]];a&&(r=r||T(a.off))}r||(t[n]=1)}}De(e,t)}(),W()}pe()},y.getRawItems=function(){return w||(w=[],X(x),X(b)),w};var q=y.getRawItems;function Q(e,t){e[t]&&Ae(e.id)}function K(e){return e&&!!e.parentId}function J(e,t,n){for(var r="x"===t||"y"===t?Z:L,i=0;i<e.length;i++){var o=e[i],a=b[o],s=x[o];a?(a[t]=n,r(o)):s&&(s[t]=n,L(o))}}function $(e,t){return!!e[t]}function ee(e,n,r){var i,o=C(e);if(J(o,n,!1),N.ensureConsistency(n,b,x),r){var a={},s={};for(i=0;i<o.length;i++)a[o[i]]=1;t(x,function(e){if($(e,n)&&!$(b[e.id1],n)&&!$(b[e.id2],n)&&(a[e.id1]||a[e.id2])){e[n]=!1;var t=e.parentId;t&&x[t]&&(s[t]=!0)}}),N.applyPropertyRuleToComboLinks(s,n,x)}}function te(e,t){J(C(e),t,!0),N.ensureConsistency(t,b,x)}y.defaultValueFor=function(e){switch(e){case"e":return 1;case"fs":return i.fontSize;case"off":case"b1":case"b2":return 0;case"x":case"y":return 0;case"w":case"h":return 1;case"bw":return 4;case"donut":return G({v:[]},N.donutDefaults);case"ha0":case"ha1":case"ha2":case"ha3":case"ha4":case"ha5":case"ha6":case"ha7":case"ha8":case"ha9":return{c:qe.transparent,r:0,w:0};case"fi":return{c:"black",t:""};case"oc":return ln;case"c":case"b":return qe.midgrey;case"fc":return qe.black;case"fbc":return qe.textback;default:return}},y.bothEndsShown=function(e){return!e.hi&&!(b[e.id1].hi||b[e.id2].hi)},y.neighbourLinkIds=function(e){return B().privateNeighbourLinks(e)},y.privateGetLinksBetween=function(e,t){for(var n=B().privateGetLinkIdsBetween(e,t),r=[],i=n.length,o=0;o<i;o++)r.push(x[n[o]]);return r},y.bothEndsForeground=function(e){return!(b[e.id1].bg||b[e.id2].bg)},y.resurrect=function(e){ee(e,"gh",!0)},y.ghost=function(e){te(e,"gh")},y.show=function(e,t){ee(e,"hi",t),me()},y.hidden=function(){return e=[],t(b,function(t,n){t.hi&&e.push(n)}),t(x,function(t,n){t.hi&&e.push(n)}),e;var e},y.hide=function(e){te(e,"hi"),me()},y.each=function(e,n){e.type.match(/^(node|all)$/)&&t(b,n),e.type.match(/^(link|all)$/)&&t(x,n)},y.setItem=function(e){var t=a(e);N.ensureObject(t,!1,x);var n=null;if("node"===t.type&&(n=b),"link"===t.type){if(n=x,!N.hasValidEnds(t,{},b,f))return;(b[t.id1].hi||b[t.id2].hi)&&(t.hi=!0)}if(N.setZeroXY(t),t.id){var r=n[t.id];n[t.id]=t,r&&(r._combo&&(n[t.id]._combo=r._combo),r.parentId&&(n[t.id].parentId=r.parentId),r._offset&&(n[t.id]._offset=r._offset)),t.hi?N.ensureHiddenItemConsistency(b,x):O(),me(),U(),L(t.id)}pe()},y.type=function(){return"LinkChart"};var ne,re=y.type;function ie(e,n,r,i,o){var s,u,l,c,f;for(s=0;s<e.length;s++){u=R(e[s].id),c=[],u&&(n?(f=new RegExp(u,"im"),t(b,function(e,t){f.test(t)&&c.push(e)}),t(x,function(e,t){f.test(t)&&c.push(e)})):(b[u]&&c.push(b[u]),x[u]&&c.push(x[u])));var d=a(e[s]);for(l=0;l<c.length;l++){var h=!0,p=c[l];i||"node"!==p.type||void 0===d.x&&void 0===d.y||y.moveNode(p.id,void 0===d.x?p.x:d.x,void 0===d.y?p.y:d.y),t(d,function(e,t){if("id"!==t&&"type"!==t)switch(h&&"x"!==t&&"y"!==t&&(h=!1),t){case"id1":case"id2":if(e!==p[t])throw Error("You cannot change the ends of an existing link");break;case"parentId":if(o&&e!=p[t])throw Error("You cannot manually change the parentId of an item");case"hi":r.all=!0,r.hi=!0,p[t]=e;break;case"oc":p.oc&&(r.all=!0,p.oc=H(p.oc,d.oc));break;default:dn[t]&&(p._noHalos=!1),ma[t]?r.positions=!0:r.all=!0,p[t]=e}}),h?Z(p.id):L(p.id)}}}y.setOptions=function(e){f=e.selfLinks,d=e.marqueeLinkSelection,i.setOptions(e)},y.setLastHoverId=function(e){ne=e},y.showFullLabelOnHover=function(e){ne&&L(ne),e?(L(e),i.setSpecialOptions("showFullLabel",e)):i.setSpecialOptions("showFullLabel",null)},y.serialize=function(){return{type:re(),items:(e=[],q().forEach(function(t){t._combo||e.push(a(t,"d"))}),e)};var e},y.validateCombos=function(){var e={};function n(t){var n=t.parentId;if(n){var r=b[n]||x[n];if(!r)throw new Error("The "+t.type+" '"+t.id+"' has parentId = '"+n+"' but the parent item is not present in the model.");if(!r._combo)throw new Error("The "+t.type+" '"+t.id+"' has parentId = '"+n+"' but the parent item has no _combo property.");e[n]=e[n]||{},e[n][t.id]=!0}}function r(n){if(n._combo){var r={};(n._combo.nodeIds||[]).concat(n._combo.linkIds).forEach(function(t){r[t]=!0;var i=b[t]||x[t];if(!i)throw new Error("The combo "+n.type+" '"+n.id+"' has a child item '"+t+"' in its _combo property, but this item is not present in the model.");if(!e[n.id][t])throw new Error("The combo "+n.type+" '"+n.id+"' has a child item '"+t+"' in its _combo property, but this item's parentId property is "+(i.parentId?"set to '"+i.parentId+"'":"undefined."))}),t(e[n.id],function(e,t){if(!r[t]){var i=b[t]||x[t];throw new Error("The "+i.type+" '"+i.id+"' has parentId set to '"+n.id+"' but is not included in the parent's _combo property.")}})}}t(b,n),t(x,n),t(b,r),t(x,r)},y.unsafeApplyChanges=function(e,t,n){var r,i,o;for(r=0;r<e.length;r++){i=(o=e[r]).id;var a=void 0!==o.x,s=void 0!==o.y;!a&&!s||n?o._combo&&p(o._combo.e)&&y.moveAllNodesBy([i],0,0):y.moveNode(i,a?o.x:b[i].x,s?o.y:b[i].y),G(b[i]||x[i],e[r]),t?L(i):Z(i)}},y.setProperties=function(e,t,n,r,i){var o=a(e);o=C(o),N.ensureTypesInArray(o,!1,x),ie(o,t,n,r,i),n.hi&&N.ensureHiddenItemConsistency(b,x),(n.graphCache||n.hi)&&me(),pe()},y.merge=function(e){var n=a(e);N.ensureTypesInArray(n,!1,x);var r=N.filterNodesAndLinks(n,b,x,{carefulWithXandY:!0,selfLinks:f});t(r.nodes,function(e,t){b[t]=G(b[t],e),b[t]._noHalos=!1,L(t)}),t(r.links,function(e,t){x[t]=G(x[t],e),x[t]._noHalos=!1,L(t)}),N.ensureHiddenItemConsistency(b,x),me(),U();var i=function(e){var n={};return t(r.links,function(e,t){var r=x[t];r&&void 0===r.off&&(n[t]=r)}),n}();Le(i),pe()},y.firstVisibleItemInAncestry=function(e){var t=b[e]||x[e];if(t&&!t.hi){if("link"===t.type&&We(e)&&fe(e))return t;var n=y.getParentItems(e);n.push(t);var r=null;return n.every(function(n){return null!==n&&(n.hi?(r=null,!1):n.id===e?(r=t,!1):!!n._combo&&(r=n,n._combo.open))}),r}return null};var oe=y.firstVisibleItemInAncestry;y.getItem=function(e){return a(le(e),"d")},y.getItemsByID=function(e){for(var t=C(e),n=[],r=0;r<t.length;r++){var i=le(t[r]);n.push(i=i||null)}return n};var ae=y.getItemsByID;y.getAncestryIds=function(e,t){var n=e,r=[],i=0;do{t&&1===i&&n.indexOf("_combolink")>-1||r.unshift(n);var o=le(n);n=o&&o.parentId,i++}while(n);return r};var se=y.getAncestryIds;y.getParentItems=function(e){var t=se(e);return t.pop(),ae(t)};var ue=y.getParentItems;y.getByID=function(e){var t=R(e);return b[t]||x[t]||null};var le=y.getByID;y.allParentsOpen=function(e,t){return!le(e).parentId||ue(e).every(function(e){return e._combo.open&&(!t||!e.hi)})};var ce=y.allParentsOpen,fe=function(e){var t=x[e];if(t&&!t.hi){if(t.parentId){if(de(t.parentId)){var n=oe(t.id1);if(t.id1===t.id2&&n)return!0;var r=oe(t.id2);return n&&r&&n.id!==r.id}return!1}return!0}return!1};y.allParentsVisible=function(e){return!le(e).parentId||ue(e).every(function(e){return!e.hi})};var de=y.allParentsVisible;y.topParentId=function(e){for(var t=e,n=le(t),r=n&&n.parentId;r;)(t=r)===(r=(n=le(t))?n.parentId:null)&&(r=null);return t};var he=y.topParentId;function pe(){var e=new Map;ge(b,e),ge(x,e),o.forEach(function(t){t.isAsset||e.has(t.src)||o.delete(t.src)})}function ge(e,n){t(e,function(e){ve(e,n),function(e,t){var n=!1;e.forEach(function(e){e&&e.g&&e.g.forEach(function(e){n=ve(e,t)||n})})}([e,e.t1,e.t2],n),e.bu&&ve(e.bu.g,n)})}function ve(e,t){if(e){var n=e.u;if(n&&(t.set(n,!0),!o.has(n)))return o.get(n),!0}}function me(){S&&S.clearCache()}function ye(){s||(function(){s={},u=0;for(var e=Object.keys(b),t=0,n=e.length;t<n;t++){var r=e[t],i=b[r];!i.hi&&ce(r,!0)&&(s[r]=i,u++)}}(),function(){l={};for(var e=Object.keys(x),t=0,n=e.length;t<n;t++){var r=e[t],i=x[r],o=!i.hi;o&&(o=We(r)?fe(r):ce(r,!0))&&(l[r]=i)}}())}function be(){M||(E.size>100?E.size>=u?_=!0:t(l,function(e,t){E.has(t)||(E.has(e.id1)||E.has(e.id2))&&E.set(t,A)}):B().internalMarkLinks(E))}function xe(t){t.forEach(function(t){var n=e.privateGetItem(t);n&&(n._combo||n.parentId)&&e.privateSetAllItemsInComboDirty([e.privateGetTopItemId(n.id)])})}y.generate=function(e,t,n,r,o){var a,u=n.getUnzoom(),f=u!==c;return f&&W(),(M||_||E.size)&&(ye(),be(),function(e){M=!1,_=!1,e?E=e:E.clear()}((a=i.generate(s,l,M,_,E,e,t,n,Ee,h,ke,y.isTransferring,r,o)).stillDirty),c=u),i.generateHandles(e,t,n,v),i.animated()||a&&a.rebuildAll||f},y.contains=function(e){return i.contains(e,b).filter(function(e){return!K(b[e])})},y.animated=function(){return i.animated()},y.setSelection=function(e,t,r){var i=R(e),o=!e&&0===v.size,a=1===v.size&&v.has(e);if(!o){if(!t&&!r){if(a)return;Me(!!i)}v.has(i)?t&&Ae(i):we(i),n.privateTrigger("redraw",{all:!0})}};var we=function(e,t){var r=R(e);r&&!v.has(r)&&function(e){return Te(e)&&!function(e,t){var n=!1;return b[e]&&(n=$(b[e],"gh")),x[e]&&(n=$(x[e],"gh")),n}(e)}(r)&&(xe([r]),v.set(r,1),L(r),t||n.trigger("selectionchange"))},Ae=function(e,t){var r=R(e);v.delete(r)&&(xe([r]),L(r),t||n.trigger("selectionchange"))};y.hasSelection=function(){return v.size},y.isSelected=function(e){return!!v.size&&v.has(e)};var Ee=y.isSelected,Me=function(e){var t=[];v.forEach(function(e,n){L(n),t.push(n)}),xe(t),v.clear(),e||n.trigger("selectionchange")};function Ce(e){t(e,function(e,t){we(t,!0)})}function ke(e){return m.has(e)}y.addItemsToTransfer=function(e){e.forEach(function(e){g.set(e,!0)})},y.removeItemsFromTransfer=function(e){e.forEach(function(e){g.delete(e)})},y.isTransferring=function(e){return!!g.size&&g.has(e)},y.clearExtraItemsInTransientLayer=function(){m.forEach(function(e,t){L(t)}),m.clear()},y.drawInTransientLayer=function(e){if(e&&e.length>0){e.forEach(function(e){m.has(e)||L(e)});var t=V(e);m.forEach(function(e,n){t.has(n)||L(n)}),m=t}},y.removeFromTransientLayer=function(e){e.forEach(function(e){m.delete(e)&&L(e)})};var Te=function(e){return ye(),s[e]||l[e]};y.isItemShown=Te,y.selectAll=function(){Ce(b),Ce(x),n.privateTrigger("redraw",{all:!0}),n.trigger("selectionchange")},y.doSelection=function(e){if(e){Me(!0);for(var t=0;t<e.length;t++)we(e[t],!0);n.privateTrigger("redraw",{all:!0})}var r=[];return v.forEach(function(e,t){r.push(t)}),r};var _e=y.doSelection;function Se(e){var t=ca(n);return t.privateSetProperties(b,e),t}function Ie(e){var t=k(e,{all:!1,self:!0,combos:"all"});return B().connections(t)}function Re(e,t){var n=[],r={};if(D(e)){var i=Se(e).findAdjacency;n=Ie();for(var o=0;o<n.length;o++){var a=x[n[o][0]];i({all:!0,combos:"all"},a.id1,a.id2)&&(r[o]=1)}}t(n,r)}y.privateSelection=function(){return v},y.moveSelection=function(e,n){var r=[];v.size&&(t(b,function(e,t){Ee(t)&&!K(e)&&r.push(t)}),t(x,function(e,t){Ee(t)&&(b[e.id1].du&&r.push(e.id1),b[e.id2].du&&r.push(e.id2))}));for(var i=0;i<r.length;i++){var o=b[r[i]];y.moveNode(r[i],o.x+e,o.y+n)}},y.removeItem=function(e){var n,r=C(e);if(r.length>0){for(var i={},o={},a=0;a<r.length;a++)x[n=r[a]]&&(i[n]=x[n]),b[n]&&(o[n]=1);t(x,function(e,t){(o[e.id1]||o[e.id2])&&(i[t]=e)}),t(i,function(e,t){Ae(t,!0),Ze(t),L(t),delete x[t]}),t(o,function(e,t){Ae(t,!0),L(t),delete b[t]}),me(),U(),Le(i),O()}},y.selectionPlusDummyNodes=function(){for(var e=_e(),t=0;t<e.length;t++){var n=x[e[t]];n&&(b[n.id1].du&&e.push(n.id1),b[n.id2].du&&e.push(n.id2))}return e},y.resetConnectionOffsets=function(e){n.privateTrigger("redraw",{all:!0}),Re(e,De),Ue(e)};var Le=y.resetConnectionOffsets;function Oe(e){for(var t={},n=0;n<e.length;n++){var r=e[n],i=x[r];i&&(t[r]=i)}return t}function Ne(e,n,r,i,o){var a=i||function(e){return e};function s(e){var t=T(e.off)?e.off:1e6,n=a(e);return n.id1>n.id2&&(t=l(-t)),t}function u(e,t){return s(x[e])-s(x[t])}function l(e){return 0===e?0:e}t(n||e,function(t,n){var i=e[+n];if(r||(i=i.filter(function(e){return!x[e].gh})),i.length>0){i.sort(u);for(var s=a(x[i[0]]),c=s.id1===s.id2,f=i.length,d=c?20:40,h=c?0:-.5*d*(f-1),p=0;p<f;p++){var g=x[i[p]],v=a(g),m=h+p*d;o(g,l(m=v.id1<=v.id2?m:-m))}}})}function Pe(e,t){e.off=t,L(e.id)}function De(e,t){Ne(e,t,!0,null,Pe)}y.showHideBendLinks=function(e){var t=Oe(e);Le(t)},y.showHideGetLinksToBend=function(e,t){var n=Oe(e),r=function(e,t){var n;return Re(e,function(e,r){n=function(e,t,n){var r=[];return Ne(e,t,n,null,function(e,t){r.push({id:e.id,off:t})}),r}(e,r,t)}),n}(n,t),i=function(e,t){var n=[];return Ue(e,t,function(e,t){n.push({id:e.id,off:t})}),n}(n,t);if(i.length>0){var o=z(i);r=r.filter(function(e){return void 0===o[e.id]}).concat(i)}for(var a=[],s=0;s<r.length;s++){var u=r[s];x[u.id].off!==u.off&&a.push(u)}return a},y.getCursor=function(e){return function(e){var t=ze(e);return t?t[1]:null}(e)||(e?'url("'+va["openhand.png"]+'"), pointer':"auto")},y.getResizePrimitive=function(){return i.getResizePrimitive()};var Be=new RegExp("\u2704((\\S+)(?:\\-resize))$"),Ve={nw:["x1","y1"],n:["y1"],ne:["x2","y1"],e:["x2"],se:["x2","y2"],s:["y2"],sw:["x1","y2"],w:["x1"]};function ze(e){return(e+"").match(Be)}var Fe=new RegExp("\u2704(id[1|2])$");function Ge(){var e=[];return v.forEach(function(t,n){var r=b[n];r&&r.parentId&&e.push(he(r.parentId))}),e}y.startDragger=function(e,t,n,i,o,a){var s=(a+"").match(Fe),u=R(n);return r.createLinkEndDragger(e,y,t,b,x[u],s[1],i,o,u)},y.createDragger=function(e,t,i,o,a,u,c,f,d){var h=c.handMode,p=R(o);if(d&&h)return r.createMapDragger(i,o,a,u);if(ze(o)){var g=function(e){var t=ze(o);return Ve[t[2]]}(),v=b[p]._combo&&b[p]._combo.open;return r.primitiveMover($t,t,i,p,f,!0,g,a,u,v,function(e){n.trigger("prechange","resize");var t=b[R(o)],r=e.a,i=r?r.x:0,a=r?r.y:0;if(v)t.oc.w=2*e.r;else if("C"===e.p)t.x=i+e.x,t.y=a+e.y,t.w=2*e.r,t.h=t.w;else{var s=i+e.x1,u=a+e.y1,l=i+e.x2,c=a+e.y2;t.x=s+Math.floor((l-s)/2),t.y=u+Math.floor((c-u)/2),t.w=l-s,t.h=c-u}L(t.id)})}if(null!==p&&x[p]){if(x[p].id1===x[p].id2)return null;var m=(o+"").match(Fe);return m?r.createLinkEndDragger(e,y,i,b,x[p],m[1],a,u,p):r.createLinkDragger(F,t,i,y,x[p],a,u,p)}return y.clearExtraItemsInTransientLayer(),h&&null===o?r.createHandDragger(i,a,u,Me):null!==p?(ye(),r.createDefaultDragger(y,s,l,Ee,Ge,i,o,a,u)):He(i,a,u)};var He=function(e,r,i){if(!n.trigger("dragstart","area",null,r,i,null)){var o={};v.forEach(function(e,t){o[t]=1});var a={id:null,p:gt.rect,x1:r,y1:i,x2:r,y2:i,bc:qe.midgrey,bw:1,fc:qe.blue,fi:!1},u=e.viewToWorldX(r),c=e.viewToWorldY(i),f={x1:u,y1:c,x2:u,y2:c};return a.wbc=pt(a.bc),a.wfc=pt(a.fc),{rebuild:{drawOnly:!0},scrollable:!0,getCursor:function(){return"crosshair"},generate:function(e){var t=e.getLayer(),n=e.getLayerPath();e.setLayerPath(null),e.setLayer(zn.HANDLES),e.copyPrimitive(a),e.setLayerPath(n),e.setLayer(t)},dragMove:function(e,t,n,r){g(e,t,n,r)},endDrag:function(t,r,i){e.cancelScroll(),n.trigger("dragend","area",null,r,i)||(t?n.trigger("selectionchange"):Me()),n.trigger("dragcomplete","area",null,r,i)}}}function h(t,n){a.x1=Math.min(e.worldToViewX(u),t),a.y1=Math.min(e.worldToViewY(c),n),a.x2=Math.max(e.worldToViewX(u),t),a.y2=Math.max(e.worldToViewY(c),n),f.x1=e.viewToWorldX(a.x1),f.y1=e.viewToWorldY(a.y1),f.x2=e.viewToWorldX(a.x2),f.y2=e.viewToWorldY(a.y2)}function p(e,t){var r=!1;v.forEach(function(n,i){t||e.has(i)||(Ae(i,!0),r=!0)}),e.forEach(function(e,t){v.has(t)||(we(t,!0),r=!0)}),r&&n.privateTrigger("redraw",{all:!0})}function g(e,n,r,i){ye(),h(e,n);var o=new Map;t(s,function(e,t){Rt(f,e.x,e.y)&&o.set(t,!0)}),"off"!==d&&t(l,function(e,t){if("centre"===d)Rt(f,e._x,e._y)&&o.set(t,!0);else if("ends"===d){var n=s[e.id1],r=s[e.id2];Rt(f,n.x,n.y)&&Rt(f,r.x,r.y)&&o.set(t,!0)}}),p(o,r||i)}};y.createGestureDragger=function(r,i,o){var a,s,u,l,c=r.zoom(),f=r.viewToWorldX(i),d=r.viewToWorldY(o),h={};function p(e,t,n,r){a=e,s=t,u=n,l=r}t(b,function(e,t){h[t]={x:e.x,y:e.y}}),p(1,0,f,d);var g=!1,v=60,m=!1;function y(){var t;t=Math.pow(a,2),r.zoomToPosition(t*c,i,o),g=g||Math.abs(s)>12,m=m||Math.abs(u-f)>v||Math.abs(l-d)>v,function(t,n,i){var o=-t*(2*Math.PI/360);o*=2;var a=Math.sin(o),s=Math.cos(o);e.privateEach({type:"node",items:"toplevel"},function(e){var t=e.id;Y(t,(h[t].x-f)*s+(h[t].y-d)*a+f,-(h[t].x-f)*a+(h[t].y-d)*s+d)});var u=r.viewToWorldX(n),l=r.viewToWorldY(i);e.privateEach({type:"node",items:"toplevel"},function(e){Y(e.id,e.x+(u-f),e.y+(l-d))})}(g?s:0,m?u:f,m?l:d)}function x(){e.privateEach({type:"node",items:"toplevel"},function(e){var t=e.id;Y(t,h[t].x,h[t].y)})}return{animate:function(){y()},getCursor:function(){return"move"},dragMove:function(e,t,n,r){p(e,t,n,r)},endDrag:function(e,t,r,i,o){p(t,r,i,o),e?(x(),n.trigger("prechange","move"),y()):x()}}},y.labelPosition=function(e,t){var n=le(e);if(!n||n.hi)return null;var r=n._edit;if(!r||r.hib)return null;var i=r.x1,o=r.y1,a=r.x2,s=r.y2;return"node"===n.type&&(i+=n.x,o+=n.y,a+=n.x,s+=n.y),{x1:t.x(i),y1:t.y(o),x2:t.x(a),y2:t.y(s),fs:t.worldToViewDistance(r.fs)}},y.extractStructure=function(e,t,n){return I.extractStructure(i,e,b,x,B,t.fixed,n)},y.updateLinkStyles=function(e){e.straighten&&(n.privateTrigger("redraw",{all:!0}),De(Ie({self:!1,combos:"toplevel"})))},y.layout=function(e,t,n,r,i){I.layout(e,t,n,B,r,i)},y.arrange=function(e,t,n,r,i,o,a){I.arrange(e,t,n,r,B,i,o,a)},y.applyVertices=function(e){t(b,function(t,n){e[n]&&Y(n,e[n].x,e[n].y)})},y.applyUpdatedOffsets=function(e){t(x,function(t,n){e[n]&&y.setLinkOffset(n,e[n].off)})},y.makeAnimator=function(e,n,r){var i=n,o={};return t(b,function(e,t){o[t]={x:e.x,y:e.y}}),nn(function(a){i-=a;var s=r(Math.max(0,(n-i)/n));return t(b,function(t,n){e[n]&&Y(n,o[n].x+s*(e[n].x-o[n].x),o[n].y+s*(e[n].y-o[n].y))}),i>0},{positions:!0})},y.reveal=function(e,t){e&&(Ye(),e.forEach(function(e){e&&!h.has(e)&&function(e){var t=x[e];return t&&!t._combo}(e)&&(h.set(e,!0),L(e))}),!1!==t&&Ue(void 0,void 0,void 0,!0),O())},y.isRevealedLink=function(e){return!!h.size&&h.has(e)};var We=y.isRevealedLink;y.getRevealedLinks=function(){var e=[];return h.forEach(function(t,n){e.push(n)}),e};var Ze=function(e){L(e),h.delete(e),Ee(e)&&!ce(e)&&Ae(e,!0)};y.clearRevealedLinks=function(){h.forEach(function(e,t){L(t),Ee(t)&&!ce(t)&&Ae(t,!0)}),h.clear()};var Ye=y.clearRevealedLinks;function je(e,n,r){t(e,function(e){var t,i=oe(e.id1),o=oe(e.id2);null!==i&&null!==o&&i!==o&&(void 0===n[t=i.id>o.id?i.id+o.id:o.id+i.id]&&(n[t]=[]),n[t].push(e.id),r[e.id]={id1:i.id,id2:o.id})})}y.applyRevealedLinkOffsets=function(e,n,r,i){var o=void 0===r?Pe:r,a={},s={};je(y.getRevealedLinks().map(le).filter(function(e){return!e.hi}),a,s);var u=null;if(e){var l=[],c={};t(e,function(e){if("node"===e.type){var t=oe(e.id);t&&(c[t.id]=!0)}else l.push(e)});var f={};je(l,f,{}),u={};var d=!1;if(Object.keys(a).forEach(function(e,t){(void 0!==f[e]||function(e,t){if(s[e]){var n,r=s[e],i=se(r.id1);for(n=0;n<i.length;n++)if(t[i[n]])return!0;for(i=se(r.id2),n=0;n<i.length;n++)if(t[i[n]])return!0}return!1}(a[e][0],c))&&(u[t]=!0,d=!0)}),!d)return}if(i){var h=o;o=function(e,t){e.id1===s[e.id].id1&&e.id2===s[e.id].id2||h(e,t)}}Ne(P(a),u,n,function(e){return void 0!==s[e.id]?s[e.id]:e},o)};var Ue=y.applyRevealedLinkOffsets;return y}var ba=qe.ci,xa=rt(ba),wa=ct(xa[0],xa[1],xa[2]),Aa=8,Ea=function(e){for(var t=1,n=Aa,r=Aa,i=0,o=0,a=e.length;o<a;o++){var s=e[o],u=s.width/s.imageRatio,l=s.height/s.imageRatio;n+u+Aa>1024&&(n=0,r+=i+Aa,i=0),r+l>1024&&(t++,r=Aa),l>i&&(i=l),n+=u+Aa}return t<4?1024:t<=12?2048:4096},Ma=function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d");return n.id="webglDebugImageCanvas"+t,n.width=e,n.height=e,r},Ca=function(e){var t=[],n=2;return e.forEach(function(e){if(e.isLoaded){var r=e.width>e.height?"width":"height";if(e.src&&e.src.indexOf(".svg")>-1){var i=0|Math.max(e.width,e.height);if(i){var o=256/i;e.width=Math.round(e.width*o),e.height=Math.round(e.height*o)}else e.width=256,e.height=256}var a=function(e,t){var n=1,r=!1;return e>264&&(t>0?e>512&&(n=e/512):n=e/264,r=!0),{imageRatio:n,largeImage:r}}(e.height,n);a.largeImage&&n>0&&n--,e.size=e[r]/a.imageRatio,e.imageRatio=a.imageRatio,e.nonSquare=e.width!==e.height&&r,t.push(e)}}),t.sort(function(e,t){return e.size-t.size})},ka=function(e){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=128,t.height=128,n.fillStyle="black",n.font="105px sans serif";var r=n.measureText(e).width;return t.width=Math.max(1,r*(128/105)),n.font="105px sans serif",n.fillText(e,(t.width-r)/2,96),t};function Ta(){var e={},t=0,n=new Map;return e.push=function(e){if(e&&v(e)){var r={id:t++,fn:e};n.set(r.id,r)}},e.runAll=function(){if(n.size>0){var e=[];n.forEach(function(t){e.push(t)}),e.forEach(function(e){n.delete(e.id)}),e.forEach(function(e){e.fn()})}},e}var _a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACwklEQVR4Ae2aA8xkQRCEz7Zt27Zt20ZwZny2bdu2bdu2uVdnb/6ufZqX6eQLd7qmKtvP/nTp0qVLly5d3mvh3dzgI/AIqWmQfnTwRKi9Ffg3MoTBRAB3QHgDtGcJdV+CxEb/C0KAc0QI43zULUhotnfSKHwEOUm9IOC0UG8vCEjpmTgKx0FgQqurUOctSCVQsHQUugh14oGXQo2eTj4rvAQJBBpLhf2PEv8yy0dhtR97lxX2fQ8y8WasHYXqfuh7Wdizj0oXSLdBOC89ewv7nQHBOAP2jcLo//RKDt4KT7G57TPPj8JHkP0fvTYJ+wxX+V7hGAj8S49awvWXQShnBMCPQsdva8OC28K1RZxjnh+FFyAeGC5cN9FNt80HwAfB7296PYuoNgoEZR3mmB8FgtnqP0HiuQci85tSfxRqiPRdNgpL1X+YyvMYxKT0XTIKjXhx9UdhvRveKQQAO8kAurghgE7AQ/IGpFfZfNpvJjw+cBaEUtF8UHDUoNPgVBUD6As8BlJXtfP/B4MDeAaSqGA+NLgIPCZwCAR1egDjBYYYhjnZfCnC0AtiTQEnmo9EPNcbAhoSAVwEIZ0WwAKhicMgyLe169QehYV36xBXeKl/WR8fPCfeLeRygvnY4LHP1/gL77YlrxKD22neP9jAvMY28Kapv23+iQPYB5DNS7/k4DXxajyLHeajgIfEuzz6sxgvHAQBrA5ghnCT10EYP/QNBA4RIbS00nwRYoOVBP0zEPcSD0FkK8wHBxeEm9tA6EwlQp5gun/iC453IBWhE5c4IH4E2cw0nwS8FW5qqA96A4h/wQEQwKwAlhOvs8L5oBcBPCZCaGCG+aLERpoboNuZ0L0BQhhpPhA4QVymBjLooHudCKG7kQG0IjZQxUD9RuQjtKhGiIcHD4Ti+4B/AwMICE4SIYz5b09dunTp0qVL1ydOC8gcEyAGqgAAAABJRU5ErkJggg==";function Sa(e,t,n){var r={},i=Ta(),o=e||Gu,a=o();a.src=_a;var s=Ia("",a);s.isLoaded=!0;var u=new Map,l=new Map,c=!1,f=!1,d=function(){var e={},t=wa;return e.setColour=function(e){var n=rt(e||ba);return dt((t=ct(n[0],n[1],n[2]))[0],t[1],wa[2])},e.colouriseImage=function(e){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var r=n.getContext("2d");r.clearRect(0,0,e.width,e.height),r.drawImage(e.im,0,0,e.width,e.height);for(var i=r.getImageData(0,0,e.width,e.height),o=i.data,a=0;a<o.length;a+=4){var s=ct(o[a],o[a+1],o[a+2]);if(Math.abs(s[0]-wa[0])<.02){var u=dt(t[0],t[1],s[2]);i.data[a]=u[0],i.data[a+1]=u[1],i.data[a+2]=u[2]}}return r.putImageData(i,0,0),n},e}(),h=window["D"+9884..toString(30)][25871..toString(33)]()/24584;function p(e){return function(){if(r.has(e.src)){var t=function(e){var t=function(e){var t=void 0!==e.naturalWidth&&0===e.naturalWidth;return!function(e){return"data:image/"===(e||"").slice(0,11)}(e.src)&&function(e,t){var n=t||"";return".svg"===n.slice(Math.max(n.length-5,0))}(0,e.src)&&(t=t&&0===e.width),t?new Error("Invalid Image"):null}(e);if(t)return t;try{var n=document.createElement("canvas");n.getContext("2d").drawImage(e,0,0,1,1),n.toDataURL()}catch(e){return e}return null}(e.im);t?function(e,t){if(e.isCors)y(t,e);else{e.isCors=!0;var n=o();n.crossOrigin="anonymous",n.onload=p(e),n.onerror=g(e),e.im=n,b(e)}}(e,t):function(e){var t=e.im;l.set(e.src,e),e.isLoaded=!0,e.width=t.width,e.height=t.height,e.isHiRes&&(t.width/=2,t.height/=2),e.hasControlColour&&(e.co=d.colouriseImage(e)),e.hasCutout&&(e.ci=La(e))}(e)}m()}}function g(e){return function(t){e.isHiRes?(e.isHiRes=!1,b(e)):y(t,e),m()}}function v(e,n,r){c=!0;var i=o(),a=Ia(e,i,n&&(t||Ra()),r);return u.set(e,a),i.onload=p(a),i.onerror=g(a),b(a),a}function m(){r.hasPendingImages()||i.runAll()}function y(e,t){l.set(t.src,t),t.im=a,t.ci=a,t.co=a,t.isMissing=!0,t.isLoaded=!0,t.hasControlColour=!1,t.error=e,c=!0}function b(e){var t="",r=e.src;-1===r.indexOf("data:")&&(t+=n||""),t+=e.isHiRes?r.substr(0,r.length-4)+"@2x.png":r,e.im.src=t}return r.getCutoutImage=function(e){var t=r.get(e);return t.isLoaded&&!t.ci&&(t.ci=La(t)),t.hasCutout=!0,t},r.getEmojiImage=function(e){var t=u.get(e);if(!t){var n=ka(e);t=Ia(e,n,!1,!1),u.set(e,t),t.isLoaded=!0,t.width=n.width,t.height=n.height,t.isEmoji=!0,l.set(e,t)}return t},r.delete=function(e){var t=u.get(e),n=u.delete(e);return n&&t.isLoaded&&(f=!0,c=!0),n},r.hasUpdatedImages=function(){return!(!l.size&&!f)},r.resetUpdatedImages=function(){r.forEach(function(e){l.set(e.src,e)})},r.resetControlColour=function(e){var t=d.setColour(e);return r.forEach(function(e){e.isLoaded&&e.hasControlColour&&(e.co=d.colouriseImage(e),l.set(e.src,e))}),t},r.getControlColourImage=function(e,t){var n=r.get(e,t,!0);return n.isLoaded&&!n.hasControlColour&&(n.co=d.colouriseImage(n),l.set(n.src,n)),n.hasControlColour=!0,n},r.imagesUpdated=function(){l.clear(),f=!1},r.get=function(e,t,n){return u.get(e)||v(e,!!t,!!n)},r.has=function(e){return u.has(e)},r.hasPendingImages=function(){if(c){var e=0;u.forEach(function(t){t.isLoaded&&e++}),c=e!==u.size}return c},r.forEach=function(e){xt>42250807||(u.forEach(e),e(s))},r.isReady=function(){try{if(h>63200911)return}catch(e){}return!0},r.waitForImages=function(e){r.hasPendingImages()?setTimeout(function(){r.waitForImages(e)},100):w(e)},r.getMissingImage=function(){return s},r.invokeWhenImagesHaveLoaded=function(e){r.hasPendingImages()?i.push(e):w(e)},r}function Ia(e,t,n,r){return{src:e,im:t,co:null,ci:null,width:64,height:64,imageRatio:1,isLoaded:!1,hasControlColour:!1,hasCutout:!1,isCors:!1,isHiRes:!!n,isMissing:!1,isAsset:!!r,isEmoji:!1}}function Ra(){return n()>=1.5}function La(e){var t=e.im,n=Math.min(t.width,t.height),r=n<t.height?Math.floor((t.height-n)/2):0,i=n<t.width?Math.floor((t.width-n)/2):0,o=Math.floor(n/2),a=document.createElement("canvas");a.width=n,a.height=n;var s=a.getContext("2d");return s.save(),s.beginPath(),s.arc(o,o,o,0,2*Math.PI,!1),s.clip(),s.drawImage(t,i,r,n,n,0,0,n,n),s.restore(),a}function Oa(e,t,n,r){var i,o,a={},s={},u={},l=[],c={},d=12;function h(){return n&&n.api.isShown()}function p(e){c[e]&&c[e].apply(null,arguments)}a.setup=function(t){x(),i=Ke(t[0],t[1],t[2],1),o=Ke(t[0],t[1],t[2],.5),e.privateBind("click",p)},a.createDragger=function(e,t,n){return e in s?s[e](t,n):null},a.reset=function(){s={},u={},l=[],c={},e.privateUnbind("click",p)};var g,v,m,y,b,x=a.reset;function w(e,t,n,r,i,o,a){e.rect(t.scale(n),t.scale(r),t.scale(i),t.scale(o),qe.transparent,-1,qe.transparent,!0,a)}a.getCursor=function(e){return e in u?u[e]:"auto"},a.generate=function(e,t,n,r,i){e.setLayerPath(null);for(var o=0;o<l.length;o++)l[o].generate(e,t,n,r,i)},a.getWatermarkSize=function(e){for(var t=0;t<l.length;t++){var n=l[t];if(n.watermarkSize)return n.watermarkSize(e)}return null},a.addLogo=function(e){var t=e.u,n=r.get(t,Ra(),!0);l.push({generate:function(r,i,o){r.setLayer(zn.OVERLAYS);var a=n.im.width,s=n.im.height,u=e.p||"ne",l=("w"===u.charAt(1)?15:o.width()-(a+15))+(e.x||0),c=("n"===u.charAt(0)?15:o.height()-(s+15))+(e.y||0);r.image(o.scale(l),o.scale(c),o.scale(l+a),o.scale(c+s),t,"_logo",null,!1,!0)}})},a.addTextWatermark=function(e,t,n,i,o,a,s,u){var c,f="_textWatermark";e&&(c=r.get(e,!1,!0)),l.push({watermarkSize:function(e){var r,i;if(c){var o=c.im;r=o.width,i=o.height}else t&&(r=Kt(e,t,n,u).width,i=n);return r?{width:r+10,height:i+10}:null},generate:function(r,l,d){var h,p;if(r.setLayer(zn.UNDERLAYS),c){var g=c.im;h=d.scale((d.width()-g.width)/2),p=d.scale((d.height()-g.height)/2),r.image(h,p,h+d.scale(g.width),p+d.scale(g.height),e,f)}else if(t){var v=d.scale(n),m=Kt(l,t,n,o,u).width;h=d.scale((d.width()-m)/2),p=d.scale((d.height()+n)/2);var y=-3.5,b=Math.floor(v/8);"top"===s&&(p=v+b),"bottom"===s&&(p=d.scale(d.height())+1),a&&r.rect(h-y,p-v-b,h+m+y+b,p,a,-1,a,!0,f),r.text(h,p,t,i,v,o,f,u,!1,m,!1,!1,h+y,p-v,h+m+y,p)}}})},a.addNavigation=function(t,i,o){var a=va["Nav-Control-Head.png"],f=va["Nav-Control-Zoom.png"],p=va["Nav-Control-Short-Zoom.png"],g=va["Slider.png"],v=va["Hand.png"],m=va["Arrow.png"];r.getControlColourImage(a,!1);var y=r.getControlColourImage(f,!1),b=r.getControlColourImage(p,!1);r.get(g,!1,!0),r.get(v,!1,!0),r.get(m,!1,!0);var x=L()?145:247,A=o.p||"nw",E=("w"===A.charAt(1)?7:i.width()-69)+(o.x||0),M=("n"===A.charAt(0)?17:i.height()-(17+x))+(o.y||0),C=E+21,k=M+118,T=M+215;function _(){return t.options().handMode}function S(e,n){var r=R(e-d/2);t.setZoom(r,n)}function I(e){var t,r,o;return n&&n.internalUse.isMapLoaded()?(t=n.internalUse.getMinZoom(),r=Math.max(n.internalUse.getMaxZoom(),t+1),o=e):(t=Math.log(i.getMinZoom()),r=Math.log(i.getMaxZoom()),o=Math.log(e)),Math.floor(k+(1-(o-t)/(r-t))*(T-k))}function R(e){var t=n.internalUse,r=1-(e-k)/(T-k);return h()?(t.getMaxZoom()-t.getMinZoom())*r+t.getMinZoom():Math.exp(r*(Math.log(i.getMaxZoom())-Math.log(i.getMinZoom()))+Math.log(i.getMinZoom()))}function L(){return i.height()<300}c._zoomIn=function(){t.zoomIn(!0)},c._zoomOut=function(){t.zoomOut(!0)},c._panLeft=function(){t.pan("left",!0)},c._panRight=function(){t.pan("right",!0)},c._panUp=function(){t.pan("up",!0)},c._panDown=function(){t.pan("down",!0)},c._fitToWindow=function(){t.fitToModel(!0)},c._toggleMode=function(){var e=t.options();e.handMode=!e.handMode,t.options(e)},c._scale=function(e,t,n){S(n,!0)},u._zoomIn="pointer",u._zoomOut="pointer",u._panLeft="pointer",u._panRight="pointer",u._panUp="pointer",u._panDown="pointer",u._fitToWindow="pointer",u._toggleMode="pointer",u._scale="pointer",u._slider='url("'+va["openhand.png"]+'"), pointer',s._slider=function(){var r=i.zoom();return L()?null:e.trigger("dragstart","slider")?void 0:(h()&&n.internalUse.enableDragging(!1),{rebuild:{drawOnly:!0},getCursor:function(){return"move"},dragMove:function(e,t){S(t,!1)},endDrag:function(i){var o=e.trigger("dragend","slider");i&&!o||t.setZoom(r,!1),h()&&n.internalUse.enableDragging(t.options().handMode),e.trigger("dragcomplete","slider")}})},l.push({generate:function(e,t,n,r,i){if(!i){e.setLayer(zn.OVERLAYS),e.image(n.scale(E+5),n.scale(M+6),n.scale(E+57),n.scale(M+58),a,null,"co",!1,!0);var o=100;L()?e.image(n.scale(E+16),n.scale(M+o),n.scale(E+16+b.im.width/2),n.scale(M+o+b.im.height/2),p,null,"co",!1,!0):e.image(n.scale(E+16),n.scale(M+o),n.scale(E+16+y.im.width/2),n.scale(M+o+y.im.height/2),f,null,"co",!1,!0);var s=E+19,u=M+64,l=n.scale(s),c=n.scale(u),h=n.scale(s+28),x=n.scale(u+32),A=_()?v:m;e.image(l,c,h,x,A,null,null,!1,!0),e.setLayer(zn.OVERLAYSSHADOW),e.image(l,c,h,x,A,"_toggleMode");var k=23,T=39,S=L()?124:222;if(w(e,n,E+k,M+105,E+T,M+105+18,"_zoomIn"),w(e,n,E+k,M+S,E+T,M+S+18,"_zoomOut"),w(e,n,E+5,M+k,E+k,M+T,"_panLeft"),w(e,n,E+T,M+k,E+57,M+T,"_panRight"),w(e,n,E+k,M+5,E+T,M+k,"_panUp"),w(e,n,E+k,M+T,E+T,M+57,"_panDown"),w(e,n,E+k,M+k,E+T,M+T,"_fitToWindow"),L()||w(e,n,E+k,M+105+18,E+T,M+S,"_scale"),w(e,n,E+k-3,M+68,E+T+3,M+68+22,"_toggleMode"),!L()){var R=I(n.zoom()),O=n.scale(C),N=n.scale(R),P=n.scale(C+21),D=n.scale(R+d);e.image(O-4,N-4,P+4,D+4,g,"_slider"),e.setLayer(zn.OVERLAYS),e.image(O,N,P,D,g,null,null,!1,!0)}}},createDragger:function(){}})};var A={ne:"sw",nw:"se",se:"nw",sw:"ne"};return a.addOverview=function(n,a,d,h,p){var x=p.p&&A[p.p]?p.p:"se",w=va["Arrow-"+A[x]+".png"],E=va["Arrow-"+x+".png"];p.size=p.size||100,g=p.size,m=p.shown,b="n"===x.charAt(0),y="w"===x.charAt(1);var M=(v=h(g,g)).getContext("2d"),C=!1,k=!1,T=Date.now(),_=t.createView(e,g,g);function S(e){var t={x1:d.viewToWorldX(d.scale(-e)),x2:d.viewToWorldX(d.scale(d.width()+e)),y1:d.viewToWorldY(d.scale(-e)),y2:d.viewToWorldY(d.scale(d.height()+e))};return{x1:_.worldToViewX(t.x1),x2:_.worldToViewX(t.x2),y1:_.worldToViewY(t.y1),y2:_.worldToViewY(t.y2)}}c._overviewIcon=function(){p.shown=!p.shown,e.trigger("overview",(m=p.shown)?"open":"close"),e.trigger("redraw",{drawOnly:!0})},u._overviewIcon="pointer";var I,R,L=null,O=!1,N=0,P=0,D=0,B=0;function V(){D+=I.x,B+=I.y,e.privateTrigger("redraw")}function z(){R&&(clearInterval(R),R=null)}function F(e){var t=Math.max(e.width(),e.height())/2;_.reset(!1);var n=S(t);_.fitExtents(n,null,!1,!1,void 0,void 0,void 0,!0);var r=e.getMaxItemZoom();r!==1/0&&_.setMaxItemZoom(r/8),O&&_.panBy(D,B,!1,!0)}u._overviewBox='url("'+va["openhand.png"]+'"), pointer',s._overviewBox=function(t,r){if(!e.trigger("dragstart","overview")){O=!0,N=0,P=0,D=0,B=0;var i=2-L.x1,o=g-L.x2-2,a=2-L.y1,s=g-L.y2-2;return{rebuild:{drawOnly:!0},getCursor:function(){return"move"},dragMove:function(e,n){z(),P=n-r,I={x:0,y:0};var u=!1;(N=e-t)<i&&(N=i,I.x=2,u=!0),N>o&&(N=o,I.x=-2,u=!0),P<a&&(P=a,I.y=2,u=!0),P>s&&(P=s,I.y=-2,u=!0),u&&(R=f(V,50))},endDrag:function(t){O=!1,z();var r=e.trigger("dragend","overview");if(t&&!r){var i=-(N-D)*(d.zoom()/_.zoom()),o=-(P-B)*(d.zoom()/_.zoom());n.panBy(i,o,!0)}e.trigger("dragcomplete","overview")}}}},l.push({generate:function(t,s,u,l,c){if(!c){if(m){var f,d,h,v,x=u.scale(y?-1:u.width()-g-2),A=u.scale(b?-1:u.height()-g-2),I=u.scale(y?g+2:u.width()+1),R=u.scale(b?g+2:u.height()+1),D=Math.max(1,u.scale(3)),B=y?u.scale(-1):u.scale(u.width()-g)-.5,V=b?u.scale(-1):u.scale(u.height()-g)-.5,z=y?u.scale(g)+.5:u.scale(u.width()+1),G=b?u.scale(g)+.5:u.scale(u.height()+1),H=Math.max(1,u.scale(1));if(t.setLayer(zn.OVERLAYSSHADOW),t.rect(x,A,I,R,qe.white,D,qe.white,!0,"_overviewBorder1"),t.rect(B,V,z,G,qe.lightgrey,H,qe.white,!1,"_overviewBorder2"),t.setLayer(zn.OVERVIEW),t.rect(x,A,I,R,qe.white,D,qe.white,!1),t.rect(B,V,z,G,qe.lightgrey,H,qe.white,!1),a){var W=Date.now();C&&!O&&W<T+1e3&&k?e.privateTrigger("redraw"):(T=Date.now(),C=!0,s.webgl?(F(u),n.setOverviewView(_)):(M.clearRect(0,0,g,g),M.fillStyle=qe.white,M.fillRect(0,0,g,g),n.drawBackground(M),F(u),Bn(t,M,_,r,n.options(),!1,null,!0)),k=Date.now()-T>30),L||(L=S(0));var Z=O?N:0,Y=O?P:0,j=O?"_overviewBoxDragging":"_overviewBox";f=u.scale(y?L.x1+Z:u.width()-g+L.x1+Z),d=u.scale(b?L.y1+Y:u.height()-g+L.y1+Y),h=u.scale(y?L.x2+Z:u.width()-g+L.x2+Z),v=u.scale(b?L.y2+Y:u.height()-g+L.y2+Y);var U=Math.max(1,u.scale(2));t.setLayer(zn.OVERVIEWSHADOW),t.rect(f,d,h,v,i,U,o,!O,j),t.setLayer(zn.OVERVIEW),t.rect(f,d,h,v,i,U,o,!O,j)}}var X=m?E:w,q=r.get(X,!1,!0).im;if(p.icon){var Q=q.width/2,K=q.width/2;t.rect(y?u.scale(-1):u.scale(u.width()-Q)-.5,b?u.scale(-1):u.scale(u.height()-K)-.5,y?u.scale(Q)+.5:u.scale(u.width()+1),b?u.scale(K)+.5:u.scale(u.height()+1),qe.lightgrey,Math.max(1,u.scale(1)),qe.white,!0,"_overviewIconRect"),t.image(u.scale(y?0:u.width()-Q),u.scale(b?0:u.height()-K),u.scale(y?Q:u.width()),u.scale(b?K:u.height()),X,"_overviewIcon","co",!1,!0),r.getControlColourImage(X),t.setLayer(zn.OVERVIEWSHADOW),t.rect(u.scale(y?-1:u.width()-2*Q),u.scale(b?-1:u.height()-2*K),u.scale(y?2*Q:u.width()+1),u.scale(b?2*K:u.height()+1),qe.lightgrey,-1,qe.white,!0,"_overviewIcon")}}}})},a.remove=function(e,t,n){var r=42;l.push({generate:function(i,o,a){i.setLayer(zn.OVERLAYS);var s=Kt(o,e,r).width,u=a.scale((a.width()-s)/2),l=a.scale((a.height()+r)/2);i.text(u+2,l+2,e,n,a.scale(r),!0,null,null,!1,s,!1,!1,u+2,l+2-a.scale(r),u+2+s,l+2),i.text(u,l,e,t,a.scale(r),!0,null,null,!1,s,!1,!1,u,l-a.scale(r),u+s,l)}})},a.drawOverviewContent=function(e,t){if(m&&v){var n=t.scale(g);e.drawImage(v,0,0,n,n,t.scale(y?0:t.width()-g),t.scale(b?0:t.height()-g),n,n)}},a.addBanding=function(e){var t={generate:function(t,n,r){var i=G({top:!0},e.bands);if(i&&i.bands){var o,a,s,u,l,c,f;t.setLayer(zn.BANDS);var d=1/0;for(o=0;o<i.bands.length;o++)(l=i.bands[o]).t&&(a=r.worldToViewDistanceInteger(l.w/2),c=.75*(u=l.fs||20),(f=Kt(n,l.t,u,l.fb,s=l.ff||e.fontFamily).width/2)+c>a&&(u=Math.floor(u*a/(f+c))),u<d&&(d=u));for(d!==1/0&&(c=.75*d),o=0;o<i.bands.length;o++){var h=r.x((l=i.bands[o]).x),p=r.x(l.x-l.w/2),g=r.x(l.x+l.w/2),v=r.scale(-1),m=r.scale(r.height()+1);a=r.worldToViewDistanceInteger(l.w/2);var y=l.c||"#f7f7f7";t.rect(p,v,g,m,"white",-1,y,!0,"");var b=!(l.t&&d>3);t.setLayer(zn.BANDLABELS),f=Kt(n,l.t,d,l.fb,s=l.ff||e.fontFamily).width/2;var x=l.fc||qe.lightgrey,w=r.scale(d),A=(g-p)/2-f;if(i.top){var E=6+w;t.rect(p,v,g,E+3,"white",-1,y,!0,"",null,b),t.text(h-f,E,l.t,x,w,l.fb,"",s,!1,2*f,!1,!1,p+A,v+6,g+A,E+6,null,null,null,b)}if(i.bottom){var M=r.height()-3,C=M-(w+6);t.rect(p,C,g,m,"white",-1,y,!0,"",null,b),t.text(h-f,M,l.t,x,w,l.fb,"",s,!1,2*f,!1,!1,p+A,C+6,g+A,C+6+u,null,null,null,b)}t.setLayer(zn.BANDS)}}}};l.push(t)},a}function Na(e,t,n,r,i){var o={},a=0,s=0,u=0,l=0,c=0,f=t||0,d=n||0,h=r||1;o.scaleFactor=function(e){return e&&(h=e),h},o.scale=function(e){return h*e};var p=o.scale;o.settings=function(){return{width:f,height:d,zoom:u,offsetX:l,offsetY:c}},o.fromSettingsDirect=function(e,t,n,r){return z(u,k(e.zoom),e.offsetX-l,e.offsetY-c,t,n,r)},o.fromOldSettings=function(t,n,r,i){if(n){var o=Na(e,t.width,t.height);o.setZoom(t.zoom,!1),o.offsetX=t.offsetX,o.offsetY=t.offsetY;var a={x1:o.viewToWorldX(0),y1:o.viewToWorldY(0),x2:o.viewToWorldX(o.width()),y2:o.viewToWorldY(o.height())};return I(a,null,r,!1,!1,!1,i)}_(t.zoom,!1),l=t.offsetX,c=t.offsetY},o.width=function(e){return e&&(f=e),f},o.height=function(e){return e&&(d=e),d},o.worldToViewX=function(e){return((e-a)*u+l)*h},o.x=o.worldToViewX;var g=o.worldToViewX;o.worldToViewY=function(e){return((e-s)*u+c)*h},o.y=o.worldToViewY;var v=o.worldToViewY;o.viewToWorldX=function(e){return(e/h-l)/u+a};var m=o.viewToWorldX;o.viewToWorldY=function(e){return(e/h-c)/u+s};var y=o.viewToWorldY;o.w=function(e){return-1===e?-1:Math.max(1,Math.floor(e*u*h))},o.sw=function(e){return-1===e?-1:o.w(e)+7},o.viewToWorldDistance=function(e){return e/(u*h)},o.worldToViewDistanceInteger=function(e){return Math.floor(o.worldToViewDistance(e))},o.worldToViewDistance=function(e){return e&&e*u*h};var b=1.4,x=.05,A=1/0;function E(){return i&&i.internalUse.isMapLoaded()}function M(){return k(u*b)}function C(){return k(u/b)}o.getMaxZoom=function(){return 4},o.getMinZoom=function(){return x},o.setMinZoom=function(e){x=Math.min(1,Math.max(.001,e||.05)),u<x&&z(u,x,l,c,!1)},o.setMaxItemZoom=function(e){A=e||1/0},o.getMaxItemZoom=function(){return A},o.zoomIn=function(e,t,n){var r=M();return L(r,h*f/2,h*d/2,e,t,n)},o.zoomOut=function(e,t,n){var r=C();return L(r,h*f/2,h*d/2,e,t,n)};var k=function(e){return Math.min(4,Math.max(e,x))};o.setZoom=function(e,t,n,r){var i=k(e);return L(i,h*f/2,h*d/2,t,n,r)};var _=o.setZoom;function S(e){return e?{x1:g(e.x1),y1:v(e.y1),x2:g(e.x2),y2:v(e.y2)}:null}o.getUnzoom=function(){return u>A?A/u:1},o.wheelToPosition=function(e,t,n){var r=e>0?M():C();return L(r,t,n,!0,200)},o.fitWorldExtents=function(e,t,n,r,i,o,a){if(!e)return w(a),null;var s=S(e);return I(s,null,t,n,r,i,o,!1,a)},o.fitExtents=function(e,t,n,r,i,o,p,g,v,b){var x;x=(e.y2-e.y1)/(e.x2-e.x1)>d/f?u*(d-(o?d/8:0))/(e.y2-e.y1):u*(f-(o?f/8:0))/(e.x2-e.x1),x*=h,r&&(x=k(x)),i&&x>1&&(x=1),b&&(x=u);var w=(e.y1+e.y2)/2,A=t?(t.x1+t.x2)/2:m((e.x1+e.x2)/2),E=t?(t.y1+t.y2)/2:y(w);return z(u,x,f/2-(A-a)*x-l,d/2-(E-s)*x-c,n,p,v,g)};var I=o.fitExtents;function R(e,t,n,r,i,a,s,u,l){t.generate(n,r,o,!0,!1);var c=n.itemExtents(e,r);if(c){var f,d=S(c);return l&&(f=e?d.x1+(d.x2-d.x1)/2:o.width()/2,d.x1=f,d.x2=f),I(d,c,i,!0,!0,!0,a,!1,s,u)}return w(s),null}o.fitToSelection=function(e,t,n,r,i,o,a,s){return R(e.privateSelection(),e,t,n,r,i,a,s)},o.fitToModel=function(e,t,n,r,i,o,a,s){return o?R(V(o),e,t,n,r,i,a,s):R(null,e,t,n,r,i,a)},o.fitModelHeight=function(e,t,n,r,i,o,a,s){return o?R(V(o),e,t,n,r,i,a,s,!0):R(null,e,t,n,r,i,a,!1,!0)},o.zoomToPosition=function(e,t,n,r,i,o){var f=k(e),d=m(t),p=y(n);return z(u,f,t/h-(d-a)*f-l,n/h-(p-s)*f-c,r,i,o)};var L=o.zoomToPosition;o.reset=function(e){a=421,s=298,e?z(u,1,421-l,298-c,!0):(l=421,c=298,u=1)};var O=o.reset;o.zoom=function(){return E()?i.internalUse.getZoom():u},o.offsetXtoWebglPanX=function(){var e=f/2;return-(1-o.offsetX()/e)+(e-a)/e*u},o.offsetYtoWebglPanY=function(){var e=d/2;return 1-o.offsetY()/e-(e-s)/e*u},o.offsetX=function(e){return T(e)&&(l=e),l},o.offsetY=function(e){return T(e)&&(c=e),c},o.pan=function(e,t,n,r){var i=0,o=0;switch(e){case"up":o=1;break;case"down":o=-1;break;case"left":i=1;break;case"right":i=-1}return B(i*=100,o*=100,t,!1,n,r)},o.panBy=function(e,t,n,r,i,o){return z(u,u,e,t,n,i,o,r)};var N,P,D,B=o.panBy,z=function(t,n,r,i,o,a,s,f){var d=r||0,h=i||0;if(o)return F(t,n,d,h,a,s);l+=Math.floor(d),c+=Math.floor(h),u=n,e&&!f&&e.trigger("viewchange"),w(s)},F=function(t,n,r,i,o,a){var s=o||200,f=s,d=l,h=c;return nn(function(o){f-=o;var p=e.atanEasing(Math.max(0,Math.min(1,(s-f)/s)));l=d+p*r,c=h+p*i,u=k(t+p*(n-t));var g=f>0;return g||(e.trigger("viewchange"),w(a)),g},{drawOnly:!0})},G=function(t,n,r,o,a){var s=E(),u=s?-3:.1;return nn(function(f){var d=0===P&&0===D;return s?i.internalUse.panBy([P*u,D*u],{animate:!1}):(l+=f*u*P,c+=f*u*D),N=!d,r&&r.dragMove(t,n,o,a),d||e.trigger("viewchange"),!d},{positions:!0})};return o.cancelScroll=function(){P=0,D=0},o.maybeScroll=function(e,t,n,r,i){var o=p(50);if(P=0,D=0,e<o&&(P=1),e>p(f)-o&&(P=-1),t<o&&(D=1),t>p(d)-o&&(D=-1),n.direction&&(n.direction.x||(P=0),n.direction.y||(D=0)),(0!==P||0!==D)&&!N)return N=!0,G(e,t,n,r,i)},O(),o}var Pa=Object.freeze({createView:Na}),Da=8,Ba="_combo_",Va="_combolink_";function za(e,t,n,r,i){var o=ha(),s=function(e){var t=ga(e),n={trigger:function(){}};function r(n,r,i,o,a){var s=null,u=function(){return null===s&&(s=ca()).privateSetProperties(r,i),s},l=e.privateGetCanvas(),c=e.privateGetGenerator();return{getGraph:u,struct:t.extractStructure(c,l,r,i,u,o,n,a)}}return{syncLayout:function(e,i,o,a,s){var u=r(e,i,o,a.fixed||[],s);return t.layout(e,n,u.struct,u.getGraph,a,null)},asyncLayout:function(e,n,i,o,a,s,u){var l=r(e,n,i,o.fixed||[],a);t.layout(e,s,l.struct,l.getGraph,o,u)}}}(t),u={},l={list:[],index:{},nulls:0,comboLinkAdj:{}},c={},f=null,d=[],h={},g={},v=k(e,{arrange:"concentric",resize:!0,updateGlyph:!0});function m(){var e={nodes:{},links:{}};return t.privateGetRawItems().concat(l.list).forEach(function(t){var n=Q(t.id),r=x(t.id);n||r||("node"===t.type?e.nodes[t.id]=b(t.id):e.links[t.id]=t)}),e}h.privateState=function(){return{itemsToMergeList:l.list,propertiesToSetMap:u,idsToRemoveMap:c,idsToSelectMap:f}},h.getProperty=function(e,n){var r,i=u[e];if(void 0!==i&&void 0!==(r=i[n]))return r;var o=L(e);if(null!==o&&void 0!==(r=o[n]))return r;var s=t.privateGetItem(e);return s?a(s[n]):void 0};var y=h.getProperty;h.getItem=function(e){if(c[e])return null;var n=a(t.privateGetItem(e))||{},r=L(e);return null!==r&&G(n,r),u[e]&&G(n,u[e]),n};var b=h.getItem;h.getParentId=function(e){return y(e,"parentId")};var x=h.getParentId;h.getComboProperty=function(e){return y(e,"_combo")};var A=h.getComboProperty;function E(e){var t=u[e];return t||(u[e]=t={id:e}),t}h.forEachChild=function(e,t){var n=y(e,"_combo");n&&(n.nodeIds&&n.nodeIds.forEach(t),n.linkIds&&n.linkIds.forEach(t))},h.setProperty=function(e,t,n){E(e)[t]=n};var M=h.setProperty;h.setProperties=function(e){var t=E(e.id);H(t,e)};var C=h.setProperties;function T(e,t){M(e,"_offset",t)}function _(e,t){if(n&&n.api.isShown()){var r=b(e),i=n.internalUse.preMerge([r]);M(e,"hi",i[0].hi),ee(e,i[0].x-r.x,i[0].y-r.y)}else if(v.reposition&&t){var o=y(e,"_offset"),a=y(t,"x"),s=y(t,"y"),u=y(e,"x"),l=y(e,"y");ee(e,a-o.x-u,s-o.y-l)}}function I(e,t){e.forEach(function(e){!function(e,t){var n=x(e)||null;t!==n&&(q(e),M(e,"parentId",t),"node"===y(e,"type")&&(t?y(e,"_offset")||T(e,{x:y(t,"x")-y(e,"x"),y:y(t,"y")-y(e,"y")}):(_(e,n),T(e,null))))}(e,t),c[e]&&q(e)})}function R(e){var t=l.index[e];if(void 0!==t){var n=l.list[t];l.list[t]=null,delete l.index[e],l.nulls++;var r=l.list.length;if(r>0&&l.nulls/r>.5){l.index={};for(var i=0,o=0;o<r;)null!==l.list[o]&&(l.list[i]=l.list[o],l.index[l.list[i].id]=i,i++),o++;l.list.length=i,l.nulls=0}if("link"===n.type&&n._combo){var a=l.comboLinkAdj;delete a[n.id1][n.id2],delete a[n.id2][n.id1]}}}function L(e){var t=l.index[e];return void 0===t?null:l.list[t]}h.setComboSubProperty=function(e,t,n){var r=A(e);r[t]=n,M(e,"_combo",r)},h.mergeItem=function(e){if(void 0===l.index[e.id]){if(l.index[e.id]=l.list.push(e)-1,"link"===e.type&&void 0!==e._combo){var t=l.comboLinkAdj,n=e.id1,r=e.id2;void 0===t[n]&&(t[n]={}),void 0===t[r]&&(t[r]={}),t[n][r]=e,t[r][n]=e}}else l.list[l.index[e.id]]=e};var O=h.mergeItem;function N(e,t,n){if(n){var r=A(n);e&&e.length>0&&(Fa(r.nodeIds,e),e.forEach(function(e){g[e]=1})),t&&t.length>0&&(Fa(r.linkIds,t),t.forEach(function(e){g[e]=1})),M(n,"_combo",r)}n&&V(n)&&t.length&&j(n)}function D(e,t){N([],e,t),I(e,t)}function B(e){var t=e,n=[];do{n.unshift(t),t=x(t)}while(t);return n}function V(e){return A(e)&&"link"===y(e,"type")}function F(e){return A(e)&&"node"===y(e,"type")}function W(e){for(var t,n,r,i=B(y(e,"id1")),o=B(y(e,"id2")),a=0,s=Math.min(i.length,o.length);a<s&&i[a]===o[a];)a++;return a===i.length?(n=o[a],r=t=o[a-1]):a===o.length?(n=i[a],r=t=i[a-1]):(t=i[a],n=o[a],r=0===a?null:i[a-1]),{id1:t,id2:n,parentId:r}}h.transferNodesToCombo=function(e,t){N(e,[],t),I(e,t)},h.getChangingComboNodeIds=function(){var e=[];return P(u).forEach(function(t){t._combo&&F(t.id)&&e.push(t.id)}),e},h.updateComboLinkProperties=function(e){if(!c[e]){var t,n=y(e,"id1"),r=A(e).linkIds,i=r.length,o=!1,a=!1,s=!0;for(t=0;t<i;t++){var u=!!y(r[t],"a1"),l=!!y(r[t],"a2"),f=n===W(r[t]).id1;if(a=a||(f?l:u),(o=o||(f?u:l))&&a)break}for(t=0;t<i;t++)if(!y(r[t],"hi")){s=!1;break}C({id:e,a1:o,a2:a,hi:s})}};var j=h.updateComboLinkProperties;function U(t,n,i){var o=r(),s=a(i,!0);if(s.id=o,s.id1=t,s.id2=n,e&&e.comboLinkStyle){var u=e.comboLinkStyle;p(u.b1)&&(s.b1=u.b1),p(u.b2)&&(s.b2=u.b2),u.c&&(s.c=u.c),u.ls&&(s.ls=u.ls),p(u.w)&&(s.w=u.w)}return s.off=0,s.parentId=null,s._combo={linkIds:[]},s}function X(e,t){if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}h.transferRawLinksToCorrectParents=function(e){var t={},n=[];e.forEach(function(e){if(!c[e.id]){var r,i=x(e.id1),o=x(e.id2);i||o?(r=i===o||i===e.id2?i:o===e.id1?o:function(e){var t=W(e.id),n=$(t.id1,t.id2);if(!n){var r=U(t.id1,t.id2,e);n=r.id,O(r),null!==t.parentId&&D([n],t.parentId)}return n}(e),e.parentId!==r&&(t[r]||(t[r]=[])).push(e.id)):null!==e.parentId&&n.push(e.id)}});var r=Object.keys(t);r.forEach(function(e){N([],t[e],e)}),N([],n,null),r.forEach(function(e){I(t[e],e)}),I(n,null)},h.transferComboLinkToCorrectParent=function(e){if(!c[e.id]){var t=x(e.id1)||null,n=x(e.id2)||null;D([e.id],n===e.id1?n:t)}},h.removeItemFromParent=function(e){var t=x(e);if(t&&!c[t]){var n=A(t),r=n.nodeIds,i=n.linkIds;X(r,e),X(i,e),r&&r.length||i.length?(M(t,"_combo",n),V(t)&&j(t)):K(t)}};var q=h.removeItemFromParent;h.removingItem=function(e){return!!c[e]};var Q=h.removingItem;function K(e){c[e]||(c[e]=!0,J(t.privateNeighbourLinkIds([e])),q(e),delete u[e],R(e))}h.getIdsToRemove=function(){return Object.keys(c)},h.removeItems=function(e){e.forEach(K)};var J=h.removeItems;function $(e,n){var r=null,i=l.comboLinkAdj[e];if(void 0!==i&&void 0!==i[n]&&(r=i[n].id),null===r)for(var o=t.privateGetLinksBetween(e,n),a=o.length,s=0;s<a;s++){var u=o[s];u._combo&&!c[u.id]&&(r=u.id)}return r}function ee(e,t,n){var r=y(e,"x"),i=y(e,"y");M(e,"x",r+t),M(e,"y",i+n);var o=A(e);o&&o.nodeIds.forEach(function(e){ee(e,t,n)})}function te(){var e,t,n,r,i={};for(e=0,t=d.length;e<t;e++)void 0===i[(n=d[e]).id]&&(i[n.id]={id:n.id,dx:0,dy:0,sumX:0,sumY:0}),n.norm=Z(y(n.id,"x")-y(n.to,"x"),y(n.id,"y")-y(n.to,"y")),i[n.id].sumX+=n.norm[0]*n.distance,i[n.id].sumY+=n.norm[1]*n.distance;for(e=0,t=d.length;e<t;e++){var o=Y((n=d[e]).norm[0],n.norm[1],i[n.id].sumX,i[n.id].sumY);r=Math.abs(o)*n.distance,i[n.id].dx+=n.norm[0]*r,i[n.id].dy+=n.norm[1]*r}return P(i)}function ne(e,r){var i=x(e),o=[];i?o=t.privateGetItem(A(i).nodeIds):n.api.isShown()||(o=t.privateGetRawItems().filter(function(t){var n=Q(t.id),r=x(t.id);return!n&&!r&&e!==t.parentId})),o.filter(function(t){return"node"===t.type&&!t.hi&&t.id!==e}).forEach(function(t){d.push({id:t.id,to:e,distance:r})})}function re(e){d.forEach(function(t){e[t.id]&&(t.distance=0)})}h.selectItems=function(e){f=f||{},e.forEach(function(e){f[e]=!0})},h.adjustForNewComboSize=function(e,t,n){if(0!==t){n&&ne(e,t);var r=x(e);if(r){var i=le(r),o=y(r,"oc")||{},a=2*i;if(a!==o.w){var s=(a-o.w)/2;o.w=a,M(r,"oc",o),A(r).open&&ie(r,s,n)}}}};var ie=h.adjustForNewComboSize;function oe(e,t,n,r,o){for(var a=[],s=A(e).nodeIds,u=s.length,l=0;l<u;l++){var c=b(s[l]);if(!c.hi){var f={include:!0,partial:o,maxLength:r,padExtents:!0},d=n&&n[c.id],h=i.nodeSize(c,t,f),p=c._combo?i.nodeSize(c,t,f,!0):h;a.push({id:c.id,x:d?c.x+d.dx:c.x,y:d?c.y+d.dy:c.y,t:c.t,rOpen:p.radius,labelOffset:i.labelOffset(c,r),r:h.radius,w:h.width,h:h.height})}}return a}function ae(e,t,n,r){var i=oe(e,t,null,r,!0);return z(o.concentricLayout(i,{includeLabels:!0,padding:n}))}function se(e,t,n,r){var o=A(e),a=s.syncLayout("lens",z(o.nodeIds.map(b)),z(o.linkIds.map(b).filter(function(t){return t.id1!==e&&t.id2!==e})),{consistent:!0},"all"),u=oe(e,t,null,r);u.forEach(function(e){e.x=a.vertices[e.id].x,e.y=a.vertices[e.id].y});var l=i.radialExtents(u,t,n,!0,r);return null!==l&&u.forEach(function(e){e.x-=l.x,e.y-=l.y}),z(u)}function ue(e,t,n,r,o){var a=y(e,"oc")||{},s=2*t;if(n||a.w<s){a.w=s,M(e,"oc",a);var u=A(e);if(!u.open){var l={include:!0,maxLength:o},c=b(e),f=i.nodeSize(c,r,l,!0),d=i.nodeSize(c,r,l,!1);u.e=d.radius/f.radius,M(e,"_combo",u)}}}h.adjustTopLevelLayout=function(e,t,n,r){var i=m();s.asyncLayout(e.name,i.nodes,i.links,e,"toplevel",n,function(e){re(e.vertices),Object.keys(e.vertices).forEach(function(t){var n=e.vertices[t],r=y(t,"x"),i=y(t,"y");ee(t,n.x-r,n.y-i)}),t(e.updateEdges),r(e.extents)})},h.getExtentsOfChildren=function(e,n,r){var o=t.privateGetCanvas(),a=z(te()),s=z(oe(e,o,a,r)),u={x:y(e,"x"),y:y(e,"y")};return i.radialExtentsFromPoint(s,u,o,Da,n,r)};var le=h.getExtentsOfChildren;function ce(e){var t=A(e);return t?t.nodeIds.reduce(function(e,t){return e+ce(t)},0):y(e,"hi")?0:1}h.layoutCombo=function(e,n){var r,o,a=t.privateGetCanvas(),s=t.options().truncateLabels,u=s?s.maxLength:void 0;return"none"===v.arrange?ue(e,r=le(e,!0,u),v.resize,a,u):(o="concentric"===v.arrange?ae(e,a,Da,u):se(e,a,Da,u),r=i.radialExtentsFromPoint(o,{x:0,y:0},a,Da,!0,u),re(o),ue(e,r,v.resize,a,u),function(e,t,n){for(var r=A(e).nodeIds,i=r.length,o=y(e,"x"),a=y(e,"y"),s=0;s<i;s++){var u=r[s];if(!y(u,"hi")){var l={id:u},c=y(u,"x"),f=y(u,"y");n&&(l._offset={x:o-c-n.dx,y:a-f-n.dy},C(l)),ee(u,o+t[u].x-c,a+t[u].y-f)}}}(e,o,n)),r},h.setComboMinimumSize=function(e){var n=t.privateGetCanvas(),r=t.options().truncateLabels,i=r?r.maxLength:void 0;ue(e,le(e,!0,i),!1,n,i)},h.updateComboNodeGlyphs=function(){if(v.updateGlyph){var e={};[P(u),l.list].forEach(function(t){t.forEach(function(t){if(t){var n=t.id;t._combo&&"node"===y(n,"type")&&B(n).forEach(function(t){e[t]||(function(e){var t=A(e);if(t.g){var n=!1,r=(y(e,"g")||[]).map(function(r){return r.p===t.g?(n=!0,H(r,{t:ce(e)})):r});n?M(e,"g",r):(t.g=void 0,M(e,"_combo",t))}}(t),e[t]=!0)})}})})}};var fe=h.updateComboNodeGlyphs;function de(e,n){Object.keys(e).forEach(function(r){var i=e[r],o=a(t.privateGetItem(r)._combo);S(i.open)||(o.open=i.open),o.nodeIds=he(o.nodeIds,i.removeNodeIds),o.nodeIds=pe(o.nodeIds,i.addNodeIds),o.linkIds=he(o.linkIds,i.removeLinkIds),o.linkIds=pe(o.linkIds,i.addLinkIds),n.push({id:r,_combo:o})})}function he(e,t){var n=e;return t.length&&(n=n.filter(function(e){return-1===t.indexOf(e)})),n}function pe(e,t){var n=e;return t.length&&(n=n.concat(t)),n}return h.applyUpdates=function(e,n){v.updateGlyph&&fe();var r=t.selection(),i=Object.keys(g);te().forEach(function(e){ee(e.id,e.dx,e.dy)}),t.privateAddItemsToTransfer(i),function(e,n){var r=v.animate&&function(){var e=[],n={},r=[],i={},o={};function a(e){o[e]||(o[e]={addNodeIds:[],removeNodeIds:[],addLinkIds:[],removeLinkIds:[]})}function s(e,t,n){a(t),o[t][(n?"add":"remove")+("node"===e.type?"NodeIds":"LinkIds")].push(e.id)}function l(e){i[e]=!0;var n=t.privateGetItem(e);n&&"link"===n.type&&(c[n.id1]&&(i[n.id1]=!0),c[n.id2]&&(i[n.id2]=!0))}return P(u).forEach(function(i){var s=i.id,f=t.privateGetItem(s);if("x"in i&&f){var d=function(e){for(var n=B(e),r=0;r<n.length;r++){var i=n[r],o=A(i),a=t.privateGetItem(i),s=a&&a._combo;if(!(s&&s.open||o&&o.open))return i}return e}(s);r.push({id:s,x:y(d,"x"),y:y(d,"y")})}if("parentId"in i&&f&&f.parentId!==i.parentId){var h={id:s},p="node"===f.type;if(h.parentId=null,p){var g=function(e){for(var n=t.privateGetAncestryIds(e),r=0;r<n.length;r++){var i=t.privateGetItem(n[r])._combo;if(!i||!i.open)return n[r]}return e}(s),v=t.privateGetItem(g);h.x=v.x,h.y=v.y,"x"in i||r.push({id:s,x:f.x,y:f.y})}else if(i.parentId)if(F(i.parentId)){var m=t.privateGetItem(i.parentId);!m||m._combo.open&&t.privateAllParentsOpen(i.parentId)||!f.parentId||(delete h.parentId,c[f.parentId]&&l(f.parentId))}else if(V(i.parentId)){var b=L(i.parentId),x=t.privateGetItem(i.parentId),w=b||x;if(w)if(t.privateGetItem(w.id1)&&t.privateGetItem(w.id2)){var E=u[w.id2]&&"parentId"in u[w.id2],C=u[w.id1]&&"parentId"in u[w.id1]||t.privateAllParentsOpen(w.id1),k=E||t.privateAllParentsOpen(w.id2);C&&k?(h.parentId=i.parentId,b&&(n[i.parentId]=!0)):f.parentId&&c[f.parentId]?y(s,"hi")||(h.hi=!0,M(s,"hi",!1)):delete h.parentId}else c[f.parentId]&&(delete h.parentId,l(f.parentId));else c[f.parentId]&&(h.parentId=i.parentId)}e.push(h)}"_combo"in i&&F(s)&&f&&f._combo.open!==i._combo.open&&(r.push({id:s,_combo:{e:i._combo.e}}),a(s),o[s].open=!0),F(s)&&f&&"oc"in i&&f.oc&&f.oc.w!==i.oc.w&&r.push({id:s,oc:{w:i.oc.w}})}),e.forEach(function(e){var n=t.privateGetItem(e.id);if("parentId"in e){var r=n.parentId,o=e.parentId;r&&!(r&&c[r]&&!i[r])&&s(n,r,!1),o&&(L(o)||s(n,o,!0))}}),Object.keys(c).forEach(function(e){if(!i[e]){var n=t.privateGetItem(e);n&&n.parentId&&s(n,n.parentId,!1)}}),de(o,e),{propertiesToSetBeforeAnimation:e,itemsToMergeBeforeAnimationMap:n,propertiesToAnimate:r,idsToRemoveAfterAnimationMap:i}}();if(v.animate&&Object.keys(r.idsToRemoveAfterAnimationMap).forEach(function(e){delete c[e]}),t.privateRemoveItem(Object.keys(c)),v.animate){var i=[];Object.keys(r.itemsToMergeBeforeAnimationMap).forEach(function(e){i.push(L(e)),R(e)}),t.privateMerge(i),t.privateSetNonImageProperties(r.propertiesToSetBeforeAnimation),t.privateSetAllDirty(),w(n),t.privateAnimateProperties(r.propertiesToAnimate,v,function(){t.privateRemoveItem(Object.keys(r.idsToRemoveAfterAnimationMap)),w(e)},!0)}else w(e)}(function(){t.privateMerge(l.list.filter(function(e){return null!==e})),v.animate||w(n),t.privateSetNonImageProperties(P(u),!0),t.privateRemoveItemsFromTransfer(i),g={},function(e){if(f)t.selection(Object.keys(f)),t.trigger("selectionchange");else{var n=e.filter(t.privateItemIsShown);e.length!==n.length&&(t.selection(n),t.trigger("selectionchange"))}}(r),l={list:[],index:{},nulls:0,comboLinkAdj:{}},u={},c={},f=null,d=[],w(e)},n)},h.preMergeDetails=function(){return{itemsToMerge:l.list,propertiesToSet:P(u)}},h}function Fa(e,t){if(1===t.length)-1===e.indexOf(t[0])&&e.push(t[0]);else{for(var n={},r=0;r<e.length;r++)n[e[r]]=!0;for(var i=0;i<t.length;i++)n[t[i]]||e.push(t[i])}}function Ga(e,t,n,r){var i=da(),o=0;function s(t){var n=i.nodeSize(t,e.privateGetCanvas(),{include:!1}).radius;return t._combo&&t._combo.open&&(t.oc&&p(t.oc.bw)?n-=t.oc.bw:n-=ln.bw),Math.max(n,0)}function u(t){var n;do{n=t+ ++o}while(e.privateGetItem(n));return n}function l(){return u(Va)}function c(e){return e&&"number"==typeof e.lat&&"number"==typeof e.lng}function f(e,t,n){if(e._combo={nodeIds:[],linkIds:[],open:!1,e:1,g:null},n?e.oc=n:e.oc||(e.oc={}),e.oc=k(e.oc,r().openCombos),p(e.oc.w)||(e.oc.w=0),void 0===e.x&&(e.x=0),void 0===e.y&&(e.y=0),e.g=e.g||[],null!==t){var i={p:"ne",c:"rgb(255, 0, 0)",t:"0"};i=G(i,t||{}),e.g.unshift(i),e._combo.g=i.p}}function d(n,i){var o,s=n.style,l=s||a(i[0],"d");if(l.type="node",l.id=u(Ba),l.t=function(e,t){return S(t.label)?e.map(function(e){return e.t}).filter(function(e){return!S(e)&&""!==e}).join("\n"):t.label}(i,n),void 0===n.glyph&&r&&(n.glyph=r().comboGlyph),null!=n.glyph&&!m(n.glyph))throw new Error("[combo().combine] glyph must be an object");if(f(l,n.glyph,n.openStyle),n.open&&(l._combo.open=!0),l.hi=s&&!S(s.hi)?s.hi:i.every(function(e){return e.hi}),l.bg=s&&!S(s.bg)?s.bg:i.every(function(e){return e.bg}),l.pos=s&&c(s.pos)?s.pos:function(e,t){if("first"!==e.position){var n=0,r=0,i=0;if(t.forEach(function(e){c(e.pos)&&(r+=e.pos.lat,i+=e.pos.lng,n++)}),n>0)return{lat:r/n,lng:i/n}}else for(var o=0,a=t.length;o<a;o++){var s=t[o];if(c(s.pos))return s.pos}}(n,i),m(n.d)&&(l.d=n.d),t&&t.api.isShown()&&c(l.pos)){var d=t.api.viewCoordinates(l.pos.lat,l.pos.lng);o=e.worldCoordinates(d.x,d.y)}else o="first"===n.position?i[0]:function(e){var t=0,n=0;return e.forEach(function(e){t+=e.x||0,n+=e.y||0}),{x:t/e.length,y:n/e.length}}(i);return l.x=o.x,l.y=o.y,l}!function(){var t=0,r=M({animate:!1});n.privateBind("dragstart",function(n,r){if("resize"===n&&r){var i=e.privateGetItem(r);"node"===i.type&&i._combo&&i._combo.open&&(t=s(i))}}),n.privateBind("dragcomplete",function(n,i){if("resize"===n&&i){var o=e.privateGetItem(i);if("node"===o.type&&o._combo&&o._combo.open){var a=r.getExtentsOfChildren(i,!0,void 0),u=s(o);if(u<a.r){var l=r.getProperty(i,"oc")||{};u=a.r,l.w=2*a.r,r.setProperty(i,"oc",l)}r.adjustForNewComboSize(i,u-t,!0),r.applyUpdates()}}})}();var h=pn({strings:{label:1}});function v(r,i,o){var s=C(r),u=t.api.isShown(),l=k(i,{animate:!0,select:!0,time:250,arrange:"lens",resize:!0,easing:"cubic"}),c=M(l),f=[],p=[],g={};s.forEach(function(t){var n,r={},i=[],o=a(t,"d");if(o&&o.ids&&(h.ensureObject(o,!1),n=e.privateGetItem(o.ids)),u&&o.open&&delete o.open,!n)throw new Error("[combo().combine] function must be passed valid combo definitions");if(n.forEach(function(e){if(!e)throw new Error("[combo().combine] function must be passed valid ids");if("node"===e.type){if(e.parentId)throw new Error("[combo().combine] nodes cannot be combined if they are already in a combo");if(g[e.id])throw new Error("[combo().combine] nodes should only be in one combo");g[e.id]=!0,r[e.id]=!0,i.push(e)}}),!Object.keys(g).length)throw new Error("[combo().combine] function must be passed at least one node id");var s=d(o,i);c.mergeItem(s),I(c,z(i),s.id,[],[]),c.layoutCombo(s.id,{dx:0|o.dx,dy:0|o.dy}),f.push(s),p.push(s.id)}),l.select&&c.selectItems(p),n.trigger("prechange","combine"),c.applyUpdates(function(){e.applyRevealedLinkOffsets(f),e.privateSetAllItemsInComboDirty(p),w(o,p)})}function y(t,n,r){var i=t._combo,o=n||{nodes:[],links:[]},a=i.nodeIds?e.privateGetItem(i.nodeIds):[];function s(e){e._combo?(y(e,o,r),r&&("node"===e.type?o.nodes.push(e):o.links.push(e))):o[e.type+"s"].push(e)}return e.privateGetItem(i.linkIds).forEach(s),a.forEach(s),o}function b(t,n){var r=e.privateGetItem(t);return!(!r||"all"!==n&&n!==r.type||!r._combo)}function x(t,n){var r=e.privateGetItem(t);return b(t,n)&&!r.parentId}function A(t){return e.privateGetAncestryIds(t).length}function E(e,t,n){(t||e.getChangingComboNodeIds()).sort(function(e,t){return A(t)-A(e)}).forEach(function(t){var r=e.getComboProperty(t),i=(e.getProperty(t,"oc")||{}).w,o=e.layoutCombo(t),a=r.open?o-i/2:0;(!n||n.resize||a>0)&&e.adjustForNewComboSize(t,a,n.adapt)})}function M(n){return za(k(n,{comboLinkStyle:r().comboLinks}),e,t,l,i)}function T(t,n){var r={},i={};e.privateGetItem(e.privateNeighbourLinkIds(n)).forEach(function(t){t._combo?(i[t.id]=t,e.privateGetItem(t._combo.linkIds).forEach(function(e){r[e.id]=e})):r[t.id]=t}),P(i).forEach(t.transferComboLinkToCorrectParent),t.transferRawLinksToCorrectParents(P(r))}function I(e,t,n,r,i){var o=Object.keys(t),a={};e.transferNodesToCombo(o,n);var s={};P(t).forEach(function(e){s[e.id]=e,e._combo&&y(e,null,!0).nodes.forEach(function(e){s[e.id]=e}),e.hi||r.push(e.id),e.parentId&&(a[e.parentId]=!1)}),e.getIdsToRemove().forEach(function(t){var n=e.getProperty(t,"parentId");n&&(a[n]=!1)}),T(e,Object.keys(s)),r.length>0&&!e.getProperty(n,"hi")&&(r.length=0),Object.keys(a).sort(function(e,t){return A(e)-A(t)}).forEach(function(t){if(!e.removingItem(t)){var n=!1;e.forEachChild(t,function(t){e.getProperty(t,"hi")||a[t]&&!1!==a[t]||(n=!0)}),n||(a[t]=!0,i.push(t))}})}function R(t,r,i,o,a){var s=k(i,{animate:!0,time:250,select:!1,arrange:"lens",resize:!0,easing:"cubic",reposition:!1,adapt:!0}),u=null;if(r&&(!(u=e.privateGetItem(r))||"node"!==u.type||!u._combo))throw new Error("[combo().transfer] comboId must be the id of a combo node or null");var l=M(s),c=function(t,n){var r={};if(void 0===t)throw new Error("[combo().transfer] function must be passed a valid transfer destination");var i=t?function(e){var t={};return e.forEach(function(e){t[e]=!0}),t}(e.privateGetAncestryIds(t)):{};return e.privateGetItem(n).forEach(function(e){if(!e)throw new Error("[combo().transfer] function must be passed valid ids");if(i[e.id])throw new Error("[combo().transfer] cannot transfer a combo inside itself");"node"===e.type&&(r[e.id]=e)}),r}(r,C(t)),f=Object.keys(c),d=[],h=[];s.select&&l.selectItems(f),I(l,c,r,d,h),E(l,null,s),u&&!l.getComboProperty(u.id).open&&f.push(u),n.trigger("prechange",o),l.applyUpdates(function(){d.length>0&&e.show(d,{animate:!1}),h.length>0&&e.hide(h,{animate:!1}),e.applyRevealedLinkOffsets(f),w(a)},function(){s.animate&&e.applyRevealedLinkOffsets(f)})}function L(t,n){var i=C(n);(i=i.filter(function(t){!function(e){["id","id1","id2"].forEach(function(t){t in e&&(e[t]+="")}),null!=e.parentId&&(e.parentId+="")}(t);var n=e.privateGetItem(t.id);if(n&&t.type&&t.type!==n.type)return!1;if(n&&n.oc&&(t.oc=H(n.oc,t.oc)),"node"===t.type)return!0;if("link"===t.type){if(n&&"link"===n.type&&(n.id1!==t.id1||n.id2!==t.id2))throw new Error("You cannot change the ends of an existing link. You should remove the existing item first");return t.id1!==t.id2||e.options().selfLinks}throw new Error("The type of the item should be specified.")})).forEach(t.mergeItem);var o,a=r?r().comboGlyph:null,s=0,u=[],l={};try{o=function(e,t,n){var r=void 0===n?function(e){return e}:n,i=new Map,o=[],a=[];for(e.forEach(function(e){var t=r(e);t&&i.set(t,{item:e,inDegree:0})}),e.forEach(function(e){var n=t(e),o=r(e);n&&n.forEach(function(e){i.has(e)&&e!==o&&i.get(e).inDegree++})}),e.forEach(function(e){var t=r(e);t&&0===i.get(t).inDegree&&a.push(e)});a.length>0;){var s=a.shift();o.push(s);var u=t(s);if(u)for(var l=0;l<u.length;l++){var c=i.get(u[l]);c&&1==c.inDegree--&&a.push(c.item)}}if(o.length<i.size)throw new Error("Cycle detected");return o}(t.preMergeDetails().itemsToMerge,function(e){return[t.getParentId(e.id)]},function(e){return e.id})}catch(e){throw new Error("A node's parentId can't refer to a child")}o.forEach(function(n){var r=e.privateGetItem(n.id);if(r&&_(n,"parentId")&&r.parentId!==n.parentId)throw new Error("You can't change the parentId of an existing item");if("link"!==n.type&&!(void 0===n.parentId||r&&n.parentId===r.parentId)){if(n.id===n.parentId)throw new Error("A node can't be the parent of itself");if(null!==n.parentId){var i=t.getItem(n.parentId);if(!i||!i.id)return void t.setProperty(n.id,"parentId",null);if("link"===i.type)throw new Error("The parentId of a node can't be a link");i._combo||(f(i,a,null),t.mergeItem(i),u.push(i.id)),void 0===n.x&&t.setProperty(n.id,"x",i.x),void 0===n.y&&t.setProperty(n.id,"y",i.y),n.parentId=i.id,t.setProperty(n.id,"_offset",{x:0,y:0}),(l[n.parentId]||(l[n.parentId]=[])).push(n.id),s++}}}),Object.keys(l).forEach(function(e){t.transferNodesToCombo(l[e],e)}),t.transferRawLinksToCorrectParents(o.filter(function(n){if("link"===n.type){e.privateGetItem(n.id)||(n.parentId=null);var r=e.privateGetItem(n.id);if(r){var i=r.parentId;i&&"link"===t.getProperty(i,"type")&&t.updateComboLinkProperties(i)}else if(0!==n.id2.indexOf("dummyEnd"))return!0}return!1})),u.forEach(t.layoutCombo),s>0&&t.updateComboNodeGlyphs()}function O(t){var n=[];t.forEach(function(t){var r=e.privateGetItem(t.id),i=t.count;if(r.g){var o=!1,a=r.g.map(function(e){return e.p===r._combo.g?(o=!0,H({},e,{t:i})):e});o&&n.push({id:r.id,g:a})}}),n.length&&e.privateSetNonImageProperties(n)}function N(e,t,n,r){return e.filter(function(e){return n[e.id]||!r[e.id]&&!e[t]})}function D(t,n,r,i,o){e.privateGetItem(t).forEach(function(t){if(t){var a=t[i]===o;if(t._combo){var s=y(t,null,!0);s.nodes.forEach(function(e){!!e[i]===o&&(a=!0,n[e.id]=!0)}),s.links.forEach(function(e){!!e[i]===o&&(a=!0,n[e.id]=!0)}),a&&(r[t.id]=!0)}for(var u=e.privateGetParentItems(t.id),l=u.length-1;l>=0;l--){var c=u[l];("node"===t.type&&a&&"hi"===i||!!c[i]===o)&&(r[c.id]=!0,a=!0)}}})}function V(t,n,r,i,o,a,s){var u={toShow:[],toHide:[]};u[i]={nodes:[],links:[]},u[o]={nodes:[],links:[]},"hi"===t&&(u.combos={nodes:[],links:[]});var l={},c=B(n),f=B(r),d=n,h=r;return a&&a.all&&(d=a.all[i].nodes.concat(a.all[i].links),h=a.all[o].nodes.concat(a.all[o].links)),D(d,c,l,t,!0),D(h,f,l,t,!1),s||"bg"!==t||function(t,n,r){e.privateGetRawItems().forEach(function(e){!W(e.id)||e.bg&&!t[e.id]||(delete t[e.id],delete n[e.id],e.bg||(r[e.id]=!0))})}(l,c,f),u=function(t,n,r,i,o){return Object.keys(l).forEach(function(r){var a,s,u,l=e.privateGetItem(r),c=y(l),f=N(c.links,n,i,o);if(l._combo.nodeIds?(u="nodes",a=(s=N(c.nodes,n,i,o)).length>0):(u="links",a=f.length>0),u){if(a&&"hi"===n){var d={id:r,links:f};s&&(d.nodes=s),t.combos[u].push(d)}a!==!l[n]&&(a?i[r]=!0:o[r]=!0)}}),t}(u,t,0,c,f),e.privateGetItem(Object.keys(c)).forEach(function(e){null!==e&&(u.toShow.push(e.id),u[i][e.type+"s"].push(e.id))}),e.privateGetItem(Object.keys(f)).forEach(function(e){null!==e&&(u.toHide.push(e.id),u[o][e.type+"s"].push(e.id))}),u}function W(t){var n=e.privateGetItem(t);return!!(n&&n._combo&&"node"===n.type&&n._combo.open)}function Z(r,i,o,a){if(!t||!t.api.isShown()){var s,u=C(r),l=k(o,{animate:!0,time:300,easing:"cubic",adapt:!0,updateGlyph:!1}),c=e.options().truncateLabels;c&&(s=c.maxLength);var f=i?"open":"close",d=M(l),h=function(t,n){return e.privateGetItem(u).filter(function(e){return e&&"node"===e.type&&e._combo&&e._combo.open===!n})}(0,i);h.length?(h.sort(function(e,t){return A(e.id)-A(t.id)}).forEach(function(e){var t=Y(e,i,s);d.setComboSubProperty(e.id,"open",i),d.setComboSubProperty(e.id,"e",i?1:t.sizeRatio),d.adjustForNewComboSize(e.id,t.sizeDiff,l.adapt)}),n.trigger("prechange",f),d.applyUpdates(function(){l.animate&&i||e.applyRevealedLinkOffsets(h),e.privateSetAllItemsInComboDirty(u),w(a)},function(){l.animate&&i&&e.applyRevealedLinkOffsets(h)})):w(a)}}function Y(t,n,r){var o=e.privateGetCanvas(),a={include:!1,maxLength:r},s=i.nodeSize(t,o,a,!0).radius,u=i.nodeSize(t,o,a,!1).radius;return{sizeDiff:n?s-u:u-s,sizeRatio:0===s?1:u/s}}function j(e,t,n,r){function i(n,r){e[n]||(e[n]={}),e[n][r]=t[n][r]}"shown"===n&&(e.combos=t.combos),i(n,"nodes"),i(n,"links"),i(r,"nodes"),i(r,"links")}var U={api:{combine:v,combineNodes:v,uncombine:function(t,n,r){var i=k(n,{animate:!0,time:250,full:!1,select:!0,reposition:!0}),o=C(t).filter(function(e){return x(e,"node")});if(0!==o.length){var a=[];o.forEach(function(t){var n=e.privateGetItem(t),r=i.full?F(y(n).nodes):n._combo.nodeIds;a=a.concat(r)}),R(a,null,i,"uncombine",r)}else w(r)},info:function(t){var n=null,r=e.privateGetItem(t);return r&&r._combo&&(n=y(r,n)),a(n,!0)},isCombo:function(e,t){var n=C(e),r=k(t,{type:"all"});if(!r.type.match(/^(node|link|all)$/))throw new TypeError("[combo().isCombo] opts type property should be either 'node', 'link' or 'all'");return n.some(function(e){return b(e,r.type)})},find:function(t,n){var r=k(n,{parent:"top"});if(!Array.isArray(t)&&!p(t)&&"string"!=typeof t)throw new Error("[combo().find] Incorrect argument passed");var i={top:function(t){var n=e.privateTopParentId(t);return{parentComboId:n,isCombo:x(n,"all")}},first:function(t){var n=e.privateGetItem(t),r=n?n.parentId:null;return{parentComboId:r,isCombo:b(r,"all")}}},o=i[r.parent]?i[r.parent]:i.top,a=!Array.isArray(t),s=C(t).map(function(e){var t=o(e);return S(t.parentComboId)||!t.isCombo||t.parentComboId===e?null:t.parentComboId});return a?s[0]:s},transfer:function(e,t,n,r){R(e,t,n,"transfer",r)},open:function(e,t,n){Z(e,!0,t,n)},close:function(e,t,n){Z(e,!1,t,n)},isOpen:W,arrange:function(e,t,r){var i=k(t,{animate:!0,time:300,name:"lens",resize:!0,easing:"cubic",adapt:!0});if(i.arrange=i.name,i.resize||"none"!==i.name){var o=C(e).filter(function(e){return b(e,"node")}),a=M(i);E(a,o,i),n.trigger("prechange","arrange combo"),a.applyUpdates(r)}else w(r)},reveal:function(t){return e.privateReveal(t)}},internalUse:{hide:function(e,t){return U.internalUse.filter([],e,{},t).toHide},show:function(e){return U.internalUse.filter(e,[],{},{updateGlyph:!0}).toShow},filter:function(e,t,n,r){var i=V("hi",e,t,"shown","hidden",n);return r.updateGlyph&&O(i.combos.nodes.map(function(e){return{id:e.id,count:e.nodes.length}})),j(n,i,"shown","hidden"),i},foreground:function(e,t,n,r){var i=V("bg",e,t,"foreground","background",n,r.foregroundOpenCombos);return j(n,i,"foreground","background"),i},preMerge:function(e,t){var n=M(k(t,{arrange:"none",resize:!0}));return L(n,e),n.preMergeDetails()},preDelete:function(t){var n=C(t),r=e.privateGetItem(n).filter(function(e){return null!==e}),i=M({animate:!1});function o(t){var n=t._combo;e.privateGetItem(n.linkIds).forEach(function(t){r.push(t),t._combo&&e.privateGetItem(t._combo.linkIds).forEach(function(e){r.push(e)})}),n.nodeIds&&e.privateGetItem(n.nodeIds).forEach(function(e){r.push(e),e._combo&&o(e)})}r.forEach(function(e){e._combo&&o(e)});var a=z(r);e.privateNeighbourLinkIds(Object.keys(a)).forEach(function(t){r.push(e.privateGetItem(t))}),i.removeItems(r.map(function(e){return e.id})),i.applyUpdates()},serialize:function(){var t=e.privateGetRawItems(),n={nodes:[],links:[]};return t.filter(function(e){return e._combo}).forEach(function(t){var r=t._combo;n[t.id]=a(t,"d"),n[t.id]._combo=a(r),"node"===t.type&&(n[t.id]._offsets=a(r.nodeIds.map(function(t){return e.privateGetItem(t)._offset}),!0))}),n},preLoadUp:function(e,t){if(o=0,e){var n=e.combos;n&&(n.links&&n.links.length||n.nodes&&n.nodes.length)?function(e,t){var n={},r=[];e.combos.nodes.forEach(function(t){var i=t.nodes.map(function(n){var r=G({parentId:t.id,_offset:{x:n.x||0,y:n.y||0}},n);return e.items.push(r),n.id}),o={nodeIds:[],linkIds:[],open:!1,e:1,g:null};o.nodeIds=i,n[t.id]={type:"node",_combo:o,oc:{w:0}},r.push(t.id)}),e.items.forEach(function(e){if(n[e.id]&&(G(e,n[e.id]),e._combo.g=null,e.g&&e.g.length>0)){var t=e.g[0];g(t.t)&&(e._combo.g=t.p)}"link"===e.type&&function(e){return 0===e.indexOf(Va)}(e.id)&&G(e,{_combo:{linkIds:[]}})}),w(t,{comboIdsToLayout:r,itemsToMerge:{}})}(e,t):function(e,t){var n=e.combos||{},r=e.items||[],i={},o=[],a={};r.forEach(function(e){var t=e.id;if(n[t])throw new Error('Item "'+t+'" specified twice');if(null!=e.parentId){var r=n[e.parentId];if(r){var i=r._combo.linkIds;(r._combo.nodeIds||[]).indexOf(t)<0&&i.indexOf(t)<0&&(a[t]=e)}else a[t]=e}}),Object.keys(n).forEach(function(e){var t=n[e];if(t._combo&&("node"===t.type||"link"===t.type)){var a=t._offsets;if(delete t._offsets,"node"===t.type){if(t._combo.nodeIds.forEach(function(e,n){i[e]={parentId:t.id,_offset:a[n]}}),!("g"in t._combo)&&(t._combo.g=null,t.g&&t.g.length)){var s=t.g[0];g(s.t)&&(t._combo.g=s.p)}t.oc&&"w"in t.oc||(o.push(e),t.oc=t.oc||{},t.oc.w=0)}t._combo.linkIds.forEach(function(e){i[e]={parentId:t.id}});var u="node"===t.type?{nodeIds:[],linkIds:[],open:!1,e:1,g:null}:{linkIds:[]};G(u,t._combo),t._combo=u,r.push(t)}}),e.items=r.filter(function(e){return a[e.id]||"link"===e.type&&(a[e.id1]||a[e.id2])?(a[e.id]=e,!1):(i[e.id]&&G(e,i[e.id]),!0)}),w(t,{comboIdsToLayout:o,itemsToMerge:a})}(e,t)}else w(t)},postLoadUp:function(e,t,n){var r=M({animate:!1});t&&t.comboIdsToLayout.forEach(function(e){r.layoutCombo(e)});var i=e.combos;i&&i.links&&i.links.length?L(r,i.links):t&&L(r,P(t.itemsToMerge)),r.applyUpdates(n)},dblclick:function(t){var n=e.privateGetItem(t);if(n)if("node"===n.type&&n._combo)Z(t,!n._combo.open);else if(n.parentId){var r=e.privateGetItem(n.parentId);r&&"node"===r.type&&r._combo&&Z(r.id,!1)}},ensureMinimumOpenComboSize:function(e){var t=M({animate:!1});e.forEach(function(e){t.setComboMinimumSize(e)}),t.applyUpdates()},arrangeAndLayout:function(e,t,r,i,o){var a=k(t.arrange,{animate:!0,time:300,name:"lens",resize:!0,easing:"cubic",adapt:!0});a.arrange=a.name;var s=M(a);if(a.resize||"none"!==a.name){var u=C(e).filter(function(e){return b(e,"node")});E(s,u,a)}n.trigger("prechange","arrange combo"),s.adjustTopLevelLayout(t.layout,r,n,function(e){i(e),s.applyUpdates(o)})}}};return U}function Ha(e,t,n,r,i){var o,a,s,u=ut(),l=!0,c={webgl:[0,0,0,0],wsc:"rgba(0, 0, 0, 0)"},f=(a={},s={},{getColour:function(e){if(!e)return c;var t=a[e];if(!t){var n=ut(s);t={rgb:n,webgl:pt(n)},a[e]=t,s[n]=e}return t},getId:function(e){return s[e]||null}}),d={test:function(n,r,a,s){var c=[0,0,0];t.webgl?c=t.webglCanvas.renderer.drawShadowCanvas(Math.floor(n),Math.floor(r)):(l&&(o&&a.drawShadowCanvas(t,i),a.drawShadowCanvas(e,i),l=!1),c=e.getImageData(Math.floor(n),Math.floor(r),1,1).data);var h=Qe(c[0],c[1],c[2]);if(h===u)return null;var p=f.getId(h);if(p)return p;if(t.webgl)return null;var g=s||1;return g>5?null:n+g>5&&r+g>5?d.test(n-1,r-1,a,++g):d.test(n+1,r+1,a,++g)},dirty:function(){l=!0},debugCanvas:function(e){o=e},getShadowColourMap:function(){return f}};return d}function Wa(e,n,r,i,o,s){var u,l,f={},d=null,h=null,g=null,v=null,y=null,x=null,A=!1;o&&o.internalUse.setController(f);var M={arrows:"normal",backColour:void 0,backgroundAlpha:.2,bands:{bands:[],bottom:!1,top:!0},controlColour:qe.midgrey,dragPan:!0,defaultStyles:void 0,fontFamily:"sans-serif",gradient:void 0,handMode:!1,hover:150,iconFontFamily:"sans-serif",imageAlignment:{},labelOffset:0,linkStyle:{glyphs:"horizontal",transition:.75},linkEnds:{spacing:"tight",avoidLabels:!0},logo:void 0,marqueeLinkSelection:"centre",maxItemZoom:void 0,minZoom:.05,navigation:{shown:!0,p:"nw",x:0,y:0},overview:{icon:!0,p:"se",shown:!1,size:100},selectedLink:void 0,selectedNode:void 0,selectionColour:void 0,selectionFontColour:void 0,selfLinks:!1,_showShadowCanvas:!1,truncateLabels:void 0,watermark:{fb:!0},gestures:!0};u=s.resetControlColour(M.controlColour);var T={arrows:!0,fontFamily:!0,iconFontFamily:!0,imageAlignment:!0,labelOffset:!0,linkStyle:!0,linkEnds:!0,maxItemZoom:!0,selectedLink:!0,selectedNode:!0,selectionColour:!0,selectionFontColour:!0,truncateLabels:!0},_={controlColour:!0,navigation:!0,logo:!0,overview:!0,watermark:!0,fontFamily:!0},I=function(){var e=Vn(Gn,Wn),t="COMBO_",n={createComboSegment:function(e){return t+e},isComboSegment:function(e){return 0===e.indexOf(t)},createItemLayersAt:function(t){var i,o,a=[];t.forEach(function(t){a.push(t);var s=a;n.isComboSegment(t)&&(s=s.concat([zn.FG])),e.hasLayerPathAt(s)?o=e.getLayerAt(a):(o=e.createLayer(t,i),e.createLayer(zn.COMBO_CONTAINER,o),r(o)),i=o})}};function r(t){var n=e.createLayer(zn.BG,t);Hn.forEach(function(t){return e.createLayer(t,n)});var r=e.createLayer(zn.FG,t);Hn.forEach(function(t){return e.createLayer(t,r)})}function i(){e.setup(),e.createLayer(zn.BANDS),e.createLayer(zn.UNDERLAYS),r(e.createLayer(zn.MAIN)),e.createLayer(zn.COMBOS);var t=e.createLayer(zn.TRANSIENT);r(e.createLayer(zn.MAIN,t)),e.createLayer(zn.COMBOS,t);var n=e.createLayer(zn.REVEALED);r(e.createLayer(zn.MAIN,n)),e.createLayer(zn.COMBOS,n),[zn.DRAGGERS,zn.HANDLES,zn.BANDLABELS,zn.OVERLAYS,zn.OVERVIEW_IMAGE,zn.OVERVIEW,zn.OVERLAYSSHADOW,zn.OVERVIEWSHADOW,zn.WAIT].forEach(function(t){e.createLayer(t)})}n.setShadowColourMap=function(t){e.setShadowColourMap(t),i()},n.hasPath=e.hasLayerPathAt,n.removeAllItems=i,i();var o=H({},e);return H(o,n)}();e.__w=I;var L=1;f.combo=Ga(e,o,n,function(){var e,t={},n={};return M.defaultStyles&&(M.defaultStyles.comboLinks&&(t=M.defaultStyles.comboLinks),M.defaultStyles.openCombos&&(n=M.defaultStyles.openCombos),e=M.defaultStyles.comboGlyph),{comboLinks:t,openCombos:n,comboGlyph:e}});var N="Cambridge Intelligence",P=[47,6,-11,-58,-64,-52,-48,-59,-51,21,-22,-66,-66,-48,-58,-67];f.setOverlayContext=function(e){l=e},f.wait=function(e){var t;return void 0!==e&&e!==ce&&(ce=e,e&&te((t=0,nn(function(e){return fe=Math.floor(8*(1-(t+=e)%1200/1200)),ce})))),ce},f.getCanvasContext=function(){return g},f.setCanvasContext=function(e){g=e},f.setView=function(e){d=e},f.setOverviewView=function(e){h=e},f.setShadowCanvas=function(e,t,n){y=Ha(e,g,0,0,d),I.setShadowColourMap(y.getShadowColourMap()),v.setAllDirty()},f.setModel=function(e){v=e,g&&g.webgl&&g.webglCanvas.renderer.shutdownAndReset(),v.setOptions(M)},f.initOverlays=function(){r.setup(u);var e=M.watermark;function t(e,t){for(var n="",r=0;r<t.length;r++)n+=String.fromCharCode(e.charCodeAt(r)+t[r]);return n}e&&r.addTextWatermark(e.u?e.u:void 0,e.t,e.fs||80,e.fc||qe.lightgrey,e.fb,e.fbc,e.a,e.ff?e.ff:M.fontFamily),M.navigation&&M.navigation.shown&&r.addNavigation(f,d,M.navigation),M.overview&&r.addOverview(f,v,d,Q,M.overview),M.logo&&M.logo.u&&r.addLogo(M.logo),r.remove(t(N,re),t(N,ie),t(N,P)),r.addBanding(M),J({drawOnly:!0})},f.options=function(n,r){if(n){var i=!1,l=!1,c=!1,h=a(n),x=m;t(h,function(e,n){if(i=!b(M[n],e)){if(M[n]=e,/fontfamily/i.test(n)&&(M[n]=Zt(e)),"logo"===n&&("string"==typeof e&&(M[n]={p:"ne",u:null,x:0,y:0},M[n].u=e),e||(M[n]={p:"ne",u:null,x:0,y:0})),"navigation"===n&&(e?M[n]=x(e)?k(e,{shown:!0,p:"nw",x:0,y:0}):{shown:!0,p:"nw",x:0,y:0}:(M[n]={shown:!0,p:"nw",x:0,y:0},M[n].shown=!1)),"overview"===n&&(e?M[n]=x(e)?k(e,{icon:!0,p:"se",shown:!1,size:100}):{icon:!0,p:"se",shown:!1,size:100}:(M[n]={icon:!0,p:"se",shown:!1,size:100},M[n].icon=!1,M[n].shown=!1)),"watermark"===n&&x(e)&&(e.fc&&(M[n].fc=e.fc&&nt(e.fc)?e.fc:void 0),e.fbc&&(M[n].fbc=e.fbc&&nt(e.fbc)?e.fbc:void 0)),"bands"===n)if(e)if(m(e)){if(M[n]=k(e,{bands:[],bottom:!1,top:!0}),M[n].bands){M[n].bands=C(M[n].bands);for(var r=M[n].bands.length,a=0;a<r;a++)M[n].bands[a]=k(M[n].bands[a],{fb:!1,fc:"lightgrey",x:0,w:100})}}else M[n]={bands:[],bottom:!1,top:!0};else M[n]={bands:[],bottom:!1,top:!0};if("truncateLabels"===n&&(M[n]=!!e&&(m(e)?k(e,{maxLength:30,showOnHover:!0}):{maxLength:30,showOnHover:!0})),"selectedNode"!==n&&"selectedLink"!==n||!x(M[n])||v.ensureObject(M[n]),"_showShadowCanvas"===n&&A!==M._showShadowCanvas&&y.debugCanvas((A=M._showShadowCanvas)?g:null),"imageAlignment"===n&&(e?m(e)&&(M[n]=function(e){function t(e,t){p(e[t])?(e[t]=Math.min(50,e[t]),e[t]=Math.max(-50,e[t])):e[t]=0}return Object.keys(e).forEach(function(n){var r=e[n];t(r=k({dx:r.dx,dy:r.dy,e:r.e},{dx:0,dy:0,e:1}),"dx"),t(r,"dy"),(!p(r.e)||r.e<=0)&&(r.e=1);var i=n;p(parseInt(n,10))&&(i=String.fromCharCode(parseInt(n,10))),e[i]=r}),e}(e)):M[n]={}),"controlColour"===n&&(e?nt(e)&&(u=s.resetControlColour(e)):u=s.resetControlColour(null)),"linkStyle"===n)if(e&&m(e)){M[n]=k(e,{glyphs:"horizontal",transition:.75});var f=M[n].transition;(!p(f)||f<0||f>1)&&(M[n].transition=.75)}else M[n]={glyphs:"horizontal",transition:.75};"defaultStyles"===n&&t(e,function(e,t){-1!==["openCombos","comboLinks","comboGlyph"].indexOf(t)?"comboGlyph"===t&&null===M[n][t]||(M[n][t]=x(e)?e:void 0,M[n][t]&&v.ensureObject(M[n][t])):M[n][t]=void 0}),"handMode"===n&&D()&&o.internalUse.setHandMode(M.handMode),T[n]&&i&&(c=!0),_[n]&&(l=!0)}}),v.setOptions(M),d.setMaxItemZoom(M.maxItemZoom),d.setMinZoom(M.minZoom),c&&(v.setAllDirty(),J({all:!0})),l&&f.initOverlays(),D()&&!e.lock()&&o.internalUse.enableDragging(M.handMode),J({drawOnly:!0}),s.invokeWhenImagesHaveLoaded(r)}return a(M,!0)},f.inMapMode=function(){return o&&o.api.isShown()};var D=f.inMapMode;f.watermarkSize=function(){return r.getWatermarkSize(g,s)},f.load=function(e,t){var n=a(e);f.combo.internalUse.preLoadUp(n,function(e){v.load(n),f.combo.internalUse.postLoadUp(n,e,function(){n.viewSettings&&f.setViewSettings(n.viewSettings,!1),!o||n.map&&n.map.keepSameMode?w(t):o.internalUse.loadUp(n.map,t)})})},f.merge=function(t,r){n.trigger("prechange","merge");var i=f.combo.internalUse.preMerge(t,r),a=i.itemsToMerge;D()&&(a=o.internalUse.preMerge(a)),v.merge(a),e.privateSetNonImageProperties(i.propertiesToSet)},f.appendCombos=function(e){e.combos=f.combo.internalUse.serialize(),e.reveal=f.combo.api.reveal()},f.setItem=function(t){var n=e.privateGetItem(t.id);if(!n||n.type===t.type){var r=f.combo.internalUse.preMerge([t]),i=r.itemsToMerge,a=i.shift();a&&D()&&o.internalUse.preSetItem(a),v.merge(i),a&&v.setItem(a),e.privateSetNonImageProperties(r.propertiesToSet)}},f.removeItem=function(e){f.combo.internalUse.preDelete(e)};var V=f.removeItem;function z(e,n){t(n,function(t,r){var i=e[r];if(m(i)&&m(t))z(i,t);else if(function(e,t,n){return"id"!==r&&"string"==typeof e&&Z[r]&&i}(t))e[r]=ot(i),n[r]=ot(t);else if(function(e,t){return Array.isArray(e)&&Z[t]&&"string"==typeof e[0]}(i,r))for(var o=Math.max(t.length,i.length),a=0;a<o;a++){var s=t[a],u=i[a];n[r][a]=ot(s||u),e[r][a]=ot(u||s)}})}function F(e,t,n){return"number"==typeof e?e+n*(t-e):Array.isArray(e)?(Math.abs(e[0]-t[0])>.5?(r=e[0]<t[0]?F(1+e[0],t[0],n):F(e[0],1+t[0],n),r-=Math.floor(r)):r=F(e[0],t[0],n),at([r,F(e[1],t[1],n),F(e[2],t[2],n),F(e[3],t[3],n)])):t;var r}function W(e,n,r){var i={};return t(e,function(t,o){i[o]=o in n?Z[o]?F(e[o],n[o],r):n[o]:t}),i}f.setProperties=function(e,t,r,i){r||n.trigger("prechange","properties"),D()&&o.internalUse.convertPos(e),v.setProperties(e,t,i,!1,!0)},f.setViewSettings=function(e,t,n,r){te(d.fromSettingsDirect(e,t,n,r))};var Z=B(fn.concat(["b","b1","b2","bw","c","c2","donut","e","fbc","fc","fi","fs","h","n","oc","off","r","w","x","y","_combo","t1","t2","v"])),Y={};fn.concat(["fi","oc","_combo","t1","t2"]).forEach(function(e){Y[e]=W}),Y.donut=function(e,n,r){var i,o,a={};return t(e,function(t,s){if(s in n)switch(s){case"c":a[s]=n[s].map(function(e,i){return F(t[i],n[s][i],r)});break;case"v":if(a.v=[],e.v){var u=Math.max(e.v.length,n.v.length);for(i=0,o=u;i<o;i++)a.v[i]=F(e.v[i]||0,n.v[i]||0,r)}else for(i=0,o=n.v.length;i<o;i++)a.v[i]=0;break;default:a[s]=F(e[s],n[s],r)}else a[s]=t}),a};var j=ma;function U(e,t,n,r,i,o){f.setProperties(e,!1,!0,{}),f.animateProperties(t,{time:r},function(){i>1?U(e,t,n,r,i-1,o):(f.setProperties(n,!1,!0,{}),w(o))},!0)}f.animateProperties=function(e,r,i,s,u){s||n.trigger("prechange","properties");var l=a(e);D()&&o.internalUse.convertPos(l);for(var c=[],f=[],d={},h=[],p=!1,g={},m=0;m<l.length;m++){var y=l[m],b=null,x=null;t(y,function(e,t){Z[t]?S(e)?(b=b||{id:y.id})[t]=e:(d[t]=!0,(x=x||{id:y.id})[t]=e):"id"!==t&&((b=b||{id:y.id})[t]=e),j[t]?g.positions=!0:"id"!==t&&(g.all=!0)}),b&&f.push(b),x&&c.push(x)}function A(e){t(e,function(t,n){void 0===t&&(e[n]=v.defaultValueFor(n))})}function M(e,n){var r={};return t(e,function(e,t){"id"!==t&&(r[t]="oc"===t&&n.oc?G(a(v.defaultValueFor(t)),a(n[t])):a(n[t]||v.defaultValueFor(t)))}),r}Object.keys(d).forEach(function(e){var t={prop:e};t.fn=Y[e]||F,h.push(t),"x"!==e&&"y"!==e&&(p=!0)});var C=r.time,k=n.linearEasing;"cubic"===r.easing&&(k=n.cubicEasing);var T=C,_=[],I=[];v.setProperties(f,!1,g,!1,!0);var R=nn(function(e,t){t?(v.ensureTypesInArray(c,!0),c.forEach(function(e){var t=v.getByID(e.id);if(t){A(e),I.push(e);var n=M(e,t);_.push(n)}}),function(e,t){for(var n=0;n<t.length;n++)z(e[n],t[n])}(_,I)):T-=e;for(var n=0!==C?k(Math.max(0,Math.min(1,(C-T)/C))):1,o=T>0,a=[],s=0,l=I.length;s<l;s++){for(var f=I[s],d=_[s],g={id:f.id},m=0,y=h.length;m<y;m++){var b=h[m],x=b.prop;void 0!==f[x]&&(g[x]=b.fn(d[x],f[x],n,x))}a.push(g)}return v.unsafeApplyChanges(a,p,u),o?r.cb&&E(function(){r.cb.call(this,n,C-T)}):w(i),o},g);te(R,r.queue)},f.ping=function(e,t,n){function r(e,t,n,r){var i={id:t};i[n]=r,e.push(i)}for(var i=C(e),o=[],a=[],s=[],u={},l=0;l<i.length;l++){var c=i[l],f=v.firstVisibleItemInAncestry(c);if(f&&!u[f.id]){u[c=f.id]=!0;var d,h="link"===f.type,p=-1;do{d="_ha"+ ++p}while(p<5&&f[d]);if(p<5){var g=ot(t.c),m=at([g[0],g[1],g[2],.001]);r(o,c,d,{r:h?void 0:Math.max(28-t.w/2,0),w:0,c:t.c}),r(a,c,d,{r:h?void 0:t.r,w:h?t.lw:t.w,c:m}),r(s,c,d,null)}}}o.length>0?U(o,a,s,t.time,t.repeat,n):w(n)};var X=null,q=function(){};f.setCursorFn=function(e){q=e};var Q=function(){};f.setCreateCanvasFn=function(e){Q=e};var K=function(){};f.imageGenFn=function(e){return e&&(K=e),K},f.render=function(e){n.privateTrigger("redraw",e||{all:!0})};var J=f.render,$=rn(J),ee=rn(J);f.animate=function(e){var t=Ye||X,r=$.animate(e,t,v);t&&t.rebuild&&n.privateTrigger("redraw",t.rebuild);var i=ee.animate(e);return r||i},f.cancelAnimation=$.cancel,f.pushAnimation=$.push;var te=f.pushAnimation;f.cancelLayoutAnimation=ee.cancel,f.pushLayoutAnimation=ee.push;var ne=f.pushLayoutAnimation;f.backgroundOpacity=function(e){return arguments.length>0&&(L=e,J()),L},f.animateBackgroundOpacity=on($,f.backgroundOpacity);var re=[8,4,12,-22,-9,5,1,12,-69,37,45,-13,-8,16,-11,8,0,8,9,-78,-67],ie=[47,6,-11,-58,-64,-57,-48,-59,-51,19,-16,-66,-66,-48,-58,-67],oe=null;f.makeGhostCanvas=function(e,t){return oe=Q(e,t,!0)};var ae=.5;function se(e){return 1-e}function ue(e){return e}function le(e,t,n,r){var i=n;return nn(function(o){i-=o;var a=Math.max(0,Math.min(1,(n-i)/n));ae=t(a);var s=i>0;return s||(v.resurrect(e),ae=.5,w(r)),s},{all:!0})}f.hide=function(e,t,n){J({all:!0}),t.animate?function(e,t,n){var r=t.time;if(0===e.length)w(n);else{ae=1,v.ghost(e);var i,o=v.showHideGetLinksToBend(e,!1);o.length>0?(r*=2/3,i=function(){f.animateProperties(o,{time:r/2,queue:!1},n,!0)}):i=n;var a=le(e,se,r,function(){v.hide(e),w(i)});te(a,!0)}}(e,t,n):(v.hide(e),v.showHideBendLinks(e),J({all:!0}),w(n))},f.show=function(e,t,n,r){J({all:!0}),v.show(e,t),n.animate?function(e,t,n){var r=t.time;function i(){var t=le(e,ue,r,n);te(t,!0)}if(0===e.length)w(n);else{ae=0,v.ghost(e);var o=v.showHideGetLinksToBend(e,!0);o.length>0?f.animateProperties(o,{time:(r*=2/3)/2,queue:!1},i,!0):i()}}(e,n,r):(v.showHideBendLinks(e),J({all:!0}),w(r))};var ce=!1,fe=3;f.drawBackground=function(e,t){var n,r,i=L,a=M.backColour,s=M.gradient,u="white";t&&(n=d.scale(d.width()),r=d.scale(d.height()),D()&&(i=1,u=o.internalUse.getDefaultBackgroundColour())),a?Gt(e,a,i,n,r,t):s?Ht(e,s.stops,i,n,r,t):Gt(e,u,i,n,r,t),f.isMapMode()&&!t&&o.internalUse.setBackgroundColour(a,s)};var de,he=f.drawBackground;function pe(e,t,n){I.resetExtras();var i=v.generate(I,g,d,t,!n.all&&n.positions);return I.startGeneratingForExtras(),de=v.getResizePrimitive(),function(e){if(!e&&X&&X.generate){var t=I.getLayerPath();I.setLayerPath(null),I.setLayer(zn.DRAGGERS),X.generate(I),I.setLayerPath(t)}}(e),r.generate(I,g,d,X,e),function(){if(ce){I.setLayer(zn.WAIT);var e=d.scale(d.width()/2),t=d.scale(d.height()/2),n=d.scale(30);I.rect(0,0,d.width(),d.height(),null,0,"rgba(255, 255, 255, 0.5)",!0,null,null,!1);for(var r=0;r<8;r++){var i=r*(Math.PI/4),o=e+n*Math.cos(i),a=t+n*Math.sin(i),s=.2+(r+fe)%8/8*.8;I.circle(o,a,d.scale(10),qe.white,-1,"rgba(145, 146, 149, "+s+")",!0)}}}(),i}function ge(e,t){return he(g,!1),g.webglCanvas.renderer.setAlpha(ae,M.backgroundAlpha),s.hasUpdatedImages()&&(e.all=!0,g.webglCanvas.renderer.updateTextures()),g.webglCanvas.renderer.build(I,e,M),t&&t.getPixels?g.webglCanvas.renderer.getPixels(d,h,M):g.webglCanvas.renderer.draw(d,h,M,!!l)}f.labelPosition=function(e,t){return v.setDirty(e),pe(!1,!0,{}),v.labelPosition(e,t)},f.draw=function(e,t){if(s.isReady()){if(88768475<Ke)return;pe(e,!1,t)&&(t.all=!0),l&&(Dn(l),Bn(I,l,d,s,M,!1,oe,!1,r.drawOverviewContent,!1,M.backgroundAlpha,ae,!1)),g.webgl?ge(t):function(e){Dn(g),he(g,e),Bn(I,g,d,s,M,!1,oe,!1,r.drawOverviewContent,e,M.backgroundAlpha,ae,!!l||void 0),s.hasUpdatedImages()&&s.imagesUpdated()}(e)}},f.isMapMode=function(){return!!l},f.getWebGLPixels=function(){if(g.webgl)return ge({all:!0},{getPixels:!0});throw new Error("Not in WebGL mode")},f.drawoffscreen=function(){y.dirty()},f.hittest=function(e,t,n){return y.test(e,t,I,n,g)};var ve,me,ye,be,xe,we,Ae,Ee=f.hittest;function Me(e,t){return function(){var r=Ee(e,t,d);if((v.getByID(r)||!r)&&r!==me){me=r;var i=R(r);M.truncateLabels&&M.truncateLabels.showOnHover&&(v.showFullLabelOnHover(i),J()),v.setLastHoverId(i),n.trigger("hover",i,e,t,O(r))}}}function Ce(e,t,n,r){if(X.scrollable&&M.dragPan){var i=d.maybeScroll(e,t,X,n,r);te(i)}}function ke(e,t,n,r,i){X&&(X.endDrag(e,t,n,r,i,I),J()),X=null,q("auto"),J({drawOnly:!0})}f.afterDraw=function(){X&&X.mouseMoved&&X.mouseMoved()&&X.afterDraw(Ee(be,xe,d),be,xe),s.hasPendingImages()&&J()},f.dragover=function(e,t){Me(e,t)()},f.resetState=function(){X=null},f.startDragger=function(e,t,n,r){if(v){var i=d.worldToViewX(n),o=d.worldToViewY(r);if((X=v.startDragger(f,d,e,i,o,t))&&e){var a=X.getCursor(i,o);q(a)}}},f.mousedown=function(e,t,i,o,a){if(!v)return null;x=e;var s,u=Ee(t,i,d);if(X)ke(!0,t,i,o,a);else{ye=u,u!==me&&null!==u&&(me=null);var l=n.trigger("mousedown",R(u),t,i,e,O(u));if(v.getByID(u)||!u){var c=!1,h=v.isSelected(R(u));c=0===e?M.handMode?!!u&&(!h||o):!h||o||!u:!u||!h,l&&(c=!1);var p=D()&&!u&&M.handMode;(c||p)&&v.setSelection(u,o,a),0===e&&(X=v.createDragger(f,g,d,u,t,i,M,de,D()))&&u&&(s=X.getCursor(t,i),q(s)),2===e?n.trigger("contextmenu",R(u),t,i,O(u)):n.trigger("click",R(u),t,i,e,O(u))}else 0===e&&(X=r.createDragger(u,t,i))&&u&&(s=X.getCursor(t,i),q(s)),0!==e&&1!==e||n.trigger("click",R(u),t,i,e,O(u))}return u},f.mousemove=function(e,t,n,i,o){be=e,xe=t;var a="auto";if(X&&!o)X.mouseMoved&&X.mouseMoved(!0),Ce(e,t,n,i),X.dragMove(e,t,n,i),a=X.getCursor(e,t);else if(v){var s=v?Ee(e,t,d):null;!function(e,t){ve&&clearTimeout(ve),ve=c(Me(e,t),M.hover)}(e,t),v.getByID(s)?s&&(a=v.getCursor(s)):a=r.getCursor(s)}we===a||o||(q(a),we=a)},f.removeDragger=function(){X&&ke(!0,be,xe)},f.mouseup=function(e,t,n,r){X&&ke(!0,e,t,n,r)},f.mouseleave=function(e,t,n,r){arguments.length&&X&&(!M.dragPan||D()&&M.handMode)&&ke(D(),e,t,n,r)},f.dblclick=function(e,t){var r=ye;if(X&&ke(!1,e,t),2!==x&&(!r&&d&&(n.trigger("dblclick",null,e,t)||Te(!0)),r&&v.getByID(r))){var i=R(r);n.trigger("dblclick",i,e,t,O(r))||f.combo.internalUse.dblclick(i)}},f.mousewheel=function(e,t,r){if(d){var i=Date.now();if(Ae&&i-Ae<100)return;Ae=i,n.trigger("mousewheel",e,t,r)||te(d.wheelToPosition(e,t,r))}},f.keyup=function(e){27===e&&ke(!1)},f.keydown=function(e,t,r){if(v&&!n.trigger("keydown",e,t,r)){if(65===e&&t)return v.selectAll(),J(),!0;if(v.hasSelection()){var i=0,o=0;switch(e){case 37:i=-20;break;case 38:o=-20;break;case 39:i=20;break;case 40:o=20}if(0!==i||0!==o)return n.trigger("prechange","move"),v.moveSelection(i,o),J(),!0;if(46===e){if(!n.trigger("delete")){n.trigger("prechange","delete");var a=v.selectionPlusDummyNodes();V(a)}return J(),!0}113===e&&n.trigger("edit",v.doSelection())}return!1}},f.panBy=function(e,t,n,r,i){te(d.panBy(e,t,n,!1,r,i)),J({drawOnly:!0})},f.pan=function(e,t,n,r){D()?o.internalUse.pan(e,t,n,r):(te(d.pan(e,t,n,r)),J({drawOnly:!0}))},f.zoomIn=function(e,t,n){D()?o.internalUse.zoom("in",e,t,null,n):(te(d.zoomIn(e,t,n)),J({drawOnly:!0}))};var Te=f.zoomIn;function _e(e){return function(t,n,r,i,a){if(s.isReady()&&v){var u=r;u=S(u)||0===u.length?null:C(u),D()?o.internalUse.zoom(e,t,n,u,i):(te(d[e](v,I,g,t,n,u,i,a)),J())}}}function Se(e,t){var n=k(t,{fixed:[]});return v.extractStructure(g,n,e)}f.zoomOut=function(e,t,n){D()?o.internalUse.zoom("out",e,t,null,n):(te(d.zoomOut(e,t,n)),J({drawOnly:!0}))},f.setZoom=function(e,t,n,r){D()?o.internalUse.setZoom(e,t,n,r):(te(d.setZoom(e,t,n,r)),J({drawOnly:!0}))},f.modelExtents=function(){return v.generate(I,g,d),I.itemExtents(null,g)},f.fitToModel=_e("fitToModel"),f.fitToSelection=_e("fitToSelection"),f.fitModelHeight=_e("fitModelHeight");var Ie=function(e,t){var n=e;return nn(function(e){var r=(n-=e)<0;return r&&w(t),!r})};function Re(e,t,r){var i,o;if(e){var a=Math.max(0,Math.min(t.time||700,2e3)),s="linear"===t.easing?n.linearEasing:n.cubicEasing,u=e.extents;v.updateLinkStyles(t),e.updatedEdges&&v.applyUpdatedOffsets(e.updatedEdges),i=v.makeAnimator(e.vertices,a,s),o=d.fitWorldExtents(e.extents,!0,!0,!0,!0,a,r),t.animate?(ne(i),t.fit?ne(o):u&&ne(Ie(a,r))):(v.applyVertices(e.vertices),J(),u&&(t.fit?d.fitWorldExtents(e.extents,!1,!0,!0,!0,0,r):w(r)))}else w(r)}var Le,Oe,Ne,Pe,De,Be,Ve,ze,Fe,Ge,He,We,Ze,Ye,je=!1;function Ue(e){return function(t,n){je=!1,Re(t,n,e)}}function Xe(){Le&&(clearTimeout(Le),Le=null)}function Qe(){Ne&&(clearTimeout(Ne),Ne=null)}f.layout=function(e,t,r){if(v){je=!0;var i=t||{},o=Se(e,i);v.layout(e,n,o,i,Ue(r))}},f.isLayingOut=function(){return je},f.arrange=function(e,t,r,i){if(v){var o=Se(e,r);v.arrange(e,n,t,o,g,r,Ue(i))}},f.arrangeAndLayout=function(e,t,n){f.combo.internalUse.arrangeAndLayout(e,t,function(e){v.updateLinkStyles(t.layout),e&&v.applyUpdatedOffsets(e)},function(e){if(t.layout.fit){var n=d.fitWorldExtents(e,t.animate,!0,!0,!0,t.time);te(n)}},n)},f.touchstart=function(e){if(2===e.length&&(Ge=We=(e[0].x+e[1].x)/2,He=Ze=(e[0].y+e[1].y)/2),1===e.length){Ve=e[0].id;var t=Ee(Pe=e[0].x,De=e[0].y,d);Le?t!==Be?Xe():Oe=!0:(Oe=!1,Le=c(Xe,600)),Be=t,Ne=c(function(){Qe(),X&&ke(!1),n.trigger("contextmenu",R(Be),Pe,De,O(Be))},600),v.getByID(Be)||!Be?(n.trigger("touchdown",R(Be),Pe,De,O(Be))||(Be?v.isSelected(R(Be))||v.setSelection(Be,!1,!1):M.handMode||v.setSelection(null,!1,!1)),X=v.createDragger(f,g,d,Be,Pe,De,M,de),J()):X=r.createDragger(Be,Pe,De)}},f.touchmove=function(e){e.length>=2&&(Ge=(e[0].x+e[1].x)/2,He=(e[0].y+e[1].y)/2);for(var t=0;t<e.length;t++)Ve===e[t].id&&(ze=e[t].x,Fe=e[t].y);if(Ne){var n=ze-Pe,r=Fe-De;n*n+r*r>100&&Qe()}!Ye&&X&&Ve===e[0].id&&1===e.length&&(be=e[0].x,xe=e[0].y,X.mouseMoved&&X.mouseMoved(!0),Ce(e[0].x,e[0].y),X.dragMove(e[0].x,e[0].y,!1,!1))},f.touchend=function(e,t){if(J(),Ne&&(Qe(),D()||n.trigger("click",R(Be),Pe,De,0,O(Be))),Le&&Oe&&2!==x&&(Xe(),ye=Be,f.dblclick(Pe,De,O(Be))),X){for(var r=-1,i=0;i<t.length;i++)t[i].id===Ve&&(r=i);r>-1&&0===e.length?ke(!0,t[r].x,t[r].y,!1,!1):e.length>0&&(Ve=e[0].id,Be=Ee(Pe=e[0].x,De=e[0].y,d),!v.getByID(Be)&&Be||(v.setSelection(Be,!1,!1),X=v.createDragger(f,g,d,Be,Pe,De,M,de)))}},f.touchcancel=function(){Qe(),X&&ke(!1)};var Ke=window[String.fromCharCode(68,97,116,101)][String.fromCharCode(110,111,119)]()/17510;return f.gesturestart=function(){},f.gesturechange=function(e,t){Qe(),M.gestures&&p(We)&&p(Ze)&&(Ye||(Ye=v.createGestureDragger(d,We,Ze)),Ye.dragMove(e,t,Ge,He),J({all:!0}))},f.gestureend=function(e,t){Ye&&Ye.endDrag(!0,e,t,Ge,He),Ye=null},f}function Za(e){return null===e}function Ya(e){return"move"===e}function ja(e,t,n,r,i){var o=!1,a=!0,s=!1;function u(t){var n=J(t,e.id());return[{id:t.pointerId,x:n.x,y:n.y}]}function l(e){return!i()&&("touch"===e.pointerType||"pen"===e.pointerType)}function c(t){if(a&&l(t)){var n=u(t);e.touchstart(n)}}function f(t){if(l(t)){ee(t);var n=u(t);e.touchmove(n)}}function d(t){if(l(t)){ee(t);var n=u(t);e.touchend([],n)}}function h(t){var n=J(t,e.id());e.dragover(n.x,n.y)}function p(t){(t.keyCode<37||t.keyCode>40)&&e.keydown(t.keyCode,t.ctrlKey,t.shiftKey)}function g(){var e=n?"addEventListener":"removeEventListener",r=t.getContainer();window.PointerEvent&&!s&&(r[e]("touchmove",ee),r[e]("pointerdown",c),r[e]("pointermove",f),r[e]("pointerup",d)),r[e]("dragover",h),r[e]("keydown",p)}function v(){var t=n?e.privateBind:e.privateUnbind;t("dblclick",Za),t("dragstart",Ya)}function m(t){return function(n){if(a){var r=n.originalEvent,i=J(r,e.id());if(r.shiftKey)return!0;t(r,i)}}}"undefined"!=typeof navigator&&(s=navigator.userAgent.match(/Edge/)||"undefined"!=typeof MSPointerEvent),n?e._leafletEventHandlers||(v(),g(),e._leafletEventHandlers=function(){var n=!1,i=!1,s=m(function(r,i){var o=e.mousedown(r.button,i.x,i.y,r.ctrlKey,r.shiftKey);t&&(t.doubleClickZoom.enabled()||n)&&(!a||o&&"_"===o.charAt(0)&&"__dragger"!==o?(t.doubleClickZoom.disable(),n=!0):(t.doubleClickZoom.enable(),n=!1))}),u=m(function(t,n){e.mouseup(n.x,n.y,t.ctrlKey,t.shiftKey)});return{click:function(e){a&&(i||o||(s(e),u(e)),i=!1)},contextmenu:function(){},dblclick:m(function(t,n){e.dblclick(n.x,n.y,t.ctrlKey,t.shiftKey)}),mousedown:function(e){i=!0,a&&!o&&s(e)},mousemove:m(function(t,n){e.mousemove(n.x,n.y,t.ctrlKey,t.shiftKey)}),mouseup:u,movestart:function(){a=!1},moveend:function(){a=!0},move:function(){o||r()},zoomstart:function(){a=!1,o=!0},zoomend:function(){a=!0,o=!1}}}(),t.on(e._leafletEventHandlers)):(t.off(e._leafletEventHandlers),e._leafletEventHandlers=null,v(),g())}function Ua(e,t,n){var r=function(){var i=Array.prototype.slice.call(arguments);e.off(t,r),n.apply(null,i)};e.on(t,r)}function Xa(e,t){var n=H({},t),r=e.split(/translate(3d)?\(|\);?/);if(r[2]&&r[2].length){var i=Qa(r[2]);n.x+=i[0]||0,n.y+=i[1]||0}return n}function qa(e,t,n){var r;r=t?e.getElementsByClassName(t):e.children;for(var i=0;i<r.length;i++)n(r[i],i)}function Qa(e){return e.match(/[-\d]+/g).map(Number)}function Ka(e,n){var r={animate:!0,time:800,tiles:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',subdomains:"abcd",minZoom:0,maxZoom:20},transition:"restore",padding:5},i="#ddd",o=function(e,t){var n=null;function r(){return n.getZoom()}function i(e){if(e.length){var t=L.latLngBounds(e),n=t.getNorth(),r=t.getSouth(),i=t.getWest(),o=t.getEast();if(n===r&&i===o){var a=.01;t=L.latLngBounds([[n-a,i-a],[n+a,i+a]])}return t}}function o(){var t=[];return e.privateEach({type:"node",items:"toplevel"},function(e){$(e)&&!e.hi&&t.push(L.latLng(e.pos.lat,e.pos.lng))}),t}function a(e,t){if(r()!==t)return!0;var i=n._limitCenter(e,t,n.options.maxBounds),o=n._getCenterOffset(i).floor();return o.x||o.y}function s(e,s,u){var l=i(e||o());if(l)void 0===r()||function(e){var i=L.point([2*t.padding,2*t.padding]),o=n.getBoundsZoom(e,!1,i);if(r()!==o)return!0;var s=n.project(e.getSouthWest(),o),u=n.project(e.getNorthEast(),o);return a(n.unproject(s.add(u).divideBy(2),o),o)}(l)?(v(u)&&Ua(n,"moveend",u),n.fitBounds(l,{animate:!!s,padding:[t.padding,t.padding]})):w(u);else{var c=L.latLng(0,0);a(c,2)?(v(u)&&Ua(n,"moveend",u),n.setView(c,2,{animate:!!s})):w(u)}}function u(t,n,r){var i=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];S(r)||!$(r)||r.hi||t.push(L.latLng(r.pos.lat,r.pos.lng))}return t}(e.getItem(t));i.length?s(i,!!n,r):w(r)}function l(){return n.getMaxZoom()}function c(){return n.getMinZoom()}function f(){return Math.min(1,(l()-c())/10)}return{fitMapToBounds:s,getMaxZoom:l,getMinZoom:c,getZoom:r,pan:function(t,r,o,a){var s=null,u=100,l={animate:!!r,duration:p(o)?o/1e3:.25};if(v(a)&&Ua(n,"moveend",a),"selection"===t){var c=[],f=e.getItem(e.selection());if(f.length){for(var d,h=0;h<f.length;h++)"node"===(d=f[h]).type&&$(d)&&!d.hi&&c.push(L.latLng(d.pos.lat,d.pos.lng));n.panInsideBounds(i(c),l)}}else{switch(t){case"up":s=[0,-u];break;case"down":s=[0,u];break;case"left":s=[-u,0];break;case"right":s=[u,0]}s&&n.panBy(s,l)}},panBy:function(e,t){n.panBy(e,t)},setLeafletMap:function(e){n=e},centerView:function(e){n.setView([e.lat,e.lng],e.zoom,{reset:!0})},setZoom:function(e,t,r,i){v(i)&&Ua(n,"moveend",i),n.setZoom(e,{animate:t})},zoom:function(t,i,a,c,d){var h={animate:!!i,duration:p(a)?a/1e3:.25};switch(t){case"in":v(d)&&Ua(n,"moveend",d),n.zoomIn(f(),h);break;case"out":v(d)&&Ua(n,"moveend",d),n.zoomOut(f(),h);break;case"fit":case"fitToModel":c?u(c,i,d):s(o(),!!i,d);break;case"selection":case"fitToSelection":u(e.selection(),i,d);break;case"height":case"fitModelHeight":var g=-1/0,m=-1/0,y=1/0,b=1/0,x=function(e){$(e)&&!e.hi&&(e.pos.lat>g&&(g=e.pos.lat,m=e.pos.lng),e.pos.lat<y&&(y=e.pos.lat,b=e.pos.lng))};c?e.getItem(c).forEach(x):e.privateEach({type:"node",items:"toplevel"},x),isFinite(g)&&isFinite(m)&&isFinite(y)&&isFinite(b)?s([[g,m],[y,b]],!!i,d):v(d)&&w(d)}return r()/l()}}}(e,r),s=function(e){var t,n,r;function i(){t={},n=[],r={}}function o(e){var n=e.id;delete r[n],delete t[n],$(e)?r[n]={id:n,x:e.x||0,y:e.y||0}:e.hi||(t[n]=!0)}return i(),{anyOpenCombos:function(){return n&&n.length>0},clearState:i,getPositions:function(){return r},getOpenCombos:function(){return n},getHiddenOnMapIds:function(){return Object.keys(t)},isHiddenOnMap:function(e){return t[e]},deserialize:function(e){t=a(e.hiddenOnMap)||{},n=a(e.openCombos)||[],r=a(e.positions)||{}},serialize:function(){return{hiddenOnMap:a(t),openCombos:a(n),positions:a(r)}},recordLinkState:function(n){if("link"===n.type&&!n.hi){var r=e.getItem(n.id1),i=e.getItem(n.id2);r&&i&&$(r)&&$(i)||(t[n.id]=!0)}},recordNodeState:o,recordState:function(){i(),e.privateEach({type:"node",items:"all"},function(e){e._combo&&e._combo.open&&n.push(e.id),e.parentId||o(e)}),e.privateEach({type:"link",items:"toplevel"},function(e){e.hi||!t[e.id1]&&!t[e.id2]||(t[e.id]=!0)})}}}(e),u=function(e,n,r,i,o){var s,u,l,c,f,d,h,p,g,v,m,y,b,A,E,M=!1,k=!1,T=.75,S=1.25,I=4,R=15,O={},N={watermark:!1,overview:!1,gestures:!1,handMode:!0},D=a(o),B=["doubleClickZoom","dragging","keyboard","scrollWheelZoom","touchZoom"],V=!1;return F()&&(L.Map.prototype._panInsideMaxBounds=function(){var e;this._enforcingBounds||(E&&(e={animate:!1}),this.panInsideBounds(this.options.maxBounds,e))}),{changeTilesLayer:function(e){s?(s.removeLayer(l),ie(e)):w(e)},convertPos:function(t){var n,r,i,o=C(t);for(r=0;r<o.length;r++)_(n=o[r],"pos")&&(i=ve({pos:G(e.getItem(n.id).pos,n.pos)}),n.x=i.x,n.y=i.y)},enableDragging:function(e){s.dragging.enabled()!==e&&(e?s.dragging.enable():s.dragging.disable())},getLeafletMap:function(){return s},getMapContainer:function(){return d},showMap:function(t){if(e.privateIsLayingOut())w(t);else if(z(),s||k)w(t);else{A=!0,k=!0;var r=e.lock();e.lock(!0),n.trigger("map","showstart"),pe(),e.options(N),i.recordState();var a=i.getHiddenOnMapIds();e.hide(a,{time:o.time,animate:o.animate},function(){re(null,function(){!function(t){if(o.animate){var n=J(),r={time:o.time*(1/3),adapt:!1},a=e.viewOptions();e.combo().close(i.getOpenCombos(),r,function(){var r=ee();a.zoom===r?e.animateProperties(ne(),{time:n},t):e.viewOptions({zoom:r},{animate:!1},function(){var i=ne();e.viewOptions(a,{animate:!1},function(){var o=2;function a(){0==--o&&w(t)}var s={animate:!0,time:n};e.viewOptions({zoom:r},s,a),e.animateProperties(i,s,a)})})})}else e.combo().close(i.getOpenCombos(),{animate:!1},function(){e.viewOptions({zoom:ee()},{animate:!1},function(){Q(t)})})}(function(){le(o.animate,function(){!function(t,r){M=!0,k=!1,n.trigger("map","showend"),t||e.lock(!1),c&&(de(c[0],c[1]),e.zoom("fit"),c=null),x(r)}(r,t)})})})})}},hideMap:function(t){if(s&&!k){var a=e.lock(),u=J();k=!0,e.lock(!0),n.trigger("map","hidestart"),r.fitMapToBounds(null,o.animate,function(){var n,r;ae({restorePositions:!0,animate:o.animate},function(){o.animate&&(n=e.viewOptions(),r=fe()),se(function(){var s=fe();ge(),e.show(i.getHiddenOnMapIds(),!1,{animate:!1},function(){e.zoom("fit",{animate:!1},function(){if(o.animate){var u=e.viewOptions();e.combo().close(i.getOpenCombos(),{animate:!1,adapt:!1},function(){c(n,r,u,s)})}else oe({lockChart:a,triggerEvent:!0},t)})})})})})}else w(t);function l(){var n=i.getHiddenOnMapIds();e.show(n,!1,{animate:n.length>0,time:o.time},function(){oe({lockChart:a,triggerEvent:!0},t)})}function c(t,n,r,a){e.viewOptions(t,{animate:!1},function(){e.hide(i.getHiddenOnMapIds(),{animate:!1},function(){e.setProperties(n,!1,function(){e.viewOptions(r,{animate:!0,time:u}),e.animateProperties(a,{time:u},function(){e.combo().open(i.getOpenCombos(),{time:o.time*(1/3),adapt:!1},l)})})})})}},isLeafletLoaded:F,isMapLoaded:function(){return!!s},isShown:function(){return M},isTransitioning:function(){return k},latLngToWorldCoordinates:ve,lockEvents:U,restoreMapMode:function(t,n){var r=e.lock();z(),M=!0,pe(),re(t,function(){e.options(N),X(),Q(function(){le(!1,function(){r||U(!1),w(n)})})})},restoreNetworkMode:function(t){var n=e.lock();z(),M=!1,ae({restorePositions:!1,animate:!1},function(){ge(),oe({lockChart:n,triggerEvent:!1},t)})},setController:function(e){u=e},setHandMode:function(e){e!==A&&(A=e,W())},setSize:de,setView:function(e){b=e},updateNodePositions:Q};function z(){f||(f=e.privateGetElement(),y=function(e){if(!f)return-1;for(var t=0,n=f;n=n.previousSibling;)++t;return t}())}function F(){return"undefined"!=typeof L&&(function(){var e="1.3.4",t=L.version.split("-")[0].split("+")[0];if(te(t,e)<0)throw new Error("Cannot use an older version of Leaflet than "+e);!V&&te(t,"1.3.4")>0&&(console.warn("You are using an unsupported version of Leaflet - please use 1.3.4 instead."),V=!0)}(),!0)}function W(){if(s){var t=e.lock()||!A;d.style.touchAction=t?"none":""}}function Z(){return A}function Y(e){r.setLeafletMap(s=e)}function j(t){s&&ja(e,s,t,q,Z)}function U(e){if(s){var t=e?"disable":"enable";B.forEach(function(e){s[e][t]()}),j(!e),W()}}function X(){var e=s.containerPointToLayerPoint([0,0]),t={x:Math.round(e.x),y:Math.round(e.y)};L.DomUtil.setPosition(f,t),b.offsetX(-t.x),b.offsetY(-t.y)}function q(){X(),he({drawOnly:!0})}function Q(t){e.setProperties(ne(),!1,t)}function K(){return new(L.Layer.extend({initialize:function(e,t){L.setOptions(this,t)},setOptions:function(e){return L.setOptions(this,e),this.redraw()},redraw:function(){return this._forceRedraw(),this},onAdd:function(){this.getPane().appendChild(f),s.on("zoomend",this._onZoomEnd,this),s.on("moveend",this._onMoveEnd,this),s.options.zoomAnimation&&s.on("zoomanim",this._animateZoom,this),s.on("zoom",this._zoom,this),j(!0);var e=s.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(f,e)},onRemove:function(){s.off("zoomend",this._onZoomEnd,this),s.off("moveend",this._onMoveEnd,this),j(!1),s.options.zoomAnimation&&s.off("zoomanim",this._animateZoom,this),s.on("zoom",this._zoom,this)},addTo:function(){return s.addLayer(this),this},_onZoomEnd:function(){X(),this._forceRedraw({all:!0})},_onMoveEnd:function(){n.trigger("viewchange")},_forceRedraw:function(e){s&&Q(function(){he(e)})},_animateZoom:function(e){var t=s.getZoomScale(e.zoom),n=s._getCenterOffset(e.center)._multiplyBy(-t).subtract(s._getMapPanePos());L.DomUtil.setTransform(f,n,t)},_zoom:function(e){e.pinch&&Q()}}))}function J(){return i.anyOpenCombos()?o.time*(2/3):o.time}function ee(){var e=r.getZoom();return e=Math.min(R,Math.max(I,e)),T+(S-T)*(e-I)/(R-I)}function ne(){var t=[];return e.privateEach({type:"node",items:"toplevel"},function(e){if($(e)){var n=ve(e);n.id=e.id,t.push(n)}}),t}function re(e,t){v=f.style.position,m=f.style.top,f.style.position="absolute",f.style.zIndex=1e3,f.classList.add("leaflet-zoom-animated"),f.style["transform-origin"]="50% 50%",(d=document.createElement("div")).style.width=f.clientWidth+"px",d.style.height=f.clientHeight+"px",d.style.position="relative",d.style.top=f.top,d.style.left=f.left,(g=f.parentNode).insertBefore(d,f),f.style.pointerEvents="none",f=f,L.Draggable.include({_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),function(e,t){e._leaflet_pos=t,e.style.transform=function(e,t){return L.Browser.ie3d?"translate("+Math.round(e)+"px,"+Math.round(t)+"px)":"translate3d("+Math.round(e)+"px,"+Math.round(t)+"px, 0px)"}(t.x,t.y)}(this._element,this._newPos),this.fire("drag",e)}});var n=H({boxZoom:!1,zoomAnimationThreshold:20,zoomControl:!1,preferCanvas:!0},o.leaflet);Y(new L.Map(d,n)),function(){h=document.createElement("canvas"),u.setOverlayContext(h.getContext("2d"));var e=s.getSize();h.width=e.x,h.height=e.y,h.style.margin="0",h.style["pointer-events"]="none",Fu(h,h.getContext("2d"));var t=L.Control.extend({options:{position:"topleft"},onAdd:function(){return h}});p=new t,s.addControl(p)}(),U(!0),e?r.centerView(e):r.fitMapToBounds(null,!1),ie(t)}function ie(e){var t,n={};function r(){K().addTo(s),w(e)}"string"==typeof o.tiles?t=o.tiles:o.tiles&&(t=o.tiles&&o.tiles.url||D.tiles.url,n=L.extend(n,o.tiles)),t?(Ua(l=new L.TileLayer(t,n),"loading",r),s.addLayer(l)):r()}function oe(t,r){i.clearState(),k=!1,t.lockChart||e.lock(!1),t.triggerEvent&&n.trigger("map","hideend"),x(r)}function ae(e,t){u.setOverlayContext(null),function(e){f.style.top=d.offsetTop+"px",g.insertBefore(f,y>0?g.childNodes[y+1]:g.firstChild),f.style.transform="",f.style.transformOrigin="",e&&Q(),he({positions:!0})}(e.restorePositions),s.removeControl(p),function(e,t){ue(e,1,t)}(e.animate,function(){d.parentNode&&d.parentNode.removeChild(d),f.style.pointerEvents="auto",f.style.position=v,f.style.top=m,s.remove(),Y(null),w(t)})}function se(t){M=!1,e.combo().open(i.getOpenCombos(),{animate:!1,adapt:!1},function(){var n=i.getPositions();if("restore"===o.transition&&n){var r=P(n).filter(function(t){return!e.combo().find(t.id)});e.setProperties(r,!1,t)}else{var a=e.privateValidateLayoutOptions({animate:!1});e.allowDraw(!1),u.layout("standard",a,function(){e.allowDraw(!0),w(t)})}})}function ue(t,n,r){t?e.privateAnimateBackgroundOpacity(n,{time:o.time},r):(e.privateSetBackgroundOpacity(n),w(r))}function le(e,t){ue(e,0,t)}function ce(t){e.privateEach({type:"node",items:"toplevel"},function(e){e.hi||t({id:e.id,x:e.x,y:e.y})})}function fe(){var e=[];return ce(function(t){e.push(t)}),e}function de(e,t){if(M){d.style.height=t+"px",d.style.width=e+"px";var n=h.getContext("2d");h.width=e,h.height=t,Fu(h,n,!1),E=!0,s.invalidateSize(!1),E=!1}else c=[e,t]}function he(e){n.privateTrigger("forceRedraw",e||{positions:!0})}function pe(){var n=e.options();O={},t(N,function(e,t){O[t]=n[t]})}function ge(){e.options(O),O={}}function ve(t){var n=s.latLngToContainerPoint([t.pos.lat,t.pos.lng]);return e.worldCoordinates(n.x,n.y)}}(e,n,o,s,r),l=u.isLeafletLoaded();function c(){throw new Error("Leaflet was not found. Make sure you include leaflet.js and leaflet.css in your web page.")}function f(e){return l?e:c}function d(e){if("node"===e.type)if(s.recordNodeState(e),$(e)){var t=u.latLngToWorldCoordinates(e);e.x=t.x,e.y=t.y}else e.hi||(e.hi=!0)}return{api:{show:f(u.showMap),hide:f(u.hideMap),viewCoordinates:f(function(e,t){var n=u.getLeafletMap().latLngToContainerPoint([e,t]);return{x:n.x,y:n.y}}),mapCoordinates:f(function(e,t){var n=u.getLeafletMap().containerPointToLatLng([e,t]);return{lat:n.lat,lng:n.lng}}),isShown:function(){return u&&u.isShown()},leafletMap:u.getLeafletMap,options:f(function(e,n){return e&&(t(e,function(e,t){r[t]=e}),"tiles"in e&&u?u.changeTilesLayer(n):w(n)),a(r)})},internalUse:{convertPos:u.convertPos,enableDragging:u.enableDragging,getDefaultBackgroundColour:function(){return i},getMapContainer:u.getMapContainer,getMaxZoom:o.getMaxZoom,getMinZoom:o.getMinZoom,getZoom:o.getZoom,isMapLoaded:u.isMapLoaded,isTransitioning:u.isTransitioning,loadUp:function(e,t){if(l){var n=e||{};n.show?function(e,t){s.deserialize({hiddenOnMap:e.hiddenOnMap,openCombos:e.openCombos,positions:e.restoreXY}),u.isShown()?(o.centerView(e),u.updateNodePositions(t)):u.restoreMapMode(e,t)}(n,t):function(e){u.isShown()?u.restoreNetworkMode(e):w(e)}(t)}else w(t)},lock:u.lockEvents,pan:o.pan,panBy:o.panBy,preMerge:function(t){for(var n=[],r=0;r<t.length;r++){var i=t[r];if("node"===i.type){var o=e.getItem(i.id);if(o){var a=s.getPositions(),u={};s.isHiddenOnMap(i.id)?u.hi=!1:"hi"in o&&(u.hi=o.hi),a[i.id]&&(u.x=a[i.id].x,u.y=a[i.id].y),o.pos&&(u.pos=o.pos),i=G(u,i)}d(i)}"link"===i.type&&s.recordLinkState(i),n.push(i)}return n},preSetItem:d,serialize:function(){if(!l)return null;var e=u.getLeafletMap(),t={show:u.isShown()};if(t.show){var n=e.getCenter();t.lat=n.lat,t.lng=n.lng,t.zoom=e.getZoom(),t.bounds=e.getBounds().toBBoxString();var r=s.serialize();t.hiddenOnMap=r.hiddenOnMap,t.openCombos=r.openCombos,t.restoreXY=r.positions}return t},setBackgroundColour:function(e,t){var n=u.getMapContainer();e?n.style.background=e:t?Wt(n,t.stops,1):n.style.background=i},setController:u.setController,setHandMode:u.setHandMode,setSize:u.setSize,setView:u.setView,setZoom:o.setZoom,toDataURL:function(e,t,n,r,i){return function(e,t,n,r,i,o){var a,s=new Map,u=t(n.width,n.height),l=u.getContext("2d"),c=new Sa,f=e.getPane("mapPane"),d={x:0,y:0,scale:1};!function(e,t,n,r){qa(e,"leaflet-tile-container",function(e){var i=Xa(e.style.transform,t);qa(e,"leaflet-tile",function(e){var t=Xa(e.style.transform,i);n.get(e.src),r.set(e,t)})})}(f,d=Xa(f.style.transform,d),c,s),function(e,t,n,r,i){var o=e.getPane("overlayPane"),a=[];qa(o,null,function(e){a.push(e)}),a.sort(function(e,t){return(0|e.style["z-index"])-(0|t.style["z-index"])}),a.forEach(function(e){var o=Xa(e.style.transform,t);"IMG"===e.tagName?(o.scale=e.width/e.naturalWidth,n.get(e.src),r.set(e,o)):"CANVAS"===e.tagName&&(e.style.width&&e!==i&&(o.scale=Qa(e.style.width)/e.width),r.set(e,o))})}(e,d,c,s,r),i(l,!0),c.waitForImages(function(){s.forEach(function(e,t){var i=t;if("IMG"===i.tagName){var o=c.get(i.src);i=o.isMissing?null:o.im}else i===r&&(i=n);i&&l.drawImage(i,Math.floor(e.x),Math.floor(e.y),i.width*e.scale,i.height*e.scale)});try{a=u.toDataURL()}catch(e){throw new Error("[toDataURL] Error exporting chart."+e)}finally{w(o,a)}})}(u.getLeafletMap(),e,t,n,r,i)},zoom:o.zoom}}}function Ja(e,n){var r,i,o={},s=en(),u=ui(s),l=si(s,o),f=ya(o,s,u,l,n),d=Ka(o,s),h=Oa(s,Pa,d,n),g=Wa(o,s,h,0,d,n),m=function(e,t,n){var r={},i=null,o=null,s=null,u=null;function l(e,t,r){if(!e.type||!e.type.match(/^(node|link|all)$/))throw new TypeError("options type property should be either 'node', 'link' or 'all'");if(!e.items||!e.items.match(/^(underlying|toplevel|all)$/))throw new TypeError("options items property should be either 'underlying', 'toplevel' or 'all'");if(i||(o=n.privateGetRawItems(),s=o,t?u=o:(i=a(o,"d"),u=i)),v(r))for(var l=0;l<s.length;l++){var d=s[l];c(e.type,d)&&f(e.items,d)&&r(u[l])}}function c(e,t){return"all"===e||e===t.type}function f(e,t){var n;switch(e){case"toplevel":n=!t.parentId;break;case"all":n=!0;break;case"underlying":default:n=!t._combo}return n}function d(e,t,n,r,i,o,a,s){var u={},c={all:{}};c[n]={nodes:[],links:[]},c[r]={nodes:[],links:[]},c.all[n]={nodes:[],links:[]},c.all[r]={nodes:[],links:[]};var f=function(){var e={all:[],nodes:[],links:[]};return l({type:"all",items:s?"underlying":"toplevel"},!1,function(t){e.all.push(t),e[t.type+"s"].push(t)}),e}();return("node"===i?f.nodes:"link"===i?f.links:f.all).forEach(function(t){e(t)&&(u[t.id]=!0)}),function(e){"link"===i&&(o?function(e,t){t.forEach(function(t){e[t.id]&&(e[t.id1]=!0,e[t.id2]=!0)})}(u,e.links):e.nodes.forEach(function(e){u[e.id]=!0}))}(f),"node"===i&&function(e,t){f.links.forEach(function(t){e[t.id]=!(!e[t.id1]||!e[t.id2])})}(u),"all"===i&&"bg"!==t&&f.links.forEach(function(e){u[e.id]=!(!u[e.id1]||!u[e.id2]||!u[e.id])}),function(e){if("link"!==i&&o){var t={};e.links.forEach(function(e){t[e.id1]=t[e.id1]||u[e.id]&&u[e.id2],t[e.id2]=t[e.id2]||u[e.id]&&u[e.id1]}),e.nodes.forEach(function(e){u[e.id]=u[e.id]&&t[e.id]})}}(f),f.all.forEach(function(e){var i=e.type+"s",o=u[e.id]?n:r;!u[e.id]==!e[t]&&c[o][i].push(e.id),c.all[o][i].push(e.id)}),c}return t.privateBind("redraw",function(){i=null,o=null}),r.each=l,r.filter=function(t,r,i){var o=d(t,"hi","shown","hidden",r.type,r.hideSingletons,0,"underlying"===r.items),s=o.shown.nodes.concat(o.shown.links),u=o.hidden.nodes.concat(o.hidden.links),l=e.combo.internalUse.filter(s,u,o,r);function c(){w(i,a({shown:o.shown,hidden:o.hidden,combos:o.combos},!0))}s=l.toShow,(u=l.toHide).length>0?s.length>0?(r.time/=2,n.privateHideWithoutCombos(u,r,function(){n.privateShowWithoutCombos(s,!1,r,c)})):n.privateHideWithoutCombos(u,r,c):s.length>0?n.privateShowWithoutCombos(s,!1,r,c):c()},r.foreground=function(t,r,i){var o=d(t,"bg","foreground","background",r.type,"link"===r.type,0,"underlying"===r.items),s=o.foreground.nodes.concat(o.foreground.links),u=o.background.nodes.concat(o.background.links),l=e.combo.internalUse.foreground(s,u,o,r);u=l.toHide.map(function(e){return{id:e,bg:!0}}),s=l.toShow.map(function(e){return{id:e,bg:!1}}),n.setProperties(s.concat(u),!1,function(){w(i,a({foreground:o.foreground,background:o.background},!0))})},r}(g,s,o);function y(e,t,n){var o=i(t,n);g.makeGhostCanvas(t,n);var a=r;r=Na(s,t,n,1,d),g.setView(r),g.setCanvasContext(e),g.setShadowCanvas(o.getContext("2d"),t,n),At(),a&&(r.setMinZoom(a.getMinZoom()),r.setMaxItemZoom(a.getMaxItemZoom()),r.fromOldSettings(a.settings(),!1)),d.internalUse.setView(r),g.initOverlays()}function b(){return d&&d.api.isShown()}function x(e){return k(!0===e?{animate:!0}:e,{animate:!1,time:1e3})}function A(e,t,r){if(S(e))throw new Error("Null or undefined object passed to merge");var i=M(e);g.merge(i,t),g.render(),n.invokeWhenImagesHaveLoaded(r)}function E(e,t){var n=f.getByID(e);return!n||!t&&n.parentId?null:n}function T(e,t,n,r,i){var o=k(t,{time:1e3,easing:"linear",queue:!0});(o.time<0||!p(o.time))&&(o.time=0);var a=C(e);g.animateProperties(a,o,n,r,i)}function _(e){return isFinite(e)?Math.min(Math.max(0,e),1):e?1:0}function I(e){e&&"boolean"==typeof e.combos&&!e.items&&(e.items=e.combos?"underlying":"toplevel")}function L(e){I(e);var t=k(e,{type:"all",items:"underlying",animate:!0,time:1e3,updateGlyph:!0});return k(t,{hideSingletons:"link"===t.type})}g.setModel(f),o.privateInit=function(e,t,n,r,o,a){i=r,g.setCursorFn(o),g.setCreateCanvasFn(r),g.imageGenFn(a),y(e,t,n)},o.privateSetSize=y,o.privateMapSetSize=function(e,t){d.internalUse.setSize(e,t)},o.privateGetMapContainer=function(){return d.internalUse.getMapContainer()},o.privateGetElement=function(){return document.getElementById(e)},o.privateIsLayingOut=g.isLayingOut,o.graph=function(){return f.graph()},o.map=function(){return d.api},o.ggwp=function(){return g.getWebGLPixels()},o.combo=function(){return g.combo.api},o.toDataURL=function(e,t,a,s){var u,l,c;if(!s)throw new Error("[toDataURL] callback is required");g.isMapMode()?(u=r.width(),l=r.height()):(u=Math.floor(e),l=Math.floor(t));var h=r.settings();u=u>0?u:h.width,l=l>0?l:h.height;var p=k(a,{fit:"exact",watermark:!0,gradient:!0,logo:!0});if(b()&&(p.fit="exact"),"oneToOne"===p.fit){(c=g.modelExtents())||(c={x1:0,y1:0,x2:100,y2:100}),c.x1-=10,c.y1-=10,c.x2+=10,c.y2+=10;var v=g.watermarkSize();if(v&&p.watermark){var m=(v.width-(c.x2-c.x1))/2;m>0&&(c.x1-=m,c.x2+=m);var y=(v.height-(c.y2-c.y1))/2;y>0&&(c.y1-=y,c.y2+=y)}u=c.x2-c.x1,l=c.y2-c.y1,p.noScale=!0}function x(e){u=Math.floor(u/e),l=Math.floor(l/e)}var A=u*l/16e6;A>1&&x(Math.sqrt(A));var E=u/8e3;E>1&&x(E);var M=l/8e3;M>1&&x(M);var C=i(u,l,!0),T=p.noScale?1:u/r.width(),_=en(),S=Na(_,Math.floor(u/T),Math.floor(l/T),T,d),I=Oa(_,Pa,null,n),R=Wa(o,_,I,0,null,n);R.setCreateCanvasFn(i),R.setModel(f),R.setView(S),R.setCanvasContext(C.getContext("2d")),R.setShadowCanvas(null,u,l),R.imageGenFn(g.imageGenFn()),function(){var e=g.options();e.overview={shown:!1},p.watermark||(e.watermark=!1),p.gradient||(e.gradient=!1),p.logo||(e.logo=!1),R.options(e,null,!0),R.backgroundOpacity(g.backgroundOpacity());var t=R.makeGhostCanvas(S.width(),S.height()),o=[];switch(p.selection||(o=f.doSelection(),f.doSelection([])),p.fit){case"chart":R.fitToModel(!1);break;case"view":S.fromOldSettings(r.settings(),!0);break;case"exact":S.fromOldSettings(r.settings(),!1);break;case"oneToOne":S.fitWorldExtents(c,!1,!1,!1,0,0)}S.scaleFactor(T),R.initOverlays(),R.draw(!0,{all:!0}),n.waitForImages(function(){var e;R.draw(!0,{all:!0});try{e=C.toDataURL()}catch(e){throw new Error("[toDataURL] There is a problem exporting the chart."+e)}finally{if("rtl"===C.dir){var n=document.getElementsByTagName("body")[0];n.removeChild(C),n.removeChild(t)}}if(p.selection||f.doSelection(o),f.setAllDirty(),b()){var r=g.getCanvasContext();d.internalUse.toDataURL(i,C,r.webglCanvas?r.webglCanvas:r.canvas,g.drawBackground,s)}else w(s,e)})}()},o.load=function(e,t){switch(e&&e.type){case"LinkChart":if(d&&d.internalUse.isTransitioning())throw new Error("Cannot load chart during map show or hide operation");f=ya(o,s,u,l,n),g.setModel(f),g.load(e,function(){g.initOverlays(),n.invokeWhenImagesHaveLoaded(t)});break;default:throw new Error("Unknown chart type passed to load")}},o.chartType=function(){return f.type()},o.clear=function(){s.trigger("prechange","delete"),g.load({type:"LinkChart",items:[],map:{keepSameMode:!0}},function(){g.render()})},o.merge=function(e,t){A(e,{updateGlyph:!0},t)},o.privateReveal=function(e){var t=e;if(t){t=C(t);var n=o.privateGetItem(t).filter(function(e){return e&&"link"===e.type&&!e._combo});f.reveal(F(n)),o.privateTrigger("redraw",{all:!0})}return f.getRevealedLinks()},o.privateGetItem=function(e){return function(e,t){return f?Array.isArray(e)?e.map(function(e){return E(e,!0)}):E(e,!0):null}(e)},o.privateItemIsShown=function(e){return!!f&&f.isItemShown(e)},o.privateGetTopItemId=function(e){return f.topParentId(e)},o.privateGetRawItems=function(){return f?f.getRawItems():[]},o.privateGetCanvas=function(){return g.getCanvasContext()},o.privateGetGenerator=function(){return l},o.privateRedrawItem=function(e){f&&f.setDirty(e)},o.privateSetAllItemsInComboDirty=function(e){o.privateGetItem(e).forEach(function(e){e&&(o.privateRedrawItem(e.id),e._combo&&(o.privateSetAllItemsInComboDirty(e._combo.linkIds),e._combo.nodeIds&&o.privateSetAllItemsInComboDirty(e._combo.nodeIds)))})},o.applyRevealedLinkOffsets=function(e){f&&f.applyRevealedLinkOffsets(e)},o.privateTopParentId=function(e){return f?f.topParentId(e):null},o.privateMerge=function(e,t){var n=e;d&&d.api.isShown()&&(n=d.internalUse.preMerge(n)),f.merge(n),g.render(),w(t)},o.privateEach=function(e,t){var n=k(e,{type:"all",items:"underlying"});return m.each(n,!0,t)},o.privateBothEndsShown=function(e){return f.bothEndsShown(e)},o.privateBothEndsForeground=function(e){return f.bothEndsForeground(e)},o.privateGetParentItems=function(e){return f.getParentItems(e)},o.privateFirstVisibleItemInAncestry=function(e){if(f)return f.firstVisibleItemInAncestry(e)},o.privateAllParentsOpen=function(e,t){return f&&f.allParentsOpen(e,t)},o.privateGetAncestryIds=function(e){return f.getAncestryIds(e)},o.privateSetAllDirty=function(){g.render(),f.setAllDirty()},o.privateAddItemsToTransfer=function(e){f.addItemsToTransfer(e)},o.privateRemoveItemsFromTransfer=function(e){f.removeItemsFromTransfer(e)},o.privateSetNonImageProperties=function(e,t){var n={};f.setProperties(e,!1,n,t),g.render(n)},o.privateNeighbourLinkIds=function(e){return f.neighbourLinkIds(e)},o.privateRemoveItem=function(e){f.removeItem(e),g.render()},o.privateGraph=function(){return f.graph()},o.privateGetLinksBetween=function(e,t){return f.privateGetLinksBetween(e,t)},o.validateCombos=function(){f.validateCombos()},o.setProperties=function(e,t,r){if(e){var i={};g.setProperties(e,t,!1,i),g.render(i)}n.invokeWhenImagesHaveLoaded(r)},o.animateProperties=function(e,t,n){T(e,t,n)},o.privateAnimateProperties=function(e,t,n,r){T(e,t,n,!0,r)},o.privateAnimateBackgroundOpacity=function(e,t,n){var r=k(t,{time:500});g.animateBackgroundOpacity(_(e),r.time,n)},o.privateSetBackgroundOpacity=function(e){g.backgroundOpacity(_(e))},o.ping=function(e,t,n){var r=k(t,{c:"#909090",w:20,r:80,time:800,repeat:1,lw:40});g.ping(e,r,n)},o.getItem=function(e){return Array.isArray(e)?e.map(f.getItem):f?f.getItem(e):null},o.setItem=function(e,t){e&&(s.trigger("prechange","properties"),g.setItem(e),g.render(),n.invokeWhenImagesHaveLoaded(t))},o.removeItem=function(e){s.trigger("prechange","delete"),g.removeItem(e),g.render()},o.each=function(e,t){var n=k(e,{type:"all",items:"underlying"});return m.each(n,!1,t)},o.filter=function(e,t,n){var r=L(t);return m.filter(e,r,n)},o.foreground=function(e,t,n){I(t);var r=k(t,{type:"node",items:"underlying",foregroundOpenCombos:!0});return m.foreground(e,r,n)},o.hide=function(e,t,n){if(S(e)||""===e)w(n);else{s.trigger("prechange","hide");var r=C(e),i=x(t);i=k(i,{updateGlyph:!0});var o=g.combo.internalUse.hide(r,i);g.hide(o,i,n)}},o.privateHideWithoutCombos=function(e,t,n){s.trigger("prechange","hide");var r=C(e),i=x(t);g.hide(r,i,n)},o.hidden=function(){return f.hidden()},o.show=function(e,t,n,r){if(S(e)||""===e)w(r);else{s.trigger("prechange","show");var i=C(e),a=x(n);a=k(a,{updateGlyph:!0});var u=g.combo.internalUse.show(i,t);g.show(u,t,a,r);var l=[];u.forEach(function(e){var t=o.privateGetItem(e);return"node"===t.type&&(t._combo&&l.push(t.id),t.parentId&&l.push(t.parentId)),!1}),g.combo.internalUse.ensureMinimumOpenComboSize(l)}},o.privateShowWithoutCombos=function(e,t,n,r){s.trigger("prechange","show");var i=C(e),o=x(n);g.show(i,t,o,r)},o.labelPosition=function(e){return f?g.labelPosition(e,r):null},o.contains=function(e){return f?f.contains(e):[]},o.serialize=function(){var e=f.serialize();g.appendCombos(e);var t=d.internalUse.serialize();return t&&(e.map=t),e.viewSettings=r.settings(),e},o.worldCoordinates=function(e,t){var n=r.scale(e),i=r.scale(t);return{x:Math.floor(r.viewToWorldX(n)),y:Math.floor(r.viewToWorldY(i))}},o.viewCoordinates=function(e,t){return{x:r.worldToViewX(e),y:r.worldToViewY(t)}},o.viewOptions=function(e,t,n){if(!e)return r.settings();var i=x(t),o=k(e,{offsetX:0,offsetY:0,zoom:1});g.setViewSettings(o,i.animate,i.time,function(){g.render({drawOnly:!0}),w(n)})},o.options=function(e,t){return g.options(e,t)},o.displayOptions=function(e,t){return o.options(e,t)},o.interactionOptions=function(e){return o.options(e)},o.lock=function(e,t){return void 0!==e&&(O=e,d&&d.internalUse.lock(O),e?(g.wait((t||{}).wait),g.removeDragger()):g.wait(!1),g.render()),O};var O=!1;function N(e){var t=o.viewOptions();return k(e,{fit:!0,animate:!0,tidy:!0,ratio:t.height>0?t.width/t.height:1,tightness:5,straighten:!0})}function P(e,n,r,i,a){var s=a.layout.fix,u=!a.filter||a.filter.updateGlyph,l=e;function c(e,n){o.privateEach({type:"link",items:"toplevel"},function(t){if(!e[t.id1]||!e[t.id2]){var r=e[t.id1]||e[t.id2],i=e[t.id1]?t.id2:t.id1;r&&i&&(n[i]||(n[i]={x:0,y:0,_counter:0,id:i}),n[i].x+=r.x,n[i].y+=r.y,n[i]._counter++)}});var r=0;return t(n,function(t){e[t.id]||(t.x/=t._counter,t.y/=t._counter,e[t.id]=t,r++)}),r}function d(e,n,r){if(b())r();else{for(var i,a={},s=[];0!==i;)i=c(n,a);t(e,function(e){"node"!==e.type||a[e.id]||(e.x=g[e.id].x,e.y=g[e.id].y)}),t(a,function(e){s.push(e)}),o.setProperties(s,!1,r)}}function h(e){var n={},r={};return t(l,function(t){if(n[t.id]=t,("adjacent"===s||"nonadjacent"===s)&&"link"===t.type){var i=o.privateTopParentId(t.id);if(!e[i]){var a=o.privateTopParentId(t.id1);a&&e[a]&&(r[a]=!0);var u=o.privateTopParentId(t.id2);u&&e[u]&&(r[u]=!0)}}}),{dict:n,touched:r}}function p(){var e=0;return o.privateEach({items:"toplevel"},function(){e++}),e}var g={};l=function(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r];S(i)||n[i.id]||(n[i.id]=1,g[i.id]={x:i.x,y:i.y},delete i.x,delete i.y,t.push(i))}return t}(l);var v=function(){var e={open:[],closed:[]};return l.forEach(function(t){"node"===t.type&&t.parentId&&(o.combo().isOpen(t.parentId)?e.open.push(t.parentId):e.closed.push(t.parentId))}),e}(),m=function(){var e=[],t={};return f.each({type:"node"},function(n){e.push(n.id),t[n.id]=n}),{list:e,dict:t}}(),y=m.dict,x=function(){var e={};return f.each({type:"all"},function(t){e[t.id]=!0}),e}(),w=p();A(l,{updateGlyph:u},function(){var e=h(x),t=e.dict,o=function(e,t){switch(s){case"all":return e;case"adjacent":return Object.keys(t);case"nonadjacent":return e.filter(function(e){return!t[e]});case"none":default:return[]}}(m.list,e.touched);n(t,function(){d(l,y,function(){r(x,function(){i(v,p()!==w,o)})})})})}o.zoom=function(e,t,n){var r=x(t);switch(e){case"in":g.zoomIn(r.animate,r.time,n);break;case"out":g.zoomOut(r.animate,r.time,n);break;case"one":g.setZoom(1,r.animate,r.time,n);break;case"fit":g.fitToModel(r.animate,r.time,r.ids,n);break;case"selection":g.fitToSelection(r.animate,r.time,null,n);break;case"height":g.fitModelHeight(r.animate,r.time,r.ids,n)}},o.pan=function(e,t,n){var r=x(t);"selection"!==e||b()?g.pan(e,r.animate,r.time,n):g.fitToSelection(r.animate,r.time,null,n,!0)},o.getLastError=function(){return s.getErrors()},o.imagePrefix=function(e){return g.imagePrefix(e)},o.cancelAnimation=function(){g.cancelAnimation()},o.layout=function(e,t,n){if(b()||d&&d.internalUse.isTransitioning())w(n);else{var r=N(t);g.layout(e||"standard",r,n)}},o.privateValidateLayoutOptions=N,o.arrange=function(e,t,n,r){var i=k(n,{fit:!1,animate:!0,tidy:!1,ratio:1});g.arrange(e||"grid",t,i,r)},o.selection=function(e){var t=S(e)?e:C(e),n=f?f.doSelection(t):[];return t&&g.render(),n},o.expand=function(e,t,n){var r=t;function i(e){return function(t,n){if(l.filter&&D(t)){var r=a(l.filter);return r.animate=e,o.filter(function(e){return t[e.id]?l.filter.filterFn(e):!e.hi},r,n)}return n()}}function u(e,t,n){l.arrange.animate=t,o.combo().arrange(e,l.arrange,n)}var l=k(r=r||{},{animate:!0,time:1e3,layout:{},filter:{},arrange:{}});l.filter=function(e,t){var n=null;if(e.filter&&v(e.filter.filterFn)){var r=e.filter.filterFn;(n=L(e.filter)).time=Math.floor(t.time/5),n.filterFn=r}return n}(r,l),l.filter&&(l.time-=l.filter.time),l.layout=function(e,t){return t.layout.animate=t.animate,t.layout.time=t.time,t.layout=k(t.layout,{fit:t.fit,straighten:t.straighten,tidy:t.tidy,tightness:t.tightness}),N(k(t.layout,{name:"standard",strategy:"spiral",tidy:!1,fit:!1,fix:e.layout?"nonadjacent":"all",easing:"cubic"}))}(r,l),l.arrange=function(e){return e.arrange.animate=e.animate,e.arrange.time=e.time,e.arrange.easing=e.layout.easing,e.filter&&(e.arrange.updateGlyph=e.filter.updateGlyph),k(e.arrange,{name:"lens",resize:!0,updateGlyph:!0})}(l),s.trigger("prechange","expand"),P(C(M(e)),i(!1),i(l.animate),function(e,t,r){var i=!1;if(l.animate)for(var a=0;a<e.open.length;a++)if(o.privateItemIsShown(e.open[a])){i=!0;break}var s=e.open.concat(e.closed);t?i?function(e,t){l.layout.fixed=r,g.arrangeAndLayout(e,l,n)}(s):u(s,!1,function(){l.layout.fixed=r,o.layout(l.layout.name,l.layout,n)}):u(s,i,n)},l)},o.createLink=function(e,t,n,r){var i=o.getItem(e);if(o.getItem(t))throw new Error("LinkId ("+t+") already exists and must be unique");if(e&&i&&"node"===i.type&&t){var a=R(t),s=k(n,{style:{}});o.privateBind("dragcomplete",function e(t,n){if("dummy"===t){o.removeItem(u),o.privateUnbind("dragcomplete",e);var i=R(n)===a?null:n;w(r,i)}});var u="dummyEnd"+Math.floor(1e7*Math.random()),l={type:"node",du:!0,id:u,x:i.x,y:i.y},f=G(s.style,{id:a,id1:e,id2:u,type:"link"});o.merge([l,f],function(){c(function(){g.startDragger(a,u+"\u2704id2",i.x,i.y)})})}},un(o,g,o.lock),o.mousemove=function(e,t,n,r){g.mousemove(e,t,n,r,O)},o.dragover=function(e,t){g.dragover(e,t)},G(o,s);var B=tn(function(e,t){g.draw(e,t),g.drawoffscreen(),g.afterDraw()},g.animate,g.getCanvasContext);return G(o,B),o.privateBind("redraw",B.redraw),o}var $a={};function es(e,t){for(var n=["webgl","experimental-webgl"],r=null,i=0;i<n.length;i++){try{r=e.getContext(n[i],t)}catch(e){}if(r)break}return r}function ts(e){return es(document.createElement("canvas"),e)}function ns(e,t,n){var r=os(e,[t,n]);return r.vertexShader=t,r.fragmentShader=n,r}function rs(e,t){e.useProgram(t),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null)}function is(e,t,n){var r=e.createShader(n),i=atob($a[t]);if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(r);throw e.deleteShader(r),new Error("Error in shader: "+o)}return r}$a["line-arc-vertex"]="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIGZsb2F0IGFfcmFkaXVzO2F0dHJpYnV0ZSBmbG9hdCBhX3N0YXJ0QW5nbGU7YXR0cmlidXRlIGZsb2F0IGFfZW5kQW5nbGU7YXR0cmlidXRlIGZsb2F0IGFfd2lkdGg7YXR0cmlidXRlIHZlYzQgYV9jb2xvdXI7YXR0cmlidXRlIHZlYzQgYV9jb2xvdXIyO2F0dHJpYnV0ZSB2ZWMzIGFfaGl0VGVzdENvbG91cjthdHRyaWJ1dGUgZmxvYXQgYV9saW5lVHlwZTthdHRyaWJ1dGUgdmVjMyBhX2NvcmU7dW5pZm9ybSBmbG9hdCB1X2hpdFRlc3Q7dW5pZm9ybSBmbG9hdCB1X3pvb207dW5pZm9ybSB2ZWMzIHVfcmVzb2x1dGlvbjt1bmlmb3JtIG1hdDQgdV90cmFuc2Zvcm07dmFyeWluZyB2ZWM0IHZfY29sb3VyO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjI7dmFyeWluZyB2ZWM0IHZfY29yZTt2YXJ5aW5nIHZlYzQgdl9saW5lRGF0YTt2YXJ5aW5nIHZlYzMgdl9oaXRUZXN0Q29sb3VyO3ZhcnlpbmcgdmVjNCB2X2JhcnljZW50cmljO3ZhcnlpbmcgdmVjNCB2X3Bvc2l0aW9uO3ZhcnlpbmcgdmVjMyB2X2Rhc2hpbmc7ZmxvYXQgYT0zLjE0MTU5MjY1MzU5O2Zsb2F0IGI9MS4wO2ludCBjPTI7aW50IGQ9MztpbnQgZT00O2Zsb2F0IGY9NC4wO2Zsb2F0IGc9Zi0wLjU7aW50IGgoZmxvYXQgYSl7cmV0dXJuIGludChmbG9vcihhKzAuNSkpO312ZWMyIGkodmVjMiBqLGZsb2F0IGssZmxvYXQgbCxmbG9hdCBtLGZsb2F0IG4pe3JldHVybiB2ZWMyKGoueCsoaypjb3MobCttKm4pKSxqLnkrKGsqc2luKGwrbSpuKSkpO31mbG9hdCBvKGZsb2F0IHAsZmxvYXQgcSl7ZmxvYXQgcj1wLzIuMDtmbG9hdCBzPWZsb29yKCgocStyKS8ocCtyKSkrMC41KTtpZigocypwKT5xKXtzPTEuMDt9cmV0dXJuIHM7fXZvaWQgbWFpbigpe2Zsb2F0IHQ9MS4wL3Vfem9vbTtpbnQgdT1oKGFfbGluZVR5cGUpO2Jvb2wgdj11PT1jO2Jvb2wgdz11PT1kO2Jvb2wgeD11Pj1lO3ZlYzIgeTtmbG9hdCB6O2lmKHgpe2ludCBBPWgoYV9saW5lVHlwZSktZTt2ZWMyIEI9YV9wb3NpdGlvbjt2ZWMyIEM9dmVjMihhX3JhZGl1cyxhX3N0YXJ0QW5nbGUpO3ZlYzIgRD12ZWMyKGFfZW5kQW5nbGUsYV93aWR0aCk7ZmxvYXQgRT1kaXN0YW5jZShDLEQpO2Zsb2F0IEY9RS91X3pvb207ej0xLjAvRjt2ZWMyIEc7aWYoQT09MCl7eT1CO0c9KEMrRCkvMi4wO31lbHNlIGlmKEE9PTEpe3k9QztHPShCK0QpLzIuMDt9ZWxzZSBpZihBPT0yKXt5PUQ7Rz0oQytCKS8yLjA7fXZlYzIgSD1ub3JtYWxpemUoeS1HKTt5Kz1IL3Vfem9vbTt2X2JhcnljZW50cmljPXZlYzQoYV9jb3JlLnh5eix6KTt2X2NvcmU9dmVjNCgxLjApO3ZfbGluZURhdGE9dmVjNCgwLjAsMC4wLDAuMCxhX2xpbmVUeXBlKTt9ZWxzZXt2ZWMyIGo9YV9wb3NpdGlvbjtmbG9hdCBrPWFfcmFkaXVzO2Zsb2F0IEk9YV9zdGFydEFuZ2xlO2Zsb2F0IEo9YV9lbmRBbmdsZTtmbG9hdCBLO3ZlYzIgTDtmbG9hdCBNO2Zsb2F0IE47aWYodV9oaXRUZXN0PT0xLjApe3Q9Ny4wL3Vfem9vbTt9Ym9vbCBPPWgoc2lnbihhX2NvcmUucikpPT0xO2Zsb2F0IG49YWJzKGFfY29yZS5yKS0xLjA7ZmxvYXQgbT0oYV9lbmRBbmdsZS1hX3N0YXJ0QW5nbGUpL2Y7Yi89dV9yZXNvbHV0aW9uLno7aWYodyl7Yj1tYXgoYixzdGVwKDIuNSxhX2xpbmVUeXBlKSoyLjApO31mbG9hdCBQPW1heChhX3dpZHRoKnVfem9vbSxiKS91X3pvb207ZmxvYXQgUT1QK3Q7ZmxvYXQgUj1RLzIuMDtmbG9hdCBTPVAvMi4wO2lmKG48Zil7Tj0xLjA7fWVsc2V7Tj0tMS4wO31mbG9hdCBUPWFfcmFkaXVzKihKLUkpO3ZlYzIgVT1pKGosbWF4KGsrUywwLjApLGFfc3RhcnRBbmdsZSxtLG4rKE4vMi4wKSk7ZmxvYXQgVj1tLzIuMDtmbG9hdCBXPWxlbmd0aChVLWopO2Zsb2F0IFg9Vy9jb3MoVik7aWYoTyl7Sz1YK3Q7fWVsc2V7ZmxvYXQgWT1zbW9vdGhzdGVwKDIwMDAwLjAsMTAwMDAwLjAsaykqMjAuMDtLPWstUi1ZO312X2xpbmVEYXRhPXZlYzQoMC4wLFAsVCwtYV9saW5lVHlwZSk7Sz1tYXgoSywwLjApO2Zsb2F0IFo9KDEuMC9UKS91X3pvb207ZmxvYXQgYmE9VCp1X3pvb207ZmxvYXQgYmI9KEotSSkvYmE7ZmxvYXQgYmM9STtmbG9hdCBiZD1iYjtiYy09KDEuMC1zdGVwKDAuNSxuKSkqYmQ7YmMrPXN0ZXAoZyxuKSpiZDt5PWkoaixLLGJjLG0sbik7aWYodyl7ZmxvYXQgYmU9YmEvNC4wO2Zsb2F0IGJmPVQvKFAqMi4wKTtmbG9hdCBiZz1taW4oYmUsYmYpO3ZfY29yZT12ZWM0KGJjLGNlaWwoYmcpLFosYV9yYWRpdXMpO3ZfZGFzaGluZz12ZWMzKFAsUCwwLjUpO31lbHNlIGlmKHYpe2Zsb2F0IHA9bWF4KDIuMC91X3pvb20sUCoyLjApO2Zsb2F0IGJoPW8ocCxUKTtmbG9hdCByPShULXAqYmgpLyhiaC0xLjApO2Zsb2F0IGJpPXIqYmgvKFQrcik7dl9jb3JlPXZlYzQoYmMsYmgtYmksWixhX3JhZGl1cyk7ZmxvYXQgYmo9KHAvKHArcikpLzIuMDt2X2Rhc2hpbmc9dmVjMyhwLHIsYmopO31lbHNle3ZfY29yZT12ZWM0KGJjLG4vZixaLGFfcmFkaXVzKTt9dl9wb3NpdGlvbj12ZWM0KHksaik7fXZlYzIgYms9eS91X3Jlc29sdXRpb24ueHk7dmVjMiBibD1iayoyLjA7dmVjMiBibT1ibC0xLjA7dmVjNCBibj1hX2NvbG91cjtibi89MjU1LjA7dl9jb2xvdXI9Ym47dmVjNCBibz1hX2NvbG91cjI7Ym8vPTI1NS4wO3ZfY29sb3VyMj1ibzt2X2hpdFRlc3RDb2xvdXI9YV9oaXRUZXN0Q29sb3VyO2dsX1Bvc2l0aW9uPXVfdHJhbnNmb3JtKnZlYzQoYm0qdmVjMigxLC0xKSwwLDEpO30=",$a["line-fragment"]="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gZmxvYXQgdV9oaXRUZXN0O3VuaWZvcm0gZmxvYXQgdV9zaGFkb3dUeXBlO3VuaWZvcm0gZmxvYXQgdV96b29tO3VuaWZvcm0gZmxvYXQgdV9ncmFkaWVudFN0YXJ0RnJhY3Rpb247dmFyeWluZyB2ZWM0IHZfY29sb3VyO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjI7dmFyeWluZyB2ZWMzIHZfaGl0VGVzdENvbG91cjt2YXJ5aW5nIHZlYzQgdl9jb3JlO3ZhcnlpbmcgdmVjNCB2X2xpbmVEYXRhO3ZhcnlpbmcgdmVjNCB2X2JhcnljZW50cmljO3ZhcnlpbmcgdmVjNCB2X3Bvc2l0aW9uO3ZhcnlpbmcgdmVjMyB2X2Rhc2hpbmc7aW50IGE9MjtpbnQgYj0zO2ludCBjPTQ7ZmxvYXQgZD0zLjE0MTU5MjY1MzU5O2Zsb2F0IGU9MC43MDcxMDY3ODExODY1NDc1NztmbG9hdCBmKGZsb2F0IGcsZmxvYXQgaCl7ZmxvYXQgaT1sZW5ndGgodmVjMihkRmR4KGgpLGRGZHkoaCkpKSplO3JldHVybiBzbW9vdGhzdGVwKGctaSxnK2ksaCk7fWZsb2F0IGo9MC4wMDAxO2Zsb2F0IGsoZmxvYXQgbCxmbG9hdCBtLGZsb2F0IGgpe2Zsb2F0IG49bWF4KGgtbCwwLjApO2Zsb2F0IG89bWF4KGosbS1sKTtyZXR1cm4gbWluKDEuMCxuL28pO31mbG9hdCBwKHZlYzMgcSl7dmVjMyByPWZ3aWR0aChxKTt2ZWMzIHM9c21vb3Roc3RlcCh2ZWMzKDAuMCkscioyLjAscSk7cmV0dXJuIG1pbihtaW4ocy54LHMueSkscy56KTt9aW50IHQoZmxvYXQgYSl7cmV0dXJuIGludChmbG9vcihhKzAuNSkpO312ZWM0IHUoZmxvYXQgdil7ZmxvYXQgdz1rKHVfZ3JhZGllbnRTdGFydEZyYWN0aW9uLDEuMC11X2dyYWRpZW50U3RhcnRGcmFjdGlvbix2KTt2ZWMzIHg9bWl4KHZfY29sb3VyLnJnYix2X2NvbG91cjIucmdiLHcpO2Zsb2F0IHk9bWl4KHZfY29sb3VyLmEsdl9jb2xvdXIyLmEsdyk7cmV0dXJuIHZlYzQoeCp5LHkpO312ZWM0IHoodmVjNCB4KXtmbG9hdCBBPXZfbGluZURhdGEueTtmbG9hdCBCPXZfbGluZURhdGEueC8yLjA7ZmxvYXQgZz0oQS8yLjApKnVfem9vbTtmbG9hdCBDPWFicyhCKSp1X3pvb207eCo9MS4wLXNtb290aHN0ZXAoZy1lLGcrZSxDKTtyZXR1cm4geDt9ZmxvYXQgRChmbG9hdCBDLGZsb2F0IEUsZmxvYXQgRil7cmV0dXJuIChDL0UpKkY7fXZlYzQgRyhib29sIEgsYm9vbCBJLGJvb2wgSil7ZmxvYXQgQj12X2xpbmVEYXRhLngvMi4wO2Zsb2F0IEE9dl9saW5lRGF0YS55O2Zsb2F0IEs9dl9jb3JlLno7ZmxvYXQgTD12X2NvcmUueDtmbG9hdCBNPXZfY29yZS55O2Zsb2F0IE49dl9saW5lRGF0YS56O2Zsb2F0IE89QS8yLjA7ZmxvYXQgUD12X2Rhc2hpbmcueDtmbG9hdCBRPXZfZGFzaGluZy56O3ZlYzQgUj11KEwpO2lmKEgpe2Zsb2F0IFM9TCpNO3ZlYzIgVD12ZWMyKEwqTixCKTtmbG9hdCBVPWZyYWN0KFMpLVE7ZmxvYXQgVj1mbG9vcihVKzAuNSk7ZmxvYXQgVz1TLVUrVjt2ZWMyIFg9dmVjMigoVy9NKSpOLDAuMCk7ZmxvYXQgWT1PO2lmKEkpe1QueT0wLjA7WT1QLzIuMDtSPXooUik7fWZsb2F0IFo9ZGlzdGFuY2UoVCxYKTtSKj0xLjAtZihZLFopO31lbHNle1I9eihSKTtSKj1mKEssdl9jb3JlLngpO1IqPTEuMC1mKDEuMC1LLHZfY29yZS54KTt9cmV0dXJuIFI7fXZlYzQgYmEoYm9vbCBILGJvb2wgSSxib29sIEope2Zsb2F0IEE9dl9saW5lRGF0YS55O2Zsb2F0IE09dl9jb3JlLnk7ZmxvYXQgSz12X2NvcmUuejtmbG9hdCBOPXZfbGluZURhdGEuejtmbG9hdCBPPUEvMi4wO2Zsb2F0IGJiPXZfY29yZS5hO2Zsb2F0IGJjPU4vYmI7dmVjMiBDPXZfcG9zaXRpb24ueHk7dmVjMiBiZD12X3Bvc2l0aW9uLnp3O2Zsb2F0IGJlPWRpc3RhbmNlKEMsYmQpO2Zsb2F0IGJmPWF0YW4oQy55LWJkLnksQy54LWJkLngpO2lmKGJmPHZfY29yZS54KXtiZis9Mi4wKmQ7fWZsb2F0IGJnPXZfY29yZS54O2Zsb2F0IGJoPShiZi1iZykvKGJjKTt2ZWM0IFI9dShiaCk7aWYoSCl7ZmxvYXQgUD12X2Rhc2hpbmcueDtmbG9hdCBRPXZfZGFzaGluZy56O2Zsb2F0IE09dl9jb3JlLnk7ZmxvYXQgYmk9YmgqTTt2ZWMyIGJqPUM7ZmxvYXQgVT1mcmFjdChiaSktUTtmbG9hdCBWPWZsb29yKFUrMC41KTtmbG9hdCBYPWJpLVUrVjtmbG9hdCBiaz1EKFgsTSxiYykrYmc7aWYoSil7dmVjMiBYPXZlYzIoYmQueCsoYmIqY29zKGJrKSksYmQueSsoYmIqc2luKGJrKSkpO2Zsb2F0IFo9ZGlzdGFuY2UoYmosWCk7ZmxvYXQgYmw9TztSKj0xLjAtZihibCxaKTt9ZWxzZXtmbG9hdCBibT1kaXN0YW5jZShiZixiayk7ZmxvYXQgYmw9RChQLzIuMCxOLGJjKTtSKj0xLjAtZihibCxibSk7Uio9ZihiYixiZStPKTtSKj0xLjAtZihiYitPLGJlKTt9fWVsc2V7ZmxvYXQgYm49dl9jb3JlLnk7Uio9ZihiYixiZStPKTtSKj0xLjAtZihiYitPLGJlKTtSKj1mKEssYm4pO1IqPTEuMC1mKDEuMC1LLGJuKTt9cmV0dXJuIFI7fXZvaWQgbWFpbigpe2ludCBibz1pbnQodV9zaGFkb3dUeXBlKTtmbG9hdCBicD1hYnModl9saW5lRGF0YS53KTtpbnQgYnE9dChicCk7Ym9vbCBicj1zaWduKHZfbGluZURhdGEudyk8MC4wO2Jvb2wgSD1icD4xLjU7Ym9vbCBJPWJxPT1hO2Jvb2wgSj1icT09Yjtib29sIGJzPWJxPj1jO2Jvb2wgYnQ9Ym89PS0xO2Jvb2wgYnU9Ym89PTE7aWYodV9oaXRUZXN0PjAuNSl7aWYoYnQpe2Rpc2NhcmQ7fWVsc2V7Z2xfRnJhZ0NvbG9yPXZlYzQodl9oaXRUZXN0Q29sb3VyLzI1NS4wLDEuMCk7fX1lbHNlIGlmKGJ1KXtkaXNjYXJkO31lbHNle3ZlYzQgUjtpZihicyl7Uj12ZWM0KHZfY29sb3VyLnJnYip2X2NvbG91ci5hLHZfY29sb3VyLmEpO1IqPWYodl9iYXJ5Y2VudHJpYy5hLHAodl9iYXJ5Y2VudHJpYy5yZ2IpKTt9ZWxzZXtpZihicil7Uj1iYShILEksSik7fWVsc2V7Uj1HKEgsSSxKKTt9fWdsX0ZyYWdDb2xvcj1SO319",$a["line-vertex"]="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24xO2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24yO2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24zO2F0dHJpYnV0ZSB2ZWM0IGFfdmVydGV4SW5mbzthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjI7YXR0cmlidXRlIHZlYzMgYV9oaXRUZXN0Q29sb3VyO2F0dHJpYnV0ZSBmbG9hdCBhX2luZGV4O3VuaWZvcm0gZmxvYXQgdV9oaXRUZXN0O3VuaWZvcm0gdmVjMyB1X3Jlc29sdXRpb247dW5pZm9ybSBtYXQ0IHVfdHJhbnNmb3JtO3VuaWZvcm0gZmxvYXQgdV96b29tO3VuaWZvcm0gZmxvYXQgdV92aWV3SW5kZXBlbmRlbnQ7dmFyeWluZyB2ZWM0IHZfY29sb3VyO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjI7dmFyeWluZyB2ZWM0IHZfY29yZTt2YXJ5aW5nIHZlYzMgdl9oaXRUZXN0Q29sb3VyO3ZhcnlpbmcgdmVjNCB2X2xpbmVEYXRhO3ZhcnlpbmcgdmVjNCB2X2JhcnljZW50cmljO3ZhcnlpbmcgdmVjNCB2X3Bvc2l0aW9uO3ZhcnlpbmcgdmVjMyB2X2Rhc2hpbmc7aW50IGE9MjtpbnQgYj0zO2ludCBjPTQ7aW50IGQoZmxvYXQgYSl7cmV0dXJuIGludChmbG9vcihhKzAuNSkpO31mbG9hdCBlKGZsb2F0IGYsZmxvYXQgZyl7ZmxvYXQgaD1mLzIuMDtmbG9hdCBpPWZsb29yKCgoZytoKS8oZitoKSkrMC41KTtpZigoaSpmKT5nKXtpPTEuMDt9cmV0dXJuIGk7fXZvaWQgbWFpbigpe2Zsb2F0IGo9MS4wL3VfcmVzb2x1dGlvbi56O3ZlYzQgaztpbnQgbD1kKGFfdmVydGV4SW5mby53KTtib29sIG09bD09YTtib29sIG49bD09Yjtib29sIG89bD09Yzt2ZWMyIHA7ZmxvYXQgcTtmbG9hdCByO2s9YV9jb2xvdXI7aWYobyl7aW50IHM9aW50KGFfaW5kZXgpO3ZlYzIgdD1hX3Bvc2l0aW9uMTt2ZWMyIHU9YV9wb3NpdGlvbjI7dmVjMiB2PWFfcG9zaXRpb24zO2Zsb2F0IHc9ZGlzdGFuY2UodSx2KTtmbG9hdCB4PXcvdV96b29tO3I9MS4wL3g7dmVjMiB5O2lmKHM9PTApe3A9dDt5PSh1K3YpLzIuMDt9ZWxzZSBpZihzPT0xKXtwPXU7eT0odCt2KS8yLjA7fWVsc2UgaWYocz09Mil7cD12O3k9KHUrdCkvMi4wO312ZWMyIHo9bm9ybWFsaXplKHAteSk7cCs9ei91X3pvb207dl9saW5lRGF0YT12ZWM0KDAuMCwwLjAsMC4wLGFfdmVydGV4SW5mby53KTt9ZWxzZXtmbG9hdCBBPTEuMC91X3pvb207aWYodV9oaXRUZXN0PT0xLjApe0E9Ny4wL3Vfem9vbTt9aWYobil7aj1tYXgoaixzdGVwKDIuNSxhX3ZlcnRleEluZm8udykqMi4wKTt9dmVjMiBCPW5vcm1hbGl6ZShhX3Bvc2l0aW9uMi1hX3Bvc2l0aW9uMSk7dmVjMiBDPUIvdV96b29tO2Zsb2F0IEQ9YV92ZXJ0ZXhJbmZvLnktMS4wO2Zsb2F0IEU9YV92ZXJ0ZXhJbmZvLngrYV92ZXJ0ZXhJbmZvLno7dmVjMiBGPWFfcG9zaXRpb24yLWFfcG9zaXRpb24xO3ZlYzIgRz1ub3JtYWxpemUodmVjMigtRi55LEYueCkpO2lmKGludChhX3ZlcnRleEluZm8ueCk9PTApe3A9YV9wb3NpdGlvbjEtQzt9ZWxzZXtwPWFfcG9zaXRpb24yK0M7fWZsb2F0IEg9YV9wb3NpdGlvbjMueDtpZihpbnQodV92aWV3SW5kZXBlbmRlbnQpPT0wKXtIPW1heCgoSCkqdV96b29tLGopL3Vfem9vbTt9ZmxvYXQgST1IK0E7dmVjMiBKPUcqKEkvMi4wKSpEO3A9cCtKO2Zsb2F0IEs9ZGlzdGFuY2UoYV9wb3NpdGlvbjEsYV9wb3NpdGlvbjIpO2Zsb2F0IEw9Syp1X3pvb207ZmxvYXQgTT0oMS4wL0spL3Vfem9vbTtpZihuKXtmbG9hdCBOPUwvNC4wO2Zsb2F0IE89Sy8oSCoyLjApO2Zsb2F0IFA9bWluKE4sTyk7dl9jb3JlPXZlYzQoRSxjZWlsKFApLE0sMC4wKTt2X2Rhc2hpbmc9dmVjMyhILEgsMC41KTt9ZWxzZSBpZihtKXtmbG9hdCBmPW1heCgyLjAvdV96b29tLEgqMi4wKTtmbG9hdCBRPWUoZixLKTtmbG9hdCBoPShLLWYqUSkvKFEtMS4wKTtmbG9hdCBSPWgqUS8oSytoKTt2X2NvcmU9dmVjNChFLFEtUixNLDAuMCk7ZmxvYXQgUz0oZi8oZitoKSkvMi4wO3ZfZGFzaGluZz12ZWMzKGYsaCxTKTt9ZWxzZXt2X2NvcmU9dmVjNChFLDAuMCxNLDAuMCk7fWlmKGludChEKT09MSl7dl9saW5lRGF0YT12ZWM0KC1JLEgsSyxhX3ZlcnRleEluZm8udyk7fWVsc2V7dl9saW5lRGF0YT12ZWM0KEksSCxLLGFfdmVydGV4SW5mby53KTt9fXZlYzIgVD1wL3VfcmVzb2x1dGlvbi54eTt2ZWMyIFU9VCoyLjA7dmVjMiBWPVUtMS4wO2svPTI1NS4wO3ZfY29sb3VyPWs7dl9jb2xvdXIyPWFfY29sb3VyMi8yNTUuMDt2X2hpdFRlc3RDb2xvdXI9YV9oaXRUZXN0Q29sb3VyO3ZfYmFyeWNlbnRyaWM9dmVjNChhX3ZlcnRleEluZm8ueHl6LHIpO2dsX1Bvc2l0aW9uPXVfdHJhbnNmb3JtKnZlYzQoVip2ZWMyKDEsLTEpLDAsMSk7fQ==",$a["triangle-fragment"]="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2VbOF07dW5pZm9ybSBsb3dwIGZsb2F0IHVfaGl0VGVzdDt1bmlmb3JtIHZlYzMgdV9yZXNvbHV0aW9uO3VuaWZvcm0gZmxvYXQgdV9zaGFkb3dUeXBlO3VuaWZvcm0gZmxvYXQgdV96b29tO3ZhcnlpbmcgdmVjNCB2X3RleENvb3JkO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjt2YXJ5aW5nIHZlYzMgdl9oaXRUZXN0Q29sb3VyO3ZhcnlpbmcgdmVjMiB2X3RleHR1cmVCYW5rO3ZhcnlpbmcgZmxvYXQgdl9ib3JkZXJXaWR0aDt2YXJ5aW5nIHZlYzIgdl9zaGFwZVNpemU7dmFyeWluZyBmbG9hdCB2X3BpeGVsO3ZhcnlpbmcgdmVjMiB2X2RvbnV0U2VnbWVudDtjb25zdCBmbG9hdCBhPTMuMTQxNTkyNjUzNTg5NzkzMjM4NDYyNjQzMzgzMjc5NTtmbG9hdCBiKGZsb2F0IGMsZmxvYXQgZCl7ZmxvYXQgZT1sZW5ndGgodmVjMihkRmR4KGQpLGRGZHkoZCkpKSowLjcwNzEwNjc4MTE4NjU0NzU3O3JldHVybiBzbW9vdGhzdGVwKGMtZSxjK2UsZCk7fWludCBmKGZsb2F0IGEpe3JldHVybiBpbnQoZmxvb3IoYSswLjUpKTt9ZmxvYXQgZyhmbG9hdCBoKXtmbG9hdCBpPTEuMC1zdGVwKDEuMCxoKnVfem9vbSk7ZmxvYXQgaj0oMS4wL3Vfem9vbSk7cmV0dXJuIG1heChoLGkqaik7fWZsb2F0IGsoZmxvYXQgaCl7ZmxvYXQgbD1iKHZfdGV4Q29vcmQueCxoKTtmbG9hdCBtPWIodl90ZXhDb29yZC55LGgpO2Zsb2F0IG49Yih2X3RleENvb3JkLnotdl90ZXhDb29yZC54LGgpO2Zsb2F0IG89Yih2X3RleENvb3JkLnctdl90ZXhDb29yZC55LGgpO2Zsb2F0IHA9bWF4KGwsbSk7ZmxvYXQgcT1tYXgobixvKTtyZXR1cm4gbWF4KHAscSk7fWZsb2F0IHIodmVjMyBzKXt2ZWMzIHQ9ZndpZHRoKHMpO3ZlYzMgdT1zbW9vdGhzdGVwKHZlYzMoMC4wKSx0KjMuMCxzKTtyZXR1cm4gbWluKG1pbih1LngsdS55KSx1LnopO31mbG9hdCB2KGZsb2F0IHcsdmVjNCB4KXtmbG9hdCB5O2ludCB6PWYodyk7aWYoej09MCl7eT14LnI7fWVsc2UgaWYoej09MSl7eT14Lmc7fWVsc2V7eT14LmI7fXJldHVybiB5O312ZWM0IEEoZmxvYXQgQix2ZWM0IEMsZmxvYXQgRCl7ZmxvYXQgRT0oQy5yK0MuYitDLmcpLzMuMDtmbG9hdCBGPXN0ZXAoMS4wLEUpKkQ7ZmxvYXQgRz1GKihzdGVwKDAuMjUsQikqbWluKEUsMC4yNSkpO3ZlYzQgSD12ZWM0KChDLnJnYitHKSpDLmEsQy5hKTtyZXR1cm4gQipIO31mbG9hdCBJKHZlYzIgSixmbG9hdCBLLGZsb2F0IEwsZmxvYXQgaCxmbG9hdCBNKXtNPW1heCgwLjAsTS1oKTtmbG9hdCBOPUsvMi4wO2Zsb2F0IE89TC8yLjA7ZmxvYXQgYT1OLU0taDtmbG9hdCBiPU8tTS1oO2Zsb2F0IHg9Si54LU47ZmxvYXQgeT1KLnktTztmbG9hdCBQPXBvdyhtYXgoYWJzKHgpLWEsMC4wKSwyLjApO2Zsb2F0IFE9cG93KG1heChhYnMoeSktYiwwLjApLDIuMCk7cmV0dXJuIFArUTt9ZmxvYXQgUihmbG9hdCBTKXtyZXR1cm4gKGRpc3RhbmNlKHZfdGV4Q29vcmQuencsdmVjMigwLjUpKSpTKSp1X3pvb207fXZlYzQgVCh2ZWM0IEgsZmxvYXQgVSxmbG9hdCBNKXtmbG9hdCBWPXBvdyhNLDIuMCk7ZmxvYXQgVz1JKHZfdGV4Q29vcmQueHksdl90ZXhDb29yZC56LHZfdGV4Q29vcmQudywwLjAsTSk7aWYoYWJzKHZfYm9yZGVyV2lkdGgpPjAuMCl7SCo9MS4wLWIoVixXKTtXPUkodl90ZXhDb29yZC54eSx2X3RleENvb3JkLnosdl90ZXhDb29yZC53LHZfYm9yZGVyV2lkdGgsTSk7ZmxvYXQgWD1tYXgoMC4wLE0tdl9ib3JkZXJXaWR0aCk7ZmxvYXQgWT1wb3coWCwyLjApO0gqPWIoWSxXKTt9ZWxzZXtIKj0xLjAtYihWLFcpO31yZXR1cm4gSDt9dmVjNCBaKHZlYzQgYmEsdmVjNCBiYixmbG9hdCBEKXtmbG9hdCBCPXYodl90ZXh0dXJlQmFuay55LGJhKTtyZXR1cm4gQShCLGJiLEQpO31mbG9hdCBiYyhmbG9hdCBiZCl7cmV0dXJuIG1heCgwLjIsc21vb3Roc3RlcCgwLjAsNS4wLGJkKSk7fXZvaWQgbWFpbigpe2Zsb2F0IGJlPWFicyh2X3NoYXBlU2l6ZS54KTtmbG9hdCBiZj12X3NoYXBlU2l6ZS55O2Zsb2F0IGJnPW1pbihiZSxiZik7ZmxvYXQgYmQ9KChiZy8yLjApKnVfem9vbSktMC41O2Zsb2F0IGg9YWJzKHZfYm9yZGVyV2lkdGgpO3ZlYzQgSDtpbnQgYmg9Zih1X3NoYWRvd1R5cGUpO2Jvb2wgYmk9Zih2X3NoYXBlU2l6ZS54KT4wO2Jvb2wgYmo9Zih2X2JvcmRlcldpZHRoKTwwO2Jvb2wgYms9Ymg9PTE7Ym9vbCBibD1mKHVfaGl0VGVzdCk9PTE7dmVjMiBibT12X3RleENvb3JkLnp3O2Zsb2F0IGJuPXZfZG9udXRTZWdtZW50Lng7ZmxvYXQgYm89dl9kb251dFNlZ21lbnQueTtmbG9hdCBNPXZfZG9udXRTZWdtZW50Lng7ZmxvYXQgVTtpbnQgdz1mKHZfdGV4dHVyZUJhbmsueCk7Ym9vbCBicD12X2JvcmRlcldpZHRoPjAuMCYmZih2X3NoYXBlU2l6ZS54KTwwO2Jvb2wgYnE9dz09LTM7Ym9vbCBicj1ibiE9MC4wfHxibyE9MC4wO2Zsb2F0IGJzO2lmKGJyfHxiail7aWYoYm4+YSl7Ym4tPTIuMCphO31pZihibz5hKXtiby09Mi4wKmE7fWZsb2F0IHg9Ym0ueC0wLjU7ZmxvYXQgeT1ibS55LTAuNTticz1hdGFuKHkseCk7fWlmKGJsKXtpZihiaD09LTEpe2Rpc2NhcmQ7fWVsc2V7SD12ZWM0KHZfaGl0VGVzdENvbG91ci8yNTUuMCwxLjApO2lmKGJpKXtmbG9hdCBidD1SKGJlKTtIKj0xLjAtc3RlcChiZCxidCk7aWYoaD4wLjApe2Zsb2F0IGJ1PWgqdV96b29tO0gqPXN0ZXAoYmQtYnUsYnQpO31pZihicil7aWYoYm4+PWJvKXtIKj1zdGVwKGJuLGJzKSsoMS4wLXN0ZXAoYm8sYnMpKTt9ZWxzZXtIKj1zdGVwKGJuLGJzKTtIKj0xLjAtc3RlcChibyxicyk7fX19ZWxzZSBpZih2X2RvbnV0U2VnbWVudC54PjAuMCl7VT1nKGgpO2Zsb2F0IGJ2PXBvdyhNLDIuMCk7ZmxvYXQgYnc9SSh2X3RleENvb3JkLnh5LHZfdGV4Q29vcmQueix2X3RleENvb3JkLncsMC4wLE0pO0gqPTEuMC1zdGVwKGJ2LGJ3KTt9ZWxzZSBpZihicCl7SCo9ayhoKTt9fX1lbHNlIGlmKGJrKXtkaXNjYXJkO31lbHNle0g9dl9jb2xvdXIvMjU1LjA7ZmxvYXQgYng9SC5hO2lmKHc+PTApe3ZlYzQgeDtmbG9hdCBieT0tMi4wLzMuMDtmbG9hdCBiej0tMC44O2lmKHc9PTApe3g9dGV4dHVyZTJEKHVfaW1hZ2VbMF0sdl90ZXhDb29yZC54eSxieik7SD1aKHgsSCwxLjApO31lbHNlIGlmKHc9PTEpe3g9dGV4dHVyZTJEKHVfaW1hZ2VbMV0sdl90ZXhDb29yZC54eSxieik7SD1aKHgsSCwxLjApO31lbHNlIGlmKHc9PTIpe3g9dGV4dHVyZTJEKHVfaW1hZ2VbMl0sdl90ZXhDb29yZC54eSxieik7SD1aKHgsSCwxLjApO31lbHNlIGlmKHc9PTMpe3g9dGV4dHVyZTJEKHVfaW1hZ2VbM10sdl90ZXhDb29yZC54eSxieSk7SD1aKHgsSCwwLjApO31lbHNlIGlmKHc9PTQpe0g9dGV4dHVyZTJEKHVfaW1hZ2VbNF0sdl90ZXhDb29yZC54eSxieSkqYng7fWVsc2UgaWYodz09NSl7SD10ZXh0dXJlMkQodV9pbWFnZVs1XSx2X3RleENvb3JkLnh5LGJ5KSpieDt9ZWxzZSBpZih3PT02KXtIPXRleHR1cmUyRCh1X2ltYWdlWzZdLHZfdGV4Q29vcmQueHksYnkpKmJ4O31lbHNlIGlmKHc9PTcpe0g9dGV4dHVyZTJEKHVfaW1hZ2VbN10sdl90ZXhDb29yZC54eSxieSkqYng7fX1lbHNle2Zsb2F0IGJ4PUguYTtIPXZlYzQoSC5yZ2IqYngsYngpO31pZihiaSl7ZmxvYXQgYnQ9UihiZSk7SCo9MS4wLWIoYmQsYnQpO2lmKGg+MC4wKXtmbG9hdCBidT1tYXgoMS4wLGgqdV96b29tKTtIKj1iKGJkLWJ1LGJ0KTtIKj1iYyhiZCk7fWZsb2F0IGJBPXZfcGl4ZWwqMS41O2Zsb2F0IGJCPWJuLWJBO2Zsb2F0IGJDPWJuK2JBO2Zsb2F0IGJEPWJvLWJBO2Zsb2F0IGJFPWJvK2JBO2lmKGJyKXtpZihibj49Ym8pe0gqPXNtb290aHN0ZXAoYkIsYkMsYnMpKygxLjAtc21vb3Roc3RlcChiRCxiRSxicykpO31lbHNle0gqPXNtb290aHN0ZXAoYkIsYkMsYnMpO0gqPTEuMC1zbW9vdGhzdGVwKGJELGJFLGJzKTt9fWVsc2UgaWYoYmope2Zsb2F0IGJGPWgqMi4wO2Zsb2F0IGJHPWJGLzIuMDtmbG9hdCBiSD0yLjAqKGEqKGJlLzIuMCkpO2Zsb2F0IGJJPWJzLygyLjAqYSk7ZmxvYXQgYko9Zmxvb3IoKGJIK2JHKS8oYkYrYkcpLTEuMCk7ZmxvYXQgYks9c2luKCgoYkkqYkopKSooMi4wKmEpKTtIKj1iKC0wLjUsYkspO319ZWxzZSBpZih2X2RvbnV0U2VnbWVudC54PjAuMCl7VT1nKGgpO0g9VChILFUsTSk7fWVsc2UgaWYoYnApe1U9ZyhoKTtIKj1rKFUpO0gqPWJjKGJkKTtpZihicSl7ZmxvYXQgYkY9VSoyLjA7ZmxvYXQgYkc9VTtmbG9hdCBiSj1mbG9vcigodl90ZXhDb29yZC56K2JHKS8oYkYrYkcpKSswLjU7ZmxvYXQgYks9c2luKCgoKHZfdGV4Q29vcmQueC92X3RleENvb3JkLnopKmJKKSkqKDIuMCphKSk7SCo9c3RlcCgtMC40OSxiSyk7Yko9Zmxvb3IoKHZfdGV4Q29vcmQudytiRykvKGJGK2JHKSkrMC41O2JLPXNpbigoKCh2X3RleENvb3JkLnkvdl90ZXhDb29yZC53KSpiSikpKigyLjAqYSkpO0gqPWIoLTAuNDksYkspO319fWdsX0ZyYWdDb2xvcj1IO30=",$a["triangle-vertex"]="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIHZlYzQgYV90ZXhDb29yZDthdHRyaWJ1dGUgdmVjMyBhX2hpdFRlc3RDb2xvdXI7YXR0cmlidXRlIGZsb2F0IGFfdmVydGV4SW5kZXg7YXR0cmlidXRlIHZlYzIgYV90ZXh0dXJlQmFuazthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjthdHRyaWJ1dGUgZmxvYXQgYV9jaXJjbGVSYWRpdXM7YXR0cmlidXRlIGZsb2F0IGFfd2lkdGg7YXR0cmlidXRlIGZsb2F0IGFfc3RhcnRBbmdsZTthdHRyaWJ1dGUgZmxvYXQgYV9lbmRBbmdsZTt1bmlmb3JtIHZlYzMgdV9yZXNvbHV0aW9uO3VuaWZvcm0gbWF0NCB1X3RyYW5zZm9ybTt1bmlmb3JtIGZsb2F0IHVfem9vbTt1bmlmb3JtIGxvd3AgZmxvYXQgdV9oaXRUZXN0O3ZhcnlpbmcgZmxvYXQgdl9ib3JkZXJXaWR0aDt2YXJ5aW5nIHZlYzIgdl9zaGFwZVNpemU7dmFyeWluZyB2ZWM0IHZfdGV4Q29vcmQ7dmFyeWluZyB2ZWM0IHZfY29sb3VyO3ZhcnlpbmcgdmVjMyB2X2hpdFRlc3RDb2xvdXI7dmFyeWluZyB2ZWMyIHZfdGV4dHVyZUJhbms7dmFyeWluZyBmbG9hdCB2X3BpeGVsO3ZhcnlpbmcgdmVjMiB2X2RvbnV0U2VnbWVudDtpbnQgYShmbG9hdCBhKXtyZXR1cm4gaW50KGZsb29yKGErMC41KSk7fXZlYzIgYih2ZWMyIGEpe3JldHVybiBmbG9vcihhKzAuNSk7fXZlYzIgYyh2ZWMyIGQpe3ZlYzIgZT1kL3VfcmVzb2x1dGlvbi54eTt2ZWMyIGY9ZSoyLjA7cmV0dXJuIGYtMS4wO312ZWMyIGcodmVjMiBkKXtkKz0xLjA7ZC89Mi4wO3JldHVybiBkKnVfcmVzb2x1dGlvbi54eTt9dmVjMiBoKGludCBpLGZsb2F0IGope3ZlYzIgaztpZihpPT0wKXtrPW5vcm1hbGl6ZSh2ZWMyKC0xLjAsLTEuMCkpO31lbHNlIGlmKGk9PTEpe2s9bm9ybWFsaXplKHZlYzIoMS4wLC0xLjApKTt9ZWxzZSBpZihpPT0yKXtrPW5vcm1hbGl6ZSh2ZWMyKC0xLjAsMS4wKSk7fWVsc2UgaWYoaT09Myl7az1ub3JtYWxpemUodmVjMigxLjAsMS4wKSk7fXJldHVybiBrKmxlbmd0aCh2ZWMyKGopKTt9dm9pZCBtYWluKCl7Ym9vbCBsPWEodV9oaXRUZXN0KT09MTtib29sIG09YV9jaXJjbGVSYWRpdXM+MC4wO2ludCBuPWEoYV90ZXh0dXJlQmFuay54KTtmbG9hdCBvPTAuMDtib29sIHA9ZmFsc2U7dmVjMiBxPWFfcG9zaXRpb24ueHk7ZmxvYXQgcjtmbG9hdCBzO3ZlYzIgaztpbnQgaT1hKGFfdmVydGV4SW5kZXgpO2lmKG0pe3I9YWJzKGFfY2lyY2xlUmFkaXVzKTtzPXI7fWVsc2V7cj1hX3RleENvb3JkLnovMi4wO3M9YV90ZXhDb29yZC53LzIuMDt9ZmxvYXQgdD0wLjA7aWYobj4zKXt0PWFfd2lkdGg7cSs9aChpLHQvdV96b29tKTt9ZWxzZXtvPWFicyhhX3dpZHRoKTtwPWEobyk+MDt9ZmxvYXQgdT1jZWlsKG8vMi4wKTtpZihwKXtpZihsKXtmbG9hdCB2PSg3LjAvdV96b29tKSpzaWduKGFfd2lkdGgpO28rPXY7dSs9Y2VpbCh2LzIuMCk7fXErPWgoaSx1KTt9aWYobCl7cSo9MS4wLXN0ZXAoYV9oaXRUZXN0Q29sb3VyLngrYV9oaXRUZXN0Q29sb3VyLnkrYV9oaXRUZXN0Q29sb3VyLnosMC4wKTt9Z2xfUG9zaXRpb249dV90cmFuc2Zvcm0qdmVjNChjKHEpKnZlYzIoMSwtMSksMCwxKTtpZihwJiYhbSl7dmVjMiB3PWdsX1Bvc2l0aW9uLnh5O3c9Zyh3KTt3PWIodyk7Z2xfUG9zaXRpb24ueHk9Yyh3KTt9dl90ZXhDb29yZD1hX3RleENvb3JkO3ZfY29sb3VyPWFfY29sb3VyO3ZfaGl0VGVzdENvbG91cj1hX2hpdFRlc3RDb2xvdXI7dl90ZXh0dXJlQmFuaz1hX3RleHR1cmVCYW5rO2Zsb2F0IHg9dSpzaWduKGFfY2lyY2xlUmFkaXVzKTtpZihtKXtmbG9hdCB5PShhX2NpcmNsZVJhZGl1cyt4KSoyLjA7dl9zaGFwZVNpemU9dmVjMih5KTt9ZWxzZXt2X3NoYXBlU2l6ZT12ZWMyKC1hX3RleENvb3JkLnoreCxhX3RleENvb3JkLncteCk7fXZfYm9yZGVyV2lkdGg9bypzaWduKGFfd2lkdGgpO3ZfcGl4ZWw9KDEuMC8oYV9jaXJjbGVSYWRpdXMqMi4wKSkvdV96b29tO3ZfZG9udXRTZWdtZW50PXZlYzIoYV9zdGFydEFuZ2xlLGFfZW5kQW5nbGUpO30=",$a["renderToTexture-fragment"]="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7dW5pZm9ybSBmbG9hdCB1X2dsb2JhbEFscGhhO3VuaWZvcm0gdmVjNCB1X2JhY2tncm91bmRDb2xvdXI7dmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7dm9pZCBtYWluKCl7Z2xfRnJhZ0NvbG9yPSh0ZXh0dXJlMkQodV9pbWFnZSx2X3RleENvb3JkKSt1X2JhY2tncm91bmRDb2xvdXIpKnVfZ2xvYmFsQWxwaGE7fQ==",$a["renderToTexture-vertex"]="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIHZlYzIgYV90ZXhDb29yZDt2YXJ5aW5nIHZlYzIgdl90ZXhDb29yZDt2b2lkIG1haW4oKXtnbF9Qb3NpdGlvbj12ZWM0KGFfcG9zaXRpb24sMC4wLDEuMCk7dl90ZXhDb29yZD1hX3RleENvb3JkO30=";var os=function(e,t){for(var n=e.createProgram(),r=0;r<t.length;++r)e.attachShader(n,t[r]);if(e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS)){var i=e.getProgramInfoLog(n);throw e.deleteProgram(n),new Error("Error in program linking:"+i)}return n},as="undefined"!=typeof window,ss=!1,us=!1;function ls(e,t){return e.some(function(e){return t.indexOf(e)>-1})}function cs(){if(us)return!ss;if(as){var e,t="file:"!==document.location.protocol,n=["OES_standard_derivatives","OES_element_index_uint","ANGLE_instanced_arrays"],r=ts({failIfMajorPerformanceCaveat:!0});if(t=t&&r){var i=r.getSupportedExtensions(),o={};for(e=0;e<i.length;e++)o[i[e]]=!0;for(e=0;t&&e<n.length;e++)t=t&&o[n[e]]}if(t){var a=r.getExtension("WEBGL_debug_renderer_info");if(a){var s=r.getParameter(a.UNMASKED_VENDOR_WEBGL),u=r.getParameter(a.UNMASKED_RENDERER_WEBGL);t=!(ls(["VMware","VirtualBox"],s)||ls(["Google SwiftShader","Microsoft Basic Render Driver","VirtualBox","Parallels","VMware"],u))}a=null}return r=null,ss=ss||!t,us=!0,t}return!ss}var fs={longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ampm:["AM","PM"],quarter:"Q",half:"H"},ds=[31,28,31,30,31,30,31,31,30,31,30,31],hs={milli:0,sec:1,min:2,hour:3,day:4,week:5,month:6,year:7},ps=function(e,t){return t?e-e%t:0},gs=function(e){if(e<hs.milli||hs.year<e)throw new Error("bad unit range")},vs=function(e,t){return 1===e&&ms(t)?29:ds[e]},ms=function(e){return 1===new Date(e,1,29).getMonth()};function ys(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function bs(e){var t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())}function xs(e,t,n){gs(t);var r=new Date(e);switch(t>hs.milli&&r.setUTCMilliseconds(0),t>hs.sec&&r.setUTCSeconds(0),t>hs.min&&r.setUTCMinutes(0),t>hs.hour&&r.setUTCHours(0),t>=hs.month&&r.setUTCDate(1),t>=hs.year&&r.setUTCMonth(0),t){case hs.milli:r.setUTCMilliseconds(ps(r.getUTCMilliseconds(),n));break;case hs.sec:r.setUTCSeconds(ps(r.getUTCSeconds(),n));break;case hs.min:r.setUTCMinutes(ps(r.getUTCMinutes(),n));break;case hs.hour:r.setUTCHours(ps(r.getUTCHours(),n));break;case hs.day:break;case hs.week:var i=r.getUTCDay(),o=i>=1?i-1:6;r.setTime(r.getTime()-24*o*60*60*1e3);break;case hs.month:r.setUTCMonth(ps(r.getUTCMonth(),n));break;case hs.year:r.setUTCFullYear(ps(r.getUTCFullYear(),n))}return r.getTime()}function ws(e,t,n){if(gs(t),t<=hs.week){var r=n;return t>hs.milli&&(r*=1e3),t>hs.sec&&(r*=60),t>hs.min&&(r*=60),t>hs.hour&&(r*=24),t>hs.day&&(r*=7),e+r}var i=new Date(e);switch(t){case hs.month:var o=i.getUTCMonth()+n,a=o%12,s=Math.floor(o/12);a<0&&(a+=12);var u=i.getUTCDate();u=Math.min(u,vs(a,i.getUTCFullYear()+s)),i.setUTCDate(u),i.setUTCMonth(a),0!==s&&i.setTime(ws(i.getTime(),hs.year,s));break;case hs.year:if(1===i.getUTCMonth()&&29===i.getUTCDate()){var l=i.getUTCFullYear()+n;ms(l)||i.setTime(ws(i.getTime(),hs.day,-1))}i.setUTCFullYear(i.getUTCFullYear()+n)}return i.getTime()}var As=function(e){for(var t=e+"";t.length<2;)t="0"+t;return t},Es=new RegExp("(f?f?f)|(s?s)|(m?m)|(h?h)|(H?H)|(t?t?t)|(d?d?d?d)|(M?M?M?M?M)|(Q?Q)|yyyy|yy","gm"),Ms={f:function(e){return Math.floor(e.getUTCMilliseconds()/100)},ff:function(e){return As(Math.floor(e.getUTCMilliseconds()/10))},fff:function(e){return As(Math.floor(e.getUTCMilliseconds()))},s:function(e){return e.getUTCSeconds()},ss:function(e){return As(e.getUTCSeconds())},m:function(e){return e.getUTCMinutes()},mm:function(e){return As(e.getUTCMinutes())},h:function(e){return e.getUTCHours()%12||12},hh:function(e){return As(e.getUTCHours()%12||12)},H:function(e){return e.getUTCHours()},HH:function(e){return As(e.getUTCHours())},t:function(e,t){return t.ampm[Math.floor(e.getUTCHours()/12)].charAt(0)},tt:function(e,t){return t.ampm[Math.floor(e.getUTCHours()/12)]},ttt:function(e,t){var n=Math.floor(e.getUTCHours()/12);return t.ampm[n+2]||t.ampm[n]},d:function(e){return e.getUTCDate()},dd:function(e){return As(e.getUTCDate())},ddd:function(e,t){return t.shortDays[e.getUTCDay()]},dddd:function(e,t){return t.longDays[e.getUTCDay()]},M:function(e){return e.getUTCMonth()+1},MM:function(e){return As(e.getUTCMonth()+1)},MMM:function(e,t){return t.shortMonths[e.getUTCMonth()]},MMMM:function(e,t){return t.longMonths[e.getUTCMonth()]},MMMMM:function(e,t){return t.shortMonths[e.getUTCMonth()].substr(0,1)},Q:function(e,t){var n=e.getUTCMonth(),r=Math.floor(n/3)+1;return t.quarter+r},QQ:function(e,t){var n=e.getUTCMonth(),r=Math.floor(n/6)+1;return t.half+r},yyyy:function(e){return e.getUTCFullYear()},yy:function(e){return As(e.getUTCFullYear()%100)}},Cs="(?::)?",ks="(?:-|$)";function Ts(){var e=hs,n={fontFamily:"sans-serif",fontSize:12},r={colours:["backColour","fontColour","sliderColour","sliderLineColour"]};function i(e,t){return function(e,t,n){var r="number"==typeof e?new Date(e):e;return t.replace(Es,function(e){return Ms[e](r,n||fs)})}(e,t,g.options.locale)}function o(t,n){var r=new Date(ws(t,e.year,n-1));return i(t,"yyyy - ")+i(r,"yyyy")}function s(e){return o(e,10)}function u(e){return o(e,50)}function l(e){return i(e,"yyyy")+"s"}function c(e){return i(e,"dmy"===g.options.locale.order?"d MMM yyyy":"MMM d, yyyy")}function f(e){return i(e,g.options.locale.h12?"h:mm tt":"HH:mm")}function d(e){return i(e,g.options.locale.h12?"h:mm:ss tt":"HH:mm:ss")}function h(e,t){if("histogram"===e){if(!m(t))return!1;if(t.colour&&!nt(t.colour))return!1;if(t.highlightColour&&!nt(t.highlightColour))return!1}return"minScale"===e?t:!N(r.colours,e)||nt(t)}var g={displayTime:function(e,t){return v(t)?t(e):i(e,t)},baseRangeLimits:{max:315576e7,min:3e3},options:{scale:{highlightColour:"#F2F2F2",showMajor:!0,showMinor:!0},backColour:"#FFFFFF",fontColour:qe.grey,fontFamily:n.fontFamily,fontSize:n.fontSize,showControlBar:!0,showPlay:!0,showExtend:!1,showFit:!0,sliderColour:"rgba(255, 255, 255, 0.6)",sliderLineColour:"#bbb",sliders:"fixed",maxRange:"auto",minRange:3e3,minScale:{units:"sec",value:1},showSliders:!0,_showShadowCanvas:!1,histogram:{colour:"#d0d0d0",highlightColour:"#a9a9a9",markColour:"#ea7378",markHiColour:"#e03038"},heightChange:{animate:!0,time:200},locale:k(fs,{order:"mdy",h12:!0}),playSpeed:60},getOptions:function(){return a(g.options,!0)},setOptions:function(e){m(e)&&(function(e){g.playingExtend=!e.showPlay&&!e.showExtend&&null}(e),t(e,function(t,r){_(g.options,r)&&(n[r]?function(e,t){"fontFamily"===e&&(g.options.fontFamily=Zt(t)||n.fontFamily),"fontSize"===e&&p(+t)&&+t>0&&(g.options.fontSize=+t)}(r,t):g.options[r]=m(g.options[r])&&h(r,t)?k(t,g.options[r]):e[r])}))},hoverTime:50,defaultAnimationTime:200,sliderReleaseTime:200,doubleClickZoomTime:500,doubleClickZoomTimeFree:250,playingExtend:!1,defaultPlaySpeed:60,bars:{defaultFontFamily:n.fontFamily,defaultFontSize:n.fontSize,major:{height:19,textbase:3,tickHeight:10},minor:{height:17,textbase:0,tickHeight:8}},grip:{lines:2,space:4,length:14,margin:2},controlbar:{height:30,space:4,colour:"#ddd"},fixedSideFactor:.5,freeSideFactor:.2,histogram:{dy:2,topdy:16,bardx:1,minwidth:11},selection:{maxNumber:3,reducingFactor:.75,dotsize:3.5},rates:[{max:6,major:{units:e.sec,by:2,f:c},minor:{units:e.sec,by:1,f:d}},{max:15,major:{units:e.sec,by:5,f:c},minor:{units:e.sec,by:1,f:d}},{max:24,major:{units:e.sec,by:10,f:c},minor:{units:e.sec,by:2,f:d}},{max:60,major:{units:e.sec,by:15,f:c},minor:{units:e.sec,by:5,f:d}},{max:120,major:{units:e.sec,by:30,f:c},minor:{units:e.sec,by:10,f:d}},{max:360,major:{units:e.min,by:1,f:c},minor:{units:e.sec,by:30,f:d}},{max:1e3,major:{units:e.min,by:5,f:c},minor:{units:e.min,by:1,f:f}},{max:5e3,major:{units:e.min,by:15,f:c},minor:{units:e.min,by:5,f:f}},{max:15e3,major:{units:e.hour,by:1,f:c},minor:{units:e.min,by:15,f:f}},{max:6e4,major:{units:e.hour,by:6,f:c},minor:{units:e.hour,by:1,f:f}},{max:12e4,major:{units:e.day,by:1,f:c,adjust:432e5},minor:{units:e.hour,by:2,f:f}},{max:18e4,major:{units:e.day,by:1,f:c,adjust:432e5},minor:{units:e.hour,by:3,f:f}},{max:36e4,major:{units:e.day,by:1,f:c},minor:{units:e.hour,by:6,f:f}},{max:72e4,major:{units:e.day,by:1,f:c},minor:{units:e.hour,by:12,f:"ttt"}},{max:5e6,major:{units:e.week,by:1,f:function(t){var n,r,o=new Date(t),a=new Date(ws(t,e.day,6)),s="dmy"===g.options.locale.order;return o.getUTCFullYear()===a.getUTCFullYear()?o.getUTCMonth()===a.getUTCMonth()?(n=s?"d - ":"MMM d - ",r=s?"d MMM yyyy":"d, yyyy"):(n=s?"d MMM - ":"MMM d - ",r=s?"d MMM yyyy":"MMM d, yyyy"):(n=s?"d MMM yyyy - ":"MMM d, yyyy - ",r=s?"d MMM yyyy":"MMM d, yyyy"),i(o,n)+i(a,r)}},minor:{units:e.day,by:1,f:"d"}},{max:15e6,major:{units:e.month,by:1,f:"MMMM yyyy"},minor:{units:e.week,by:1,f:function(t){var n=ws(t,e.day,6);return i(t,"d - ")+i(n,"d")}}},{max:3e7,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMMM"}},{max:75e6,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMM"}},{max:1e8,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMMMM"}},{max:2e8,major:{units:e.month,by:6,f:"QQ  yyyy"},minor:{units:e.month,by:1,f:"MMMMM"}},{max:36e7,major:{units:e.year,by:1,f:"yyyy"},minor:{units:e.month,by:3,f:"Q"}},{max:6e8,major:{units:e.year,by:1,f:"yyyy"},minor:{units:e.month,by:6,f:"QQ"}},{max:15e8,major:{units:e.year,by:10,f:s},minor:{units:e.year,by:1,f:"'yy"}},{max:25e8,major:{units:e.year,by:10,f:s},minor:{units:e.year,by:2,f:"'yy"}},{max:35e8,major:{units:e.year,by:10,f:s},minor:{units:e.year,by:5,f:"'yy"}},{max:115e8,major:{units:e.year,by:50,f:u},minor:{units:e.year,by:10,f:"'yy"}},{max:2e10,major:{units:e.year,by:50,f:u},minor:{units:e.year,by:25,f:"'yy"}},{max:35e9,major:{units:e.year,by:100,f:l},minor:{units:e.year,by:25,f:"'yy"}},{max:8e10,major:{units:e.year,by:100,f:l},minor:{units:e.year,by:50,f:"'yy"}},{max:16e10,major:{units:e.year,by:200,f:"yyyy"},minor:{units:e.year,by:100,f:""}},{max:4e11,major:{units:e.year,by:500,f:"yyyy"},minor:{units:e.year,by:100,f:""}},{max:1/0,major:{units:e.year,by:500,f:""},minor:{units:e.year,by:100,f:""}}]};return g}function _s(e,n){var r,i={},o=0,s=0,u=n.rates,l=[],c=[],f=[],d=[],h={t1:0,t2:0},g={t1:0,t2:0},v={},y={t1:0,t2:0},b={},x=[],w=[],A=null,E=[1,1e3,6e4,36e5,864e5,6048e5,2592e6,31536e6];function M(){e.privateTrigger("redraw")}function k(e){return e.t<=e.other}function T(e){return e.t>=e.other}function I(e,t,n,i){h.t1=e,h.t2=t,g.t1=n,g.t2=i,r&&(b=N(g),M()),ee=!0}function R(e,t){return E[e.units]*e.by/t>=n.histogram.minwidth}i.fontSizeFactor=function(){return n.options.fontSize/n.bars.defaultFontSize};var L=i.fontSizeFactor;function O(){var e=0;if(P()){var t=function(e){return{units:_(hs,e.units)?e.units:hs.sec,value:p(e.value)?Math.round(Math.abs(e.value)):1}}(n.options.minScale);e=function(e,t){for(var n=hs[e],r=0;r<u.length;r++){var i=u[r].minor;if(i.units>n||i.units===n&&i.by>=t)return r>0?r-1:r}return u.length-2}(t.units,t.value)}return e}function N(e){var t={},n=(e.t2-e.t1)/(r.x2-r.x1),i=function(e){for(var t=L(),n=0;u[n].max<e*t&&n<u.length;)n++;return n}(n),o=O();for(t.major=u[i=i<=o?o+1:i].major,t.minor=u[i].minor;i>0&&R(u[i-1].minor,n)&&i-1>o;)i--;return t.histogram=u[i].minor,t.timeRate=n,t}function P(){return n.options.minScale}function D(e){return n.options.sliders===e}i.extractUTC=function(e){var t;return e instanceof Date?t=ys(e):"number"==typeof e&&(t=Math.round(e)),t};var V=i.extractUTC;function z(){A=null;for(var e=0;e<x.length;e++)w[e]=null,x[e]=null;w.length=0,x.length=0}function F(e){var t,r;for(A=e,t=0;t<e.length;t++){var i=e[t].index||0;if(i<n.selection.maxNumber&&e[t].id){var o=C(e[t].id);if(o.length){x[i]=B(o),w[i]={startTotals:[],endTotals:[]};var a=0,s=0;for(r=0;r<l.length;r++){var u=l[r];w[i].startTotals[r]=a,w[i].endTotals[r]=s,u.id in x[i]&&(k(u)&&(a+=u.v),T(u)&&(s+=u.v))}w[i].startTotals[r]=a,w[i].endTotals[r]=s,G(i,e[t].c)}else!o.length&&w[i]&&(w[i]=null,x[i]=null)}}}function G(e,t){var r={colour0:"rgb(114, 179, 0)",colour1:"rgb(255, 153, 0)",colour2:"rgb(178, 38, 9)"}["colour"+e];t&&nt(t)&&(r=t),n.selection["colour"+e]=r}function H(e){for(var t=0,n=l.length;t<n;){var r=Math.floor((t+n)/2),i=l[r].t;i!==e||k(l[r])||i--,i<e?t=r+1:n=r}return t}i.ttox=function(e){return r.x1+(e-g.t1)/ne()};var W=i.ttox;i.xtot=function(e){return g.t1+(e-r.x1)*ne()};var Z=i.xtot;i.getClickedBar=function(e){return e>=r.bars.major.y1?"major":e>=r.bars.minor.y1?"minor":"histogram"};var Y=i.getClickedBar;function j(e,n){var r,i,o=H(e),a=H(n),s={},u={};for(r=0;r<o;r++)(i=l[r]).t!==i.other&&(u[i.id]=(u[i.id]||0)+(i.t<i.other?1:-1));for(t(u,function(e,t){e>0&&(s[t]=!0)}),r=o;r<a;r++)s[l[r].id]=!0;return Object.keys(s)}function X(e,t,n,r){for(var i=H(e),o=H(t),a=i;a<o;a++){var s=l[a];if(n?k(s):T(s)){var u=s.id;v[u]=(v[u]||0)+r}}}function q(){var e=K(),t=e?2*(e.t2-e.t1):n.baseRangeLimits.max,r=n.baseRangeLimits.min;if(P()?r=function(){var e,t=O(),r=u[t].max;if(D("fixed"))e=o/(1+n.freeSideFactor);else if(D("free")){r=1;var i=u[t+1].minor;e=E[i.units]*i.by}else e=o;return Math.round(r*e)}():n.options.minRange&&(r=Math.max(r,n.options.minRange)),"auto"!==n.options.maxRange){var i=function(e){return{units:_(hs,e.units)?e.units:hs.sec,value:p(e.value)?Math.round(Math.abs(e.value)):n.baseRangeLimits.max}}(n.options.maxRange);t=i.value*E[hs[i.units]]}else t=Math.max(t,Math.floor(4*r));return{max:t,min:r=Math.min(r,Math.floor(t/4))}}function Q(){var e=o,t=n.options.showControlBar?n.controlbar.height:0,i=L(),a=s-t,u=a-(n.options.scale.showMajor?n.bars.major.height*i:0),l=u-(n.options.scale.showMinor?n.bars.minor.height*i:0),c=l-n.histogram.dy,f=c-n.histogram.topdy;r={bars:{major:{y1:u,y2:a},minor:{y1:l,y2:u}},histogram:{ybase:c,maxbarh:f,maxselh:f*n.selection.reducingFactor},x1:0,y1:l,x2:e,y2:a,width:o,height:s}}i.findRange=function(e,t,n){var r,i=n||Y(t),o=Z(e);return J(i,function(e,t){return t>o&&(r={t1:e,t2:t,bar:i},!0)}),r},i.dataRange=function(){if(l.length>0){for(var e=0;l[e].t===-1/0;)e++;for(var t=l[e].t,n=l.length-1;l[n].t===1/0;)n--;return{t1:t,t2:l[n].t+1}}};var K=i.dataRange;i.eachTick=function(e,t){var n,r=b[e],i=xs(g.t1,r.units,r.by),o=!1;do{o=t(i,n=ws(i,r.units,r.by),W(i),W(n),r.f),i=n}while(!o&&i<=g.t2)};var J=i.eachTick,$={count:0,x:[],marks:[],value:[],hasSel:[],selvalues:[],maxvalue:0,maxselvalue:0},ee=!0,te=function(e,t){return d.some(function(n){if(m(n)){if(!S(n.dt1)&&!S(n.dt2)){var r=V(n.dt1),i=V(n.dt2);if(r<t&&i>e)return!0}}else{var o=V(n);if(o>=e&&o<t)return!0}return!1})};i.getHistogram=function(){return ee&&function(){var e,t,r,i=n.selection.maxNumber,o=b.histogram,a=xs(g.t1,o.units,o.by),s=H(a),u=0,l=0,d=0;for($.marks=[],t=0;t<i;t++)$.hasSel[t]=!!w[t],$.selvalues[t]=$.selvalues[t]||[];do{r=a>g.t2,$.x[u]=W(a);var h=a;e=H(a=ws(a,o.units,o.by));var p=c[e]-f[s];$.value[u]=p;var v=te(h,a);for($.marks[u]=v,p>l&&!r&&(l=p),t=0;t<i;t++){var m=w[t];if(m){var y=m.startTotals[e]-m.endTotals[s];$.selvalues[t][u]=y,y>d&&!r&&(d=y)}}u++,s=e}while(!r);$.count=u-1,$.maxvalue=l,$.maxselvalue=d,ee=!1}(),$},i.getBounds=function(){return r},i.getInnerRange=function(){return h},i.getOuterRange=function(){return g},i.getTimeRate=function(){return b.timeRate};var ne=i.getTimeRate;function re(t){var r=K();r&&h.t1>=r.t1&&t<=r.t1&&!n.playingExtend&&e.trigger("start","data")}function ie(t){var n=K();n&&h.t2<=n.t2&&t>=n.t2&&e.trigger("end","data")}i.nextPage=function(e){var t=h.t1,n=h.t2,r="back"===e?-1:1,i=hs.month;if(t===xs(t,i,1)&&n===xs(n,i,1)){var o=new Date(t),a=new Date(n),s=12*(a.getUTCFullYear()-o.getUTCFullYear())+(a.getUTCMonth()-o.getUTCMonth());t=ws(t,i,r*s),n=ws(n,i,r*s)}else{var u=r*(n-t);t+=u,n+=u}return{t1:t,t2:n}},i.privateGetItems=function(){return l},i.setInnerRangeSide=function(e,t){"t1"===e?re(t):ie(t),h[e]=t},i.getSideLimits=function(e){var t,n;if("t1"===e?(t=g.t1,n=h.t2):(t=h.t1,n=g.t2),D("fixed")){var r=Math.floor(.1*(n-t));t+=r,n-=r}var i=q();"t1"===e?(t=Math.max(t,h.t2-i.max),n=Math.min(n,h.t2-i.min)):(t=Math.max(t,h.t1+i.min),n=Math.min(n,h.t1+i.max));var o=K();return o&&("t1"===e?n=Math.min(n,o.t2):t=Math.max(t,o.t1)),{min:t,max:n}},i.hasItems=function(){return l.length>0},i.limitInnerRange=function(e,t,n){var r,i=e,o=t,a=K(),s=n?(i+o)/2:(h.t1+h.t2)/2,u=q(),l=o-i;return l>u.max?(i=Math.ceil(s-u.max/2),o=Math.floor(s+u.max/2)):l<u.min&&(i=Math.floor(s-u.min/2),o=Math.ceil(s+u.min/2)),a&&(o<a.t1?(i+=r=a.t1-o,o+=r):i>a.t2&&(i-=r=i-a.t2,o-=r)),{t1:i,t2:o}};var oe=i.limitInnerRange;function ae(e){var t=V(e);if(!p(t))throw new Error("load: invalid date in dt property. Value was: "+e);return t}function se(e){for(var t=[],n=C(e),r=0;r<n.length;r++){var i=n[r];if(i.id&&i.dt)for(var o=i.id+"",a=C(i.dt),s=C(i.v),u=0;u<a.length;u++){var l=a[u],c=s[u]||1;if(!p(c))throw new Error("load: invalid value in v property - must be numeric. Value was: "+c);if("object"!=typeof l||l instanceof Date){var f=ae(l);t.push({id:o,t:f,v:c,other:f})}else{var d="dt1"in l,h="dt2"in l;if(!d&&!h)throw new Error("load: TimePeriod object must have a dt1 or dt2 property. Id was: "+o);var g=d?ae(l.dt1):-1/0,v=h?ae(l.dt2):1/0;if(v<g)throw new Error("load: TimePeriod dt2 time must be after dt1 time. Id was: "+o);t.push({id:o,t:g,v:c,other:v}),v!==g&&t.push({id:o,t:v,v:c,other:g})}}}return t.sort(ce)}function ue(){c=[0],f=[0],v={},ee=!0;for(var e=0;e<l.length;e++){var t=l[e],n=0,r=k(t),o=T(t);r&&t.t<h.t2&&(n=1),o&&t.t<h.t1&&(n-=1),0!==n&&(v[t.id]=(v[t.id]||0)+n),c[e+1]=c[e]+(r?t.v:0),f[e+1]=f[e]+(o?t.v:0)}y.t1=h.t1,y.t2=h.t2;var a=i.limitInnerRange(y.t1,y.t2,!0);return M(),a}function le(e,t){return e===t?0:e===1/0||t===-1/0?1:e===-1/0||t===1/0?-1:e-t}function ce(e,t){var n=e.t===t.t?le(e.other,t.other):le(e.t,t.t);return 0===n&&(n=e.id===t.id?e.v-t.v:e.id>t.id?1:-1),n}function fe(e,t){var n=Math.floor((e.t2-e.t1)*t);return{t1:e.t1-n,t2:e.t2+n}}function de(e,t){var r;if(D("none"))r=e;else if(D("free")){var i=K();if(i){var o=q();i.t2-i.t1<o.min&&(i.t1=Math.floor(i.t1-o.min/2),i.t2=Math.ceil(i.t2+o.min/2)),t&&(i=ge(i)),r=fe(i,n.freeSideFactor)}else r=g}else r=fe(e,n.fixedSideFactor);return r}i.inMainBarOrHistogram=function(e,t){return e>=r.x1&&e<=r.x2&&t>=0&&t<=r.y2},i.load=function(e){return l=se((e||{}).items),z(),d=[],ue()},i.merge=function(e){var t=se(e);t.length>0&&(l=0===l.length?t:t[0].t>l[l.length-1].t?l.concat(t):t[t.length-1].t<l[0].t?t.concat(l):function(e,t){for(var n=[],r=0,i=0;r<e.length&&i<t.length;){var o=ce(e[r],t[i]);0===o?(n.push(e[r]),r++,i++):o<0?(n.push(e[r]),r++):(n.push(t[i]),i++)}for(;r<e.length;)n.push(e[r]),r++;for(;i<t.length;)n.push(t[i]),i++;return n}(l,t),A&&F(A),ue())},i.offsetRanges=function(e,t){var n=h.t1,r=h.t2;return he(n+(t?0:e),r+e),n!==h.t1||r!==h.t2},i.mark=function(e){var t=S(e)?e:C(e);return t&&(t.length?function(e){d=[];for(var t=0;t<e.length;t++){var n=e[t];if(m(n)){var r="dt1"in n,i="dt2"in n;if(!r&&!i)throw new Error("mark: TimePeriod object must have a dt1 or dt2 property.");var o=r?ae(n.dt1):-1/0;if((i?ae(n.dt2):1/0)<o)throw new Error("mark: TimePeriod dt2 time must be after dt1 time.")}d.push(a(n))}}(t):d=[],ee=!0,M()),d},i.selection=function(e){var t=S(e)?e:C(e);t&&(t.length?F(t):z()),ee=!0,M();for(var n=[],r=0;r<x.length;r++)n[r]=x[r]?Object.keys(x[r]):null;return n},i.setInner=function(t,r){var i=oe(t,r);if(K()&&h.t1&&h.t2){var o=oe(t+1,r+1),a=oe(t-1,r-1);re(t),i.t1<h.t1&&a.t1===i.t1&&!n.playingExtend&&e.trigger("start","range"),ie(r),i.t2>h.t2&&o.t2===i.t2&&!n.playingExtend&&e.trigger("end","range")}var s=de(i,!0);I(i.t1,i.t2,s.t1,s.t2)};var he=i.setInner;function pe(e){var t=N(de(e,!1)).histogram,n=xs(e.t1,t.units,t.by),r=xs(e.t2,t.units,t.by);return r!==e.t2&&(r=ws(r,t.units,t.by)),{t1:n,t2:r}}function ge(e){var t,n=e;do{var r=pe(n);t=r.t1!==n.t1||r.t2!==n.t2,n=r}while(t);return n}i.setOuter=function(e,t){I(h.t1,h.t2,e,t)},i.updateOptions=function(){var e,t;e=h.t1,t=h.t2,he(h.t1,h.t2),e===h.t1&&t===h.t2||ve(),Q()},i.setSize=function(e,t){o=e,s=t,Q()},i.fitHistogramBarsExactly=ge,i.triggerTimeBarChanged=U(function(){e.trigger("change")},250);var ve=i.triggerTimeBarChanged;return i.getIdcounts=function(){var e,t,n,r;return y.t1===h.t1&&y.t2===h.t2||(t=h.t2,r=y.t2,(e=h.t1)<(n=y.t1)?X(e,n,!1,1):e>n&&X(n,e,!1,-1),t>r?X(r,t,!0,1):t<r&&X(t,r,!0,-1),y.t1=e,y.t2=t),v},i.getRangeForIds=function(e){var t,n,r=C(e),i=1/0,o=-1/0,a={};for(t=0;t<r.length;t++)a[r[t]]=!0;for(t=0;t<l.length;t++)a[(n=l[t]).id]&&(n.t<i&&(i=n.t),n.t>o&&(o=n.t));if(i!==1/0)return{t1:i,t2:o}},i.getIds=function(e,t){if(S(e)||S(t))throw new Error("getIds error: both dt1 and dt2 dates must be passed.");return j(V(e),V(t))},i}new RegExp("^(\\d{4})"+ks+"(\\d{2})?"+ks+"(\\d{2})?(?:T|$)(\\d{2})?"+Cs+"(\\d{2})?"+Cs+"(\\d{2})?(?:Z)?(\\+|-)?(\\d{2})?"+Cs+"(\\d{2})?");var Ss={TIMEBAR:{alwaysUpdate:!0,isContentLayer:!0}},Is={TIMEBAR:"TIMEBAR",OVERLAYS:"OVERLAYS"};function Rs(){var e=Vn(Ss),t={};function n(){e.setup(),e.createLayer("TIMEBAR"),e.createLayer("OVERLAYS")}t.hasPath=e.hasLayerPathAt,t.removeAllItems=n,t.setShadowColourMap=function(t){e.setShadowColourMap(t),n()},n();var r=H({},e);return H(r,t)}function Ls(e,n,r,i,o){var a,s,u,l,f,d,h,p,g=Rs(),v=rn(R),m={},b=function(){},x=new Date/12755,E={x:-1,y:-1},M=null,C=null,T={},_={lastId:null,lastRange:null},I={_tbfit:1,_tbzoomout:1,_tbzoomin:1,_tbprev:1,_tbpause:1,_tbplay:1,_tbplayextend:1,_tbnext:1};function R(){e.privateTrigger("redraw")}function L(e,t,r){g=Rs(),l=e,a=t,s=r,n.setSize(t,r);var i=u(a,s,!0);d=Ha(i.getContext("2d"),e),g.setShadowColourMap(d.getShadowColourMap())}function O(){t(B,function(e){o.get(va[e],!1,!0)}),R()}function N(){ue._tbLeft='url("'+va["openhand.png"]+'"), pointer',ue._tbRight=ue._tbLeft,t(I,function(e,t){ue[t]="pointer"})}function P(e,t,r){n[t](e);var i=n.getInnerRange();Z(i.t1,i.t2,{quiet:!0},r)}function D(){var e=null,t=on(v,function(t){if(0===arguments.length)return e;e=t});return function(n){return i.options.heightChange.animate&&null!==e?t(n,i.options.heightChange.time):e=n,e}}m.getCanvas=function(){return l},m.privateInit=function(e,t,r,i,o,a,s){u=i,b=o,N(),L(e,t,r),n.setInner(ys(new Date(2011,4,6)),ys(new Date)),O()},m.privateSetSize=function(e,t,n){At();var r=m.range();L(e,t,n),m.range(r.dt1,r.dt2,{animate:!1})},m.imageNames=function(){return B},m.isPlayingFixed=function(){return f&&!i.playingExtend},m.isPlayingExtend=function(){return f&&i.playingExtend},m.selectionRegExp=function(){return V},m.animate=v.animate,m.draw=function(){if(o.hasPendingImages())R();else{g.resetExtras(),r.generate(m,n,l,g,i,E,p),Dn(l);var e=121860917-x;if(e!==Math.abs(e))return;e=1,Bn(g,l,null,o,{}),d.dirty()}},m.load=function(e,t){return P(e,"load",t)},m.merge=function(e,t){return P(e,"merge",t)},m.range=function(e,t,r,i){function o(e){return y(e)||A(e)}if(0===arguments.length){var a=n.getInnerRange();return{dt1:bs(a.t1),dt2:bs(a.t2)}}if(S(e)||S(t))throw new Error("range error: both dt1 and dt2 dates must be passed.");if(!o(e)||!o(t))throw new Error("range error: both dt1 and dt2 must be dates, timestamps or ranges.");var s=k(r,{animate:!0}),u=n.extractUTC(e),l=n.extractUTC(t),c=n.limitInnerRange(u,l,!0);Z(c.t1,c.t2,s,i)},m.play=function(t){var n=t||{};e.trigger("play",n.extend?"extend":"normal"),G(n)},m.pan=function(e,t,n){var r=k(t,{animate:!0}),i=e||"forward";if("forward"!==i&&"back"!==i)throw new Error("Timebar.pan: Invalid direction option ("+i+") passed.");K(i,r,n)},m.zoom=function(e,t,n){switch(e){case"in":ye(t,n);break;case"out":be(t,n);break;case"fit":ge(t,n)}},m.pause=function(){f=!1,i.playingExtend=!1,e.trigger("pause")},m.options=function(e,t){return e&&(i.setOptions(e),n.updateOptions(),"_showShadowCanvas"in e&&d.debugCanvas(e._showShadowCanvas?l:null),R()),w(t),i.getOptions()},m.animateBarHeight=D(),m.animateSelHeight=D();var B={play:"TBPlay.png",pause:"TBPause.png",next:"TBNext.png",prev:"TBPrev.png",fit:"TBFit.png",playextend:"TBPlayExtend.png",zoomin:"TBZoomIn.png",zoomout:"TBZoomOut.png"},V=/^_tbLine(.)/;function z(t,r,i){p=d.test(t,r,g),Y(t,r)&&(T=n.findRange(t,r));var o=function(e,t){return!T||!t||T.t1!==t.t1||T.t2!==t.t2}(0,_.lastRange);if("hover"!==i||p!==_.lastId||o){var a,s,u,l,c=t,f=r,h=null,v=T&&"histogram"===T.bar;if(Y(t,r)&&(a=bs(T.t1),s=bs(T.t2),h=v?null:"scale"),"_tbBar"===p||V.test(p)){h="bar","_tbBar"!==p&&(h="selection",u=+p.match(V)[1],v||(a=bs((T=n.findRange(t,r,"histogram")).t1),s=bs(T.t2)));var m=function(e,t){for(var r=n.getHistogram(),i="_tbBar"===p,o=0;r.x[o+1]<t&&o<r.count;)o++;var a=i?r.value[o]:r.selvalues[e][o],s=i?r.maxvalue:r.maxselvalue,u=(r.x[o]+r.x[o+1])/2,l=n.getBounds().histogram,c=l.ybase-Math.floor((i?l.maxbarh:l.maxselh)*a/s);return i||(c-=5),{x:u,y:c,v:a}}(u,t);c=m.x,f=m.y,l=m.v}return!h&&p&&(h=we(p)),_.lastId=p,_.lastRange=T,e.trigger(i,h,u,l,c,f,a,s)}}var F=U(z,i.hoverTime);function G(t){i.playingExtend=!!t.extend,f||(f=!0,v.push(nn(function(t){var r=n.offsetRanges(Math.floor(n.getTimeRate()*(i.options.playSpeed||i.defaultPlaySpeed)*(t/1e3)),i.playingExtend);return f&&r?(n.triggerTimeBarChanged(),!0):(f=!1,i.playingExtend=!1,r||e.trigger("pause"),!1)})))}function H(e,t,r,o,a,s){var u=e.t1,l=e.t2,c=r-u,f=o-l,d=a||{},h=d.time||i.defaultAnimationTime,p=h;v.push(nn(function(e){var r=1-(p=Math.max(0,p-e))/h;return t(u+c*r,l+f*r),p<=0&&(d.quiet||n.triggerTimeBarChanged(),w(s)),p>0}))}function W(e,t,r,i){var o=n.limitInnerRange(e,t);H(n.getInnerRange(),n.setInner,o.t1,o.t2,r,i)}function Z(e,t,r,i){r.animate?W(e,t,r,i):(n.setInner(e,t),r.quiet||n.triggerTimeBarChanged(),w(i))}function Y(e,t){return n.inMainBarOrHistogram(e,t)||V.test(p)}function j(e){return function(t){var r=n.getInnerRange()[e],o=n.getSideLimits(e);return{getCursor:function(){return"ew-resize"},dragMove:function(i){n.setInnerRangeSide(e,function(e,t){return Math.min(o.max,Math.max(o.min,e))}(r+(i-t)*n.getTimeRate())),n.triggerTimeBarChanged()},endDrag:function(t){if(t&&n.setInnerRangeSide(e,r),"fixed"===i.options.sliders){var o=n.getInnerRange(),a=(o.t2-o.t1)*i.fixedSideFactor;!function(e,t,r,i){H(n.getOuterRange(),n.setOuter,e,t,r,void 0)}(o.t1-a,o.t2+a,{time:i.sliderReleaseTime})}}}}}function X(e,t){E.x===e&&E.y===t||(E.x=e,E.y=t,R())}function q(){X(-1,-1)}function Q(){(p in I||_.lastId in I)&&R()}function K(e,t,r){var i=n.nextPage(e);Z(i.t1,i.t2,t,r)}function J(e){var t=n.getInnerRange().t1;return{getCursor:function(){return"move"},dragMove:function(r){var o=Math.floor((e-r)*n.getTimeRate());"free"===i.options.sliders&&(o*=-1),n.offsetRanges(o+(t-n.getInnerRange().t1)),n.triggerTimeBarChanged()},endDrag:function(e){e&&n.offsetRanges(t-n.getInnerRange().t1)}}}function $(e){return e[0].x>e[1].x?{xmin:e[1].x,xmax:e[0].x}:{xmin:e[0].x,xmax:e[1].x}}function ee(e){var t=$(e),r=n.xtot(t.xmin),o=n.xtot(t.xmax),a=o-r,s=n.getInnerRange(),u=n.ttox(s.t1),l=n.ttox(s.t2);return{pinchMove:function(e){var s=$(e);if("free"===i.options.sliders){var c=l+(s.xmax-t.xmax);n.setInner(n.xtot(u+(s.xmin-t.xmin)),n.xtot(c))}else if(s.xmax!==s.xmin){var f=a/(s.xmax-s.xmin),d=Math.floor(r-f*(s.xmin-u)),h=Math.floor(o+f*(l-s.xmax));n.setInner(d,h),n.triggerTimeBarChanged()}},endPinch:function(){}}}var te,ne,re,ie,oe,ae,se,ue={},le={_tbBar:J,_tbSlider:J,_tbHisto:J,_tbLine:J,_tbMain:J,_tbMajor:J,_tbMinor:J,_tbLeft:j("t1"),_tbRight:j("t2")},ce={_tbBar:ee,_tbSlider:ee,_tbHisto:ee,_tbLine:ee,_tbMain:ee,_tbMinor:ee,_tbMajor:ee};function fe(e){var t=xe(d.test(e.x,e.y,g));return ce[t]}function de(t,n,r){M&&(M.endDrag(e.trigger("dragend",M.type,n,r)),e.trigger("dragcomplete",M.type,n,r),M=null,b("auto"))}function he(){C&&(C=null)}function pe(e,t,r,i,o){var a=k(i,{animate:!0,time:200}),s=r||.5,u=e>0?s:1/s,l=n.getInnerRange(),c=l.t1,f=l.t2,d=f-c,h=d*u,p=(t-l.t1)/(l.t2-l.t1);Z(c=Math.floor(c-(h-d)*p),f=Math.floor(f+(h-d)*(1-p)),a,o)}function ge(e,t){var r;(r=e&&e.id?n.getRangeForIds(e.id):n.dataRange())?(r=n.fitHistogramBarsExactly(r),m.range(r.t1,r.t2,e,t)):w(t)}function ve(){var e=n.getInnerRange();return(e.t1+e.t2)/2}function me(e,t,n){pe(e,ve(),.5,t,n)}function ye(e,t){me(1,e,t)}function be(e,t){me(-1,e,t)}function xe(e){return V.test(e)?"_tbLine":e}function we(e){return(0===e.indexOf("_tb")?e.substr(3):e).toLowerCase()}function Ae(t,n,r){var o=d.test(t,n,g);if(r||("_tbplay"===o?(i.playingExtend=!1,m.play()):"_tbplayextend"===o?(i.playingExtend=!0,m.play({extend:!0})):"_tbpause"===o?m.pause():"_tbnext"===o?m.pan("forward"):"_tbprev"===o?m.pan("back"):"_tbfit"===o?ge():"_tbzoomin"===o?"free"===i.options.sliders?be():ye():"_tbzoomout"===o&&("free"===i.options.sliders?ye():be())),o=xe(o),le[o]){var a="hand";/left|right/i.test(o)&&(a=we(o)),e.trigger("dragstart",a,t,n)||((M=le[o](t,n)).type=a,b(M.getCursor(t,n)))}}function Ee(e,t){if(1===e.length)Ae(e[0].x,e[0].y,!t),z(e[0].x,e[0].y,"touchdown");else if(2===e.length){var n=fe(e[0]),r=fe(e[1]);n&&n===r&&(C=n(e))}}function Me(e,t){if(n.inMainBarOrHistogram(e,t)){if(!z(e,t,"dblclick")){var r=n.findRange(e,t);W((r=n.limitInnerRange(r.t1,r.t2,!0)).t1,r.t2,{time:"free"===i.options.sliders?i.doubleClickZoomTimeFree:i.doubleClickZoomTime})}}else z(e,t,"dblclick")}function Ce(){se&&(clearTimeout(se),se=null)}return m.mousedown=function(e,t,n){var r;2===e?r="contextmenu":(r="click",Ae(t,n)),z(t,n,r)},m.mousewheel=function(t,r,o){var a;return e.trigger("mousewheel",t,r,o)||(a="free"===i.options.sliders?ve():n.xtot(r),n.inMainBarOrHistogram(r,o)&&pe(t,a,.65,{animate:!0})),!0},m.dblclick=function(e,t){Me(e,t)},m.mousemove=function(e,t,r,i){var o;n.inMainBarOrHistogram(e,t)?X(e,t):q(),M?(o=M.getCursor(e,t),M.dragMove(e,t,r,i)):(p=d.test(e,t,g),o=ue[xe(p)]||"auto"),Q(),h!==o&&(h=o,b(o)),F(e,t,"hover")},m.mouseup=function(e,t,n,r){de(0,e,t)},m.mouseleave=function(e,t,n,r){arguments.length&&function(e,t,n,r){q(),de(0,e,t)}(e,t),p=null,Q()},m.touchstart=function(e){(function(e){var t=!1;return 1===e.length&&(te?(Me(e[0].x,e[0].y),t=!0):te=c(function(){te=null},600)),t})(e)||Ee(e,!0),oe=e[0].x,ae=e[0].y,ne=e[0].id,se=setTimeout(function(){Ce(),de(),z(oe,ae,"contextmenu")},600)},m.touchmove=function(e){C?C.pinchMove(e):M&&(M.dragMove(e[0].x,e[0].y,!1,!1),X(e[0].x,e[0].y));for(var t=0;t<e.length;t++)ne===e[t].id&&(re=e[t].x,ie=e[t].y);if(se){var n=re-oe,r=ie-ae;n*n+r*r>100&&Ce()}},m.touchend=function(e){se&&Ce(),he(),de(),Ee(e,!1)},m.touchcancel=function(){he(),de()},m.keydown=function(e,t,n){if(!t&&!n&&32===e)return S(i.playingExtend)||m[f?"pause":"play"]({extend:i.options.showExtend&&!i.options.showPlay}),!0},m}function Os(e,t){var n={},r=en(),i=Ts(),o=_s(r,i),a=function(e){var t={},n=window["D"+9884..toString(30)][25871..toString(33)]()/31757,r="\u2704",i=[-25,69,44,-1,28,78,-20,-6,-89,-52,71,20,31,40,65,16,61,79,-11,-89,-89];return t.generate=function(t,o,a,s,u,l,c){var f=o.getBounds();s.setLayer(Is.TIMEBAR);var d="d MMM yyyy/MMM d, yyyy";function h(e){var t="minor"===e,n=t&&!u.options.scale.showMinor||!t&&!u.options.scale.showMajor,r=f.bars[e].y2,i=u.options.fontFamily,l=u.options.fontSize,c=o.fontSizeFactor(),d=u.bars[e].tickHeight*c;n&&(d=0);var h=t?f.bars[e].y1:f.bars[e].y2-d;if(o.eachTick(e,function(t,n,o,p,g){if(o>=f.x1&&o<=f.x2){var v=Math.floor(1*c)+1;s.line(o,h,o,h+d,"#ddd",null,v,null)}var m=u.displayTime(t,g),y=Kt(a,m,l,!1,i).width,b=Math.floor((p+o)/2-y/2);s.text(b,r-u.bars[e].textbase,m,u.options.fontColour,l,!1,null,i)}),!n){var p=qe.transparent;s.rect(0,f.bars[e].y1,f.width,f.bars[e].y2,p,1,p,!0,t?"_tbMinor":"_tbMajor")}}function p(e,t){for(var n="",r=0;r<t.length;r++)n+=String.fromCharCode(t[r]+e.charCodeAt(r));return n}function g(){if(c){var e=c.match(t.selectionRegExp());if(e)return+e[1]}return null}function v(e,n){if(e.hasSel[n])for(var i=t.animateSelHeight(e.maxselvalue)||1,o=e.selvalues[n],a="_tbLine"+n,l=u.selection["colour"+n],d=(e.x[1]-e.x[0])/2,h=0;h<e.count;h++){var p=o[h+1],g=e.x[h]+d,v=e.x[h+1]+d,m=f.histogram.maxselh,y=f.histogram.ybase,b=y-Math.floor(m*o[h]/i),x=y-Math.floor(m*p/i);s.line(g,b,v,x,l,null,2,a);var w=a+r+h;s.circle(g,b,u.selection.dotsize,l,2,c===w?l:u.options.backColour,!0,w,null,null,!0)}}f.x2>f.x1&&(48925628<n||(s.rect(f.x1,0,f.x2,f.y1,qe.midgrey,-1,u.options.backColour,!0,"_tbHisto"),s.rect(f.x1,f.y1,f.x2,f.y2,qe.midgrey,-1,u.options.backColour,!0,"_tbMain"),(u.options.scale.showMajor||u.options.scale.showMinor)&&function(){var e;if(-1!==l.x&&(e=o.findRange(l.x,l.y)),e&&"histogram"!==e.bar){var t=Math.max(o.ttox(e.t1),f.x1),n=Math.min(o.ttox(e.t2),f.x2);t<n&&s.rect(t,f.bars[e.bar].y1-("minor"===e.bar?2:1),n,f.bars[e.bar].y2+1,null,-1,u.options.scale.highlightColour,!0,null)}}(),u.options.scale.showMajor&&h("major"),u.options.scale.showMinor&&h("minor"),o.hasItems()&&function(){var e=o.getHistogram(),n=f.histogram.ybase,r=f.histogram.maxbarh;if(r>0){for(var i=t.animateBarHeight(e.maxvalue)||1,a=u.histogram.bardx,c=0;c<e.count;c++){var d=e.x[c]+a,h=e.x[c+1]-a,p=e.value[c];if(p>0){var m=n-Math.max(1,Math.min(r,Math.floor(r*p/i)));s.rect(d,m,h,n,qe.white,-1,l.x>=d&&l.x<=h&&l.y>=m&&l.y<=n?e.marks[c]?u.options.histogram.markHiColour:u.options.histogram.highlightColour:e.marks[c]?u.options.histogram.markColour:u.options.histogram.colour,!0,"_tbBar")}}for(var y=g(),b=0;b<u.selection.maxNumber;b++)b!==y&&v(e,b);null!==y&&v(e,y)}}(),"none"!==u.options.sliders&&function(){var e=o.getInnerRange(),t=Math.round(o.ttox(e.t1)),n=Math.round(o.ttox(e.t2));s.line(t,0,t,f.y2,u.options.sliderLineColour,null,2,"_tbSlider"),s.line(n,0,n,f.y2,u.options.sliderLineColour,null,2,"_tbSlider"),s.rect(f.x1,0,t,f.y2,u.options.sliderLineColour,-1,u.options.sliderColour,!0,"_tbSlider"),s.rect(n,0,f.width,f.y2,u.options.sliderLineColour,-1,u.options.sliderColour,!0,"_tbSlider");for(var r=(f.y2-u.grip.length)/2,i=r+u.grip.length,a=t-u.grip.margin,l=n+u.grip.margin,c=4+2*u.grip.lines,d=0;d<u.grip.lines;d++)l+=u.grip.space,s.line(a-=u.grip.space,r,a,i,u.options.sliderLineColour,null,2),s.line(l,r,l,i,u.options.sliderLineColour,null,2);s.rect(t-3*c,r-u.grip.length,t,i+u.grip.length,qe.transparent,-1,qe.transparent,!0,"_tbLeft"),s.rect(n+3*c,r-u.grip.length,n,i+u.grip.length,qe.transparent,-1,qe.transparent,!0,"_tbRight")}(),u.options.showControlBar&&function(){var n=u.controlbar.height,r=f.height-n,i="rgba(255,255,255,0.7)";s.rect(0,r,f.width,f.height,u.controlbar.colour,-1,u.controlbar.colour,!0,"_tbcontrolbar"),s.line(0,r-.5,f.width,r-.5,"#ccc",null,1,"_tbcontrolbar");var o="";u.options.showPlay&&(o=t.isPlayingFixed()?"pause":"play");var a="";u.options.showExtend&&(a=t.isPlayingExtend()?"pause":"playextend");var l,d,h=[u.options.showFit?"fit":"","zoomout","zoomin",40,"prev",o,a,"next"],p=0,g=t.imageNames(),v=function(e){for(l=0;l<h.length;l++){var t=h[l];t&&e(t,"number"==typeof t)}};v(function(t,n){if(n)p+=t;else{var r=e.get(va[d=g[t]]).im;p+=r.width/2,l>0&&(p+=u.controlbar.space)}});var m=(f.width-p)/2;v(function(t,o){if(o)m+=t;else{var a=e.get(d=va[g[t]]).im,l=a.width/2,f=a.height/2,h=r+(n-f)/2,p="_tb"+t;c===p&&s.circle(m+l/2,h+f/2,l/2-2,i,0,i,!0,p),s.image(m,h,m+l,h+f,d,p,null,!1,!0),m+=l+u.controlbar.space}})}(),function(e,t,n){s.setLayer(Is.OVERLAYS);var r=Kt(a,e,36).width,i=(f.width-r)/2,o=(f.height+36)/2;s.text(i+2,o+2,e,n,36,!0),s.text(i,o,e,t,36,!0)}(p(d,i),p(d,[14,71,21,-37,-27,16,-69,-77,-71,-70,10,-33,-27,-24,18,-59]),p(d,[14,71,21,-37,-27,21,-69,-77,-71,-68,4,-33,-27,-24,18,-59]))))},t}(t),s=Ls(r,o,a,i,t);n.clear=function(){return s.load({items:[]})},n.getIds=function(e,t){return o.getIds(e,t)},n.load=function(e,t){if(e&&e.items)return s.load(e,t);throw Error("Unknown data format passed")},n.options=function(e,t){return s.options(e,t)},n.pan=function(e,t,n){return s.pan(e,t,n)},n.pause=function(){return s.pause()},n.play=function(e){return s.play(e)},n.range=function(e,t,n,r){return 0!==arguments.length?s.range(e,t,n,r):s.range()},n.merge=function(e,t){var n=C(M(e));return s.merge(n,t)},n.selection=function(e){return o.selection(e)},n.mark=function(e){return o.mark(e)},n.zoom=function(e,t,n){var r=k(t,{animate:!0,time:200});return s.zoom(e||"in",r,n)},n.privateInit=s.privateInit,n.privateSetSize=s.privateSetSize,un(n,s),G(n,r);var u=tn(s.draw,s.animate,s.getCanvas);return G(n,u),n.inRange=function(e){if(S(e))return!1;var t=(m(e)?e.id:e)+"";return!!o.getIdcounts()[t]},n.privateBind("redraw",u.redraw),n._getItems=o.privateGetItems,n}var Ns,Ps,Ds=128,Bs=16,Vs=Ds,zs=.25,Fs=["rgba(255,0,0,1)","rgba(0,255,0,1)","rgba(0,0,255,1)","rgba(0,0,0,0)"];function Gs(){return Bs+zs*Vs}var Hs=function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d");return n.id="webglDebugTextCanvas"+t,n.width=e,n.height=e,r.fillStyle="black",r.fillRect(0,0,e,e),r},Ws=function(e){var t=Object.keys(e),n=Zs(t),r={},i=js(r,t,n);return i.getGlyphInfoForFont=function(e){return r[e]},i},Zs=function(e){for(var t=0,n=document.createElement("canvas").getContext("2d"),r=0,i=e.length;r<i;r++){var o=Ns.getNonEmojiGlyphs(),a=e[r];t+=Ys(n,o,a,!1),t+=Ys(n,o,a,!0)}for(var s=(Vs+Ps)*t/3,u=256;s/(u*u)>3;)u*=2;return u},Ys=function(e,t,n,r){for(var i,o=0,a=r?"bold ":"",s=0,u=t.length;s<u;s++){var l=t[s];i=ne(l)?re(Vs):Vs,e.font=a+i+"px "+n,o+=e.measureText(l).width+Bs}return o},js=function(e,n,r){var i,o,a=r,s=function(){i=[],o={x:Bs,y:Ps,colourComponent:0,textureBank:0};for(var t=0,r=n.length;t<r;t++)e[n[t]]=e[n[t]]||{},qs(i,a,e,o,n[t],!1),qs(i,a,e,o,n[t],!0)};for(E(s,function(e){if(e){if((a*=2)>4096&&(Vs/=2,Ps=Gs()),Vs<32)return void console.log("Number of unique text characters exceeded, try reducing the number of fonts or use canvas mode");s()}}),t(e,function(t,n){Xs(i,e,n,!1),Xs(i,e,n,!0)});o.textureBank<2;){o.textureBank++;var u=Hs(1,o.textureBank);i[o.textureBank]={alphaChannel:!1,img:u.canvas,texture:null}}return{fontSize:Vs,atlases:i,glyphInfo:e}},Us=function(e,t,n){var r=e[t].ctx;return r.font=n,r.globalCompositeOperation="lighter",r},Xs=function(e,t,n,r){for(var i=t[n],o=r?"B":"",a=r?"bold ":"",s=Ns.getNonEmojiGlyphs(),u=0;u<s.length;++u){var l=s[u],c=0,f=i[l+o];if(f){var d;ne(l)?(c=8,d=re(Vs)):d=Vs;var h=Us(e,f.textureBank,a+d+"px "+n);h.fillStyle=Fs[f.colourComponent],h.fillText(l,f.x,f.y+.75*Vs-c)}}},qs=function(e,t,n,r,i,o){var a,s=e[r.textureBank];s?a=s.ctx:(s={alphaChannel:!1,img:(a=Hs(t,r.textureBank)).canvas,ctx:a,texture:null},e[r.textureBank]=s);var u=o?"B":"",l=o?"bold ":"";a.fillStyle="black";for(var c=Ns.getNonEmojiGlyphs(),f=0;f<c.length;++f){var d,h=c[f];d=ne(h)?re(Vs):Vs,a.font=l+d+"px "+i;var p=a.measureText(h);if(r.x+p.width+Bs>t){var g=r.y+Vs+Ps;if(g+Vs>t){if(g=Ps,r.colourComponent<2)r.colourComponent++;else{if(!(r.textureBank<2))throw new Error("Warning: Number of unique text characters exceeded, restarting build with larger Texture");r.colourComponent=0,r.textureBank++,(a=Hs(t,r.textureBank)).font=l+Vs+"px "+i,e.push({alphaChannel:!1,img:a.canvas,ctx:a,texture:null})}a.fillStyle=Fs[r.colourComponent]}r.x=Bs,r.y=g}n[i][h+u]={text:h,x:r.x,y:r.y,u1:r.x/t,v1:(r.y+Vs)/t,u2:(r.x+p.width)/t,v2:(r.y-Vs*zs)/t,colourComponent:r.colourComponent,textureBank:r.textureBank,width:p.width},r.x+=p.width+Bs}},Qs=256,Ks=Qs/2,Js=function(e){for(var t=512,n=12;t<2048;){if(e<=n)return t;t*=2,n*=4}return 2048},$s=function(e,t,n){for(var r=e.colourData,i=e.colourIndex,o=0;o<6;o++)r[i++]=t[0],r[i++]=t[1],r[i++]=t[2],r[i++]=t[3]*n;e.colourIndex=i},eu=function(e,t){var n=t||[0,0,0,0],r=e.shadowData,i=e.shadowIndex;r[i++]=n[0],r[i++]=n[1],r[i++]=n[2],r[i++]=0,r[i++]=n[0],r[i++]=n[1],r[i++]=n[2],r[i++]=1,r[i++]=n[0],r[i++]=n[1],r[i++]=n[2],r[i++]=2,r[i++]=n[0],r[i++]=n[1],r[i++]=n[2],r[i++]=2,r[i++]=n[0],r[i++]=n[1],r[i++]=n[2],r[i++]=1,r[i++]=n[0],r[i++]=n[1],r[i++]=n[2],r[i++]=3,e.shadowIndex=i},tu=function(e,t,n,r,i,o,a){var s=e.positionIndex,u=e.positionData;if(a)for(var l=0;l<18;l++)u[s++]=0;else u[s++]=t,u[s++]=n,u[s++]=o,u[s++]=r,u[s++]=n,u[s++]=o,u[s++]=t,u[s++]=i,u[s++]=o,u[s++]=t,u[s++]=i,u[s++]=o,u[s++]=r,u[s++]=n,u[s++]=o,u[s++]=r,u[s++]=i,u[s++]=o;e.positionIndex=s},nu=function(e,t,n,r,i,o,a,s,u,l,c,f,d,h){var p=e.textureData,g=e.textureIndex;p[g++]=t,p[g++]=n,p[g++]=o,p[g++]=a,p[g++]=l,p[g++]=c,p[g++]=f,p[g++]=d,p[g++]=h,p[g++]=r,p[g++]=n,p[g++]=s,p[g++]=a,p[g++]=l,p[g++]=c,p[g++]=f,p[g++]=d,p[g++]=h,p[g++]=t,p[g++]=i,p[g++]=o,p[g++]=u,p[g++]=l,p[g++]=c,p[g++]=f,p[g++]=d,p[g++]=h,p[g++]=t,p[g++]=i,p[g++]=o,p[g++]=u,p[g++]=l,p[g++]=c,p[g++]=f,p[g++]=d,p[g++]=h,p[g++]=r,p[g++]=n,p[g++]=s,p[g++]=a,p[g++]=l,p[g++]=c,p[g++]=f,p[g++]=d,p[g++]=h,p[g++]=r,p[g++]=i,p[g++]=s,p[g++]=u,p[g++]=l,p[g++]=c,p[g++]=f,p[g++]=d,p[g++]=h,e.textureIndex=g},ru=[0,0,0,0],iu=[255,255,255,255];function ou(e,t,n){var r=n.all||t||e.dirty;return e.dirty=!1,r}var au={dashed:2,dotted:3},su=function(e,t,n,r,i,o,a,s,u){var l,c,f,d,h;(s||u.all||u.shadow)&&eu(r.triangleBuffers,e.wsc),(u.colours||s||u.all)&&$s(r.triangleBuffers,n,o),(u.positions||s||u.all)&&tu(r.triangleBuffers,e.x1+i.x,e.y1+i.y,e.x2+i.x,e.y2+i.y,0|e.vx,a),(u.textures||s||u.all)&&("ci"!==e.s||t.missing?(c=t.u1,l=t.v1,d=t.u2,f=t.v2):(h="width"===t.maxDimension?(e.y2-e.y1)/2:(e.x2-e.x1)/2,c=t.cu1,l=t.cv1,d=t.cu2,f=t.cv2),nu(r.triangleBuffers,c,l,d,f,0,0,1,1,t.textureBank,t.colourComponentTexture,h,0,0))},uu=function(e,t,n,r,i,o,a){if(e){"_background"===n.id&&(n.wsc=ru);var s=a.get(n.u);su(n,s,iu,t,n.a,r,n.hib,i,o)}else t.triangleBuffers.skip()},lu=function(e,t,n,r,i,o,a){e?su(n,a[n.t+(n.ff||"")],n.wc,t,n.a,r,n.hib,i,o):t.triangleBuffers.skip()},cu=[0,1,0,1],fu=[0,0,2,2],du=function(e,t,n,r,i,o){e?function(e,t,n,r,i,o,a,s,u,l,c,f,d,h,p){var g=t,v=n,m=r,y=i,b=c.elementData,x=c.elementIntegerData,w=c.elementDataIndex;if(h||p.all){var A=c.elementIndex,E=c.elementIndexIndex,M=c.elementMappingIndex;A[E]=M,A[E+1]=M+1,A[E+2]=M+2,A[E+3]=M+2,A[E+4]=M+1,A[E+5]=M+3}c.elementIndexIndex+=6,c.elementMappingIndex+=4;var C=0;(h||p.all||p.positions)&&f&&(g+=f.x,v+=f.y,m+=f.x,y+=f.y);for(var k=0;k<4;k++){if((h||p.all||p.positions)&&(b[w]=g,b[w+1]=v,b[w+2]=m,b[w+3]=y,b[w+4]=l),h||p.all){x[C=(w+6)*Float32Array.BYTES_PER_ELEMENT]=cu[k],x[C+1]=fu[k],x[C+2]=0,x[C+3]=u,x[C+4]=o[0],x[C+5]=o[1],x[C+6]=o[2],x[C+7]=o[3]*d,x[C+8]=a[0],x[C+9]=a[1],x[C+10]=a[2],x[C+11]=a[3]*d;var T=s||[0,0,0];x[C+12]=T[0],x[C+13]=T[1],x[C+14]=T[2]}c.elementDataIndex+=10,w=c.elementDataIndex}}(0,n.x1,n.y1,n.x2,n.y2,n.wc,n.wc2||n.wc,n.wsc,au[n.ls]||0,n.w,t.lineBuffers,n.a,r,i,o):t.lineBuffers.skip()},hu=function(e,t,n,r,i,o,a,s,u,l,c,f,d,h,p,g,v){var m=p||0,y=g||0;if((h.all||d)&&(eu(u.triangleBuffers,i||[0,0,0,0]),$s(u.triangleBuffers,r,f)),h.all||h.positions||d){var b=2*n,x=e-n,w=t-n,A=x+b,E=w+b;tu(u.triangleBuffers,x+=l.x,w+=l.y,A+=l.x,E+=l.y,v?-o:o,c)}(h.all||h.textures||d)&&nu(u.triangleBuffers,a,s,a,s,0,0,1,1,-1,-1,n,m,y)},pu=function(e,t,n,r,i,o){n.fi&&(e?hu(n.x,n.y,n.r,n.wfc,n.wsc,0,.5,.5,t,n.a,n.hib,r,i,o):t.triangleBuffers.skip()),n.bw>0&&(e?hu(n.x,n.y,n.r,n.wbc,n.wsc,n.bw,.5,.5,t,n.a,n.hib,r,i,o,null,null,(au[n.bs]||0)>1):t.triangleBuffers.skip())},gu=function(e,t,n,r,i,o){n.donut&&hu(n.x,n.y,n.r,n.wbc,n.wsc,n.bw,.5,.5,t,n.a,n.hib,r,i,o,n.sa,n.ea),e?function(e,t,n,r,i,o,a,s,u,l,c,f,d,h,p,g){var v=l||[0,0,0,0];if((p||g.all)&&function(e,t,n,r,i,o){for(var a=t.shadowIndex,s=0;s<4;s++)for(var u=0;u<6;u++)e[a++]=n,e[a++]=r,e[a++]=i,e[a++]=o;t.shadowIndex=a}(e.shadowData,e,v[0],v[1],v[2],f),g.colours||p||g.all){var m=s,y=u;i<0&&(m=u,y=s),function(e,t,n,r,i){for(var o=t.colourIndex,a=0;a<4;a++)for(var s=0;s<6;s++)e[o++]=n[0],e[o++]=n[1],e[o++]=n[2],e[o++]=n[3]*i,e[o++]=r[0],e[o++]=r[1],e[o++]=r[2],e[o++]=r[3]*i;t.colourIndex=o}(e.colourData,e,m,y,h)}(p||g.all)&&function(e,t){for(var n=t.coreIndex,r=1;r<=4;r++)e[n]=r,e[n+3]=r+1,e[n+6]=-r,e[n+9]=-r,e[n+12]=r+1,e[n+15]=-(r+1),n+=18;t.coreIndex=n}(e.coreData,e),(g.positions||p||g.all)&&function(e,t,n,r,i,o,a,s,u){var l=n,c=r;u&&(l=n+u.x,c=r+u.y);for(var f=t.positionIndex,d=0;d<4;d++)for(var h=0;h<6;h++)e[f++]=l,e[f++]=c,e[f++]=i,e[f++]=o,e[f++]=a,e[f++]=s;t.positionIndex=f}(e.positionData,e,t,n,r,o,a,c,d)}(t.arcBuffers,n.x,n.y,n.r,n.off,n.sa,n.ea,n.wbc,n.wbc2||n.wbc,n.wsc,n.bw,au[n.ls]||1,n.a,r,i,o):t.arcBuffers.skip()},vu=function(e,t,n,r,i,o,a,s,u,l,c,f,d,h,p){var g=t,v=n,m=r,y=i,b=l||0;if((h||p.all)&&eu(a.triangleBuffers,e.wsc),(h||p.all)&&$s(a.triangleBuffers,o,u),(p.positions||h||p.all)&&tu(a.triangleBuffers,g+=s.x,v+=s.y,m+=s.x,y+=s.y,b,d),p.textures||h||p.all){var x=m-g,w=y-v;nu(a.triangleBuffers,x,w,0,0,x,w,x,w,c>1?-3:-1,0,-b,f,0)}},mu=function(e,t,n,r,i,o){var a=n.fi,s=n.bw>0;e?(a&&vu(n,n.x1,n.y1,n.x2,n.y2,n.wfc,t,n.a,r,0,0,0,n.hib,i,o),s&&vu(n,n.x1,n.y1,n.x2,n.y2,n.wbc,t,n.a,r,n.bw,au[n.bs]||0,0,n.hib,i,o)):(a&&t.triangleBuffers.skip(),s&&t.triangleBuffers.skip())},yu=function(e,t,n,r,i,o){var a=n.fi,s=n.bw>0;e?(a&&vu(n,n.x1,n.y1,n.x2,n.y2,n.wfc,t,n.a,r,0,0,n.r,n.hib,i,o),s&&vu(n,n.x1,n.y1,n.x2,n.y2,n.wbc,t,n.a,r,n.bw,au[n.bs]||0,n.r,n.hib,i,o)):(a&&t.triangleBuffers.skip(),s&&t.triangleBuffers.skip())},bu=function(e,t,n,r,i,o){tu(e,t,n,r,i,0,o)},xu=function(e,t,n,r,i,o,a){nu(e,t,n,r,i,0,0,1,1,a,o,0,0,0)},wu=function(e,t,n,r,i,o,a,s){n.back&&(e?vu(n,n.x1,n.y1,n.x2,n.y2+n.fs*n.pf,n.wbc,t,n.a,r,0,0,0,n.hib,i,o):t.triangleBuffers.skip()),e?function(e,t,n,r,i,o,a,s){var u,l=0;u=t.fs!==vt&&(s.all||s.positions||a)?mt/r*(t.fs/mt):.109375;var c=t.wmargin,f=t.x1,d=t.y1+t.yOffset+t.fs*(t.pf/2);i&&(f+=i.x,d+=i.y);for(var h=0,p=n.length;h<p;h++){var g,v=n[h],m=r*u;if((s.all||s.shadow||a)&&eu(e,ru),(s.all||s.colours||a)&&$s(e,t.wc,o),s.all||s.positions||a){var y=0;v.textureBank<3&&(y=m*zs),bu(e,f+l+c,d+m,f+(l+(g=v.width*u))+c,d-y,t.hib)}(s.all||s.textures||a)&&xu(e,v.u1,v.v1,v.u2,v.v2,v.colourComponent,v.textureBank),l+=g}}(t.triangleBuffers,n,a,s,n.a,r,i,o):t.triangleBuffers.skip(a.length)},Au=function(e,t,n,r,i,o,a,s,u,l,c,f,d,h){var p,g,v=t,m=n,y=r,b=i,x=o,w=a,A=e.wsc||[0,0,0,0];if(h.all||h.shadow||d)for(g=0;g<3;g++){var E=l.triangleBuffers.shadowData,M=l.triangleBuffers.shadowIndex;E[M++]=A[0],E[M++]=A[1],E[M++]=A[2],E[M++]=0,l.triangleBuffers.shadowIndex=M}if(h.all||h.colours||d)for(g=0;g<3;g++){var C=l.triangleBuffers.colourData,k=l.triangleBuffers.colourIndex;C[k++]=s[0],C[k++]=s[1],C[k++]=s[2],C[k++]=s[3]*f,l.triangleBuffers.colourIndex=k}if(h.all||h.positions||d){p=l.triangleBuffers.positionIndex;var T=l.triangleBuffers.positionData;c&&(v+=c.x,m+=c.y,y+=c.x,b+=c.y,x+=c.x,w+=c.y),T[p++]=v,T[p++]=m,T[p++]=0,T[p++]=y,T[p++]=b,T[p++]=0,T[p++]=x,T[p++]=w,T[p++]=0,l.triangleBuffers.positionIndex=p}if(h.all||h.textures||d){p=l.triangleBuffers.textureIndex;var _=l.triangleBuffers.textureData;_[p++]=0,_[p++]=1,_[p++]=0,_[p++]=0,_[p++]=u,_[p++]=0,_[p++]=0,_[p++]=0,_[p++]=0,_[p++]=1,_[p++]=0,_[p++]=0,_[p++]=0,_[p++]=u,_[p++]=0,_[p++]=0,_[p++]=0,_[p++]=0,_[p++]=0,_[p++]=0,_[p++]=1,_[p++]=0,_[p++]=u,_[p++]=0,_[p++]=0,_[p++]=0,_[p++]=0,l.triangleBuffers.textureIndex=p}},Eu=function(e,t,n,r,i,o){n.arrowhead?function(e,t,n,r,i,o){var a=n.a,s=n.x1+a.x,u=n.y1+a.y,l=n.x2+a.x,c=n.y2+a.y,f=n.x3+a.x,d=n.y3+a.y;1===n.arrowhead?function(e,t,n,r,i,o,a,s,u,l,c,f){var d,h=e.elementData,p=e.elementIntegerData,g=e.elementDataIndex;if(c||f.all){var v=e.elementIndex,m=e.elementIndexIndex,y=e.elementMappingIndex;v[m]=y,v[m+1]=y+1,v[m+2]=y+2,d=u||[0,0,0,0]}e.elementIndexIndex+=3,e.elementMappingIndex+=3;var b=0;h[g]=t,h[g+1]=n,h[g+2]=r,h[g+3]=i,h[g+4]=o,h[g+5]=a,(c||f.all)&&(p[b=(g+6)*Float32Array.BYTES_PER_ELEMENT]=0,p[b+1]=1,p[b+2]=0,p[b+3]=4,p[b+4]=s[0],p[b+5]=s[1],p[b+6]=s[2],p[b+7]=s[3]*l,p[b+8]=s[0],p[b+9]=s[1],p[b+10]=s[2],p[b+11]=s[3]*l,p[b+12]=d[0],p[b+13]=d[1],p[b+14]=d[2],p[b+15]=0),e.elementDataIndex+=10,h[g=e.elementDataIndex]=t,h[g+1]=n,h[g+2]=r,h[g+3]=i,h[g+4]=o,h[g+5]=a,(c||f.all)&&(p[b=(g+6)*Float32Array.BYTES_PER_ELEMENT]=1,p[b+1]=0,p[b+2]=0,p[b+3]=4,p[b+4]=s[0],p[b+5]=s[1],p[b+6]=s[2],p[b+7]=s[3]*l,p[b+8]=s[0],p[b+9]=s[1],p[b+10]=s[2],p[b+11]=s[3]*l,p[b+12]=d[0],p[b+13]=d[1],p[b+14]=d[2],p[b+15]=1),e.elementDataIndex+=10,h[g=e.elementDataIndex]=t,h[g+1]=n,h[g+2]=r,h[g+3]=i,h[g+4]=o,h[g+5]=a,(c||f.all)&&(p[b=(g+6)*Float32Array.BYTES_PER_ELEMENT]=0,p[b+1]=0,p[b+2]=1,p[b+3]=4,p[b+4]=s[0],p[b+5]=s[1],p[b+6]=s[2],p[b+7]=s[3]*l,p[b+8]=s[0],p[b+9]=s[1],p[b+10]=s[2],p[b+11]=s[3]*l,p[b+12]=d[0],p[b+13]=d[1],p[b+14]=d[2],p[b+15]=2),e.elementDataIndex+=10}(t.lineBuffers,s,u,l,c,f,d,n.wfc,n.wsc,r,i,o):2===n.arrowhead&&function(e,t,n,r,i,o,a,s,u,l,c,f){var d=u||[0,0,0];(c||f.all)&&function(e,t,n,r,i){for(var o=t.shadowIndex,a=0;a<3;a++)e[o++]=n,e[o++]=r,e[o++]=i,e[o++]=4+a;t.shadowIndex=o}(e.shadowData,e,d[0],d[1],d[2]),(f.colours||c||f.all)&&function(e,t,n,r,i,o,a){for(var s=t.colourIndex,u=0;u<3;u++)e[s++]=n,e[s++]=r,e[s++]=i,e[s++]=o*a,e[s++]=n,e[s++]=r,e[s++]=i,e[s++]=o*a;t.colourIndex=s}(e.colourData,e,s[0],s[1],s[2],s[3],l),(c||f.all)&&function(e,t){var n=t.coreIndex;e[n++]=0,e[n++]=1,e[n++]=0,e[n++]=1,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=0,e[n++]=1,t.coreIndex=n}(e.coreData,e),(f.positions||c||f.all)&&function(e,t,n,r,i,o,a,s){var u=t.positionIndex;e[u++]=n,e[u++]=r,e[u++]=i,e[u++]=o,e[u++]=a,e[u++]=s,e[u++]=n,e[u++]=r,e[u++]=i,e[u++]=o,e[u++]=a,e[u++]=s,e[u++]=n,e[u++]=r,e[u++]=i,e[u++]=o,e[u++]=a,e[u++]=s,t.positionIndex=u}(e.positionData,e,t,n,r,i,o,a)}(t.arcBuffers,s,u,l,c,f,d,n.wfc,n.wsc,r,i,o)}(0,t,n,r,i,o):(n.fi&&Au(n,n.x1,n.y1,n.x2,n.y2,n.x3,n.y3,n.wfc,-2,t,n.a,r,i,o),n.bw>0&&Au(n,n.x1,n.y1,n.x2,n.y2,n.x3,n.y3,n.wbc,-2,t,n.a,r,i,o))},Mu=3,Cu=4,ku=9,Tu=4,_u=10,Su=6,Iu=3,Ru=4,Lu=8,Ou=Su*Float32Array.BYTES_PER_ELEMENT,Nu=Iu*Float32Array.BYTES_PER_ELEMENT,Pu=Ru*Uint8Array.BYTES_PER_ELEMENT,Du=Lu*Uint8Array.BYTES_PER_ELEMENT,Bu=4;function Vu(e,t){var n,r,i,o,a,s={};function u(){n=function(){var e={},t=new Map;return e.getCombinedCharacters=function(e){var n=t.get(e);return n||(n=ue(se(e)),t.set(e,n)),n},e}(),r=function(e,t){return{canvas:e,layersToDraw:[],textAtlas:null,fontIconAtlas:null,imageAtlases:[],allLayers:{},framebuffers:{},alpha:{},characterCache:n,imageList:null}}(e),i=function(e,t){for(var n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$\xa31234567890() ",r=new Map,i={},o=0,a=n.length;o<a;o++)i[n[o]]=!0;var s=function(e,t){for(var n=!1,o=!1,a=0,s=e.length;a<s;a++){var u=e[a];r.get(u)?n=!0:o=!0,i[u]||(i[u]=!0)}n&&(t.imageAtlas=!0),o&&(t.textAtlas=!0)};return{getNonEmojiGlyphs:function(){return Object.keys(i).filter(function(e){return!r.get(e)})},getEmojiGlyphs:function(){return Object.keys(i).filter(function(e){return r.get(e)})},getGlyphsFromText:function(n,i,o,a,u,l,c){var f,d,h=e.getCombinedCharacters(n);l&&(h=Ve(h,n).result);var p,g,v,m,y=!1,b={},x=[],w=c.getGlyphInfoForFont(i||o),A=0;for(p=0,g=h.length;p<g;p++)d=f=h[p].text||h[p],r.has(f)||r.set(f,ae(f)),r.get(f)?(m=t.has(f),v=t.getEmojiImage(f)):(a&&(d+="B"),m=!!(v=w[d])),m?x[A++]=v:(b[f]=!0,y=!0);return y&&s(Object.keys(b),u),x}}}(n,t),o=function(e,t,n){var r,i={},o={},a={},s=null,u=null,l={},c={textAtlas:!1,fontIcons:!1,imageAtlas:!1},f=Ra();function d(e){S(e.fontFamily)&&(e.fontFamily="sans-serif"),s===e.fontFamily&&null!==s||(s=e.fontFamily,c.textAtlas=!0),l[s]=!0,a[s]=!0}function h(e){e.iconFontFamily&&u!==e.iconFontFamily&&(u=e.iconFontFamily,c.fontIcons=!0)}i.updateImageTextures=function(r){r.clearTextureAtlas(e.imageAtlases),e.imageAtlases=function(e){for(var t=[],n=4,r=4,i=4,o=0,a=e.getMissingImage(),s=Ca(e),u=Ea(s),l=1/u,c=Ma(u,0),f=[],d=0,h=s.length;d<h;d++){var p=s[d];if(p.isMissing)f.push(p);else{var g=p.width/p.imageRatio,v=p.height/p.imageRatio;if(n+g+Aa>u&&(n=0,r+=o+Aa,o=0),r+v>u&&(i++,r=Aa,t.push({alphaChannel:!0,img:c.canvas,texture:null}),c=Ma(u,i)),p.u1=n*l,p.v1=r*l,p.u2=(n+g)*l,p.v2=(r+v)*l,p.isEmoji&&(p.v2=r*l,p.v1=(r+v)*l),p.maxDimension=p.nonSquare,p.textureBank=i,p.colourComponentTexture=-1,p.nonSquare){var m=p.v2-p.v1,y=p.u2-p.u1;if("width"===p.nonSquare){var b=(y-y*(m/y))/2;p.cu1=p.u1+b,p.cv1=p.v1,p.cu2=p.u2-b,p.cv2=p.v2}else{var x=(m-m*(y/m))/2;p.cu1=p.u1,p.cv1=p.v1+x,p.cu2=p.u2,p.cv2=p.v2-x}}else p.cu1=p.u1,p.cv1=p.v1,p.cu2=p.u2,p.cv2=p.v2;c.drawImage(p.hasControlColour?p.co:p.im,n,r,g,v),v>o&&(o=v),n+=g+Aa}}for(f.forEach(function(e){e.u1=a.u1,e.v1=a.v1,e.u2=a.u2,e.v2=a.v2,e.cu1=a.cu1,e.cv1=a.cv1,e.cu2=a.cu2,e.cv2=a.cv2,e.textureBank=a.textureBank}),t.push({alphaChannel:!0,img:c.canvas,texture:null}),i++;i<8;){var w=Ma(1,i++);t.push({alphaChannel:!0,img:w.canvas,texture:null})}return t}(n,t.getEmojiGlyphs())},i.generate=function(t,n,o,a){n.all&&(e.layersToDraw.length=0,r=Jt(e.canvas),c.textAtlas=!1,c.fontIcons=!1,c.imageAtlas=!1),t.forEach(function(t){var r=function(t,n){var r=e.allLayers[n.id];return r||(r=function(e){var t={triangleBuffers:{numOfTriangles:0,itemIndex:{},skip:function(e){var n=e||1;t.triangleBuffers.colourIndex+=48*n,t.triangleBuffers.shadowIndex+=24*n,t.triangleBuffers.textureIndex+=54*n,t.triangleBuffers.positionIndex+=18*n}},lineBuffers:{numOfLines:0,numOfArrowheads:0,itemIndex:{},skip:function(e){var n=e||1;t.lineBuffers.elementDataIndex+=40*n,t.lineBuffers.elementIndexIndex+=6*n,t.lineBuffers.elementMappingIndex+=4*n}},arcBuffers:{numOfTriangles:0,itemIndex:{},skip:function(){t.arcBuffers.colourIndex+=192,t.arcBuffers.positionIndex+=144,t.arcBuffers.shadowIndex+=96,t.arcBuffers.coreIndex+=72}},id:n.id,drawBackgroundColour:n.drawBackgroundColour,useFramebuffer:n.useFramebuffer,drawFramebuffer:n.drawFramebuffer,framebuffer:null,renderbuffer:null,framebufferTexture:null,fbAlpha:n.fbAlpha,useView:n.useView,shadowType:n.shadowType,channels:n.channels,rebuildOptions:{},alwaysUpdate:n.alwaysUpdate,blatOverview:n.blatOverview,numOfPrimitives:n.numOfPrimitives,primitives:n.primitives,overview:n.overview};return t}(),e.allLayers[n.id]=r),r}(0,t);if(n.all&&e.layersToDraw.push(r),function(e,t,n){e.fbAlpha=n,e.rebuildOptions={all:t.all,colours:t.colours,textures:t.textures,shadow:t.shadow,positions:t.positions}}(r,n,t.fbAlpha),function(e,t){return n.all||n.textures||n.positions||n.shadow||n.colours||t}(0,t.alwaysUpdate)){var i=t.primitives,a=t.numOfPrimitives;if(d(o),h(o),n.all||t.alwaysUpdate){var s=r.lineBuffers,u=r.arcBuffers,l=r.triangleBuffers;!function(e,t,n){u.numOfTriangles=0,e.numOfLines=0,e.numOfArrowheads=0,n.numOfTriangles=0}(s,0,l);for(var f=0;f<a;f++)m(t.primitives[f],s,u,l)}c.textAtlas||c.fontIcons||c.imageAtlas||(function(e){(function(e,t){e.elementIndexIndex=0,e.elementMappingIndex=0,e.elementDataIndex=0,e.elementIntegerDataIndex=0;var n=e.numOfLines*_u*4;(!e.elementData||t.rebuildOptions.all)&&(e.elementData=new Float32Array(n+=e.numOfArrowheads*_u*3),e.elementIntegerData=new Uint8Array(e.elementData.buffer,0,e.elementData.length*Float32Array.BYTES_PER_ELEMENT)),e.elementIndex&&!t.rebuildOptions.all||(e.elementIndex=new Uint32Array(6*e.numOfLines+3*e.numOfArrowheads))})(e.lineBuffers,e),function(e){var t=e.arcBuffers;t.positionIndex=0,t.colourIndex=0,t.shadowIndex=0,t.coreIndex=0,t.totalnumOfVertices=3*t.numOfTriangles;var n=!t.positionData||t.totalnumOfVertices*Su!==t.positionData.length;n&&(t.positionData=new Float32Array(t.totalnumOfVertices*Su)),n&&(t.colourData=new Uint8Array(t.totalnumOfVertices*Lu)),n&&(t.shadowData=new Uint8Array(t.totalnumOfVertices*Ru)),n&&(t.coreData=new Float32Array(t.totalnumOfVertices*Iu))}(e),function(e){var t=e.triangleBuffers;t.positionIndex=0,t.colourIndex=0,t.textureIndex=0,t.shadowIndex=0,t.totalnumOfVertices=3*t.numOfTriangles;var n=!t.positionData||t.totalnumOfVertices*Mu!==t.positionData.length;n&&(t.positionData=new Float32Array(t.totalnumOfVertices*Mu)),n&&(t.colourData=new Uint8Array(t.totalnumOfVertices*Tu)),n&&(t.textureData=new Float32Array(t.totalnumOfVertices*ku)),n&&(t.shadowData=new Uint8Array(t.totalnumOfVertices*Cu))}(e)}(r),function(t,n,r){for(var i,o=r.rebuildOptions,a=r.alwaysUpdate,s=0;s<n;s++){var u=1;(i=t[s]).a.bg&&(u*=e.alpha.background),i.a.gh&&(u*=e.alpha.ghost);var l=ou(i,a,o);p[i.p](l,r,i,u,a,o)}}(i,a,r))}}),g(a),v(a),c.imageAtlas&&i.updateImageTextures(a),(c.textAtlas||c.fontIcons||c.imageAtlas)&&(c.fontIcons=!1,c.textAtlas=!1,c.imageAtlas=!1,n.all=!0,i.generate(t,n,o,a)),l={}};var p={A:gu,L:du,I:function(e,t,r,i,o,a){uu(e,t,r,i,o,a,n,f)},TR:Eu,R:mu,RR:yu,C:pu,T:function(n,i,a,u,l,f){if(a.isfi)lu(n,i,a,u,l,f,o);else{var d=t.getGlyphsFromText(a.t,a.ff,s,a.bo,c,r,e.textAtlas);wu(n,i,a,u,l,f,d,e.textAtlas.fontSize)}}};function g(n){c.textAtlas&&(e.textAtlas&&n.clearTextureAtlas(e.textAtlas.atlases),e.textAtlas=function(e,t){var n=l;return Ns=t,Vs=Ds,Ps=Gs(),Ws(n)}(0,t),a=l)}function v(t){!c.fontIcons&&e.fontIconAtlas||(t.clearTextureAtlas(e.fontIconAtlas),e.fontIconAtlas=function(e,t,n){var r=Object.keys(e),i=document.createElement("canvas");if(i.id="webglFontIconDebugCanvas",i.width=1,i.height=1,r.length){var o=Js(r.length),a=i.getContext("2d");i.width=o,i.height=o,document.getElementById("webglFontIconDebugCanvas");var s=Qs-8,u=Ks,l=0,c=1/o;a.fillStyle="rgb(0,0,0)",a.textAlign="center";var f=0,d=["rgba(255,0,0,1)","rgba(0,255,0,1)","rgba(0,0,255,1)","rgba(0,0,0,0)"];a.fillStyle="black",a.fillRect(0,0,o,o),a.fillStyle=d[0],a.globalCompositeOperation="lighter";for(var h=0,p=r.length;h<p;h++){var g=e[r[h]],v=Kt(a,g.t,s,!1,g.ff||t,!0),m=Math.max(v.width,v.height),y=0;if(m>s&&(y=(s-(m=s*(s/m)))/2),u+Qs>o+128&&(u=Ks,l+=Qs),l>=o){if(u=Ks,l=0,++f>2)throw Error("Maximum number of icons exceeded!");a.fillStyle=d[f]}g.textureBank=3,g.colourComponentTexture=f,g.u1=(u-s/2)*c,g.v1=l*c,g.u2=(u+s/2)*c,g.v2=(l+s)*c,a.textBaseline="top",a.font=m+"px "+Q(g.ff||t),a.fillText(g.t,u,l+y),u+=Qs}}return{alphaChannel:!1,img:i,texture:null}}(o,u))}function m(t,n,i,s){switch(t.p){case gt.arc:t.donut?s.numOfTriangles+=2:i.numOfTriangles+=2*Bu;break;case gt.line:n.numOfLines+=1;break;case gt.circle:t.bw>0&&(s.numOfTriangles+=2),t.fi&&(s.numOfTriangles+=2);break;case gt.rect:case gt.roundrect:t.fi&&(s.numOfTriangles+=2),t.bw>0&&(s.numOfTriangles+=2);break;case gt.text:var u=t.t,f=e.characterCache.getCombinedCharacters(u),d=f.length;if(t.isfi){var h=u+(t.ff||"");s.numOfTriangles+=2,o[h]||(c.fontIcons=!0,o[h]={t:u,ff:t.ff})}else t.ff&&(l[t.ff]=!0,a[t.ff]||(c.textAtlas=!0,a[t.ff]=!0)),t.back&&(s.numOfTriangles+=2),r&&(d=Ve(f,u).result.length),s.numOfTriangles+=2*d;break;case gt.triangle:t.arrowhead>0?1===t.arrowhead?n.numOfArrowheads++:i.numOfTriangles++:(t.fi&&s.numOfTriangles++,t.bw>0&&s.numOfTriangles++);break;case"I":s.numOfTriangles+=2}}return i}(r,i,t),a=function(e){var t,n,r,i,o,a={},s=e.canvas,u=e.framebuffers,l=(l=es(s,{antialias:!1,preferLowPowerToHighPerformance:!1,depth:!1,stencil:!1}),n=s.width,r=s.height,i=l.drawingBufferWidth,o=l.drawingBufferHeight,l.getExtension("OES_standard_derivatives"),l.getExtension("OES_element_index_uint"),l.viewport(0,0,i,o),l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),l.enable(l.BLEND),l.clearColor(0,0,0,0),e.framebuffers={},u=e.framebuffers,t=new Uint8Array(4),l),c=function(e){var t,n=e,r=_u*Float32Array.BYTES_PER_ELEMENT,i={};if(!n.lineShader){var o=is(n,"line-vertex",n.VERTEX_SHADER),a=is(n,"line-fragment",n.FRAGMENT_SHADER);t=ns(n,o,a),n.lineShader={vertexShader:o,fragmentShader:a,program:t}}t=n.lineShader.program,n.getExtension("OES_standard_derivatives"),n.getExtension("OES_element_index_uint");var s={position1:n.getAttribLocation(t,"a_position1"),position2:n.getAttribLocation(t,"a_position2"),position3:n.getAttribLocation(t,"a_position3"),colour:n.getAttribLocation(t,"a_colour"),colour2:n.getAttribLocation(t,"a_colour2"),vertexInfo:n.getAttribLocation(t,"a_vertexInfo"),shadowColour:n.getAttribLocation(t,"a_hitTestColour"),index:n.getAttribLocation(t,"a_index")},u={hitTest:n.getUniformLocation(t,"u_hitTest"),zoom:n.getUniformLocation(t,"u_zoom"),transform:n.getUniformLocation(t,"u_transform"),resolution:n.getUniformLocation(t,"u_resolution"),shadowType:n.getUniformLocation(t,"u_shadowType"),viewIndependent:n.getUniformLocation(t,"u_viewIndependent"),gradientStartFraction:n.getUniformLocation(t,"u_gradientStartFraction")};function l(e,t,r,i,o,a,s,l){n.uniform3f(u.resolution,t,r,i),n.uniformMatrix4fv(u.transform,!1,e.get()),n.uniform1f(u.hitTest,0|o),n.uniform1f(u.zoom,e.getZoomLevel()),n.uniform1f(u.shadowType,a),n.uniform1f(u.viewIndependent,0|!s);var c=0;o||(c=(1-l.linkStyle.transition)/2),n.uniform1f(u.gradientStartFraction,c)}function c(e){n.bindBuffer(n.ARRAY_BUFFER,e.elementBuffer),n.enableVertexAttribArray(s.position1),n.enableVertexAttribArray(s.position2),n.enableVertexAttribArray(s.position3),n.enableVertexAttribArray(s.vertexInfo),n.enableVertexAttribArray(s.colour),n.enableVertexAttribArray(s.colour2),n.enableVertexAttribArray(s.shadowColour),n.enableVertexAttribArray(s.index),n.vertexAttribPointer(s.position1,2,n.FLOAT,!1,r,0),n.vertexAttribPointer(s.position2,2,n.FLOAT,!1,r,8),n.vertexAttribPointer(s.position3,2,n.FLOAT,!1,r,16),n.vertexAttribPointer(s.vertexInfo,4,n.UNSIGNED_BYTE,!1,r,24),n.vertexAttribPointer(s.colour,4,n.UNSIGNED_BYTE,!1,r,28),n.vertexAttribPointer(s.colour2,4,n.UNSIGNED_BYTE,!1,r,32),n.vertexAttribPointer(s.shadowColour,3,n.UNSIGNED_BYTE,!1,r,36),n.vertexAttribPointer(s.index,1,n.UNSIGNED_BYTE,!1,r,39)}function f(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),n.bindBuffer(n.ARRAY_BUFFER,null)}return i.finish=function(){rs(n,t)},i.drawItems=function(e,r,i,o,a,s,u,d){n.useProgram(t),f(),l(i,o,a,s,u,0|e.shadowType,e.useView,d),function(e){e.elementBuffer||(e.elementBuffer=n.createBuffer()),e.indexBuffer||(e.indexBuffer=n.createBuffer())}(r),function(e,t){(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.positions||e.rebuildOptions.colours||e.rebuildOptions.textures||e.rebuildOptions.shadow)&&(n.bindBuffer(n.ARRAY_BUFFER,t.elementBuffer),n.bufferData(n.ARRAY_BUFFER,t.elementData,n.DYNAMIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.elementIndex,n.DYNAMIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null))}(e,r),c(r),function(e){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer);var t=6*e.numOfLines+3*e.numOfArrowheads;t>0&&n.drawElements(n.TRIANGLES,t,n.UNSIGNED_INT,0)}(r),f()},i}(l),f=function(e){var t,n={},r=l;if(!r.arcShader){var i=is(r,"line-arc-vertex",r.VERTEX_SHADER),o=is(r,"line-fragment",r.FRAGMENT_SHADER);t=ns(r,i,o),r.arcShader={vertexShader:i,fragmentShader:o,program:t}}var a={position:r.getAttribLocation(t=r.arcShader.program,"a_position"),radius:r.getAttribLocation(t,"a_radius"),startAngle:r.getAttribLocation(t,"a_startAngle"),endAngle:r.getAttribLocation(t,"a_endAngle"),width:r.getAttribLocation(t,"a_width"),colour:r.getAttribLocation(t,"a_colour"),colour2:r.getAttribLocation(t,"a_colour2"),core:r.getAttribLocation(t,"a_core"),type:r.getAttribLocation(t,"a_lineType"),shadowColour:r.getAttribLocation(t,"a_hitTestColour")},s={hitTest:r.getUniformLocation(t,"u_hitTest"),zoom:r.getUniformLocation(t,"u_zoom"),transform:r.getUniformLocation(t,"u_transform"),resolution:r.getUniformLocation(t,"u_resolution"),shadowType:r.getUniformLocation(t,"u_shadowType"),gradientStartFraction:r.getUniformLocation(t,"u_gradientStartFraction")};function u(e,t,n,i,o,a,u){r.uniform3f(s.resolution,t,n,i),r.uniformMatrix4fv(s.transform,!1,e.get()),r.uniform1f(s.hitTest,0|o),r.uniform1f(s.zoom,e.getZoomLevel()),r.uniform1f(s.shadowType,a);var l=0;o||(l=(1-u.linkStyle.transition)/2),r.uniform1f(s.gradientStartFraction,l)}function c(e){r.bindBuffer(r.ARRAY_BUFFER,e.arcBuffers.colourBuffer),(e.rebuildOptions.colours||e.alwaysUpdate||e.rebuildOptions.all)&&r.bufferData(r.ARRAY_BUFFER,e.arcBuffers.colourData,r.STATIC_DRAW),r.enableVertexAttribArray(a.colour),r.enableVertexAttribArray(a.colour2),r.vertexAttribPointer(a.colour,4,r.UNSIGNED_BYTE,!1,Du,0),r.vertexAttribPointer(a.colour2,4,r.UNSIGNED_BYTE,!1,Du,4)}function f(e){r.bindBuffer(r.ARRAY_BUFFER,e.arcBuffers.shadowBuffer),(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.shadow)&&r.bufferData(r.ARRAY_BUFFER,e.arcBuffers.shadowData,r.STATIC_DRAW),r.enableVertexAttribArray(a.shadowColour),r.enableVertexAttribArray(a.type),r.vertexAttribPointer(a.shadowColour,3,r.UNSIGNED_BYTE,!1,Pu,0),r.vertexAttribPointer(a.type,1,r.UNSIGNED_BYTE,!1,Pu,3)}function d(e){r.bindBuffer(r.ARRAY_BUFFER,e.arcBuffers.coreBuffer),(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.shadow)&&r.bufferData(r.ARRAY_BUFFER,e.arcBuffers.coreData,r.STATIC_DRAW),r.enableVertexAttribArray(a.core),r.vertexAttribPointer(a.core,3,r.FLOAT,!1,Nu,0)}function h(e){r.bindBuffer(r.ARRAY_BUFFER,e.arcBuffers.positionBuffer),(e.rebuildOptions.positions||e.alwaysUpdate||e.rebuildOptions.all)&&r.bufferData(r.ARRAY_BUFFER,e.arcBuffers.positionData,r.STATIC_DRAW),r.enableVertexAttribArray(a.position),r.enableVertexAttribArray(a.radius),r.enableVertexAttribArray(a.startAngle),r.enableVertexAttribArray(a.endAngle),r.enableVertexAttribArray(a.width),r.vertexAttribPointer(a.position,2,r.FLOAT,!1,Ou,0),r.vertexAttribPointer(a.radius,1,r.FLOAT,!1,Ou,8),r.vertexAttribPointer(a.startAngle,1,r.FLOAT,!1,Ou,12),r.vertexAttribPointer(a.endAngle,1,r.FLOAT,!1,Ou,16),r.vertexAttribPointer(a.width,1,r.FLOAT,!1,Ou,20)}return n.finish=function(){rs(r,t)},n.drawItems=function(e,n,i,o,a,s,l){r.useProgram(t),u(n,i,o,a,s,0|e.shadowType,l),function(e){e.arcBuffers.positionBuffer||(e.arcBuffers.positionBuffer=r.createBuffer()),e.arcBuffers.colourBuffer||(e.arcBuffers.colourBuffer=r.createBuffer()),e.arcBuffers.shadowBuffer||(e.arcBuffers.shadowBuffer=r.createBuffer()),e.arcBuffers.coreBuffer||(e.arcBuffers.coreBuffer=r.createBuffer())}(e),c(e),f(e),h(e),d(e),e.arcBuffers.totalnumOfVertices>0&&r.drawArrays(r.TRIANGLES,0,e.arcBuffers.totalnumOfVertices),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null),r.bindBuffer(r.ARRAY_BUFFER,null)},n}(),d=function(e){var t,n={},r=e,i=Mu*Float32Array.BYTES_PER_ELEMENT,o=ku*Float32Array.BYTES_PER_ELEMENT,a=Tu*Uint8Array.BYTES_PER_ELEMENT,s=Cu*Uint8Array.BYTES_PER_ELEMENT;if(!r.triangleShader){var u=is(r,"triangle-vertex",r.VERTEX_SHADER),l=is(r,"triangle-fragment",r.FRAGMENT_SHADER);t=ns(r,u,l),r.triangleShader={vertexShader:u,fragmentShader:l,program:t}}var c={transform:r.getUniformLocation(t=r.triangleShader.program,"u_transform"),textures:r.getUniformLocation(t,"u_image[0]"),resolution:r.getUniformLocation(t,"u_resolution"),hitTest:r.getUniformLocation(t,"u_hitTest"),shadowType:r.getUniformLocation(t,"u_shadowType"),zoom:r.getUniformLocation(t,"u_zoom"),position:r.getAttribLocation(t,"a_position"),startAngle:r.getAttribLocation(t,"a_startAngle"),endAngle:r.getAttribLocation(t,"a_endAngle"),circleRadius:r.getAttribLocation(t,"a_circleRadius"),width:r.getAttribLocation(t,"a_width"),colour:r.getAttribLocation(t,"a_colour"),textCoord:r.getAttribLocation(t,"a_texCoord"),vertexIndex:r.getAttribLocation(t,"a_vertexIndex"),shadowColour:r.getAttribLocation(t,"a_hitTestColour"),textureBank:r.getAttribLocation(t,"a_textureBank")};function f(e,t,n){var r,i;for(r=0,i=e.atlases.length;r<i;r++)v(e.atlases[r],r);for(t&&v(t,3),r=0,i=n.length;r<i;r++)v(n[r],r+4)}function d(e){r.bindBuffer(r.ARRAY_BUFFER,e.triangleBuffers.shadowBuffer),(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.shadow)&&r.bufferData(r.ARRAY_BUFFER,e.triangleBuffers.shadowData,r.STATIC_DRAW),r.enableVertexAttribArray(c.shadowColour),r.enableVertexAttribArray(c.vertexIndex),r.vertexAttribPointer(c.shadowColour,3,r.UNSIGNED_BYTE,!1,s,0),r.vertexAttribPointer(c.vertexIndex,1,r.UNSIGNED_BYTE,!1,s,3)}function h(e){r.bindBuffer(r.ARRAY_BUFFER,e.triangleBuffers.textureBuffer),(e.rebuildOptions.textures||e.alwaysUpdate||e.rebuildOptions.all)&&r.bufferData(r.ARRAY_BUFFER,e.triangleBuffers.textureData,r.STATIC_DRAW),r.enableVertexAttribArray(c.textCoord),r.enableVertexAttribArray(c.textureBank),r.enableVertexAttribArray(c.circleRadius),r.enableVertexAttribArray(c.startAngle),r.enableVertexAttribArray(c.endAngle),r.vertexAttribPointer(c.textCoord,4,r.FLOAT,!1,o,0),r.vertexAttribPointer(c.textureBank,2,r.FLOAT,!1,o,16),r.vertexAttribPointer(c.circleRadius,1,r.FLOAT,!1,o,24),r.vertexAttribPointer(c.startAngle,1,r.FLOAT,!1,o,28),r.vertexAttribPointer(c.endAngle,1,r.FLOAT,!1,o,32)}function p(e){r.bindBuffer(r.ARRAY_BUFFER,e.triangleBuffers.colourBuffer),(e.rebuildOptions.colours||e.alwaysUpdate||e.rebuildOptions.all)&&r.bufferData(r.ARRAY_BUFFER,e.triangleBuffers.colourData,r.STATIC_DRAW),r.enableVertexAttribArray(c.colour),r.vertexAttribPointer(c.colour,4,r.UNSIGNED_BYTE,!1,a,0)}function g(e){r.bindBuffer(r.ARRAY_BUFFER,e.triangleBuffers.positionBuffer),(e.rebuildOptions.positions||e.rebuildOptions.all||e.alwaysUpdate)&&r.bufferData(r.ARRAY_BUFFER,e.triangleBuffers.positionData,r.STATIC_DRAW),r.enableVertexAttribArray(c.position),r.enableVertexAttribArray(c.width),r.vertexAttribPointer(c.position,2,r.FLOAT,!1,i,0),r.vertexAttribPointer(c.width,1,r.FLOAT,!1,i,8)}function v(e,t){if(r.activeTexture(r["TEXTURE"+t]),e.texture)r.bindTexture(r.TEXTURE_2D,e.texture);else{e.texture=r.createTexture();var n=e.alphaChannel?r.RGBA:r.RGB;r.bindTexture(r.TEXTURE_2D,e.texture),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,n,n,r.UNSIGNED_BYTE,e.img),r.generateMipmap(r.TEXTURE_2D),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e.img=null}}function m(e,t,n,i,o,a){r.uniform3f(c.resolution,t,n,i),r.uniform1f(c.hitTest,0|o),r.uniform1iv(c.textures,[0,1,2,3,4,5,6,7]),r.uniformMatrix4fv(c.transform,!1,e.get()),r.uniform1f(c.shadowType,a),r.uniform1f(c.zoom,e.getZoomLevel())}return n.drawItems=function(e,n,i,o,a,s,u,l,c){r.useProgram(t),m(n,s,u,l,c,0|e.shadowType),function(e){e.triangleBuffers.positionBuffer||(e.triangleBuffers.positionBuffer=r.createBuffer()),e.triangleBuffers.textureBuffer||(e.triangleBuffers.textureBuffer=r.createBuffer()),e.triangleBuffers.colourBuffer||(e.triangleBuffers.colourBuffer=r.createBuffer()),e.triangleBuffers.shadowBuffer||(e.triangleBuffers.shadowBuffer=r.createBuffer())}(e),d(e),h(e),p(e),g(e),f(i,o,a);var v=3*e.triangleBuffers.numOfTriangles;v>0&&r.drawArrays(r.TRIANGLES,0,v)},n.finish=function(){rs(r,t)},n}(l),h=function(e){var t,n={},r=e;if(!r.rttShader){var i=is(r,"renderToTexture-vertex",r.VERTEX_SHADER),o=is(r,"renderToTexture-fragment",r.FRAGMENT_SHADER);t=ns(r,i,o),r.rttShader={vertexShader:i,fragmentShader:o,program:t}}t=r.rttShader.program;var a=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,-1,1,0,1,1,-1,1,0,1,1,1,1]),s=r.createBuffer(),u={position:r.getAttribLocation(t,"a_position"),textCoord:r.getAttribLocation(t,"a_texCoord")},l={globalAlpha:r.getUniformLocation(t,"u_globalAlpha"),backgroundColour:r.getUniformLocation(t,"u_backgroundColour"),textures:r.getUniformLocation(t,"u_image")};return n.finish=function(){rs(r,t)},n.drawItems=function(e,n,i,o){r.useProgram(t),function(e,t){r.uniform1f(l.globalAlpha,e),r.uniform4fv(l.backgroundColour,new Float32Array(t||[0,0,0,0]))}(e,i),function(e){r.bindBuffer(r.ARRAY_BUFFER,s),r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW),r.enableVertexAttribArray(u.position),r.enableVertexAttribArray(u.textCoord),r.vertexAttribPointer(u.position,2,r.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,0),r.vertexAttribPointer(u.textCoord,2,r.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,8)}(o||a),function(e,t){r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,e)}(n),r.drawArrays(r.TRIANGLES,0,6)},n}(l),p=null,g=new Uint8Array(4);function v(t,i,o,a,u){var c=s.width/(n=s.clientWidth),f=t.width(),d=t.height(),h=w(t);b("overview",f*c,d*c),l.clear(l.COLOR_BUFFER_BIT);for(var p=e.layersToDraw,g=0,v=p.length;g<v;g++){var m=p[g];m.overview&&A(m,h,f,d,c,i,o,a,u._showShadowCanvas,u)}b(null);var y=function(e,t,n,r,i){var o,a=1-f/n*2,s=1-d/r*2;switch(u.overview.p){case"ne":o=new Float32Array([a,s,0,0,1,s,1,0,a,1,0,1,a,1,0,1,1,s,1,0,1,1,1,1]);break;case"nw":o=new Float32Array([-1,s,0,0,-a,s,1,0,-1,1,0,1,-1,1,0,1,-a,s,1,0,-a,1,1,1]);break;case"sw":o=new Float32Array([-1,-1,0,0,-a,-1,1,0,-1,-s,0,1,-1,-s,0,1,-a,-1,1,0,-a,-s,1,1]);break;case"se":default:o=new Float32Array([a,-1,0,0,1,-1,1,0,a,-s,0,1,a,-s,0,1,1,-1,1,0,1,-s,1,1])}return o}(0,0,n,r);x("overview",1,[1,1,1,1],y),x("overview",1,null,y)}function m(){var e={texture:y(),img:g};return l.texImage2D(l.TEXTURE_2D,0,l.RGBA,1,1,0,l.RGBA,l.UNSIGNED_BYTE,g),e}function y(){var e=l.createTexture();return l.bindTexture(l.TEXTURE_2D,e),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),e}function b(e,t,n){var r=u[e]||null,i=l.RGBA,o=t||l.drawingBufferWidth,a=n||l.drawingBufferHeight;if(e&&!r){r={framebuffer:l.createFramebuffer(),renderbuffer:l.createRenderbuffer(),texture:y()},u[e]=r,"shadow"===e&&(i=l.RGB),l.texImage2D(l.TEXTURE_2D,0,i,o,a,0,i,l.UNSIGNED_BYTE,null),l.bindFramebuffer(l.FRAMEBUFFER,r.framebuffer),l.bindRenderbuffer(l.RENDERBUFFER,r.renderbuffer),l.clearColor(0,0,0,0),l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_COMPONENT16,o,a),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r.texture,0),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r.renderbuffer);var s=l.checkFramebufferStatus(l.FRAMEBUFFER);if(l.FRAMEBUFFER_COMPLETE!==s)throw new Error(s.toString())}r?l.bindFramebuffer(l.FRAMEBUFFER,r.framebuffer):E(),l.viewport(0,0,o,a)}function x(e,t,n,r){var i;u[e]&&(i=u[e].texture),h.drawItems(t,i,n,r)}function w(e){return e?{panX:e.offsetXtoWebglPanX(),panY:e.offsetYtoWebglPanY(),zoom:e.settings().zoom}:{panX:0,panY:0,zoom:1}}function A(e,t,n,r,i,o,a,s,u,l){!function(e,t,n,r){p=function(){var e={},t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n=1;return e.zoom=function(e){n=e,t[0]*=e,t[4]*=e,t[8]*=1,t[1]*=e,t[5]*=e,t[9]*=1,t[2]*=e,t[6]*=e,t[10]*=1,t[3]*=e,t[7]*=e,t[11]*=1},e.getZoomLevel=function(){return n},e.pan=function(e,n){t[12]+=t[0]*e+t[4]*n,t[13]+=t[1]*e+t[5]*n,t[14]+=t[2]*e+t[6]*n,t[15]+=t[3]*e+t[7]*n},e.get=function(){return t},e}(),e?(p.pan(t,n),p.zoom(r)):(p.pan(0,0),p.zoom(1))}(e.useView,t.panX,t.panY,t.zoom),function(e,t,n,r,i,o,a,s,u){c.drawItems(t,n,p,i,o,a,s,l)}(0,e,e.lineBuffers,0,n,r,i,u),function(e,t,n,r,i,o,a,s){f.drawItems(t,p,r,i,o,u,l)}(0,e,0,n,r,i),function(e,t,n,r,i,o,a,s,u,l){d.drawItems(t,p,r,i,o,a,s,u,l)}(0,e,0,o,a,s,n,r,i,u)}function E(){l.bindFramebuffer(l.FRAMEBUFFER,null)}function M(e){e.rebuildOptions.colours=!1,e.rebuildOptions.positions=!1,e.rebuildOptions.textures=!1,e.rebuildOptions.shadow=!1,e.rebuildOptions.all=!1}function C(e){e&&e.texture&&(l.deleteTexture(e.texture),e.texture=null,e.ctx=null,e.img=null)}return a.finish=function(){a.clearFramebuffers(),f.finish(),c.finish(),d.finish(),e.imageAtlases.forEach(function(e){C(e)}),C(e.textAtlas),C(e.fontIconAtlas),e.layersToDraw=[],e.allLayers={},l.flush(),l.finish(),l=null,c=null,f=null,d=null,h=null},a.clearFramebuffers=function(){P(e.framebuffers).forEach(function(e){l.deleteFramebuffer(e.framebuffer),l.deleteRenderbuffer(e.renderbuffer),l.deleteTexture(e.texture)}),e.framebuffers={},u=e.framebuffers},a.clearTextureAtlas=function(e){e&&(Array.isArray(e)?e.forEach(C):C(e))},a.render=function(t,a,u,c,f,d,h){r=s.clientHeight;var p=s.width/(n=s.clientWidth);i=l.drawingBufferWidth,o=l.drawingBufferHeight;var g=e.layersToDraw,y=w(t);e.view=t,0===f.length&&(f.push(m()),f.push(m()),f.push(m()),f.push(m()));var C=!1,k=d._showShadowCanvas;E(),l.viewport(0,0,l.drawingBufferWidth,l.drawingBufferHeight),l.clear(l.COLOR_BUFFER_BIT);for(var T=0,_=g.length;T<_;T++){var S=g[T];d.overview&&d.overview.shown&&S.blatOverview&&a?v(a,u,c,f,d):(h&&!S.useView||(S.drawFramebuffer&&(C=!0),b(S.drawFramebuffer),A(S,y,n,r,p,u,c,f,d._showShadowCanvas,d),M(S)),(S.drawBackgroundColour||S.useFramebuffer&&C)&&(C=!1,E(),x(S.useFramebuffer,k?1:S.fbAlpha,S.drawBackgroundColour),b(S.useFramebuffer),l.clear(l.COLOR_BUFFER_BIT)))}!function(){for(var e=0;e<8;e++)l.activeTexture(l["TEXTURE"+e]),l.bindTexture(l.TEXTURE_2D,null)}()},a.drawShadowCanvas=function(a,u){r=s.clientHeight;var c=s.width/(n=s.clientWidth);if(i=l.drawingBufferWidth,o=l.drawingBufferHeight,e.layersToDraw.length>0){var f=w(e.view),d=i/s.clientWidth,h=a*d,p=o-u*d;b("shadow"),l.viewport(0,0,l.drawingBufferWidth,l.drawingBufferHeight),l.clear(l.COLOR_BUFFER_BIT);for(var g=0,v=e.layersToDraw.length;g<v;g++)A(e.layersToDraw[g],f,n,r,c,e.textAtlas,e.fontIconAtlas,e.imageAtlases,!0);h>=0&&p>=0&&h<i&&p<o&&l.readPixels(h,p,1,1,l.RGBA,l.UNSIGNED_BYTE,t),l.clear(l.COLOR_BUFFER_BIT),E()}return t},a.getPixels=function(e,t,n,r,i,o){E(),l.clearColor(1,1,1,1),a.render(e,t,n,r,i,o);var s=new Uint8Array(l.drawingBufferWidth*l.drawingBufferHeight*4);return l.readPixels(0,0,l.drawingBufferWidth,l.drawingBufferHeight,l.RGBA,l.UNSIGNED_BYTE,s),s},a}(r),t.resetUpdatedImages()}return u(),s.setAlpha=function(e,t){r.alpha.ghost=e,r.alpha.background=t},s.shutdownAndReset=function(){a.finish(),u()},s.clearFramebuffers=function(){a.clearFramebuffers()},s.updateTextures=function(){o.updateImageTextures(a),t.imagesUpdated()},s.build=function(e,t,n){var i=function(e,t,n,r){var i,o=n.all||n.positions;n.all?(i=[],t.layersToDraw.length=0):i=t.layersToDraw.slice();var a={},s=null;return e.forEach(function(e){a.primitives[a.numOfPrimitives++]=e},function(e,o){n.all?(o.bg&&a&&!e.bg&&(a.useFramebuffer=s,s=null),a={id:e.path,blatOverview:e.blatOverview,shadowType:e.shadowType,overview:e.overview,useView:e.useView,alwaysUpdate:e.alwaysUpdate,bg:e.bg,fbAlpha:r.backgroundAlpha,primitives:[],numOfPrimitives:0},e.bg&&(o.bg&&(s="bg"),a.drawFramebuffer=s),i.push(a)):(a=t.allLayers[e.path]).numOfPrimitives=0},!o),s&&(a.useFramebuffer=s,s=null),i}(e,r,t,n);o.generate(i,t,n,a)},s.draw=function(e,t,n,i){a.render(e,t,r.textAtlas,r.fontIconAtlas,r.imageAtlases,n,i)},s.getPixels=function(e,t,n){return a.getPixels(e,t,r.textAtlas,r.fontIconAtlas,r.imageAtlases,n)},s.drawShadowCanvas=function(e,t){return a.drawShadowCanvas(e,t)},s}var zu=8888;function Fu(e,t,r){var i=n(),o=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,a=i/o;if(i!==o){var s=e.width,u=e.height;e.width=Math.round(s*a),e.height=Math.round(u*a),e.style.width=s+"px",e.style.height=u+"px",r||t.scale(a,a)}}function Gu(){return document.createElement("img")}function Hu(e,n,i,o,a,s){var u=document.getElementById(n),l=Sa(Gu,!1,a),f=r(u);function d(e,t,n){var r,i=document.createElement("canvas");return n&&f&&(i.dir="rtl",document.body.appendChild(i),i.style.display="none"),r=s?document.createElement("canvas").getContext("2d"):i.getContext("2d"),i.context2d=r,i.height=t,i.width=e,s||function(e){var t=i.getContext("2d");function n(e){t.setLineDash=function(n){t[e]=n}}t.setLineDash||(void 0!==t.webkitLineDash?n("webkitLineDash"):void 0!==t.mozDash&&n("mozDash"))}(),i}var h=d(i,o,!0);h.style.display="block";var p={},g=h.context2d;u.style.display="block",u.parentNode.replaceChild(h,u),h.setAttribute("id",n),s&&cs()&&"chart"===e&&(h.renderer=Vu(h,l),p.renderer=h.renderer,h.webgl=!0),h.canvas=!0;var v=h;h.webgl?(g.webgl=!0,g.webglCanvas=h):g.webgl=!1,Fu(h,g,s),function(){if(!kt){for(var e=d(100,100).context2d,t=!1,n=function(t){return _t(e,t),e.measureText("Hello").width},r=n(1),i=2;!t&&i<30;)(t=r!==n(i))&&Ct(i-1),i++;Tt(!0)}}();var m,y=v.getAttribute("style")||"";v.setAttribute("style",y+="touch-action: none; outline: none;"),v.setAttribute("tabindex",""+zu++),(m="chart"===e?Ja(n,l):Os(0,l)).id=function(){return n},t(m,function(e,t){-1===t.indexOf("private")&&(p[t]=e)}),m.privateInit(g,i,o,d,function(e){(m.map&&m.map().isShown()?m.privateGetMapContainer():h).style.cursor=e},Gu),p.internalSetSize=function(e,t){m.privateMapSetSize&&m.privateMapSetSize(e,t),v.width=e,v.height=t,Fu(v,g,s),m.privateSetSize(g,e,t,!0)};var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){c(e,1e3/60)};return m.privateBind("forceRedraw",function(e){m.privateTrigger("redraw",e),m.update()}),b(function e(){try{m.update()}finally{b(e)}}),p}var Wu={},Zu=0,Yu={},ju=!1;try{var Uu=Object.defineProperty({},"passive",{get:function(){ju=!0}});window.addEventListener("test",Uu,Uu),window.removeEventListener("test",Uu,Uu)}catch(e){ju=!1}var Xu="";"undefined"!=typeof document&&function(){function e(e,t){Qu(document,e,function(n){n.target.id in qu&&(qu[n.target.id][e](Ju(n,"targetTouches"),Ju(n,"changedTouches")),t&&n.preventDefault())})}function n(e){Qu(document,e,function(e){e.target.id in qu&&e.preventDefault()})}function r(e){Qu(document,e,function(t){t.target.id in qu&&(qu[t.target.id][e](t.scale,t.rotation),t.preventDefault())})}var i;function o(e,t){var n=e.pointerId||0,r=J(e,i||e.target.id);switch(t){case"ADD":Wu[n]||(Wu[n]={id:n,x:r.x,y:r.y});break;case"DEL":Wu[n]&&(delete Wu[n],Zu--);break;case"MOVE":Wu[n]&&(Wu[n]={id:n,x:r.x,y:r.y})}return P(Wu)}function a(e,t){var n=e.pointerId||0,r=J(e,i||e.target.id),o=[];switch(t){case"ADD":case"MOVE":o=[{id:n,x:r.x,y:r.y}];break;case"DEL":Wu[n]&&(o=[Wu[n]])}return o}function s(e){return e.pointerType===(e.MSPOINTER_TYPE_TOUCH||"touch")}Qu(document,"contextmenu",function(e){if(e.target.id in qu)return ee(e),!1}),Qu(document,"dragover",function(e){if(e.target.id in qu){var t=K(e);qu[e.target.id].dragover(t.x,t.y)}}),"ontouchstart"in document.documentElement&&(window.PointerEvent?(n("touchstart"),n("touchmove"),n("touchend"),n("touchcancel")):(e("touchstart",!0),e("touchmove"),e("touchend"),e("touchcancel"),r("gesturestart"),r("gesturechange"),r("gestureend")));var u=1,l=0;function c(e){return function(n){s(n)&&(t(qu,function(t){var r=a(n,"DEL");t[e](o(n,"DEL"),r);var i=n.target.id;i&&qu[i]&&n.preventDefault()}),i=null)}}window.PointerEvent&&(Qu(document,"pointerdown",function(e){if(e.target.id in qu)if(s(e)){i=e.target.id,"undefined"!=typeof MSGesture&&(Yu[e.target.id]&&Yu[e.target.id].target||function(e){Yu[e]=new MSGesture,Yu[e].target=document.getElementById(e)}(e.target.id),Yu[e.target.id].addPointer(e.pointerId)),Zu++;var t=a(e,"ADD");qu[e.target.id].touchstart(o(e,"ADD"),t),e.preventDefault()}else Yu[e.target.id]&&(Yu[e.target.id]=null),Zu=0,Wu={}}),Qu(document,["pointermove"],function(e,t){return function(e){if((e.target.id in qu||i)&&s(e)){var n=a(e,t);qu[i||e.target.id].touchmove(o(e,t),n),e.preventDefault()}}}(0,"MOVE")),Qu(document,["pointerup"],c("touchend")),Qu(document,["pointercancel"],c("touchcancel")),Qu(document,"MSHoldVisual",function(e){e.preventDefault()}),Qu(document,"MSGestureStart",function(e){var t=e.gestureObject.target.id;t in qu&&Zu>1&&(qu[t].gesturestart(),e.preventDefault())}),Qu(document,"MSGestureChange",function(e){var t=e.gestureObject.target.id;t in qu&&Zu>1&&e.detail!==e.MSGESTURE_FLAG_INERTIA&&(u*=e.scale,l+=e.rotation*(180/Math.PI),qu[t].gesturechange(u,l),e.preventDefault())}),Qu(document,"MSGestureEnd",function(e){var t=e.gestureObject.target.id;t in qu&&(qu[t].gestureend(u,l),u=1,l=0,e.preventDefault())})),Qu(window,"dblclick",function(e){if(e.target.id in qu&&(!navigator.msMaxTouchPoints&&!navigator.maxTouchPoints||"touch"!==e.pointerType&&"pen"!==e.pointerType)){var t=K(e);qu[e.target.id].dblclick(t.x,t.y,e.ctrlKey,e.shiftKey),e.preventDefault()}}),Qu(window,"mousedown",function(e){if(e.target.id in qu&&0===Zu){var t=K(e);qu[e.target.id].mousedown(e.button,t.x,t.y,e.ctrlKey,e.shiftKey)}}),Qu(window,"mouseup",function(e){if(e.target.id in qu){var t=K(e);qu[e.target.id].mouseup(t.x,t.y,e.ctrlKey,e.shiftKey)}d&&(h(e.target.id,d.target.id,"mouseup",d),d=null)}),Qu(window,"mouseout",function(e){e.target.id in qu&&(d=e)});var f=null,d=null;function h(e,t,n,r){if(e!==t){if(null!==t&&qu[t]&&document.getElementById(t)){var i=J(r,t);qu[t][n](i.x,i.y,r.ctrlKey,r.shiftKey)}"mouseleave"===n&&(f=e)}}Qu(window,"mousemove",function(e){if(e.target.id in qu){h(e.target.id,f,"mouseleave",e);var t=K(e);qu[e.target.id].mousemove(t.x,t.y,e.ctrlKey,e.shiftKey)}else h(null,f,"mouseleave",e)}),Ku(["wheel","mousewheel","DOMMouseScroll"],function(e){var t=e.wheelDelta||-e.detail;if(0!==t){var n=qu[e.target.id];if(n){var r=K(e);n.mousewheel(t,r.x,r.y),ee(e)}}}),Qu(document,"MozMousePixelScroll",function(e){qu[e.target.id]&&ee(e)}),Qu(document,"keyup",function(e){e.target.id in qu&&qu[e.target.id].keyup(e.keyCode)}),Qu(document,"keydown",function(e){var t=!1;e.target.id in qu&&(t=t||qu[e.target.id].keydown(e.keyCode,e.ctrlKey,e.shiftKey)),t&&e.preventDefault&&e.preventDefault()})}();var qu={};function Qu(e,t,n,r){var i=r||!1;e.addEventListener(t,n,ju?{capture:i,passive:!1}:i)}function Ku(e,t){for(var n=0;n<e.length;n++)Qu(document,e[n],t)}function Ju(e,t){for(var n=[],r=0;r<e[t].length;r++){var i=K(e[t][r]);n.push({id:e[t][r].identifier,x:i.x,y:i.y})}return n}var $u="auto";function el(e){return e&&($u=e),$u}function tl(e,t){w(t,new Error('Cannot create KeyLines component. No element with id "'+e+'" exists in the DOM'))}function nl(e){return+e.replace(/px$/,"")}var rl={chart:0,timebar:0};function il(e){return!(!e&&null!==e&&"object"!=typeof e)&&("object"==typeof HTMLElement&&e instanceof HTMLElement||1===e.nodeType)}function ol(e,t,n,r,i){t in qu&&delete qu[t];var o=n||100,a=r||100;if("canvas"!==$u&&"chart"===e&&cs())try{ll(e,t,o,a,!0,i)}catch(n){ss=!0,ll(e,t,o,a,!1,i)}else sl()?ll(e,t,o,a,!1,i):i("Could not create HTML5 canvas.")}function al(e){return e&&(Xu=e),Xu}function sl(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}var ul,ll=function(e,t,n,r,i,o){try{qu[t]=Hu(e,t,n,r,Xu,i)}catch(e){if(o)return void o(e)}qu[t].webgl=i,qu[t].canvas=!0,o&&o(null,qu[t])};function cl(e){return e&&e.images&&al(e.images),{images:Xu}}function fl(){return function(e){for(var t=T,n=0;n<e.length;n++)if(t(document[e[n]]))return!!document[e[n]];return!1}(["webkitIsFullScreen","mozFullScreen","msFullscreenElement","fullScreenElement"])}function dl(e,t){for(var n,r=0;!n&&r<t.length;r++)e[t[r]]&&(n=!0,e[t[r]]())}"undefined"!=typeof document&&Ku(["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange"],function(){ul&&ul(fl())});var hl=("undefined"!=typeof window?window:global).Promise,pl=hl,gl="",vl=!1,ml=["create"],yl=["arrange","createLink","filter","foreground","range","animateProperties","expand","hide","layout","load","merge","options","pan","ping","setItem","setProperties","show","toDataURL","viewOptions","zoom"],bl=["combo","getGraphEngine","graph","map"],xl=["arrange","betweenness","close","closeness","combine","hide","transfer","open","options","show","uncombine"];function wl(e,t,n){return t.forEach(function(t){e[t]&&(e[t+gl]=Al(e[t],t,"create"===t))}),n&&n.forEach(function(t){e[t]&&(e[t+gl]=function(e,t){return function(){var n=Array.prototype.slice.call(arguments),r=e.apply(null,n),i={},o=B(t);return Object.keys(r).forEach(function(e){e in o?i[e+gl]=Al(r[e],e):i[e]=r[e]}),i}}(e[t],xl))}),e}function Al(e,t,n){return function(){for(var r=Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];var o=Math.max(0,e.length-1);return function(e,t){return!(!/options$/i.test(e)||!S(t[0]))||"range"===e&&!t.length}(t,r)?e.apply(null,r):new hl(function(t,i){r.length===e.length&&v(r[o])&&(r.pop(),d("A callback has been passed, but the function will return a Promise instead")),r[o]=n?function(e,n){if(e)return i(e);var r=Array.isArray(n),o=(r?n:[n]).map(function(e){return wl(e,yl,bl)});return t(r?o:o[0])}:t,e.apply(null,r)})}}var El={charts:qu,createChart:function(){var e,t,n,r;switch(arguments.length){case 0:throw new Error("createChart called with zero arguments");case 1:case 2:e=arguments[0],r=arguments[1];var i=document.getElementById(e);if(!i)return void tl(e,r);t=i.clientWidth,n=i.clientHeight;break;default:e=arguments[0],t=Number(arguments[1]),n=Number(arguments[2]),r=arguments[3]}ol("chart",e,t,n,r)},imageBasePath:al,setCanvasPaths:function(){},promisify:function(e,t,n){return function(e,t,n){if(n&&(gl=n),null==pl&&!hl&&!e)throw Error("[promisify] There's no valid Promise constructor available. It is not possible to promisify.");if(!function(e){var t=e||hl,n=void 0!==t&&"resolve"in t&&"reject"in t;try{new t(function(e){n=n&&"function"==typeof e})}catch(e){throw new Error("You must pass a valid promise constructor")}return n}(e))throw Error("[promisify] Promise constructor not valid. Please use a valid Promise implementation.");hl=e||pl,vl||(wl(t,ml,bl),P(t.components||{}).forEach(function(e){wl(e,yl,bl)})),vl=!0}(e,this,t)},components:qu,coords:K,create:function(e,t){var n=C(e),r=n.every(function(e){return function(e){return S(e)||"chart"===e||"timebar"===e}(e.type)});n.length<1?w(t,Error("No definition passed to KeyLines.create")):r?function e(n,r,i){function o(e,t){var n=e.id?e.id:function e(t){rl[t]++;var n="KeyLines-"+t+"-"+rl[t];return qu[n]||document.getElementById(n)?e(t):n}(t);return e.setAttribute("id",n),n}var a;try{a=function(e){if(il(e.element)&&e.id)throw new Error("Cannot pass a DOM element and an id to create, please pass only one.");if(e.element&&!il(e.element))throw new Error("You must pass a DOM element to the components element property.");var t={type:e.type?e.type:"chart",id:e.id||e,options:e.options};return il(e)?(t.type="chart",t.id=o(e,t.type)):il(e.element)&&(t.id=o(e.element,t.type)),t}(n[r])}catch(n){return void w(t,n)}!function(e,t,n,r){var i=document.getElementById(t);i?ol(e,t,i.clientWidth||nl(i.style.width),i.clientHeight||nl(i.style.height),n?function(e,t){e?w(r,e):t.options(n,function(){r&&r(null,t)})}:r):tl(t,r)}(a.type,a.id,a.options,function(o,a){if(o)w(t,o);else{i.push(a);var s=r+1;s>=n.length?t&&t(null,1===i.length?i[0]:i):e(n,s,i)}})}(n,0,[]):w(t,Error("The type of component passed to KeyLines.create is not valid"))},dashedLineSupport:function(){if(sl()){var e=document.createElement("canvas").getContext("2d");return!!e.setLineDash||!!e.mozDash||!!e.webkitLineDash}return!1},fullScreenCapable:function(){var e=T;return!!e(document.webkitCurrentFullScreenElement)||!!e(document.mozFullScreenElement)||!!e(document.msFullscreenEnabled)&&document.msFullscreenEnabled},getFontIcon:Yt,getGraphEngine:function(e){var n=ca(en()),r=k(e,{selfLinks:!1}),i=pn({numbers:{x:1,y:1},strings:{id:1,id1:1,id2:1},booleans:{hi:1,a1:1,a2:1}});return G(n,{load:function(e){return function(n){var o=a(n);i.typeCheck(o);var s=i.filterNodesAndLinks(o.items,{},{},{selfLinks:r.selfLinks,filterComboNodes:!0});i.ensureHiddenItemConsistency(s.nodes,s.links),t(s.nodes,function(e){delete e.parentId}),t(s.links,function(e){delete e.parentId}),e.privateSetProperties(s.nodes,s.links)}}(n),clear:function(e){return function(){var t={};e.privateSetProperties(t,t)}}(n)})},mode:el,info:function(){var e={account:"Licensed to Graphmantics for TBD expires on Wed Mar 27 2019",eventErrors:{},isUsingWebGL:{},mode:el(),options:{},paths:a(cl()),version:"KeyLines v5.2.1-23282 eval"};return Object.keys(qu).forEach(function(t){var n=qu[t];e.eventErrors[t]=n.getErrors(),e.isUsingWebGL[t]=!!n.webgl,e.options[t]=n.options()}),"undefined"!=typeof navigator&&(e.platform=navigator.platform,e.userAgent=navigator.userAgent),"undefined"!=typeof window&&(e.url=document.location.href,e.webgl=function(){var e={},t=ts({failIfMajorPerformanceCaveat:!1});if(t){e.version=t.getParameter(t.VERSION);var n=t.getExtension("WEBGL_debug_renderer_info");n&&(e.vendor=t.getParameter(n.UNMASKED_VENDOR_WEBGL),e.renderer=t.getParameter(n.UNMASKED_RENDERER_WEBGL))}return e}()),e},paths:cl,setSize:function(e,t,n){if(!p(t)||!p(n))throw new Error("KeyLines.setSize: Invalid width or height value passed. Both parameters should be numbers.");var r=Math.round(t),i=Math.round(n);if(!(r<=0||i<=0)){var o=il(e)?e:document.getElementById(e);if(!o)throw new Error("You must pass a valid id or DOM element.");var a=o.id;o.style.height=i+"px",o.style.width=r+"px",qu[a]&&(qu[a].internalSetSize(r,i),qu[a].webgl&&qu[a].renderer.clearFramebuffers())}},toggleFullScreen:function(e,t){ul=t,fl()&&function(e){var t=T;return t(document.webkitCurrentFullScreenElement)?document.webkitCurrentFullScreenElement===e:t(document.mozFullScreenElement)?document.mozFullScreenElement===e:!!t(document.msFullscreenElement)&&document.msFullscreenElement===e}(e)?dl(document,["cancelFullScreen","mozCancelFullScreen","webkitCancelFullScreen","msExitFullscreen"]):function(e){dl(e,["requestFullScreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullscreen"])}(e)},webGLSupport:cs,Rendering:{mainChannel:function(){return"LTMxLC02NCwtNTgsLTYzLC0zNiwtNjgsLTY5LC02MiwtNTcsLTY4LC0yMyw0MCwxMiw0NCw2NywtMjEsLTQ2LC00Mw=="}}};return"undefined"!=typeof window&&(window.KeyLines=El),"undefined"!=typeof global&&(global.KeyLines=El),El});